// Generated by Futhark 0.23.0
// git: 7fa00324492db398bc13c1bd640e2747a34eeac2

// We need to define _GNU_SOURCE before
// _any_ headers files are imported to get
// the usage statistics of a thread (i.e. have RUSAGE_THREAD) on GNU/Linux
// https://manpages.courier-mta.org/htmlman2/getrusage.2.html
#ifndef _GNU_SOURCE // Avoid possible double-definition warning.
#define _GNU_SOURCE
#endif

#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif

// Headers
#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation
struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg, int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg, int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg, int flag);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg, const char *param_name, size_t param_value);
int futhark_get_tuning_param_count(void);
const char *futhark_get_tuning_param_name(int);
const char *futhark_get_tuning_param_class(int);

// Arrays
struct futhark_f32_1d;
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const float *data, int64_t dim0);
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, const unsigned char *data, int64_t offset, int64_t dim0);
int futhark_free_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr);
int futhark_values_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr, float *data);
unsigned char *futhark_values_raw_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr);
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr);
struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const float *data, int64_t dim0, int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const unsigned char *data, int64_t offset, int64_t dim0, int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr, float *data);
unsigned char *futhark_values_raw_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr);

// Opaque values
struct futhark_opaque_b0aee03a;
struct futhark_opaque_8f5f2e9d;
struct futhark_opaque_8ce68ead;
struct futhark_opaque_67daac7;
struct futhark_opaque_f270e689;
struct futhark_opaque_32531da2;
struct futhark_opaque_e9a0e68b;
struct futhark_opaque_c5da5e9b;
struct futhark_opaque_networkParameter;
struct futhark_opaque_particleType;
int futhark_free_opaque_b0aee03a(struct futhark_context *ctx, struct futhark_opaque_b0aee03a *obj);
int futhark_store_opaque_b0aee03a(struct futhark_context *ctx, const struct futhark_opaque_b0aee03a *obj, void **p, size_t *n);
struct futhark_opaque_b0aee03a *futhark_restore_opaque_b0aee03a(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_b0aee03a_0(struct futhark_context *ctx, struct futhark_opaque_8f5f2e9d **out, const struct futhark_opaque_b0aee03a *obj);
int futhark_project_opaque_b0aee03a_1(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_b0aee03a *obj);
int futhark_new_opaque_b0aee03a(struct futhark_context *ctx, struct futhark_opaque_b0aee03a **out, const struct futhark_opaque_8f5f2e9d *v0, const struct futhark_f32_1d *v1);
int futhark_free_opaque_8f5f2e9d(struct futhark_context *ctx, struct futhark_opaque_8f5f2e9d *obj);
int futhark_store_opaque_8f5f2e9d(struct futhark_context *ctx, const struct futhark_opaque_8f5f2e9d *obj, void **p, size_t *n);
struct futhark_opaque_8f5f2e9d *futhark_restore_opaque_8f5f2e9d(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_8f5f2e9d_0(struct futhark_context *ctx, struct futhark_opaque_8ce68ead **out, const struct futhark_opaque_8f5f2e9d *obj);
int futhark_project_opaque_8f5f2e9d_1(struct futhark_context *ctx, struct futhark_opaque_32531da2 **out, const struct futhark_opaque_8f5f2e9d *obj);
int futhark_new_opaque_8f5f2e9d(struct futhark_context *ctx, struct futhark_opaque_8f5f2e9d **out, const struct futhark_opaque_8ce68ead *v0, const struct futhark_opaque_32531da2 *v1);
int futhark_free_opaque_8ce68ead(struct futhark_context *ctx, struct futhark_opaque_8ce68ead *obj);
int futhark_store_opaque_8ce68ead(struct futhark_context *ctx, const struct futhark_opaque_8ce68ead *obj, void **p, size_t *n);
struct futhark_opaque_8ce68ead *futhark_restore_opaque_8ce68ead(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_8ce68ead_0(struct futhark_context *ctx, struct futhark_opaque_f270e689 **out, const struct futhark_opaque_8ce68ead *obj);
int futhark_project_opaque_8ce68ead_1(struct futhark_context *ctx, struct futhark_opaque_32531da2 **out, const struct futhark_opaque_8ce68ead *obj);
int futhark_new_opaque_8ce68ead(struct futhark_context *ctx, struct futhark_opaque_8ce68ead **out, const struct futhark_opaque_f270e689 *v0, const struct futhark_opaque_32531da2 *v1);
int futhark_free_opaque_67daac7(struct futhark_context *ctx, struct futhark_opaque_67daac7 *obj);
int futhark_store_opaque_67daac7(struct futhark_context *ctx, const struct futhark_opaque_67daac7 *obj, void **p, size_t *n);
struct futhark_opaque_67daac7 *futhark_restore_opaque_67daac7(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_67daac7_0(struct futhark_context *ctx, struct futhark_opaque_c5da5e9b **out, const struct futhark_opaque_67daac7 *obj);
int futhark_project_opaque_67daac7_1(struct futhark_context *ctx, struct futhark_opaque_b0aee03a **out, const struct futhark_opaque_67daac7 *obj);
int futhark_new_opaque_67daac7(struct futhark_context *ctx, struct futhark_opaque_67daac7 **out, const struct futhark_opaque_c5da5e9b *v0, const struct futhark_opaque_b0aee03a *v1);
int futhark_free_opaque_f270e689(struct futhark_context *ctx, struct futhark_opaque_f270e689 *obj);
int futhark_store_opaque_f270e689(struct futhark_context *ctx, const struct futhark_opaque_f270e689 *obj, void **p, size_t *n);
struct futhark_opaque_f270e689 *futhark_restore_opaque_f270e689(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_f270e689_0(struct futhark_context *ctx, struct futhark_f32_2d **out, const struct futhark_opaque_f270e689 *obj);
int futhark_project_opaque_f270e689_1(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_f270e689 *obj);
int futhark_new_opaque_f270e689(struct futhark_context *ctx, struct futhark_opaque_f270e689 **out, const struct futhark_f32_2d *v0, const struct futhark_f32_1d *v1);
int futhark_free_opaque_32531da2(struct futhark_context *ctx, struct futhark_opaque_32531da2 *obj);
int futhark_store_opaque_32531da2(struct futhark_context *ctx, const struct futhark_opaque_32531da2 *obj, void **p, size_t *n);
struct futhark_opaque_32531da2 *futhark_restore_opaque_32531da2(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_32531da2_0(struct futhark_context *ctx, struct futhark_f32_2d **out, const struct futhark_opaque_32531da2 *obj);
int futhark_project_opaque_32531da2_1(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_32531da2 *obj);
int futhark_new_opaque_32531da2(struct futhark_context *ctx, struct futhark_opaque_32531da2 **out, const struct futhark_f32_2d *v0, const struct futhark_f32_1d *v1);
int futhark_free_opaque_e9a0e68b(struct futhark_context *ctx, struct futhark_opaque_e9a0e68b *obj);
int futhark_store_opaque_e9a0e68b(struct futhark_context *ctx, const struct futhark_opaque_e9a0e68b *obj, void **p, size_t *n);
struct futhark_opaque_e9a0e68b *futhark_restore_opaque_e9a0e68b(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_e9a0e68b_0(struct futhark_context *ctx, struct futhark_opaque_particleType **out, const struct futhark_opaque_e9a0e68b *obj);
int futhark_project_opaque_e9a0e68b_1(struct futhark_context *ctx, float *out, const struct futhark_opaque_e9a0e68b *obj);
int futhark_project_opaque_e9a0e68b_2(struct futhark_context *ctx, int32_t *out, const struct futhark_opaque_e9a0e68b *obj);
int futhark_new_opaque_e9a0e68b(struct futhark_context *ctx, struct futhark_opaque_e9a0e68b **out, const struct futhark_opaque_particleType *v0, const float v1, const int32_t v2);
int futhark_free_opaque_c5da5e9b(struct futhark_context *ctx, struct futhark_opaque_c5da5e9b *obj);
int futhark_store_opaque_c5da5e9b(struct futhark_context *ctx, const struct futhark_opaque_c5da5e9b *obj, void **p, size_t *n);
struct futhark_opaque_c5da5e9b *futhark_restore_opaque_c5da5e9b(struct futhark_context *ctx, const void *p);
int futhark_free_opaque_networkParameter(struct futhark_context *ctx, struct futhark_opaque_networkParameter *obj);
int futhark_store_opaque_networkParameter(struct futhark_context *ctx, const struct futhark_opaque_networkParameter *obj, void **p, size_t *n);
struct futhark_opaque_networkParameter *futhark_restore_opaque_networkParameter(struct futhark_context *ctx, const void *p);
int futhark_project_opaque_networkParameter_0(struct futhark_context *ctx, struct futhark_opaque_e9a0e68b **out, const struct futhark_opaque_networkParameter *obj);
int futhark_project_opaque_networkParameter_1(struct futhark_context *ctx, struct futhark_opaque_67daac7 **out, const struct futhark_opaque_networkParameter *obj);
int futhark_new_opaque_networkParameter(struct futhark_context *ctx, struct futhark_opaque_networkParameter **out, const struct futhark_opaque_e9a0e68b *v0, const struct futhark_opaque_67daac7 *v1);
int futhark_free_opaque_particleType(struct futhark_context *ctx, struct futhark_opaque_particleType *obj);
int futhark_store_opaque_particleType(struct futhark_context *ctx, const struct futhark_opaque_particleType *obj, void **p, size_t *n);
struct futhark_opaque_particleType *futhark_restore_opaque_particleType(struct futhark_context *ctx, const void *p);

// Entry points
int futhark_entry_hgoInteraction(struct futhark_context *ctx, struct futhark_f32_2d **out0, const float in0, const float in1, const float in2, const struct futhark_f32_2d *in3, const struct futhark_f32_2d *in4);
int futhark_entry_hgoPotential(struct futhark_context *ctx, float *out0, const float in0, const float in1, const float in2, const struct futhark_f32_1d *in3, const struct futhark_f32_1d *in4);
int futhark_entry_networkInteraction(struct futhark_context *ctx, struct futhark_f32_2d **out0, const struct futhark_opaque_networkParameter *in0, const struct futhark_f32_2d *in1, const struct futhark_f32_2d *in2);
int futhark_entry_networkPotential(struct futhark_context *ctx, float *out0, const struct futhark_opaque_networkParameter *in0, const struct futhark_f32_1d *in1, const struct futhark_f32_1d *in2);

// Miscellaneous
int futhark_context_sync(struct futhark_context *ctx);
void futhark_context_config_set_cache_file(struct futhark_context_config *cfg, const char *f);
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_c
#define FUTHARK_SUCCESS 0
#define FUTHARK_PROGRAM_ERROR 2
#define FUTHARK_OUT_OF_MEMORY 3

#ifdef __cplusplus
}
#endif

#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
// If NDEBUG is set, the assert() macro will do nothing. Since Futhark
// (unfortunately) makes use of assert() for error detection (and even some
// side effects), we want to avoid that.
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) __attribute__((noreturn));
static char* msgprintf(const char *s, ...);
static void* slurp_file(const char *filename, size_t *size);
static int dump_file(const char *file, const void *buf, size_t n);
struct str_builder;
static void str_builder_init(struct str_builder *b);
static void str_builder(struct str_builder *b, const char *s, ...);

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                             const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, ...) check_err(err, 0, __func__, __LINE__, __VA_ARGS__)
#define CHECK_ERRNO(err, ...) check_err(err, 1, __func__, __LINE__, __VA_ARGS__)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  long start = ftell(f);
  fseek(f, 0, SEEK_END);
  long src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc((size_t)src_size + 1);
  if (fread(s, 1, (size_t)src_size, f) != (size_t)src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = (size_t)src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.
// Start of cache.h

#define CACHE_HASH_SIZE 8 // In 32-bit words.

struct cache_hash {
  uint32_t hash[CACHE_HASH_SIZE];
};

// Initialise a blank cache.
static void cache_hash_init(struct cache_hash *c);

// Hash some bytes and add them to the accumulated hash.
static void cache_hash(struct cache_hash *out, const char *in, size_t n);

// Try to restore cache contents from a file with the given name.
// Assumes the cache is invalid if it contains the given hash.
// Allocates memory and reads the cache conents, which is returned in
// *buf with size *buflen.  If the cache is successfully loaded, this
// function returns 0.  Otherwise it returns nonzero.  Errno is set if
// the failure to load the cache is due to anything except invalid
// cache conents.  Note that failing to restore the cache is not
// necessarily a problem: it might just be invalid or not created yet.
static int cache_restore(const char *fname, const struct cache_hash *hash,
                         unsigned char **buf, size_t *buflen);

// Store cache contents in the given file, with the given hash.
static int cache_store(const char *fname, const struct cache_hash *hash,
                       const unsigned char *buf, size_t buflen);

// Now for the implementation.

static void cache_hash_init(struct cache_hash *c) {
  memset(c->hash, 0, CACHE_HASH_SIZE * sizeof(uint32_t));
}

static void cache_hash(struct cache_hash *out, const char *in, size_t n) {
  // Adaptation of djb2 for larger output size by storing intermediate
  // states.
  uint32_t hash = 5381;
  for (size_t i = 0; i < n; i++) {
    hash = ((hash << 5) + hash) + in[i];
    out->hash[i % CACHE_HASH_SIZE] ^= hash;
  }
}

#define CACHE_HEADER_SIZE 8
static const char cache_header[CACHE_HEADER_SIZE] = "FUTHARK\0";

static int cache_restore(const char *fname, const struct cache_hash *hash,
                         unsigned char **buf, size_t *buflen) {
  FILE *f = fopen(fname, "rb");

  if (f == NULL) {
    return 1;
  }

  char f_header[CACHE_HEADER_SIZE];

  if (fread(f_header, sizeof(char), CACHE_HEADER_SIZE, f) != CACHE_HEADER_SIZE) {
    goto error;
  }

  if (memcmp(f_header, cache_header, CACHE_HEADER_SIZE) != 0) {
    goto error;
  }

  if (fseek(f, 0, SEEK_END) != 0) {
    goto error;
  }
  int64_t f_size = (int64_t)ftell(f);
  if (fseek(f, CACHE_HEADER_SIZE, SEEK_SET) != 0) {
    goto error;
  }

  int64_t expected_size;

  if (fread(&expected_size, sizeof(int64_t), 1, f) != 1) {
    goto error;
  }

  if (f_size != expected_size) {
    errno = 0;
    goto error;
  }

  int32_t f_hash[CACHE_HASH_SIZE];

  if (fread(f_hash, sizeof(int32_t), CACHE_HASH_SIZE, f) != CACHE_HASH_SIZE) {
    goto error;
  }

  if (memcmp(f_hash, hash->hash, CACHE_HASH_SIZE) != 0) {
    errno = 0;
    goto error;
  }

  *buflen = f_size - CACHE_HEADER_SIZE - sizeof(int64_t) - CACHE_HASH_SIZE*sizeof(int32_t);
  *buf = malloc(*buflen);
  if (fread(*buf, sizeof(char), *buflen, f) != *buflen) {
    free(*buf);
    goto error;
  }

  fclose(f);

  return 0;

 error:
  fclose(f);
  return 1;
}

static int cache_store(const char *fname, const struct cache_hash *hash,
                       const unsigned char *buf, size_t buflen) {
  FILE *f = fopen(fname, "wb");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(cache_header, CACHE_HEADER_SIZE, 1, f) != 1) {
    goto error;
  }

  int64_t size = CACHE_HEADER_SIZE + sizeof(int64_t) + CACHE_HASH_SIZE*sizeof(int32_t) + buflen;

  if (fwrite(&size, sizeof(size), 1, f) != 1) {
    goto error;
  }

  if (fwrite(hash->hash, sizeof(int32_t), CACHE_HASH_SIZE, f) != CACHE_HASH_SIZE) {
    goto error;
  }

  if (fwrite(buf, sizeof(unsigned char), buflen, f) != buflen) {
    goto error;
  }

  fclose(f);

  return 0;

 error:
  fclose(f);
  return 1;
}

// End of cache.h
// Start of half.h.

// Conversion functions are from http://half.sourceforge.net/, but
// translated to C.
//
// Copyright (c) 2012-2021 Christian Rau
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

#ifndef __OPENCL_VERSION__
#define __constant
#endif

__constant static const uint16_t base_table[512] = {
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
  0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0002, 0x0004, 0x0008, 0x0010, 0x0020, 0x0040, 0x0080, 0x0100,
  0x0200, 0x0400, 0x0800, 0x0C00, 0x1000, 0x1400, 0x1800, 0x1C00, 0x2000, 0x2400, 0x2800, 0x2C00, 0x3000, 0x3400, 0x3800, 0x3C00,
  0x4000, 0x4400, 0x4800, 0x4C00, 0x5000, 0x5400, 0x5800, 0x5C00, 0x6000, 0x6400, 0x6800, 0x6C00, 0x7000, 0x7400, 0x7800, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00, 0x7C00,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000,
  0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8000, 0x8001, 0x8002, 0x8004, 0x8008, 0x8010, 0x8020, 0x8040, 0x8080, 0x8100,
  0x8200, 0x8400, 0x8800, 0x8C00, 0x9000, 0x9400, 0x9800, 0x9C00, 0xA000, 0xA400, 0xA800, 0xAC00, 0xB000, 0xB400, 0xB800, 0xBC00,
  0xC000, 0xC400, 0xC800, 0xCC00, 0xD000, 0xD400, 0xD800, 0xDC00, 0xE000, 0xE400, 0xE800, 0xEC00, 0xF000, 0xF400, 0xF800, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00,
  0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00, 0xFC00 };

__constant static const unsigned char shift_table[512] = {
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13,
  13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
  24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 13 };

__constant static const uint32_t mantissa_table[2048] = {
  0x00000000, 0x33800000, 0x34000000, 0x34400000, 0x34800000, 0x34A00000, 0x34C00000, 0x34E00000, 0x35000000, 0x35100000, 0x35200000, 0x35300000, 0x35400000, 0x35500000, 0x35600000, 0x35700000,
  0x35800000, 0x35880000, 0x35900000, 0x35980000, 0x35A00000, 0x35A80000, 0x35B00000, 0x35B80000, 0x35C00000, 0x35C80000, 0x35D00000, 0x35D80000, 0x35E00000, 0x35E80000, 0x35F00000, 0x35F80000,
  0x36000000, 0x36040000, 0x36080000, 0x360C0000, 0x36100000, 0x36140000, 0x36180000, 0x361C0000, 0x36200000, 0x36240000, 0x36280000, 0x362C0000, 0x36300000, 0x36340000, 0x36380000, 0x363C0000,
  0x36400000, 0x36440000, 0x36480000, 0x364C0000, 0x36500000, 0x36540000, 0x36580000, 0x365C0000, 0x36600000, 0x36640000, 0x36680000, 0x366C0000, 0x36700000, 0x36740000, 0x36780000, 0x367C0000,
  0x36800000, 0x36820000, 0x36840000, 0x36860000, 0x36880000, 0x368A0000, 0x368C0000, 0x368E0000, 0x36900000, 0x36920000, 0x36940000, 0x36960000, 0x36980000, 0x369A0000, 0x369C0000, 0x369E0000,
  0x36A00000, 0x36A20000, 0x36A40000, 0x36A60000, 0x36A80000, 0x36AA0000, 0x36AC0000, 0x36AE0000, 0x36B00000, 0x36B20000, 0x36B40000, 0x36B60000, 0x36B80000, 0x36BA0000, 0x36BC0000, 0x36BE0000,
  0x36C00000, 0x36C20000, 0x36C40000, 0x36C60000, 0x36C80000, 0x36CA0000, 0x36CC0000, 0x36CE0000, 0x36D00000, 0x36D20000, 0x36D40000, 0x36D60000, 0x36D80000, 0x36DA0000, 0x36DC0000, 0x36DE0000,
  0x36E00000, 0x36E20000, 0x36E40000, 0x36E60000, 0x36E80000, 0x36EA0000, 0x36EC0000, 0x36EE0000, 0x36F00000, 0x36F20000, 0x36F40000, 0x36F60000, 0x36F80000, 0x36FA0000, 0x36FC0000, 0x36FE0000,
  0x37000000, 0x37010000, 0x37020000, 0x37030000, 0x37040000, 0x37050000, 0x37060000, 0x37070000, 0x37080000, 0x37090000, 0x370A0000, 0x370B0000, 0x370C0000, 0x370D0000, 0x370E0000, 0x370F0000,
  0x37100000, 0x37110000, 0x37120000, 0x37130000, 0x37140000, 0x37150000, 0x37160000, 0x37170000, 0x37180000, 0x37190000, 0x371A0000, 0x371B0000, 0x371C0000, 0x371D0000, 0x371E0000, 0x371F0000,
  0x37200000, 0x37210000, 0x37220000, 0x37230000, 0x37240000, 0x37250000, 0x37260000, 0x37270000, 0x37280000, 0x37290000, 0x372A0000, 0x372B0000, 0x372C0000, 0x372D0000, 0x372E0000, 0x372F0000,
  0x37300000, 0x37310000, 0x37320000, 0x37330000, 0x37340000, 0x37350000, 0x37360000, 0x37370000, 0x37380000, 0x37390000, 0x373A0000, 0x373B0000, 0x373C0000, 0x373D0000, 0x373E0000, 0x373F0000,
  0x37400000, 0x37410000, 0x37420000, 0x37430000, 0x37440000, 0x37450000, 0x37460000, 0x37470000, 0x37480000, 0x37490000, 0x374A0000, 0x374B0000, 0x374C0000, 0x374D0000, 0x374E0000, 0x374F0000,
  0x37500000, 0x37510000, 0x37520000, 0x37530000, 0x37540000, 0x37550000, 0x37560000, 0x37570000, 0x37580000, 0x37590000, 0x375A0000, 0x375B0000, 0x375C0000, 0x375D0000, 0x375E0000, 0x375F0000,
  0x37600000, 0x37610000, 0x37620000, 0x37630000, 0x37640000, 0x37650000, 0x37660000, 0x37670000, 0x37680000, 0x37690000, 0x376A0000, 0x376B0000, 0x376C0000, 0x376D0000, 0x376E0000, 0x376F0000,
  0x37700000, 0x37710000, 0x37720000, 0x37730000, 0x37740000, 0x37750000, 0x37760000, 0x37770000, 0x37780000, 0x37790000, 0x377A0000, 0x377B0000, 0x377C0000, 0x377D0000, 0x377E0000, 0x377F0000,
  0x37800000, 0x37808000, 0x37810000, 0x37818000, 0x37820000, 0x37828000, 0x37830000, 0x37838000, 0x37840000, 0x37848000, 0x37850000, 0x37858000, 0x37860000, 0x37868000, 0x37870000, 0x37878000,
  0x37880000, 0x37888000, 0x37890000, 0x37898000, 0x378A0000, 0x378A8000, 0x378B0000, 0x378B8000, 0x378C0000, 0x378C8000, 0x378D0000, 0x378D8000, 0x378E0000, 0x378E8000, 0x378F0000, 0x378F8000,
  0x37900000, 0x37908000, 0x37910000, 0x37918000, 0x37920000, 0x37928000, 0x37930000, 0x37938000, 0x37940000, 0x37948000, 0x37950000, 0x37958000, 0x37960000, 0x37968000, 0x37970000, 0x37978000,
  0x37980000, 0x37988000, 0x37990000, 0x37998000, 0x379A0000, 0x379A8000, 0x379B0000, 0x379B8000, 0x379C0000, 0x379C8000, 0x379D0000, 0x379D8000, 0x379E0000, 0x379E8000, 0x379F0000, 0x379F8000,
  0x37A00000, 0x37A08000, 0x37A10000, 0x37A18000, 0x37A20000, 0x37A28000, 0x37A30000, 0x37A38000, 0x37A40000, 0x37A48000, 0x37A50000, 0x37A58000, 0x37A60000, 0x37A68000, 0x37A70000, 0x37A78000,
  0x37A80000, 0x37A88000, 0x37A90000, 0x37A98000, 0x37AA0000, 0x37AA8000, 0x37AB0000, 0x37AB8000, 0x37AC0000, 0x37AC8000, 0x37AD0000, 0x37AD8000, 0x37AE0000, 0x37AE8000, 0x37AF0000, 0x37AF8000,
  0x37B00000, 0x37B08000, 0x37B10000, 0x37B18000, 0x37B20000, 0x37B28000, 0x37B30000, 0x37B38000, 0x37B40000, 0x37B48000, 0x37B50000, 0x37B58000, 0x37B60000, 0x37B68000, 0x37B70000, 0x37B78000,
  0x37B80000, 0x37B88000, 0x37B90000, 0x37B98000, 0x37BA0000, 0x37BA8000, 0x37BB0000, 0x37BB8000, 0x37BC0000, 0x37BC8000, 0x37BD0000, 0x37BD8000, 0x37BE0000, 0x37BE8000, 0x37BF0000, 0x37BF8000,
  0x37C00000, 0x37C08000, 0x37C10000, 0x37C18000, 0x37C20000, 0x37C28000, 0x37C30000, 0x37C38000, 0x37C40000, 0x37C48000, 0x37C50000, 0x37C58000, 0x37C60000, 0x37C68000, 0x37C70000, 0x37C78000,
  0x37C80000, 0x37C88000, 0x37C90000, 0x37C98000, 0x37CA0000, 0x37CA8000, 0x37CB0000, 0x37CB8000, 0x37CC0000, 0x37CC8000, 0x37CD0000, 0x37CD8000, 0x37CE0000, 0x37CE8000, 0x37CF0000, 0x37CF8000,
  0x37D00000, 0x37D08000, 0x37D10000, 0x37D18000, 0x37D20000, 0x37D28000, 0x37D30000, 0x37D38000, 0x37D40000, 0x37D48000, 0x37D50000, 0x37D58000, 0x37D60000, 0x37D68000, 0x37D70000, 0x37D78000,
  0x37D80000, 0x37D88000, 0x37D90000, 0x37D98000, 0x37DA0000, 0x37DA8000, 0x37DB0000, 0x37DB8000, 0x37DC0000, 0x37DC8000, 0x37DD0000, 0x37DD8000, 0x37DE0000, 0x37DE8000, 0x37DF0000, 0x37DF8000,
  0x37E00000, 0x37E08000, 0x37E10000, 0x37E18000, 0x37E20000, 0x37E28000, 0x37E30000, 0x37E38000, 0x37E40000, 0x37E48000, 0x37E50000, 0x37E58000, 0x37E60000, 0x37E68000, 0x37E70000, 0x37E78000,
  0x37E80000, 0x37E88000, 0x37E90000, 0x37E98000, 0x37EA0000, 0x37EA8000, 0x37EB0000, 0x37EB8000, 0x37EC0000, 0x37EC8000, 0x37ED0000, 0x37ED8000, 0x37EE0000, 0x37EE8000, 0x37EF0000, 0x37EF8000,
  0x37F00000, 0x37F08000, 0x37F10000, 0x37F18000, 0x37F20000, 0x37F28000, 0x37F30000, 0x37F38000, 0x37F40000, 0x37F48000, 0x37F50000, 0x37F58000, 0x37F60000, 0x37F68000, 0x37F70000, 0x37F78000,
  0x37F80000, 0x37F88000, 0x37F90000, 0x37F98000, 0x37FA0000, 0x37FA8000, 0x37FB0000, 0x37FB8000, 0x37FC0000, 0x37FC8000, 0x37FD0000, 0x37FD8000, 0x37FE0000, 0x37FE8000, 0x37FF0000, 0x37FF8000,
  0x38000000, 0x38004000, 0x38008000, 0x3800C000, 0x38010000, 0x38014000, 0x38018000, 0x3801C000, 0x38020000, 0x38024000, 0x38028000, 0x3802C000, 0x38030000, 0x38034000, 0x38038000, 0x3803C000,
  0x38040000, 0x38044000, 0x38048000, 0x3804C000, 0x38050000, 0x38054000, 0x38058000, 0x3805C000, 0x38060000, 0x38064000, 0x38068000, 0x3806C000, 0x38070000, 0x38074000, 0x38078000, 0x3807C000,
  0x38080000, 0x38084000, 0x38088000, 0x3808C000, 0x38090000, 0x38094000, 0x38098000, 0x3809C000, 0x380A0000, 0x380A4000, 0x380A8000, 0x380AC000, 0x380B0000, 0x380B4000, 0x380B8000, 0x380BC000,
  0x380C0000, 0x380C4000, 0x380C8000, 0x380CC000, 0x380D0000, 0x380D4000, 0x380D8000, 0x380DC000, 0x380E0000, 0x380E4000, 0x380E8000, 0x380EC000, 0x380F0000, 0x380F4000, 0x380F8000, 0x380FC000,
  0x38100000, 0x38104000, 0x38108000, 0x3810C000, 0x38110000, 0x38114000, 0x38118000, 0x3811C000, 0x38120000, 0x38124000, 0x38128000, 0x3812C000, 0x38130000, 0x38134000, 0x38138000, 0x3813C000,
  0x38140000, 0x38144000, 0x38148000, 0x3814C000, 0x38150000, 0x38154000, 0x38158000, 0x3815C000, 0x38160000, 0x38164000, 0x38168000, 0x3816C000, 0x38170000, 0x38174000, 0x38178000, 0x3817C000,
  0x38180000, 0x38184000, 0x38188000, 0x3818C000, 0x38190000, 0x38194000, 0x38198000, 0x3819C000, 0x381A0000, 0x381A4000, 0x381A8000, 0x381AC000, 0x381B0000, 0x381B4000, 0x381B8000, 0x381BC000,
  0x381C0000, 0x381C4000, 0x381C8000, 0x381CC000, 0x381D0000, 0x381D4000, 0x381D8000, 0x381DC000, 0x381E0000, 0x381E4000, 0x381E8000, 0x381EC000, 0x381F0000, 0x381F4000, 0x381F8000, 0x381FC000,
  0x38200000, 0x38204000, 0x38208000, 0x3820C000, 0x38210000, 0x38214000, 0x38218000, 0x3821C000, 0x38220000, 0x38224000, 0x38228000, 0x3822C000, 0x38230000, 0x38234000, 0x38238000, 0x3823C000,
  0x38240000, 0x38244000, 0x38248000, 0x3824C000, 0x38250000, 0x38254000, 0x38258000, 0x3825C000, 0x38260000, 0x38264000, 0x38268000, 0x3826C000, 0x38270000, 0x38274000, 0x38278000, 0x3827C000,
  0x38280000, 0x38284000, 0x38288000, 0x3828C000, 0x38290000, 0x38294000, 0x38298000, 0x3829C000, 0x382A0000, 0x382A4000, 0x382A8000, 0x382AC000, 0x382B0000, 0x382B4000, 0x382B8000, 0x382BC000,
  0x382C0000, 0x382C4000, 0x382C8000, 0x382CC000, 0x382D0000, 0x382D4000, 0x382D8000, 0x382DC000, 0x382E0000, 0x382E4000, 0x382E8000, 0x382EC000, 0x382F0000, 0x382F4000, 0x382F8000, 0x382FC000,
  0x38300000, 0x38304000, 0x38308000, 0x3830C000, 0x38310000, 0x38314000, 0x38318000, 0x3831C000, 0x38320000, 0x38324000, 0x38328000, 0x3832C000, 0x38330000, 0x38334000, 0x38338000, 0x3833C000,
  0x38340000, 0x38344000, 0x38348000, 0x3834C000, 0x38350000, 0x38354000, 0x38358000, 0x3835C000, 0x38360000, 0x38364000, 0x38368000, 0x3836C000, 0x38370000, 0x38374000, 0x38378000, 0x3837C000,
  0x38380000, 0x38384000, 0x38388000, 0x3838C000, 0x38390000, 0x38394000, 0x38398000, 0x3839C000, 0x383A0000, 0x383A4000, 0x383A8000, 0x383AC000, 0x383B0000, 0x383B4000, 0x383B8000, 0x383BC000,
  0x383C0000, 0x383C4000, 0x383C8000, 0x383CC000, 0x383D0000, 0x383D4000, 0x383D8000, 0x383DC000, 0x383E0000, 0x383E4000, 0x383E8000, 0x383EC000, 0x383F0000, 0x383F4000, 0x383F8000, 0x383FC000,
  0x38400000, 0x38404000, 0x38408000, 0x3840C000, 0x38410000, 0x38414000, 0x38418000, 0x3841C000, 0x38420000, 0x38424000, 0x38428000, 0x3842C000, 0x38430000, 0x38434000, 0x38438000, 0x3843C000,
  0x38440000, 0x38444000, 0x38448000, 0x3844C000, 0x38450000, 0x38454000, 0x38458000, 0x3845C000, 0x38460000, 0x38464000, 0x38468000, 0x3846C000, 0x38470000, 0x38474000, 0x38478000, 0x3847C000,
  0x38480000, 0x38484000, 0x38488000, 0x3848C000, 0x38490000, 0x38494000, 0x38498000, 0x3849C000, 0x384A0000, 0x384A4000, 0x384A8000, 0x384AC000, 0x384B0000, 0x384B4000, 0x384B8000, 0x384BC000,
  0x384C0000, 0x384C4000, 0x384C8000, 0x384CC000, 0x384D0000, 0x384D4000, 0x384D8000, 0x384DC000, 0x384E0000, 0x384E4000, 0x384E8000, 0x384EC000, 0x384F0000, 0x384F4000, 0x384F8000, 0x384FC000,
  0x38500000, 0x38504000, 0x38508000, 0x3850C000, 0x38510000, 0x38514000, 0x38518000, 0x3851C000, 0x38520000, 0x38524000, 0x38528000, 0x3852C000, 0x38530000, 0x38534000, 0x38538000, 0x3853C000,
  0x38540000, 0x38544000, 0x38548000, 0x3854C000, 0x38550000, 0x38554000, 0x38558000, 0x3855C000, 0x38560000, 0x38564000, 0x38568000, 0x3856C000, 0x38570000, 0x38574000, 0x38578000, 0x3857C000,
  0x38580000, 0x38584000, 0x38588000, 0x3858C000, 0x38590000, 0x38594000, 0x38598000, 0x3859C000, 0x385A0000, 0x385A4000, 0x385A8000, 0x385AC000, 0x385B0000, 0x385B4000, 0x385B8000, 0x385BC000,
  0x385C0000, 0x385C4000, 0x385C8000, 0x385CC000, 0x385D0000, 0x385D4000, 0x385D8000, 0x385DC000, 0x385E0000, 0x385E4000, 0x385E8000, 0x385EC000, 0x385F0000, 0x385F4000, 0x385F8000, 0x385FC000,
  0x38600000, 0x38604000, 0x38608000, 0x3860C000, 0x38610000, 0x38614000, 0x38618000, 0x3861C000, 0x38620000, 0x38624000, 0x38628000, 0x3862C000, 0x38630000, 0x38634000, 0x38638000, 0x3863C000,
  0x38640000, 0x38644000, 0x38648000, 0x3864C000, 0x38650000, 0x38654000, 0x38658000, 0x3865C000, 0x38660000, 0x38664000, 0x38668000, 0x3866C000, 0x38670000, 0x38674000, 0x38678000, 0x3867C000,
  0x38680000, 0x38684000, 0x38688000, 0x3868C000, 0x38690000, 0x38694000, 0x38698000, 0x3869C000, 0x386A0000, 0x386A4000, 0x386A8000, 0x386AC000, 0x386B0000, 0x386B4000, 0x386B8000, 0x386BC000,
  0x386C0000, 0x386C4000, 0x386C8000, 0x386CC000, 0x386D0000, 0x386D4000, 0x386D8000, 0x386DC000, 0x386E0000, 0x386E4000, 0x386E8000, 0x386EC000, 0x386F0000, 0x386F4000, 0x386F8000, 0x386FC000,
  0x38700000, 0x38704000, 0x38708000, 0x3870C000, 0x38710000, 0x38714000, 0x38718000, 0x3871C000, 0x38720000, 0x38724000, 0x38728000, 0x3872C000, 0x38730000, 0x38734000, 0x38738000, 0x3873C000,
  0x38740000, 0x38744000, 0x38748000, 0x3874C000, 0x38750000, 0x38754000, 0x38758000, 0x3875C000, 0x38760000, 0x38764000, 0x38768000, 0x3876C000, 0x38770000, 0x38774000, 0x38778000, 0x3877C000,
  0x38780000, 0x38784000, 0x38788000, 0x3878C000, 0x38790000, 0x38794000, 0x38798000, 0x3879C000, 0x387A0000, 0x387A4000, 0x387A8000, 0x387AC000, 0x387B0000, 0x387B4000, 0x387B8000, 0x387BC000,
  0x387C0000, 0x387C4000, 0x387C8000, 0x387CC000, 0x387D0000, 0x387D4000, 0x387D8000, 0x387DC000, 0x387E0000, 0x387E4000, 0x387E8000, 0x387EC000, 0x387F0000, 0x387F4000, 0x387F8000, 0x387FC000,
  0x38000000, 0x38002000, 0x38004000, 0x38006000, 0x38008000, 0x3800A000, 0x3800C000, 0x3800E000, 0x38010000, 0x38012000, 0x38014000, 0x38016000, 0x38018000, 0x3801A000, 0x3801C000, 0x3801E000,
  0x38020000, 0x38022000, 0x38024000, 0x38026000, 0x38028000, 0x3802A000, 0x3802C000, 0x3802E000, 0x38030000, 0x38032000, 0x38034000, 0x38036000, 0x38038000, 0x3803A000, 0x3803C000, 0x3803E000,
  0x38040000, 0x38042000, 0x38044000, 0x38046000, 0x38048000, 0x3804A000, 0x3804C000, 0x3804E000, 0x38050000, 0x38052000, 0x38054000, 0x38056000, 0x38058000, 0x3805A000, 0x3805C000, 0x3805E000,
  0x38060000, 0x38062000, 0x38064000, 0x38066000, 0x38068000, 0x3806A000, 0x3806C000, 0x3806E000, 0x38070000, 0x38072000, 0x38074000, 0x38076000, 0x38078000, 0x3807A000, 0x3807C000, 0x3807E000,
  0x38080000, 0x38082000, 0x38084000, 0x38086000, 0x38088000, 0x3808A000, 0x3808C000, 0x3808E000, 0x38090000, 0x38092000, 0x38094000, 0x38096000, 0x38098000, 0x3809A000, 0x3809C000, 0x3809E000,
  0x380A0000, 0x380A2000, 0x380A4000, 0x380A6000, 0x380A8000, 0x380AA000, 0x380AC000, 0x380AE000, 0x380B0000, 0x380B2000, 0x380B4000, 0x380B6000, 0x380B8000, 0x380BA000, 0x380BC000, 0x380BE000,
  0x380C0000, 0x380C2000, 0x380C4000, 0x380C6000, 0x380C8000, 0x380CA000, 0x380CC000, 0x380CE000, 0x380D0000, 0x380D2000, 0x380D4000, 0x380D6000, 0x380D8000, 0x380DA000, 0x380DC000, 0x380DE000,
  0x380E0000, 0x380E2000, 0x380E4000, 0x380E6000, 0x380E8000, 0x380EA000, 0x380EC000, 0x380EE000, 0x380F0000, 0x380F2000, 0x380F4000, 0x380F6000, 0x380F8000, 0x380FA000, 0x380FC000, 0x380FE000,
  0x38100000, 0x38102000, 0x38104000, 0x38106000, 0x38108000, 0x3810A000, 0x3810C000, 0x3810E000, 0x38110000, 0x38112000, 0x38114000, 0x38116000, 0x38118000, 0x3811A000, 0x3811C000, 0x3811E000,
  0x38120000, 0x38122000, 0x38124000, 0x38126000, 0x38128000, 0x3812A000, 0x3812C000, 0x3812E000, 0x38130000, 0x38132000, 0x38134000, 0x38136000, 0x38138000, 0x3813A000, 0x3813C000, 0x3813E000,
  0x38140000, 0x38142000, 0x38144000, 0x38146000, 0x38148000, 0x3814A000, 0x3814C000, 0x3814E000, 0x38150000, 0x38152000, 0x38154000, 0x38156000, 0x38158000, 0x3815A000, 0x3815C000, 0x3815E000,
  0x38160000, 0x38162000, 0x38164000, 0x38166000, 0x38168000, 0x3816A000, 0x3816C000, 0x3816E000, 0x38170000, 0x38172000, 0x38174000, 0x38176000, 0x38178000, 0x3817A000, 0x3817C000, 0x3817E000,
  0x38180000, 0x38182000, 0x38184000, 0x38186000, 0x38188000, 0x3818A000, 0x3818C000, 0x3818E000, 0x38190000, 0x38192000, 0x38194000, 0x38196000, 0x38198000, 0x3819A000, 0x3819C000, 0x3819E000,
  0x381A0000, 0x381A2000, 0x381A4000, 0x381A6000, 0x381A8000, 0x381AA000, 0x381AC000, 0x381AE000, 0x381B0000, 0x381B2000, 0x381B4000, 0x381B6000, 0x381B8000, 0x381BA000, 0x381BC000, 0x381BE000,
  0x381C0000, 0x381C2000, 0x381C4000, 0x381C6000, 0x381C8000, 0x381CA000, 0x381CC000, 0x381CE000, 0x381D0000, 0x381D2000, 0x381D4000, 0x381D6000, 0x381D8000, 0x381DA000, 0x381DC000, 0x381DE000,
  0x381E0000, 0x381E2000, 0x381E4000, 0x381E6000, 0x381E8000, 0x381EA000, 0x381EC000, 0x381EE000, 0x381F0000, 0x381F2000, 0x381F4000, 0x381F6000, 0x381F8000, 0x381FA000, 0x381FC000, 0x381FE000,
  0x38200000, 0x38202000, 0x38204000, 0x38206000, 0x38208000, 0x3820A000, 0x3820C000, 0x3820E000, 0x38210000, 0x38212000, 0x38214000, 0x38216000, 0x38218000, 0x3821A000, 0x3821C000, 0x3821E000,
  0x38220000, 0x38222000, 0x38224000, 0x38226000, 0x38228000, 0x3822A000, 0x3822C000, 0x3822E000, 0x38230000, 0x38232000, 0x38234000, 0x38236000, 0x38238000, 0x3823A000, 0x3823C000, 0x3823E000,
  0x38240000, 0x38242000, 0x38244000, 0x38246000, 0x38248000, 0x3824A000, 0x3824C000, 0x3824E000, 0x38250000, 0x38252000, 0x38254000, 0x38256000, 0x38258000, 0x3825A000, 0x3825C000, 0x3825E000,
  0x38260000, 0x38262000, 0x38264000, 0x38266000, 0x38268000, 0x3826A000, 0x3826C000, 0x3826E000, 0x38270000, 0x38272000, 0x38274000, 0x38276000, 0x38278000, 0x3827A000, 0x3827C000, 0x3827E000,
  0x38280000, 0x38282000, 0x38284000, 0x38286000, 0x38288000, 0x3828A000, 0x3828C000, 0x3828E000, 0x38290000, 0x38292000, 0x38294000, 0x38296000, 0x38298000, 0x3829A000, 0x3829C000, 0x3829E000,
  0x382A0000, 0x382A2000, 0x382A4000, 0x382A6000, 0x382A8000, 0x382AA000, 0x382AC000, 0x382AE000, 0x382B0000, 0x382B2000, 0x382B4000, 0x382B6000, 0x382B8000, 0x382BA000, 0x382BC000, 0x382BE000,
  0x382C0000, 0x382C2000, 0x382C4000, 0x382C6000, 0x382C8000, 0x382CA000, 0x382CC000, 0x382CE000, 0x382D0000, 0x382D2000, 0x382D4000, 0x382D6000, 0x382D8000, 0x382DA000, 0x382DC000, 0x382DE000,
  0x382E0000, 0x382E2000, 0x382E4000, 0x382E6000, 0x382E8000, 0x382EA000, 0x382EC000, 0x382EE000, 0x382F0000, 0x382F2000, 0x382F4000, 0x382F6000, 0x382F8000, 0x382FA000, 0x382FC000, 0x382FE000,
  0x38300000, 0x38302000, 0x38304000, 0x38306000, 0x38308000, 0x3830A000, 0x3830C000, 0x3830E000, 0x38310000, 0x38312000, 0x38314000, 0x38316000, 0x38318000, 0x3831A000, 0x3831C000, 0x3831E000,
  0x38320000, 0x38322000, 0x38324000, 0x38326000, 0x38328000, 0x3832A000, 0x3832C000, 0x3832E000, 0x38330000, 0x38332000, 0x38334000, 0x38336000, 0x38338000, 0x3833A000, 0x3833C000, 0x3833E000,
  0x38340000, 0x38342000, 0x38344000, 0x38346000, 0x38348000, 0x3834A000, 0x3834C000, 0x3834E000, 0x38350000, 0x38352000, 0x38354000, 0x38356000, 0x38358000, 0x3835A000, 0x3835C000, 0x3835E000,
  0x38360000, 0x38362000, 0x38364000, 0x38366000, 0x38368000, 0x3836A000, 0x3836C000, 0x3836E000, 0x38370000, 0x38372000, 0x38374000, 0x38376000, 0x38378000, 0x3837A000, 0x3837C000, 0x3837E000,
  0x38380000, 0x38382000, 0x38384000, 0x38386000, 0x38388000, 0x3838A000, 0x3838C000, 0x3838E000, 0x38390000, 0x38392000, 0x38394000, 0x38396000, 0x38398000, 0x3839A000, 0x3839C000, 0x3839E000,
  0x383A0000, 0x383A2000, 0x383A4000, 0x383A6000, 0x383A8000, 0x383AA000, 0x383AC000, 0x383AE000, 0x383B0000, 0x383B2000, 0x383B4000, 0x383B6000, 0x383B8000, 0x383BA000, 0x383BC000, 0x383BE000,
  0x383C0000, 0x383C2000, 0x383C4000, 0x383C6000, 0x383C8000, 0x383CA000, 0x383CC000, 0x383CE000, 0x383D0000, 0x383D2000, 0x383D4000, 0x383D6000, 0x383D8000, 0x383DA000, 0x383DC000, 0x383DE000,
  0x383E0000, 0x383E2000, 0x383E4000, 0x383E6000, 0x383E8000, 0x383EA000, 0x383EC000, 0x383EE000, 0x383F0000, 0x383F2000, 0x383F4000, 0x383F6000, 0x383F8000, 0x383FA000, 0x383FC000, 0x383FE000,
  0x38400000, 0x38402000, 0x38404000, 0x38406000, 0x38408000, 0x3840A000, 0x3840C000, 0x3840E000, 0x38410000, 0x38412000, 0x38414000, 0x38416000, 0x38418000, 0x3841A000, 0x3841C000, 0x3841E000,
  0x38420000, 0x38422000, 0x38424000, 0x38426000, 0x38428000, 0x3842A000, 0x3842C000, 0x3842E000, 0x38430000, 0x38432000, 0x38434000, 0x38436000, 0x38438000, 0x3843A000, 0x3843C000, 0x3843E000,
  0x38440000, 0x38442000, 0x38444000, 0x38446000, 0x38448000, 0x3844A000, 0x3844C000, 0x3844E000, 0x38450000, 0x38452000, 0x38454000, 0x38456000, 0x38458000, 0x3845A000, 0x3845C000, 0x3845E000,
  0x38460000, 0x38462000, 0x38464000, 0x38466000, 0x38468000, 0x3846A000, 0x3846C000, 0x3846E000, 0x38470000, 0x38472000, 0x38474000, 0x38476000, 0x38478000, 0x3847A000, 0x3847C000, 0x3847E000,
  0x38480000, 0x38482000, 0x38484000, 0x38486000, 0x38488000, 0x3848A000, 0x3848C000, 0x3848E000, 0x38490000, 0x38492000, 0x38494000, 0x38496000, 0x38498000, 0x3849A000, 0x3849C000, 0x3849E000,
  0x384A0000, 0x384A2000, 0x384A4000, 0x384A6000, 0x384A8000, 0x384AA000, 0x384AC000, 0x384AE000, 0x384B0000, 0x384B2000, 0x384B4000, 0x384B6000, 0x384B8000, 0x384BA000, 0x384BC000, 0x384BE000,
  0x384C0000, 0x384C2000, 0x384C4000, 0x384C6000, 0x384C8000, 0x384CA000, 0x384CC000, 0x384CE000, 0x384D0000, 0x384D2000, 0x384D4000, 0x384D6000, 0x384D8000, 0x384DA000, 0x384DC000, 0x384DE000,
  0x384E0000, 0x384E2000, 0x384E4000, 0x384E6000, 0x384E8000, 0x384EA000, 0x384EC000, 0x384EE000, 0x384F0000, 0x384F2000, 0x384F4000, 0x384F6000, 0x384F8000, 0x384FA000, 0x384FC000, 0x384FE000,
  0x38500000, 0x38502000, 0x38504000, 0x38506000, 0x38508000, 0x3850A000, 0x3850C000, 0x3850E000, 0x38510000, 0x38512000, 0x38514000, 0x38516000, 0x38518000, 0x3851A000, 0x3851C000, 0x3851E000,
  0x38520000, 0x38522000, 0x38524000, 0x38526000, 0x38528000, 0x3852A000, 0x3852C000, 0x3852E000, 0x38530000, 0x38532000, 0x38534000, 0x38536000, 0x38538000, 0x3853A000, 0x3853C000, 0x3853E000,
  0x38540000, 0x38542000, 0x38544000, 0x38546000, 0x38548000, 0x3854A000, 0x3854C000, 0x3854E000, 0x38550000, 0x38552000, 0x38554000, 0x38556000, 0x38558000, 0x3855A000, 0x3855C000, 0x3855E000,
  0x38560000, 0x38562000, 0x38564000, 0x38566000, 0x38568000, 0x3856A000, 0x3856C000, 0x3856E000, 0x38570000, 0x38572000, 0x38574000, 0x38576000, 0x38578000, 0x3857A000, 0x3857C000, 0x3857E000,
  0x38580000, 0x38582000, 0x38584000, 0x38586000, 0x38588000, 0x3858A000, 0x3858C000, 0x3858E000, 0x38590000, 0x38592000, 0x38594000, 0x38596000, 0x38598000, 0x3859A000, 0x3859C000, 0x3859E000,
  0x385A0000, 0x385A2000, 0x385A4000, 0x385A6000, 0x385A8000, 0x385AA000, 0x385AC000, 0x385AE000, 0x385B0000, 0x385B2000, 0x385B4000, 0x385B6000, 0x385B8000, 0x385BA000, 0x385BC000, 0x385BE000,
  0x385C0000, 0x385C2000, 0x385C4000, 0x385C6000, 0x385C8000, 0x385CA000, 0x385CC000, 0x385CE000, 0x385D0000, 0x385D2000, 0x385D4000, 0x385D6000, 0x385D8000, 0x385DA000, 0x385DC000, 0x385DE000,
  0x385E0000, 0x385E2000, 0x385E4000, 0x385E6000, 0x385E8000, 0x385EA000, 0x385EC000, 0x385EE000, 0x385F0000, 0x385F2000, 0x385F4000, 0x385F6000, 0x385F8000, 0x385FA000, 0x385FC000, 0x385FE000,
  0x38600000, 0x38602000, 0x38604000, 0x38606000, 0x38608000, 0x3860A000, 0x3860C000, 0x3860E000, 0x38610000, 0x38612000, 0x38614000, 0x38616000, 0x38618000, 0x3861A000, 0x3861C000, 0x3861E000,
  0x38620000, 0x38622000, 0x38624000, 0x38626000, 0x38628000, 0x3862A000, 0x3862C000, 0x3862E000, 0x38630000, 0x38632000, 0x38634000, 0x38636000, 0x38638000, 0x3863A000, 0x3863C000, 0x3863E000,
  0x38640000, 0x38642000, 0x38644000, 0x38646000, 0x38648000, 0x3864A000, 0x3864C000, 0x3864E000, 0x38650000, 0x38652000, 0x38654000, 0x38656000, 0x38658000, 0x3865A000, 0x3865C000, 0x3865E000,
  0x38660000, 0x38662000, 0x38664000, 0x38666000, 0x38668000, 0x3866A000, 0x3866C000, 0x3866E000, 0x38670000, 0x38672000, 0x38674000, 0x38676000, 0x38678000, 0x3867A000, 0x3867C000, 0x3867E000,
  0x38680000, 0x38682000, 0x38684000, 0x38686000, 0x38688000, 0x3868A000, 0x3868C000, 0x3868E000, 0x38690000, 0x38692000, 0x38694000, 0x38696000, 0x38698000, 0x3869A000, 0x3869C000, 0x3869E000,
  0x386A0000, 0x386A2000, 0x386A4000, 0x386A6000, 0x386A8000, 0x386AA000, 0x386AC000, 0x386AE000, 0x386B0000, 0x386B2000, 0x386B4000, 0x386B6000, 0x386B8000, 0x386BA000, 0x386BC000, 0x386BE000,
  0x386C0000, 0x386C2000, 0x386C4000, 0x386C6000, 0x386C8000, 0x386CA000, 0x386CC000, 0x386CE000, 0x386D0000, 0x386D2000, 0x386D4000, 0x386D6000, 0x386D8000, 0x386DA000, 0x386DC000, 0x386DE000,
  0x386E0000, 0x386E2000, 0x386E4000, 0x386E6000, 0x386E8000, 0x386EA000, 0x386EC000, 0x386EE000, 0x386F0000, 0x386F2000, 0x386F4000, 0x386F6000, 0x386F8000, 0x386FA000, 0x386FC000, 0x386FE000,
  0x38700000, 0x38702000, 0x38704000, 0x38706000, 0x38708000, 0x3870A000, 0x3870C000, 0x3870E000, 0x38710000, 0x38712000, 0x38714000, 0x38716000, 0x38718000, 0x3871A000, 0x3871C000, 0x3871E000,
  0x38720000, 0x38722000, 0x38724000, 0x38726000, 0x38728000, 0x3872A000, 0x3872C000, 0x3872E000, 0x38730000, 0x38732000, 0x38734000, 0x38736000, 0x38738000, 0x3873A000, 0x3873C000, 0x3873E000,
  0x38740000, 0x38742000, 0x38744000, 0x38746000, 0x38748000, 0x3874A000, 0x3874C000, 0x3874E000, 0x38750000, 0x38752000, 0x38754000, 0x38756000, 0x38758000, 0x3875A000, 0x3875C000, 0x3875E000,
  0x38760000, 0x38762000, 0x38764000, 0x38766000, 0x38768000, 0x3876A000, 0x3876C000, 0x3876E000, 0x38770000, 0x38772000, 0x38774000, 0x38776000, 0x38778000, 0x3877A000, 0x3877C000, 0x3877E000,
  0x38780000, 0x38782000, 0x38784000, 0x38786000, 0x38788000, 0x3878A000, 0x3878C000, 0x3878E000, 0x38790000, 0x38792000, 0x38794000, 0x38796000, 0x38798000, 0x3879A000, 0x3879C000, 0x3879E000,
  0x387A0000, 0x387A2000, 0x387A4000, 0x387A6000, 0x387A8000, 0x387AA000, 0x387AC000, 0x387AE000, 0x387B0000, 0x387B2000, 0x387B4000, 0x387B6000, 0x387B8000, 0x387BA000, 0x387BC000, 0x387BE000,
  0x387C0000, 0x387C2000, 0x387C4000, 0x387C6000, 0x387C8000, 0x387CA000, 0x387CC000, 0x387CE000, 0x387D0000, 0x387D2000, 0x387D4000, 0x387D6000, 0x387D8000, 0x387DA000, 0x387DC000, 0x387DE000,
  0x387E0000, 0x387E2000, 0x387E4000, 0x387E6000, 0x387E8000, 0x387EA000, 0x387EC000, 0x387EE000, 0x387F0000, 0x387F2000, 0x387F4000, 0x387F6000, 0x387F8000, 0x387FA000, 0x387FC000, 0x387FE000 };
__constant static const uint32_t exponent_table[64] = {
  0x00000000, 0x00800000, 0x01000000, 0x01800000, 0x02000000, 0x02800000, 0x03000000, 0x03800000, 0x04000000, 0x04800000, 0x05000000, 0x05800000, 0x06000000, 0x06800000, 0x07000000, 0x07800000,
  0x08000000, 0x08800000, 0x09000000, 0x09800000, 0x0A000000, 0x0A800000, 0x0B000000, 0x0B800000, 0x0C000000, 0x0C800000, 0x0D000000, 0x0D800000, 0x0E000000, 0x0E800000, 0x0F000000, 0x47800000,
  0x80000000, 0x80800000, 0x81000000, 0x81800000, 0x82000000, 0x82800000, 0x83000000, 0x83800000, 0x84000000, 0x84800000, 0x85000000, 0x85800000, 0x86000000, 0x86800000, 0x87000000, 0x87800000,
  0x88000000, 0x88800000, 0x89000000, 0x89800000, 0x8A000000, 0x8A800000, 0x8B000000, 0x8B800000, 0x8C000000, 0x8C800000, 0x8D000000, 0x8D800000, 0x8E000000, 0x8E800000, 0x8F000000, 0xC7800000 };
__constant static const unsigned short offset_table[64] = {
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024,
  0, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024, 1024 };

static uint16_t float2halfbits(float value) {
  union { float x; uint32_t y; } u;
  u.x = value;
  uint32_t bits = u.y;

  uint16_t hbits = base_table[bits>>23] + (uint16_t)((bits&0x7FFFFF)>>shift_table[bits>>23]);;

  return hbits;
}

static float halfbits2float(uint16_t value) {
  uint32_t bits = mantissa_table[offset_table[value>>10]+(value&0x3FF)] + exponent_table[value>>10];

  union { uint32_t x; float y; } u;
  u.x = bits;
  return u.y;
}

static uint16_t halfbitsnextafter(uint16_t from, uint16_t to) {
  int fabs = from & 0x7FFF, tabs = to & 0x7FFF;
  if(fabs > 0x7C00 || tabs > 0x7C00) {
    return ((from&0x7FFF)>0x7C00) ? (from|0x200) : (to|0x200);
  }
  if(from == to || !(fabs|tabs)) {
    return to;
  }
  if(!fabs) {
    return (to&0x8000)+1;
  }
  unsigned int out =
    from +
    (((from>>15)^(unsigned int)((from^(0x8000|(0x8000-(from>>15))))<(to^(0x8000|(0x8000-(to>>15))))))<<1)
    - 1;
  return out;
}

// End of half.h.
// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>



// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

#define FUTHARK_F64_ENABLED

// Start of scalar.h.

// Implementation of the primitive scalar operations.  Very
// repetitive.  This code is inserted directly into both CUDA and
// OpenCL programs, as well as the CPU code, so it has some #ifdefs to
// work everywhere.  Some operations are defined as macros because
// this allows us to use them as constant expressions in things like
// array sizes and static initialisers.

// Some of the #ifdefs are because OpenCL uses type-generic functions
// for some operations (e.g. sqrt), while C and CUDA sensibly use
// distinct functions for different precisions (e.g. sqrtf() and
// sqrt()).  This is quite annoying.  Due to C's unfortunate casting
// rules, it is also really easy to accidentally implement
// floating-point functions in the wrong precision, so be careful.

// Double-precision definitions are only included if the preprocessor
// macro FUTHARK_F64_ENABLED is set.

static inline uint8_t add8(uint8_t x, uint8_t y) {
  return x + y;
}

static inline uint16_t add16(uint16_t x, uint16_t y) {
  return x + y;
}

static inline uint32_t add32(uint32_t x, uint32_t y) {
  return x + y;
}

static inline uint64_t add64(uint64_t x, uint64_t y) {
  return x + y;
}

static inline uint8_t sub8(uint8_t x, uint8_t y) {
  return x - y;
}

static inline uint16_t sub16(uint16_t x, uint16_t y) {
  return x - y;
}

static inline uint32_t sub32(uint32_t x, uint32_t y) {
  return x - y;
}

static inline uint64_t sub64(uint64_t x, uint64_t y) {
  return x - y;
}

static inline uint8_t mul8(uint8_t x, uint8_t y) {
  return x * y;
}

static inline uint16_t mul16(uint16_t x, uint16_t y) {
  return x * y;
}

static inline uint32_t mul32(uint32_t x, uint32_t y) {
  return x * y;
}

static inline uint64_t mul64(uint64_t x, uint64_t y) {
  return x * y;
}

#if ISPC

static inline uint8_t udiv8(uint8_t x, uint8_t y) {
  // This strange pattern is used to prevent the ISPC compiler from
  // causing SIGFPEs and bogus results on divisions where inactive lanes
  // have 0-valued divisors. It ensures that any inactive lane instead
  // has a divisor of 1. https://github.com/ispc/ispc/issues/2292
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }

  return x / ys;
}

static inline uint16_t udiv16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x / ys;
}

static inline uint32_t udiv32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  

  return x / ys;
}

static inline uint64_t udiv64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  

  return x / ys;
}

static inline uint8_t udiv_up8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  

  return (x + y - 1) / ys;
}

static inline uint16_t udiv_up16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return (x + y - 1) / ys;
}

static inline uint32_t udiv_up32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return (x + y - 1) / ys;
}

static inline uint64_t udiv_up64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return (x + y - 1) / ys;
}

static inline uint8_t umod8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x % ys;
}

static inline uint16_t umod16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  

  return x % ys;
}

static inline uint32_t umod32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x % ys;
}

static inline uint64_t umod64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x % ys;
}

static inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : (x + y - 1) / ys;
}

static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : (x + y - 1) / ys;
}

static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : (x + y - 1) / ys;
}

static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : (x + y - 1) / ys;
}

static inline uint8_t umod_safe8(uint8_t x, uint8_t y) {
  uint8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

static inline uint16_t umod_safe16(uint16_t x, uint16_t y) {
  uint16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

static inline uint32_t umod_safe32(uint32_t x, uint32_t y) {
  uint32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

static inline uint64_t umod_safe64(uint64_t x, uint64_t y) {
  uint64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

static inline int8_t sdiv8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  int8_t q = x / ys;
  int8_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int16_t sdiv16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  int16_t q = x / ys;
  int16_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int32_t sdiv32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  int32_t q = x / ys;
  int32_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int64_t sdiv64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  int64_t q = x / ys;
  int64_t r = x % ys;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

static inline int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

static inline int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

static inline int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

static inline int8_t smod8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  int8_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int16_t smod16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  int16_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int32_t smod32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  int32_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int64_t smod64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  int64_t r = x % ys;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

static inline int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

static inline int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

static inline int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

static inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

static inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

static inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

static inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

static inline int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

static inline int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

static inline int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

static inline int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

static inline int8_t squot8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x / ys;
}

static inline int16_t squot16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x / ys;
}

static inline int32_t squot32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x / ys;
}

static inline int64_t squot64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x / ys;
}

static inline int8_t srem8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x % ys;
}

static inline int16_t srem16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x % ys;
}

static inline int32_t srem32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x % ys;
}

static inline int64_t srem64(int64_t x, int64_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return x % ys;
}

static inline int8_t squot_safe8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline int16_t squot_safe16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline int32_t squot_safe32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline int64_t squot_safe64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x / ys;
}

static inline int8_t srem_safe8(int8_t x, int8_t y) {
  int8_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

static inline int16_t srem_safe16(int16_t x, int16_t y) {
  int16_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

static inline int32_t srem_safe32(int32_t x, int32_t y) {
  int32_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

static inline int64_t srem_safe64(int64_t x, int64_t y) {
  int64_t ys = 1;
  foreach_active(i){
    ys = y;
  }
  
  return y == 0 ? 0 : x % ys;
}

#else

static inline uint8_t udiv8(uint8_t x, uint8_t y) {
  return x / y;
}

static inline uint16_t udiv16(uint16_t x, uint16_t y) {
  return x / y;
}

static inline uint32_t udiv32(uint32_t x, uint32_t y) {
  return x / y;
}

static inline uint64_t udiv64(uint64_t x, uint64_t y) {
  return x / y;
}

static inline uint8_t udiv_up8(uint8_t x, uint8_t y) {
  return (x + y - 1) / y;
}

static inline uint16_t udiv_up16(uint16_t x, uint16_t y) {
  return (x + y - 1) / y;
}

static inline uint32_t udiv_up32(uint32_t x, uint32_t y) {
  return (x + y - 1) / y;
}

static inline uint64_t udiv_up64(uint64_t x, uint64_t y) {
  return (x + y - 1) / y;
}

static inline uint8_t umod8(uint8_t x, uint8_t y) {
  return x % y;
}

static inline uint16_t umod16(uint16_t x, uint16_t y) {
  return x % y;
}

static inline uint32_t umod32(uint32_t x, uint32_t y) {
  return x % y;
}

static inline uint64_t umod64(uint64_t x, uint64_t y) {
  return x % y;
}

static inline uint8_t udiv_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint16_t udiv_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint32_t udiv_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint64_t udiv_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : (x + y - 1) / y;
}

static inline uint8_t umod_safe8(uint8_t x, uint8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint16_t umod_safe16(uint16_t x, uint16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint32_t umod_safe32(uint32_t x, uint32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline uint64_t umod_safe64(uint64_t x, uint64_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int8_t sdiv8(int8_t x, int8_t y) {
  int8_t q = x / y;
  int8_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int16_t sdiv16(int16_t x, int16_t y) {
  int16_t q = x / y;
  int16_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int32_t sdiv32(int32_t x, int32_t y) {
  int32_t q = x / y;
  int32_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int64_t sdiv64(int64_t x, int64_t y) {
  int64_t q = x / y;
  int64_t r = x % y;

  return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}

static inline int8_t sdiv_up8(int8_t x, int8_t y) {
  return sdiv8(x + y - 1, y);
}

static inline int16_t sdiv_up16(int16_t x, int16_t y) {
  return sdiv16(x + y - 1, y);
}

static inline int32_t sdiv_up32(int32_t x, int32_t y) {
  return sdiv32(x + y - 1, y);
}

static inline int64_t sdiv_up64(int64_t x, int64_t y) {
  return sdiv64(x + y - 1, y);
}

static inline int8_t smod8(int8_t x, int8_t y) {
  int8_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int16_t smod16(int16_t x, int16_t y) {
  int16_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int32_t smod32(int32_t x, int32_t y) {
  int32_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int64_t smod64(int64_t x, int64_t y) {
  int64_t r = x % y;

  return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}

static inline int8_t sdiv_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : sdiv8(x, y);
}

static inline int16_t sdiv_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : sdiv16(x, y);
}

static inline int32_t sdiv_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : sdiv32(x, y);
}

static inline int64_t sdiv_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : sdiv64(x, y);
}

static inline int8_t sdiv_up_safe8(int8_t x, int8_t y) {
  return sdiv_safe8(x + y - 1, y);
}

static inline int16_t sdiv_up_safe16(int16_t x, int16_t y) {
  return sdiv_safe16(x + y - 1, y);
}

static inline int32_t sdiv_up_safe32(int32_t x, int32_t y) {
  return sdiv_safe32(x + y - 1, y);
}

static inline int64_t sdiv_up_safe64(int64_t x, int64_t y) {
  return sdiv_safe64(x + y - 1, y);
}

static inline int8_t smod_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : smod8(x, y);
}

static inline int16_t smod_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : smod16(x, y);
}

static inline int32_t smod_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : smod32(x, y);
}

static inline int64_t smod_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : smod64(x, y);
}

static inline int8_t squot8(int8_t x, int8_t y) {
  return x / y;
}

static inline int16_t squot16(int16_t x, int16_t y) {
  return x / y;
}

static inline int32_t squot32(int32_t x, int32_t y) {
  return x / y;
}

static inline int64_t squot64(int64_t x, int64_t y) {
  return x / y;
}

static inline int8_t srem8(int8_t x, int8_t y) {
  return x % y;
}

static inline int16_t srem16(int16_t x, int16_t y) {
  return x % y;
}

static inline int32_t srem32(int32_t x, int32_t y) {
  return x % y;
}

static inline int64_t srem64(int64_t x, int64_t y) {
  return x % y;
}

static inline int8_t squot_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int16_t squot_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int32_t squot_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int64_t squot_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x / y;
}

static inline int8_t srem_safe8(int8_t x, int8_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int16_t srem_safe16(int16_t x, int16_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int32_t srem_safe32(int32_t x, int32_t y) {
  return y == 0 ? 0 : x % y;
}

static inline int64_t srem_safe64(int64_t x, int64_t y) {
  return y == 0 ? 0 : x % y;
}

#endif

static inline int8_t smin8(int8_t x, int8_t y) {
  return x < y ? x : y;
}

static inline int16_t smin16(int16_t x, int16_t y) {
  return x < y ? x : y;
}

static inline int32_t smin32(int32_t x, int32_t y) {
  return x < y ? x : y;
}

static inline int64_t smin64(int64_t x, int64_t y) {
  return x < y ? x : y;
}

static inline uint8_t umin8(uint8_t x, uint8_t y) {
  return x < y ? x : y;
}

static inline uint16_t umin16(uint16_t x, uint16_t y) {
  return x < y ? x : y;
}

static inline uint32_t umin32(uint32_t x, uint32_t y) {
  return x < y ? x : y;
}

static inline uint64_t umin64(uint64_t x, uint64_t y) {
  return x < y ? x : y;
}

static inline int8_t smax8(int8_t x, int8_t y) {
  return x < y ? y : x;
}

static inline int16_t smax16(int16_t x, int16_t y) {
  return x < y ? y : x;
}

static inline int32_t smax32(int32_t x, int32_t y) {
  return x < y ? y : x;
}

static inline int64_t smax64(int64_t x, int64_t y) {
  return x < y ? y : x;
}

static inline uint8_t umax8(uint8_t x, uint8_t y) {
  return x < y ? y : x;
}

static inline uint16_t umax16(uint16_t x, uint16_t y) {
  return x < y ? y : x;
}

static inline uint32_t umax32(uint32_t x, uint32_t y) {
  return x < y ? y : x;
}

static inline uint64_t umax64(uint64_t x, uint64_t y) {
  return x < y ? y : x;
}

static inline uint8_t shl8(uint8_t x, uint8_t y) {
  return (uint8_t)(x << y);
}

static inline uint16_t shl16(uint16_t x, uint16_t y) {
  return (uint16_t)(x << y);
}

static inline uint32_t shl32(uint32_t x, uint32_t y) {
  return x << y;
}

static inline uint64_t shl64(uint64_t x, uint64_t y) {
  return x << y;
}

static inline uint8_t lshr8(uint8_t x, uint8_t y) {
  return x >> y;
}

static inline uint16_t lshr16(uint16_t x, uint16_t y) {
  return x >> y;
}

static inline uint32_t lshr32(uint32_t x, uint32_t y) {
  return x >> y;
}

static inline uint64_t lshr64(uint64_t x, uint64_t y) {
  return x >> y;
}

static inline int8_t ashr8(int8_t x, int8_t y) {
  return x >> y;
}

static inline int16_t ashr16(int16_t x, int16_t y) {
  return x >> y;
}

static inline int32_t ashr32(int32_t x, int32_t y) {
  return x >> y;
}

static inline int64_t ashr64(int64_t x, int64_t y) {
  return x >> y;
}

static inline uint8_t and8(uint8_t x, uint8_t y) {
  return x & y;
}

static inline uint16_t and16(uint16_t x, uint16_t y) {
  return x & y;
}

static inline uint32_t and32(uint32_t x, uint32_t y) {
  return x & y;
}

static inline uint64_t and64(uint64_t x, uint64_t y) {
  return x & y;
}

static inline uint8_t or8(uint8_t x, uint8_t y) {
  return x | y;
}

static inline uint16_t or16(uint16_t x, uint16_t y) {
  return x | y;
}

static inline uint32_t or32(uint32_t x, uint32_t y) {
  return x | y;
}

static inline uint64_t or64(uint64_t x, uint64_t y) {
  return x | y;
}

static inline uint8_t xor8(uint8_t x, uint8_t y) {
  return x ^ y;
}

static inline uint16_t xor16(uint16_t x, uint16_t y) {
  return x ^ y;
}

static inline uint32_t xor32(uint32_t x, uint32_t y) {
  return x ^ y;
}

static inline uint64_t xor64(uint64_t x, uint64_t y) {
  return x ^ y;
}

static inline bool ult8(uint8_t x, uint8_t y) {
  return x < y;
}

static inline bool ult16(uint16_t x, uint16_t y) {
  return x < y;
}

static inline bool ult32(uint32_t x, uint32_t y) {
  return x < y;
}

static inline bool ult64(uint64_t x, uint64_t y) {
  return x < y;
}

static inline bool ule8(uint8_t x, uint8_t y) {
  return x <= y;
}

static inline bool ule16(uint16_t x, uint16_t y) {
  return x <= y;
}

static inline bool ule32(uint32_t x, uint32_t y) {
  return x <= y;
}

static inline bool ule64(uint64_t x, uint64_t y) {
  return x <= y;
}

static inline bool slt8(int8_t x, int8_t y) {
  return x < y;
}

static inline bool slt16(int16_t x, int16_t y) {
  return x < y;
}

static inline bool slt32(int32_t x, int32_t y) {
  return x < y;
}

static inline bool slt64(int64_t x, int64_t y) {
  return x < y;
}

static inline bool sle8(int8_t x, int8_t y) {
  return x <= y;
}

static inline bool sle16(int16_t x, int16_t y) {
  return x <= y;
}

static inline bool sle32(int32_t x, int32_t y) {
  return x <= y;
}

static inline bool sle64(int64_t x, int64_t y) {
  return x <= y;
}

static inline uint8_t pow8(uint8_t x, uint8_t y) {
  uint8_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint16_t pow16(uint16_t x, uint16_t y) {
  uint16_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint32_t pow32(uint32_t x, uint32_t y) {
  uint32_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline uint64_t pow64(uint64_t x, uint64_t y) {
  uint64_t res = 1, rem = y;

  while (rem != 0) {
    if (rem & 1)
      res *= x;
    rem >>= 1;
    x *= x;
  }
  return res;
}

static inline bool itob_i8_bool(int8_t x) {
  return x != 0;
}

static inline bool itob_i16_bool(int16_t x) {
  return x != 0;
}

static inline bool itob_i32_bool(int32_t x) {
  return x != 0;
}

static inline bool itob_i64_bool(int64_t x) {
  return x != 0;
}

static inline int8_t btoi_bool_i8(bool x) {
  return x;
}

static inline int16_t btoi_bool_i16(bool x) {
  return x;
}

static inline int32_t btoi_bool_i32(bool x) {
  return x;
}

static inline int64_t btoi_bool_i64(bool x) {
  return x;
}

#define sext_i8_i8(x) ((int8_t) (int8_t) (x))
#define sext_i8_i16(x) ((int16_t) (int8_t) (x))
#define sext_i8_i32(x) ((int32_t) (int8_t) (x))
#define sext_i8_i64(x) ((int64_t) (int8_t) (x))
#define sext_i16_i8(x) ((int8_t) (int16_t) (x))
#define sext_i16_i16(x) ((int16_t) (int16_t) (x))
#define sext_i16_i32(x) ((int32_t) (int16_t) (x))
#define sext_i16_i64(x) ((int64_t) (int16_t) (x))
#define sext_i32_i8(x) ((int8_t) (int32_t) (x))
#define sext_i32_i16(x) ((int16_t) (int32_t) (x))
#define sext_i32_i32(x) ((int32_t) (int32_t) (x))
#define sext_i32_i64(x) ((int64_t) (int32_t) (x))
#define sext_i64_i8(x) ((int8_t) (int64_t) (x))
#define sext_i64_i16(x) ((int16_t) (int64_t) (x))
#define sext_i64_i32(x) ((int32_t) (int64_t) (x))
#define sext_i64_i64(x) ((int64_t) (int64_t) (x))
#define zext_i8_i8(x) ((int8_t) (uint8_t) (x))
#define zext_i8_i16(x) ((int16_t) (uint8_t) (x))
#define zext_i8_i32(x) ((int32_t) (uint8_t) (x))
#define zext_i8_i64(x) ((int64_t) (uint8_t) (x))
#define zext_i16_i8(x) ((int8_t) (uint16_t) (x))
#define zext_i16_i16(x) ((int16_t) (uint16_t) (x))
#define zext_i16_i32(x) ((int32_t) (uint16_t) (x))
#define zext_i16_i64(x) ((int64_t) (uint16_t) (x))
#define zext_i32_i8(x) ((int8_t) (uint32_t) (x))
#define zext_i32_i16(x) ((int16_t) (uint32_t) (x))
#define zext_i32_i32(x) ((int32_t) (uint32_t) (x))
#define zext_i32_i64(x) ((int64_t) (uint32_t) (x))
#define zext_i64_i8(x) ((int8_t) (uint64_t) (x))
#define zext_i64_i16(x) ((int16_t) (uint64_t) (x))
#define zext_i64_i32(x) ((int32_t) (uint64_t) (x))
#define zext_i64_i64(x) ((int64_t) (uint64_t) (x))

static int8_t abs8(int8_t x) {
  return (int8_t)abs(x);
}

static int16_t abs16(int16_t x) {
  return (int16_t)abs(x);
}

static int32_t abs32(int32_t x) {
  return abs(x);
}

static int64_t abs64(int64_t x) {
#if defined(__OPENCL_VERSION__) || defined(ISPC)
  return abs(x);
#else
  return llabs(x);
#endif
}

#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x) {
  return popcount(x);
}

static int32_t futrts_popc16(int16_t x) {
  return popcount(x);
}

static int32_t futrts_popc32(int32_t x) {
  return popcount(x);
}

static int32_t futrts_popc64(int64_t x) {
  return popcount(x);
}
#elif defined(__CUDA_ARCH__)

static int32_t futrts_popc8(int8_t x) {
  return __popc(zext_i8_i32(x));
}

static int32_t futrts_popc16(int16_t x) {
  return __popc(zext_i16_i32(x));
}

static int32_t futrts_popc32(int32_t x) {
  return __popc(x);
}

static int32_t futrts_popc64(int64_t x) {
  return __popcll(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_popc8(uint8_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc16(uint16_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc32(uint32_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}

static int32_t futrts_popc64(uint64_t x) {
  int c = 0;
  for (; x; ++c) { x &= x - 1; }
  return c;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  return mul_hi(a, b);
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  return mul_hi(a, b);
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mul_hi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul_hi(a, b);
}

#elif defined(__CUDA_ARCH__)

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  return mulhi(a, b);
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  return mul64hi(a, b);
}

#elif ISPC

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  uint64_t aa = a;
  uint64_t bb = b;

  return aa * bb >> 32;
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  uint64_t ah = a >> 32;
  uint64_t al = a & 0xffffffff;
  uint64_t bh = b >> 32;
  uint64_t bl = b & 0xffffffff;

  uint64_t p1 = al * bl;
  uint64_t p2 = al * bh;
  uint64_t p3 = ah * bl;
  uint64_t p4 = ah * bh;

  uint64_t p1h = p1 >> 32;
  uint64_t p2h = p2 >> 32;
  uint64_t p3h = p3 >> 32;
  uint64_t p2l = p2 & 0xffffffff;
  uint64_t p3l = p3 & 0xffffffff;

  uint64_t l = p1h + p2l  + p3l;
  uint64_t m = (p2 >> 32) + (p3 >> 32);
  uint64_t h = (l >> 32) + m + p4;

  return h;
}

#else // Not OpenCL, ISPC, or CUDA, but plain C.

static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b) {
  uint16_t aa = a;
  uint16_t bb = b;

  return aa * bb >> 8;
}

static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b) {
  uint32_t aa = a;
  uint32_t bb = b;

  return aa * bb >> 16;
}

static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b) {
  uint64_t aa = a;
  uint64_t bb = b;

  return aa * bb >> 32;
}

static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b) {
  __uint128_t aa = a;
  __uint128_t bb = b;

  return aa * bb >> 64;
}
#endif

#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return mad_hi(a, b, c);
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return mad_hi(a, b, c);
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return mad_hi(a, b, c);
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return mad_hi(a, b, c);
}

#else // Not OpenCL

static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c) {
  return futrts_mul_hi8(a, b) + c;
}

static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c) {
  return futrts_mul_hi16(a, b) + c;
}

static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c) {
  return futrts_mul_hi32(a, b) + c;
}

static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c) {
  return futrts_mul_hi64(a, b) + c;
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x) {
  return clz(x);
}

static int32_t futrts_clzz16(int16_t x) {
  return clz(x);
}

static int32_t futrts_clzz32(int32_t x) {
  return clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return clz(x);
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_clzz8(int8_t x) {
  return __clz(zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return __clz(zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return __clz(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return __clzll(x);
}

#elif ISPC

static int32_t futrts_clzz8(int8_t x) {
  return count_leading_zeros((int32_t)(uint8_t)x)-24;
}

static int32_t futrts_clzz16(int16_t x) {
  return count_leading_zeros((int32_t)(uint16_t)x)-16;
}

static int32_t futrts_clzz32(int32_t x) {
  return count_leading_zeros(x);
}

static int32_t futrts_clzz64(int64_t x) {
  return count_leading_zeros(x);
}

#else // Not OpenCL, ISPC or CUDA, but plain C.

static int32_t futrts_clzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_clz((uint32_t)zext_i8_i32(x)) - 24;
}

static int32_t futrts_clzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_clz((uint32_t)zext_i16_i32(x)) - 16;
}

static int32_t futrts_clzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_clz((uint32_t)x);
}

static int32_t futrts_clzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_clzll((uint64_t)x);
}
#endif

#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x) {
  int i = 0;
  for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz16(int16_t x) {
  int i = 0;
  for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz32(int32_t x) {
  int i = 0;
  for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

static int32_t futrts_ctzz64(int64_t x) {
  int i = 0;
  for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
    ;
  return i;
}

#elif defined(__CUDA_ARCH__)

static int32_t futrts_ctzz8(int8_t x) {
  int y = __ffs(x);
  return y == 0 ? 8 : y - 1;
}

static int32_t futrts_ctzz16(int16_t x) {
  int y = __ffs(x);
  return y == 0 ? 16 : y - 1;
}

static int32_t futrts_ctzz32(int32_t x) {
  int y = __ffs(x);
  return y == 0 ? 32 : y - 1;
}

static int32_t futrts_ctzz64(int64_t x) {
  int y = __ffsll(x);
  return y == 0 ? 64 : y - 1;
}

#elif ISPC

static int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : count_trailing_zeros((int32_t)x);
}

static int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : count_trailing_zeros((int32_t)x);
}

static int32_t futrts_ctzz32(int32_t x) {
  return count_trailing_zeros(x);
}

static int32_t futrts_ctzz64(int64_t x) {
  return count_trailing_zeros(x);
}

#else // Not OpenCL or CUDA, but plain C.

static int32_t futrts_ctzz8(int8_t x) {
  return x == 0 ? 8 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz16(int16_t x) {
  return x == 0 ? 16 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz32(int32_t x) {
  return x == 0 ? 32 : __builtin_ctz((uint32_t)x);
}

static int32_t futrts_ctzz64(int64_t x) {
  return x == 0 ? 64 : __builtin_ctzll((uint64_t)x);
}
#endif

static inline float fdiv32(float x, float y) {
  return x / y;
}

static inline float fadd32(float x, float y) {
  return x + y;
}

static inline float fsub32(float x, float y) {
  return x - y;
}

static inline float fmul32(float x, float y) {
  return x * y;
}

static inline bool cmplt32(float x, float y) {
  return x < y;
}

static inline bool cmple32(float x, float y) {
  return x <= y;
}

static inline float sitofp_i8_f32(int8_t x) {
  return (float) x;
}

static inline float sitofp_i16_f32(int16_t x) {
  return (float) x;
}

static inline float sitofp_i32_f32(int32_t x) {
  return (float) x;
}

static inline float sitofp_i64_f32(int64_t x) {
  return (float) x;
}

static inline float uitofp_i8_f32(uint8_t x) {
  return (float) x;
}

static inline float uitofp_i16_f32(uint16_t x) {
  return (float) x;
}

static inline float uitofp_i32_f32(uint32_t x) {
  return (float) x;
}

static inline float uitofp_i64_f32(uint64_t x) {
  return (float) x;
}

#ifdef __OPENCL_VERSION__
static inline float fabs32(float x) {
  return fabs(x);
}

static inline float fmax32(float x, float y) {
  return fmax(x, y);
}

static inline float fmin32(float x, float y) {
  return fmin(x, y);
}

static inline float fpow32(float x, float y) {
  return pow(x, y);
}

#elif ISPC

static inline float fabs32(float x) {
  return abs(x);
}

static inline float fmax32(float x, float y) {
  return isnan(x) ? y : isnan(y) ? x : max(x, y);
}

static inline float fmin32(float x, float y) {
  return isnan(x) ? y : isnan(y) ? x : min(x, y);
}

static inline float fpow32(float a, float b) {
  float ret;
  foreach_active (i) {
      uniform float r = __stdlib_powf(extract(a, i), extract(b, i));
      ret = insert(ret, i, r);
  }
  return ret;
}

#else // Not OpenCL, but CUDA or plain C.

static inline float fabs32(float x) {
  return fabsf(x);
}

static inline float fmax32(float x, float y) {
  return fmaxf(x, y);
}

static inline float fmin32(float x, float y) {
  return fminf(x, y);
}

static inline float fpow32(float x, float y) {
  return powf(x, y);
}
#endif

static inline bool futrts_isnan32(float x) {
  return isnan(x);
}

#if ISPC

static inline bool futrts_isinf32(float x) {
  return !isnan(x) && isnan(x - x);
}

static inline bool futrts_isfinite32(float x) {
  return !isnan(x) && !futrts_isinf32(x);
}

#else

static inline bool futrts_isinf32(float x) {
  return isinf(x);
}

#endif

static inline int8_t fptosi_f32_i8(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

static inline int16_t fptosi_f32_i16(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

static inline int32_t fptosi_f32_i32(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

static inline int64_t fptosi_f32_i64(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (int64_t) x;
  };
}

static inline uint8_t fptoui_f32_i8(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

static inline uint16_t fptoui_f32_i16(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

static inline uint32_t fptoui_f32_i32(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

static inline uint64_t fptoui_f32_i64(float x) {
  if (futrts_isnan32(x) || futrts_isinf32(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

static inline bool ftob_f32_bool(float x) {
  return x != 0;
}

static inline float btof_bool_f32(bool x) {
  return x ? 1 : 0;
}

#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x) {
  return log(x);
}

static inline float futrts_log2_32(float x) {
  return log2(x);
}

static inline float futrts_log10_32(float x) {
  return log10(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrt(x);
}

static inline float futrts_cbrt32(float x) {
  return cbrt(x);
}

static inline float futrts_exp32(float x) {
  return exp(x);
}

static inline float futrts_cos32(float x) {
  return cos(x);
}

static inline float futrts_sin32(float x) {
  return sin(x);
}

static inline float futrts_tan32(float x) {
  return tan(x);
}

static inline float futrts_acos32(float x) {
  return acos(x);
}

static inline float futrts_asin32(float x) {
  return asin(x);
}

static inline float futrts_atan32(float x) {
  return atan(x);
}

static inline float futrts_cosh32(float x) {
  return cosh(x);
}

static inline float futrts_sinh32(float x) {
  return sinh(x);
}

static inline float futrts_tanh32(float x) {
  return tanh(x);
}

static inline float futrts_acosh32(float x) {
  return acosh(x);
}

static inline float futrts_asinh32(float x) {
  return asinh(x);
}

static inline float futrts_atanh32(float x) {
  return atanh(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypot(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgamma(x);
}

static inline float futrts_lgamma32(float x) {
  return lgamma(x);
}

static inline float futrts_erf32(float x) {
  return erf(x);
}

static inline float futrts_erfc32(float x) {
  return erfc(x);
}

static inline float fmod32(float x, float y) {
  return fmod(x, y);
}

static inline float futrts_round32(float x) {
  return rint(x);
}

static inline float futrts_floor32(float x) {
  return floor(x);
}

static inline float futrts_ceil32(float x) {
  return ceil(x);
}

static inline float futrts_nextafter32(float x, float y) {
  return nextafter(x, y);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return mix(v0, v1, t);
}

static inline float futrts_mad32(float a, float b, float c) {
  return mad(a, b, c);
}

static inline float futrts_fma32(float a, float b, float c) {
  return fma(a, b, c);
}

#elif ISPC

static inline float futrts_log32(float x) {
  return futrts_isfinite32(x) || (futrts_isinf32(x) && x < 0)? log(x) : x;
}

static inline float futrts_log2_32(float x) {
  return futrts_log32(x) / log(2.0f);
}

static inline float futrts_log10_32(float x) {
  return futrts_log32(x) / log(10.0f);
}

static inline float futrts_sqrt32(float x) {
  return sqrt(x);
}

extern "C" unmasked uniform float cbrtf(uniform float);
static inline float futrts_cbrt32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = cbrtf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

static inline float futrts_exp32(float x) {
  return exp(x);
}

static inline float futrts_cos32(float x) {
  return cos(x);
}

static inline float futrts_sin32(float x) {
  return sin(x);
}

static inline float futrts_tan32(float x) {
  return tan(x);
}

static inline float futrts_acos32(float x) {
  return acos(x);
}

static inline float futrts_asin32(float x) {
  return asin(x);
}

static inline float futrts_atan32(float x) {
  return atan(x);
}

static inline float futrts_cosh32(float x) {
  return (exp(x)+exp(-x)) / 2.0f;
}

static inline float futrts_sinh32(float x) {
  return (exp(x)-exp(-x)) / 2.0f;
}

static inline float futrts_tanh32(float x) {
  return futrts_sinh32(x)/futrts_cosh32(x);
}

static inline float futrts_acosh32(float x) {
  float f = x+sqrt(x*x-1);
  if(futrts_isfinite32(f)) return log(f);
  return f;
}

static inline float futrts_asinh32(float x) {
  float f = x+sqrt(x*x+1);
  if(futrts_isfinite32(f)) return log(f);
  return f;

}

static inline float futrts_atanh32(float x) {
  float f = (1+x)/(1-x);
  if(futrts_isfinite32(f)) return log(f)/2.0f;
  return f;

}

static inline float futrts_atan2_32(float x, float y) {
  return (x == 0.0f && y == 0.0f) ? 0.0f : atan2(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  if (futrts_isfinite32(x) && futrts_isfinite32(y)) {
    x = abs(x);
    y = abs(y);
    float a;
    float b;
    if (x >= y){
        a = x;
        b = y;
    } else {
        a = y;
        b = x;
    }
    if(b == 0){
      return a;
    }

    int e;
    float an;
    float bn;
    an = frexp (a, &e);
    bn = ldexp (b, - e);
    float cn;
    cn = sqrt (an * an + bn * bn);
    return ldexp (cn, e);
  } else {
    if (futrts_isinf32(x) || futrts_isinf32(y)) return INFINITY;
    else return x + y;
  }

}

extern "C" unmasked uniform float tgammaf(uniform float x);
static inline float futrts_gamma32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = tgammaf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float lgammaf(uniform float x);
static inline float futrts_lgamma32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = lgammaf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float erff(uniform float x);
static inline float futrts_erf32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = erff(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float erfcf(uniform float x);
static inline float futrts_erfc32(float x) {
  float res;
  foreach_active (i) {
    uniform float r = erfcf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

static inline float fmod32(float x, float y) {
  return x - y * trunc(x/y);
}

static inline float futrts_round32(float x) {
  return round(x);
}

static inline float futrts_floor32(float x) {
  return floor(x);
}

static inline float futrts_ceil32(float x) {
  return ceil(x);
}

extern "C" unmasked uniform float nextafterf(uniform float x, uniform float y);
static inline float futrts_nextafter32(float x, float y) {
  float res;
  foreach_active (i) {
    uniform float r = nextafterf(extract(x, i), extract(y, i));
    res = insert(res, i, r);
  }
  return res;
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

static inline float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

static inline float futrts_fma32(float a, float b, float c) {
  return a * b + c;
}

#else // Not OpenCL or ISPC, but CUDA or plain C.

static inline float futrts_log32(float x) {
  return logf(x);
}

static inline float futrts_log2_32(float x) {
  return log2f(x);
}

static inline float futrts_log10_32(float x) {
  return log10f(x);
}

static inline float futrts_sqrt32(float x) {
  return sqrtf(x);
}

static inline float futrts_cbrt32(float x) {
  return cbrtf(x);
}

static inline float futrts_exp32(float x) {
  return expf(x);
}

static inline float futrts_cos32(float x) {
  return cosf(x);
}

static inline float futrts_sin32(float x) {
  return sinf(x);
}

static inline float futrts_tan32(float x) {
  return tanf(x);
}

static inline float futrts_acos32(float x) {
  return acosf(x);
}

static inline float futrts_asin32(float x) {
  return asinf(x);
}

static inline float futrts_atan32(float x) {
  return atanf(x);
}

static inline float futrts_cosh32(float x) {
  return coshf(x);
}

static inline float futrts_sinh32(float x) {
  return sinhf(x);
}

static inline float futrts_tanh32(float x) {
  return tanhf(x);
}

static inline float futrts_acosh32(float x) {
  return acoshf(x);
}

static inline float futrts_asinh32(float x) {
  return asinhf(x);
}

static inline float futrts_atanh32(float x) {
  return atanhf(x);
}

static inline float futrts_atan2_32(float x, float y) {
  return atan2f(x, y);
}

static inline float futrts_hypot32(float x, float y) {
  return hypotf(x, y);
}

static inline float futrts_gamma32(float x) {
  return tgammaf(x);
}

static inline float futrts_lgamma32(float x) {
  return lgammaf(x);
}

static inline float futrts_erf32(float x) {
  return erff(x);
}

static inline float futrts_erfc32(float x) {
  return erfcf(x);
}

static inline float fmod32(float x, float y) {
  return fmodf(x, y);
}

static inline float futrts_round32(float x) {
  return rintf(x);
}

static inline float futrts_floor32(float x) {
  return floorf(x);
}

static inline float futrts_ceil32(float x) {
  return ceilf(x);
}

static inline float futrts_nextafter32(float x, float y) {
  return nextafterf(x, y);
}

static inline float futrts_lerp32(float v0, float v1, float t) {
  return v0 + (v1 - v0) * t;
}

static inline float futrts_mad32(float a, float b, float c) {
  return a * b + c;
}

static inline float futrts_fma32(float a, float b, float c) {
  return fmaf(a, b, c);
}
#endif

#if ISPC
static inline int32_t futrts_to_bits32(float x) {
  return intbits(x);
}

static inline float futrts_from_bits32(int32_t x) {
  return floatbits(x);
}
#else
static inline int32_t futrts_to_bits32(float x) {
  union {
    float f;
    int32_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline float futrts_from_bits32(int32_t x) {
  union {
    int32_t f;
    float t;
  } p;

  p.f = x;
  return p.t;
}
#endif

static inline float fsignum32(float x) {
  return futrts_isnan32(x) ? x : (x > 0 ? 1 : 0) - (x < 0 ? 1 : 0);
}

#ifdef FUTHARK_F64_ENABLED

#if ISPC
static inline bool futrts_isinf64(float x) {
  return !isnan(x) && isnan(x - x);
}

static inline bool futrts_isfinite64(float x) {
  return !isnan(x) && !futrts_isinf64(x);
}

static inline double fdiv64(double x, double y) {
  return x / y;
}

static inline double fadd64(double x, double y) {
  return x + y;
}

static inline double fsub64(double x, double y) {
  return x - y;
}

static inline double fmul64(double x, double y) {
  return x * y;
}

static inline bool cmplt64(double x, double y) {
  return x < y;
}

static inline bool cmple64(double x, double y) {
  return x <= y;
}

static inline double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

static inline double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

static inline double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

static inline double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

static inline double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

static inline double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

static inline double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

static inline double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

static inline double fabs64(double x) {
  return abs(x);
}

static inline double fmax64(double x, double y) {
  return isnan(x) ? y : isnan(y) ? x : max(x, y);
}

static inline double fmin64(double x, double y) {
  return isnan(x) ? y : isnan(y) ? x : min(x, y);
}

static inline double fpow64(double a, double b) {
  float ret;
  foreach_active (i) {
      uniform float r = __stdlib_powf(extract(a, i), extract(b, i));
      ret = insert(ret, i, r);
  }
  return ret;
}

static inline double futrts_log64(double x) {
  return futrts_isfinite64(x) || (futrts_isinf64(x) && x < 0)? log(x) : x;
}

static inline double futrts_log2_64(double x) {
  return futrts_log64(x)/log(2.0d);
}

static inline double futrts_log10_64(double x) {
  return futrts_log64(x)/log(10.0d);
}

static inline double futrts_sqrt64(double x) {
  return sqrt(x);
}

extern "C" unmasked uniform double cbrt(uniform double);
static inline double futrts_cbrt64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = cbrtf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

static inline double futrts_exp64(double x) {
  return exp(x);
}

static inline double futrts_cos64(double x) {
  return cos(x);
}

static inline double futrts_sin64(double x) {
  return sin(x);
}

static inline double futrts_tan64(double x) {
  return tan(x);
}

static inline double futrts_acos64(double x) {
  return acos(x);
}

static inline double futrts_asin64(double x) {
  return asin(x);
}

static inline double futrts_atan64(double x) {
  return atan(x);
}

static inline double futrts_cosh64(double x) {
  return (exp(x)+exp(-x)) / 2.0d;
}

static inline double futrts_sinh64(double x) {
  return (exp(x)-exp(-x)) / 2.0d;
}

static inline double futrts_tanh64(double x) {
  return futrts_sinh64(x)/futrts_cosh64(x);
}

static inline double futrts_acosh64(double x) {
  double f = x+sqrt(x*x-1.0d);
  if(futrts_isfinite64(f)) return log(f);
  return f;
}

static inline double futrts_asinh64(double x) {
  double f = x+sqrt(x*x+1.0d);
  if(futrts_isfinite64(f)) return log(f);
  return f;
}

static inline double futrts_atanh64(double x) {
  double f = (1.0d+x)/(1.0d-x);
  if(futrts_isfinite64(f)) return log(f)/2.0d;
  return f;

}

static inline double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

extern "C" unmasked uniform double hypot(uniform double x, uniform double y);
static inline double futrts_hypot64(double x, double y) {
  double res;
  foreach_active (i) {
    uniform double r = hypot(extract(x, i), extract(y, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double tgamma(uniform double x);
static inline double futrts_gamma64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = tgamma(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double lgamma(uniform double x);
static inline double futrts_lgamma64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = lgamma(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double erf(uniform double x);
static inline double futrts_erf64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = erf(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform double erfc(uniform double x);
static inline double futrts_erfc64(double x) {
  double res;
  foreach_active (i) {
    uniform double r = erfc(extract(x, i));
    res = insert(res, i, r);
  }
  return res;
}

static inline double futrts_fma64(double a, double b, double c) {
  return a * b + c;
}

static inline double futrts_round64(double x) {
  return round(x);
}

static inline double futrts_ceil64(double x) {
  return ceil(x);
}

extern "C" unmasked uniform double nextafter(uniform float x, uniform double y);
static inline float futrts_nextafter64(double x, double y) {
  double res;
  foreach_active (i) {
    uniform double r = nextafter(extract(x, i), extract(y, i));
    res = insert(res, i, r);
  }
  return res;
}

static inline double futrts_floor64(double x) {
  return floor(x);
}

static inline bool futrts_isnan64(double x) {
  return isnan(x);
}

static inline int8_t fptosi_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

static inline int16_t fptosi_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

static inline int32_t fptosi_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

static inline int64_t fptosi_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int64_t) x;
  }
}

static inline uint8_t fptoui_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

static inline uint16_t fptoui_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

static inline uint32_t fptoui_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

static inline uint64_t fptoui_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

static inline bool ftob_f64_bool(double x) {
  return x != 0.0;
}

static inline double btof_bool_f64(bool x) {
  return x ? 1.0 : 0.0;
}

static inline int64_t futrts_to_bits64(double x) {
  int64_t res;
  foreach_active (i) {
    uniform double tmp = extract(x, i);
    uniform int64_t r = *((uniform int64_t* uniform)&tmp);
    res = insert(res, i, r);
  }
  return res;
}

static inline double futrts_from_bits64(int64_t x) {
  double res;
  foreach_active (i) {
    uniform int64_t tmp = extract(x, i);
    uniform double r = *((uniform double* uniform)&tmp);
    res = insert(res, i, r);
  }
  return res;
}

static inline double fmod64(double x, double y) {
  return x - y * trunc(x/y);
}

static inline double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0 ? 1.0d : 0.0d) - (x < 0 ? 1.0d : 0.0d);
}

static inline double futrts_lerp64(double v0, double v1, double t) {
  return v0 + (v1 - v0) * t;
}

static inline double futrts_mad64(double a, double b, double c) {
  return a * b + c;
}

static inline float fpconv_f32_f32(float x) {
  return (float) x;
}

static inline double fpconv_f32_f64(float x) {
  return (double) x;
}

static inline float fpconv_f64_f32(double x) {
  return (float) x;
}

static inline double fpconv_f64_f64(double x) {
  return (double) x;
}

#else

static inline double fdiv64(double x, double y) {
  return x / y;
}

static inline double fadd64(double x, double y) {
  return x + y;
}

static inline double fsub64(double x, double y) {
  return x - y;
}

static inline double fmul64(double x, double y) {
  return x * y;
}

static inline bool cmplt64(double x, double y) {
  return x < y;
}

static inline bool cmple64(double x, double y) {
  return x <= y;
}

static inline double sitofp_i8_f64(int8_t x) {
  return (double) x;
}

static inline double sitofp_i16_f64(int16_t x) {
  return (double) x;
}

static inline double sitofp_i32_f64(int32_t x) {
  return (double) x;
}

static inline double sitofp_i64_f64(int64_t x) {
  return (double) x;
}

static inline double uitofp_i8_f64(uint8_t x) {
  return (double) x;
}

static inline double uitofp_i16_f64(uint16_t x) {
  return (double) x;
}

static inline double uitofp_i32_f64(uint32_t x) {
  return (double) x;
}

static inline double uitofp_i64_f64(uint64_t x) {
  return (double) x;
}

static inline double fabs64(double x) {
  return fabs(x);
}

static inline double fmax64(double x, double y) {
  return fmax(x, y);
}

static inline double fmin64(double x, double y) {
  return fmin(x, y);
}

static inline double fpow64(double x, double y) {
  return pow(x, y);
}

static inline double futrts_log64(double x) {
  return log(x);
}

static inline double futrts_log2_64(double x) {
  return log2(x);
}

static inline double futrts_log10_64(double x) {
  return log10(x);
}

static inline double futrts_sqrt64(double x) {
  return sqrt(x);
}

static inline double futrts_cbrt64(double x) {
  return cbrt(x);
}

static inline double futrts_exp64(double x) {
  return exp(x);
}

static inline double futrts_cos64(double x) {
  return cos(x);
}

static inline double futrts_sin64(double x) {
  return sin(x);
}

static inline double futrts_tan64(double x) {
  return tan(x);
}

static inline double futrts_acos64(double x) {
  return acos(x);
}

static inline double futrts_asin64(double x) {
  return asin(x);
}

static inline double futrts_atan64(double x) {
  return atan(x);
}

static inline double futrts_cosh64(double x) {
  return cosh(x);
}

static inline double futrts_sinh64(double x) {
  return sinh(x);
}

static inline double futrts_tanh64(double x) {
  return tanh(x);
}

static inline double futrts_acosh64(double x) {
  return acosh(x);
}

static inline double futrts_asinh64(double x) {
  return asinh(x);
}

static inline double futrts_atanh64(double x) {
  return atanh(x);
}

static inline double futrts_atan2_64(double x, double y) {
  return atan2(x, y);
}

static inline double futrts_hypot64(double x, double y) {
  return hypot(x, y);
}

static inline double futrts_gamma64(double x) {
  return tgamma(x);
}

static inline double futrts_lgamma64(double x) {
  return lgamma(x);
}

static inline double futrts_erf64(double x) {
  return erf(x);
}

static inline double futrts_erfc64(double x) {
  return erfc(x);
}

static inline double futrts_fma64(double a, double b, double c) {
  return fma(a, b, c);
}

static inline double futrts_round64(double x) {
  return rint(x);
}

static inline double futrts_ceil64(double x) {
  return ceil(x);
}

static inline float futrts_nextafter64(float x, float y) {
  return nextafter(x, y);
}

static inline double futrts_floor64(double x) {
  return floor(x);
}

static inline bool futrts_isnan64(double x) {
  return isnan(x);
}

static inline bool futrts_isinf64(double x) {
  return isinf(x);
}

static inline int8_t fptosi_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int8_t) x;
  }
}

static inline int16_t fptosi_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int16_t) x;
  }
}

static inline int32_t fptosi_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int32_t) x;
  }
}

static inline int64_t fptosi_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (int64_t) x;
  }
}

static inline uint8_t fptoui_f64_i8(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint8_t) (int8_t) x;
  }
}

static inline uint16_t fptoui_f64_i16(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint16_t) (int16_t) x;
  }
}

static inline uint32_t fptoui_f64_i32(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint32_t) (int32_t) x;
  }
}

static inline uint64_t fptoui_f64_i64(double x) {
  if (futrts_isnan64(x) || futrts_isinf64(x)) {
    return 0;
  } else {
    return (uint64_t) (int64_t) x;
  }
}

static inline bool ftob_f64_bool(double x) {
  return x != 0;
}

static inline double btof_bool_f64(bool x) {
  return x ? 1 : 0;
}

static inline int64_t futrts_to_bits64(double x) {
  union {
    double f;
    int64_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline double futrts_from_bits64(int64_t x) {
  union {
    int64_t f;
    double t;
  } p;

  p.f = x;
  return p.t;
}

static inline double fmod64(double x, double y) {
  return fmod(x, y);
}

static inline double fsignum64(double x) {
  return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}

static inline double futrts_lerp64(double v0, double v1, double t) {
#ifdef __OPENCL_VERSION__
  return mix(v0, v1, t);
#else
  return v0 + (v1 - v0) * t;
#endif
}

static inline double futrts_mad64(double a, double b, double c) {
#ifdef __OPENCL_VERSION__
  return mad(a, b, c);
#else
  return a * b + c;
#endif
}

static inline float fpconv_f32_f32(float x) {
  return (float) x;
}

static inline double fpconv_f32_f64(float x) {
  return (double) x;
}

static inline float fpconv_f64_f32(double x) {
  return (float) x;
}

static inline double fpconv_f64_f64(double x) {
  return (double) x;
}

#endif

#endif

// End of scalar.h.
// Start of scalar_f16.h.

// Half-precision is emulated if needed (e.g. in straight C) with the
// native type used if possible.  The emulation works by typedef'ing
// 'float' to 'f16', and then implementing all operations on single
// precision.  To cut down on duplication, we use the same code for
// those Futhark functions that require just operators or casts.  The
// in-memory representation for arrays will still be 16 bits even
// under emulation, so the compiler will have to be careful when
// generating reads or writes.

#if !defined(cl_khr_fp16) && !(defined(__CUDA_ARCH__) && __CUDA_ARCH__ >= 600) && !(defined(ISPC))
#define EMULATE_F16
#endif

#if !defined(EMULATE_F16) && defined(__OPENCL_VERSION__)
#pragma OPENCL EXTENSION cl_khr_fp16 : enable
#endif

#ifdef EMULATE_F16

// Note that the half-precision storage format is still 16 bits - the
// compiler will have to be real careful!
typedef float f16;

#elif ISPC
typedef float16 f16;

#else

#ifdef __CUDA_ARCH__
#include <cuda_fp16.h>
#endif

typedef half f16;

#endif

// Some of these functions convert to single precision because half
// precision versions are not available.

static inline f16 fadd16(f16 x, f16 y) {
  return x + y;
}

static inline f16 fsub16(f16 x, f16 y) {
  return x - y;
}

static inline f16 fmul16(f16 x, f16 y) {
  return x * y;
}

static inline bool cmplt16(f16 x, f16 y) {
  return x < y;
}

static inline bool cmple16(f16 x, f16 y) {
  return x <= y;
}

static inline f16 sitofp_i8_f16(int8_t x) {
  return (f16) x;
}

static inline f16 sitofp_i16_f16(int16_t x) {
  return (f16) x;
}

static inline f16 sitofp_i32_f16(int32_t x) {
  return (f16) x;
}

static inline f16 sitofp_i64_f16(int64_t x) {
  return (f16) x;
}

static inline f16 uitofp_i8_f16(uint8_t x) {
  return (f16) x;
}

static inline f16 uitofp_i16_f16(uint16_t x) {
  return (f16) x;
}

static inline f16 uitofp_i32_f16(uint32_t x) {
  return (f16) x;
}

static inline f16 uitofp_i64_f16(uint64_t x) {
  return (f16) x;
}

static inline int8_t fptosi_f16_i8(f16 x) {
  return (int8_t) (float) x;
}

static inline int16_t fptosi_f16_i16(f16 x) {
  return (int16_t) x;
}

static inline int32_t fptosi_f16_i32(f16 x) {
  return (int32_t) x;
}

static inline int64_t fptosi_f16_i64(f16 x) {
  return (int64_t) x;
}

static inline uint8_t fptoui_f16_i8(f16 x) {
  return (uint8_t) (float) x;
}

static inline uint16_t fptoui_f16_i16(f16 x) {
  return (uint16_t) x;
}

static inline uint32_t fptoui_f16_i32(f16 x) {
  return (uint32_t) x;
}

static inline uint64_t fptoui_f16_i64(f16 x) {
  return (uint64_t) x;
}

static inline bool ftob_f16_bool(f16 x) {
  return x != (f16)0;
}

static inline f16 btof_bool_f16(bool x) {
  return x ? 1 : 0;
}

#ifndef EMULATE_F16
static inline bool futrts_isnan16(f16 x) {
  return isnan((float)x);
}

#ifdef __OPENCL_VERSION__

static inline f16 fabs16(f16 x) {
  return fabs(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}

#elif ISPC
static inline f16 fabs16(f16 x) {
  return abs(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return futrts_isnan16(x) ? y : futrts_isnan16(y) ? x : max(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return futrts_isnan16(x) ? y : futrts_isnan16(y) ? x : min(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return pow(x, y);
}
#else // Assuming CUDA.

static inline f16 fabs16(f16 x) {
  return fabsf(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmaxf(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fminf(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return powf(x, y);
}
#endif

#if ISPC
static inline bool futrts_isinf16(float x) {
  return !futrts_isnan16(x) && futrts_isnan16(x - x);
}
static inline bool futrts_isfinite16(float x) {
  return !futrts_isnan16(x) && !futrts_isinf16(x);
}

#else

static inline bool futrts_isinf16(f16 x) {
  return isinf((float)x);
}
#endif

#ifdef __OPENCL_VERSION__
static inline f16 futrts_log16(f16 x) {
  return log(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return log2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return log10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return sqrt(x);
}

static inline f16 futrts_cbrt16(f16 x) {
  return cbrt(x);
}

static inline f16 futrts_exp16(f16 x) {
  return exp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return cos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return sin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tan(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acos(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asin(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atan(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return cosh(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinh(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanh(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acosh(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinh(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanh(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypot(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgamma(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgamma(x);
}

static inline f16 futrts_erf16(f16 x) {
  return erf(x);
}

static inline f16 futrts_erfc16(f16 x) {
  return erfc(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rint(x);
}

static inline f16 futrts_floor16(f16 x) {
  return floor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return ceil(x);
}

static inline f16 futrts_nextafter16(f16 x, f16 y) {
  return nextafter(x, y);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return mix(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return mad(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fma(a, b, c);
}
#elif ISPC

static inline f16 futrts_log16(f16 x) {
  return futrts_isfinite16(x) || (futrts_isinf16(x) && x < 0) ? log(x) : x;
}

static inline f16 futrts_log2_16(f16 x) {
  return futrts_log16(x) / log(2.0f16);
}

static inline f16 futrts_log10_16(f16 x) {
  return futrts_log16(x) / log(10.0f16);
}

static inline f16 futrts_sqrt16(f16 x) {
  return (float16)sqrt((float)x);
}

static inline f16 futrts_exp16(f16 x) {
  return exp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return (float16)cos((float)x);
}

static inline f16 futrts_sin16(f16 x) {
  return (float16)sin((float)x);
}

static inline f16 futrts_tan16(f16 x) {
  return (float16)tan((float)x);
}

static inline f16 futrts_acos16(f16 x) {
  return (float16)acos((float)x);
}

static inline f16 futrts_asin16(f16 x) {
  return (float16)asin((float)x);
}

static inline f16 futrts_atan16(f16 x) {
  return (float16)atan((float)x);
}

static inline f16 futrts_cosh16(f16 x) {
  return (exp(x)+exp(-x)) / 2.0f16;
}

static inline f16 futrts_sinh16(f16 x) {
  return (exp(x)-exp(-x)) / 2.0f16;
}

static inline f16 futrts_tanh16(f16 x) {
  return futrts_sinh16(x)/futrts_cosh16(x);
}

static inline f16 futrts_acosh16(f16 x) {
  float16 f = x+(float16)sqrt((float)(x*x-1));
  if(futrts_isfinite16(f)) return log(f);
  return f;
}

static inline f16 futrts_asinh16(f16 x) {
  float16 f = x+(float16)sqrt((float)(x*x+1));
  if(futrts_isfinite16(f)) return log(f);
  return f;
}

static inline f16 futrts_atanh16(f16 x) {
  float16 f = (1+x)/(1-x);
  if(futrts_isfinite16(f)) return log(f)/2.0f16;
  return f;
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return (float16)atan2((float)x, (float)y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return (float16)futrts_hypot32((float)x, (float)y);
}

extern "C" unmasked uniform float tgammaf(uniform float x);
static inline f16 futrts_gamma16(f16 x) {
  f16 res;
  foreach_active (i) {
    uniform f16 r = (f16)tgammaf(extract((float)x, i));
    res = insert(res, i, r);
  }
  return res;
}

extern "C" unmasked uniform float lgammaf(uniform float x);
static inline f16 futrts_lgamma16(f16 x) {
  f16 res;
  foreach_active (i) {
    uniform f16 r = (f16)lgammaf(extract((float)x, i));
    res = insert(res, i, r);
  }
  return res;
}

static inline f16 futrts_cbrt16(f16 x) {
  f16 res = (f16)futrts_cbrt32((float)x);
  return res;
}

static inline f16 futrts_erf16(f16 x) {
  f16 res = (f16)futrts_erf32((float)x);
  return res;
}

static inline f16 futrts_erfc16(f16 x) {
  f16 res = (f16)futrts_erfc32((float)x);
  return res;
}

static inline f16 fmod16(f16 x, f16 y) {
  return x - y * (float16)trunc((float) (x/y));
}

static inline f16 futrts_round16(f16 x) {
  return (float16)round((float)x);
}

static inline f16 futrts_floor16(f16 x) {
  return (float16)floor((float)x);
}

static inline f16 futrts_ceil16(f16 x) {
  return (float16)ceil((float)x);
}

static inline f16 futrts_nextafter16(f16 x, f16 y) {
  return (float16)futrts_nextafter32((float)x, (float) y);
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

#else // Assume CUDA.

static inline f16 futrts_log16(f16 x) {
  return hlog(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return hlog2(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return hlog10(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return hsqrt(x);
}

static inline f16 futrts_cbrt16(f16 x) {
  return cbrtf(x);
}

static inline f16 futrts_exp16(f16 x) {
  return hexp(x);
}

static inline f16 futrts_cos16(f16 x) {
  return hcos(x);
}

static inline f16 futrts_sin16(f16 x) {
  return hsin(x);
}

static inline f16 futrts_tan16(f16 x) {
  return tanf(x);
}

static inline f16 futrts_acos16(f16 x) {
  return acosf(x);
}

static inline f16 futrts_asin16(f16 x) {
  return asinf(x);
}

static inline f16 futrts_atan16(f16 x) {
  return atanf(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return coshf(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return sinhf(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return tanhf(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return acoshf(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return asinhf(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return atanhf(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return atan2f(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return hypotf(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return tgammaf(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return lgammaf(x);
}

static inline f16 futrts_erf16(f16 x) {
  return erff(x);
}

static inline f16 futrts_erfc16(f16 x) {
  return erfcf(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmodf(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return rintf(x);
}

static inline f16 futrts_floor16(f16 x) {
  return hfloor(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return hceil(x);
}

static inline f16 futrts_nextafter16(f16 x, f16 y) {
  return __ushort_as_half(halfbitsnextafter(__half_as_ushort(x), __half_as_ushort(y)));
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return v0 + (v1 - v0) * t;
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return a * b + c;
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return fmaf(a, b, c);
}

#endif

// The CUDA __half type cannot be put in unions for some reason, so we
// use bespoke conversion functions instead.
#ifdef __CUDA_ARCH__
static inline int16_t futrts_to_bits16(f16 x) {
  return __half_as_ushort(x);
}
static inline f16 futrts_from_bits16(int16_t x) {
  return __ushort_as_half(x);
}
#elif ISPC

static inline int16_t futrts_to_bits16(f16 x) {
  varying int16_t y = *((varying int16_t * uniform)&x);
  return y;
}

static inline f16 futrts_from_bits16(int16_t x) {
  varying f16 y = *((varying f16 * uniform)&x);
  return y;
}
#else
static inline int16_t futrts_to_bits16(f16 x) {
  union {
    f16 f;
    int16_t t;
  } p;

  p.f = x;
  return p.t;
}

static inline f16 futrts_from_bits16(int16_t x) {
  union {
    int16_t f;
    f16 t;
  } p;

  p.f = x;
  return p.t;
}
#endif

#else // No native f16 - emulate.

static inline f16 fabs16(f16 x) {
  return fabs32(x);
}

static inline f16 fmax16(f16 x, f16 y) {
  return fmax32(x, y);
}

static inline f16 fmin16(f16 x, f16 y) {
  return fmin32(x, y);
}

static inline f16 fpow16(f16 x, f16 y) {
  return fpow32(x, y);
}

static inline bool futrts_isnan16(f16 x) {
  return futrts_isnan32(x);
}

static inline bool futrts_isinf16(f16 x) {
  return futrts_isinf32(x);
}

static inline f16 futrts_log16(f16 x) {
  return futrts_log32(x);
}

static inline f16 futrts_log2_16(f16 x) {
  return futrts_log2_32(x);
}

static inline f16 futrts_log10_16(f16 x) {
  return futrts_log10_32(x);
}

static inline f16 futrts_sqrt16(f16 x) {
  return futrts_sqrt32(x);
}

static inline f16 futrts_cbrt16(f16 x) {
  return futrts_cbrt32(x);
}

static inline f16 futrts_exp16(f16 x) {
  return futrts_exp32(x);
}

static inline f16 futrts_cos16(f16 x) {
  return futrts_cos32(x);
}

static inline f16 futrts_sin16(f16 x) {
  return futrts_sin32(x);
}

static inline f16 futrts_tan16(f16 x) {
  return futrts_tan32(x);
}

static inline f16 futrts_acos16(f16 x) {
  return futrts_acos32(x);
}

static inline f16 futrts_asin16(f16 x) {
  return futrts_asin32(x);
}

static inline f16 futrts_atan16(f16 x) {
  return futrts_atan32(x);
}

static inline f16 futrts_cosh16(f16 x) {
  return futrts_cosh32(x);
}

static inline f16 futrts_sinh16(f16 x) {
  return futrts_sinh32(x);
}

static inline f16 futrts_tanh16(f16 x) {
  return futrts_tanh32(x);
}

static inline f16 futrts_acosh16(f16 x) {
  return futrts_acosh32(x);
}

static inline f16 futrts_asinh16(f16 x) {
  return futrts_asinh32(x);
}

static inline f16 futrts_atanh16(f16 x) {
  return futrts_atanh32(x);
}

static inline f16 futrts_atan2_16(f16 x, f16 y) {
  return futrts_atan2_32(x, y);
}

static inline f16 futrts_hypot16(f16 x, f16 y) {
  return futrts_hypot32(x, y);
}

static inline f16 futrts_gamma16(f16 x) {
  return futrts_gamma32(x);
}

static inline f16 futrts_lgamma16(f16 x) {
  return futrts_lgamma32(x);
}

static inline f16 futrts_erf16(f16 x) {
  return futrts_erf32(x);
}

static inline f16 futrts_erfc16(f16 x) {
  return futrts_erfc32(x);
}

static inline f16 fmod16(f16 x, f16 y) {
  return fmod32(x, y);
}

static inline f16 futrts_round16(f16 x) {
  return futrts_round32(x);
}

static inline f16 futrts_floor16(f16 x) {
  return futrts_floor32(x);
}

static inline f16 futrts_ceil16(f16 x) {
  return futrts_ceil32(x);
}

static inline f16 futrts_nextafter16(f16 x, f16 y) {
  return halfbits2float(halfbitsnextafter(float2halfbits(x), float2halfbits(y)));
}

static inline f16 futrts_lerp16(f16 v0, f16 v1, f16 t) {
  return futrts_lerp32(v0, v1, t);
}

static inline f16 futrts_mad16(f16 a, f16 b, f16 c) {
  return futrts_mad32(a, b, c);
}

static inline f16 futrts_fma16(f16 a, f16 b, f16 c) {
  return futrts_fma32(a, b, c);
}

// Even when we are using an OpenCL that does not support cl_khr_fp16,
// it must still support vload_half for actually creating a
// half-precision number, which can then be efficiently converted to a
// float.  Similarly for vstore_half.
#ifdef __OPENCL_VERSION__

static inline int16_t futrts_to_bits16(f16 x) {
  int16_t y;
  // Violating strict aliasing here.
  vstore_half((float)x, 0, (half*)&y);
  return y;
}

static inline f16 futrts_from_bits16(int16_t x) {
  return (f16)vload_half(0, (half*)&x);
}

#else

static inline int16_t futrts_to_bits16(f16 x) {
  return (int16_t)float2halfbits(x);
}

static inline f16 futrts_from_bits16(int16_t x) {
  return halfbits2float((uint16_t)x);
}

static inline f16 fsignum16(f16 x) {
  return futrts_isnan16(x) ? x : (x > 0 ? 1 : 0) - (x < 0 ? 1 : 0);
}

#endif

#endif

static inline float fpconv_f16_f16(f16 x) {
  return x;
}

static inline float fpconv_f16_f32(f16 x) {
  return x;
}

static inline f16 fpconv_f32_f16(float x) {
  return (f16) x;
}

#ifdef FUTHARK_F64_ENABLED

static inline double fpconv_f16_f64(f16 x) {
  return (double) x;
}

#if ISPC
static inline f16 fpconv_f64_f16(double x) {
  return (f16) ((float)x);
}
#else
static inline f16 fpconv_f64_f16(double x) {
  return (f16) x;
}
#endif
#endif


// End of scalar_f16.h.

// Start of context_prototypes.h
//
// Prototypes for the functions in prototypes.h that need to be
// available very early.

struct futhark_context_config;
struct futhark_context;

static void set_error(struct futhark_context* ctx, char *error);

// End of of context_prototypes.h

static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    unsigned char *mem;
    int64_t size;
    const char *desc;
};
struct futhark_context_config {
    int debugging;
    int in_use;
    const char *cache_fname;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg = (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->in_use = 0;
    cfg->debugging = 0;
    cfg->cache_fname = NULL;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg, int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg, int flag)
{
    (void) cfg;
    (void) flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg, int detail)
{
    // Does nothing for this backend.
    (void) cfg;
    (void) detail;
}
struct futhark_context {
    struct futhark_context_config *cfg;
    int detail_memory;
    int debugging;
    int profiling;
    int logging;
    lock_t lock;
    char *error;
    lock_t error_lock;
    FILE *log;
    int profiling_paused;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    assert(!cfg->in_use);
    
    struct futhark_context *ctx = (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    ctx->cfg = cfg;
    ctx->cfg->in_use = 1;
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->debugging;
    ctx->logging = cfg->debugging;
    ctx->error = NULL;
    create_lock(&ctx->error_lock);
    ctx->log = stderr;
    create_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    free_lock(&ctx->lock);
    ctx->cfg->in_use = 0;
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *tuning_param_names[0];
static const char *tuning_param_vars[0];
static const char *tuning_param_classes[0];
int futhark_context_config_set_tuning_param(struct futhark_context_config *cfg, const char *param_name, size_t param_value)
{
    (void) cfg;
    (void) param_name;
    (void) param_value;
    return 1;
}
int memblock_unref(struct futhark_context *ctx, struct memblock *block, const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log, "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n", desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log, "%lld bytes freed (now allocated: %lld bytes)\n", (long long) block->size, (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
int memblock_alloc(struct futhark_context *ctx, struct memblock *block, int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1, "Negative allocation of %lld bytes attempted for %s in %s.\n", (long long) size, desc, "default space", ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    if (ret != FUTHARK_SUCCESS)
        return ret;
    if (ctx->detail_memory)
        fprintf(ctx->log, "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)", (long long) size, desc, "default space", (long long) ctx->cur_mem_usage_default + size);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (unsigned char *) malloc((size_t) size);
    if (ctx->error == NULL) {
        block->references = (int *) malloc(sizeof(int));
        *block->references = 1;
        block->size = size;
        block->desc = desc;
        ctx->cur_mem_usage_default += size;
        return FUTHARK_SUCCESS;
    } else {
        // We are naively assuming that any memory allocation error is due to OOM.
        lock_lock(&ctx->error_lock);
        
        char *old_error = ctx->error;
        
        ctx->error = msgprintf("Failed to allocate memory in %s.\nAttempted allocation: %12lld bytes\nCurrently allocated:  %12lld bytes\n%s", "default space", (long long) size, (long long) ctx->cur_mem_usage_default, old_error);
        free(old_error);
        lock_unlock(&ctx->error_lock);
        return FUTHARK_OUT_OF_MEMORY;
    }
}
int memblock_set(struct futhark_context *ctx, struct memblock *lhs, struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
void futhark_context_config_set_cache_file(struct futhark_context_config *cfg, const char *f)
{
    cfg->cache_fname = f;
}
int futhark_get_tuning_param_count(void)
{
    return sizeof(tuning_param_names) / sizeof(tuning_param_names[0]);
}
const char *futhark_get_tuning_param_name(int i)
{
    return tuning_param_names[i];
}
const char *futhark_get_tuning_param_class(int i)
{
    return tuning_param_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    { }
    if (ctx->profiling) { }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}

// Start of context.h

// Eventually it would be nice to move the context definition in here
// instead of generating it in the compiler.  For now it defines
// various helper functions that must be available.

// Internal functions.

static void set_error(struct futhark_context* ctx, char *error) {
  lock_lock(&ctx->error_lock);
  if (ctx->error == NULL) {
    ctx->error = error;
  } else {
    free(error);
  }
  lock_unlock(&ctx->error_lock);
}

// XXX: should be static, but used in ispc_util.h
void lexical_realloc_error(struct futhark_context* ctx, size_t new_size) {
  set_error(ctx,
            msgprintf("Failed to allocate memory.\nAttempted allocation: %12lld bytes\n",
                      (long long) new_size));
}

static int lexical_realloc(struct futhark_context *ctx,
                           unsigned char **ptr,
                           int64_t *old_size,
                           int64_t new_size) {
  unsigned char *new = realloc(*ptr, (size_t)new_size);
  if (new == NULL) {
    lexical_realloc_error(ctx, new_size);
    return FUTHARK_OUT_OF_MEMORY;
  } else {
    *ptr = new;
    *old_size = new_size;
    return FUTHARK_SUCCESS;
  }
}

// End of context.h

static int futrts_entry_hgoInteraction(struct futhark_context *ctx, struct memblock *mem_out_p_236134, int64_t *out_prim_out_236135, struct memblock locations_mem_234529, struct memblock orientations_mem_234530, int64_t nz2085U_192338, float epsilon_192339, float sigma_par_192340, float sigma_ort_192341);
static int futrts_entry_hgoPotential(struct futhark_context *ctx, float *out_prim_out_236208, struct memblock location_mem_234529, struct memblock orientation_mem_234530, float epsilon_146344, float sigma_par_146345, float sigma_ort_146346);
static int futrts_entry_networkInteraction(struct futhark_context *ctx, struct memblock *mem_out_p_236209, int64_t *out_prim_out_236210, struct memblock z31U_mem_234529, struct memblock z31U_mem_234530, struct memblock z31U_mem_234531, struct memblock z31U_mem_234532, struct memblock z31U_mem_234533, struct memblock z31U_mem_234534, struct memblock z31U_mem_234535, struct memblock z31U_mem_234536, struct memblock z31U_mem_234537, struct memblock z31U_mem_234538, struct memblock z31U_mem_234539, struct memblock z31U_mem_234540, struct memblock z31U_mem_234541, struct memblock locations_mem_234542, struct memblock orientations_mem_234543, int64_t dz2080U_189274, int64_t dz2081U_189275, int64_t nz2084U_189276, int8_t z30U_189277, float z30U_189278, float z30U_189279, float z30U_189280, float z30U_189281, float z30U_189282, float z30U_189283, float z30U_189284, float z30U_189285, float z30U_189286, float z30U_189287, float z30U_189288, float z30U_189289, float z30U_189290, int32_t z30U_189291);
static int futrts_entry_networkPotential(struct futhark_context *ctx, float *out_prim_out_236294, struct memblock z31U_mem_234529, struct memblock z31U_mem_234530, struct memblock z31U_mem_234531, struct memblock z31U_mem_234532, struct memblock z31U_mem_234533, struct memblock z31U_mem_234534, struct memblock z31U_mem_234535, struct memblock z31U_mem_234536, struct memblock z31U_mem_234537, struct memblock z31U_mem_234538, struct memblock z31U_mem_234539, struct memblock z31U_mem_234540, struct memblock z31U_mem_234541, struct memblock location_mem_234542, struct memblock orientation_mem_234543, int64_t dz2080U_146213, int64_t dz2081U_146214, int8_t z30U_146215, float z30U_146216, float z30U_146217, float z30U_146218, float z30U_146219, float z30U_146220, float z30U_146221, float z30U_146222, float z30U_146223, float z30U_146224, float z30U_146225, float z30U_146226, float z30U_146227, float z30U_146228, int32_t z30U_146229);

static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_f32_1d {
    struct memblock mem;
    int64_t shape[1];
};
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx, const float *data, int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 4 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) dim0 * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx, const unsigned char *data, int64_t offset, int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr = (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * 4 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) dim0 * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr, float *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * 4 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) arr->shape[0] * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const float *data, int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr = (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 4 > 0)
        memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const unsigned char *data, int64_t offset, int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr = (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, dim0 * dim1 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * 4 > 0)
        memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) (arr->shape[0] * arr->shape[1]) * 4 > 0)
        memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] * arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
unsigned char *futhark_values_raw_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_opaque_particleType {
    int8_t v0;
    float v1;
    float v2;
    float v3;
    float v4;
    float v5;
    float v6;
    float v7;
    float v8;
    float v9;
    float v10;
    float v11;
    float v12;
};
int futhark_free_opaque_particleType(struct futhark_context *ctx, struct futhark_opaque_particleType *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    free(obj);
    return ret;
}
int futhark_store_opaque_particleType(struct futhark_context *ctx, const struct futhark_opaque_particleType *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 0 * sizeof(int64_t) + 1 * 1;
    int64_t size_1 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_2 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_3 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_4 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_5 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_6 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_7 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_8 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_9 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_10 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_11 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_12 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    
    *n = size_0 + size_1 + size_2 + size_3 + size_4 + size_5 + size_6 + size_7 + size_8 + size_9 + size_10 + size_11 + size_12;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, "  i8", 4);
        out += 4;
        memcpy(out, &obj->v0, sizeof(obj->v0));
        out += sizeof(obj->v0);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v1, sizeof(obj->v1));
        out += sizeof(obj->v1);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v2, sizeof(obj->v2));
        out += sizeof(obj->v2);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v3, sizeof(obj->v3));
        out += sizeof(obj->v3);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v4, sizeof(obj->v4));
        out += sizeof(obj->v4);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v5, sizeof(obj->v5));
        out += sizeof(obj->v5);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v6, sizeof(obj->v6));
        out += sizeof(obj->v6);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v7, sizeof(obj->v7));
        out += sizeof(obj->v7);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v8, sizeof(obj->v8));
        out += sizeof(obj->v8);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v9, sizeof(obj->v9));
        out += sizeof(obj->v9);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v10, sizeof(obj->v10));
        out += sizeof(obj->v10);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v11, sizeof(obj->v11));
        out += sizeof(obj->v11);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v12, sizeof(obj->v12));
        out += sizeof(obj->v12);
    }
    return ret;
}
struct futhark_opaque_particleType *futhark_restore_opaque_particleType(struct futhark_context *ctx, const void *p)
{
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_particleType *obj = malloc(sizeof(struct futhark_opaque_particleType));
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, "  i8", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    src += sizeof(obj->v0);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    src += sizeof(obj->v1);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    src += sizeof(obj->v2);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_3 = src;
    
    src += sizeof(obj->v3);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_4 = src;
    
    src += sizeof(obj->v4);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_5 = src;
    
    src += sizeof(obj->v5);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_6 = src;
    
    src += sizeof(obj->v6);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_7 = src;
    
    src += sizeof(obj->v7);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_8 = src;
    
    src += sizeof(obj->v8);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_9 = src;
    
    src += sizeof(obj->v9);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_10 = src;
    
    src += sizeof(obj->v10);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_11 = src;
    
    src += sizeof(obj->v11);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_12 = src;
    
    src += sizeof(obj->v12);
    if (err == 0) {
        memcpy(&obj->v0, data_0, sizeof(obj->v0));
        memcpy(&obj->v1, data_1, sizeof(obj->v1));
        memcpy(&obj->v2, data_2, sizeof(obj->v2));
        memcpy(&obj->v3, data_3, sizeof(obj->v3));
        memcpy(&obj->v4, data_4, sizeof(obj->v4));
        memcpy(&obj->v5, data_5, sizeof(obj->v5));
        memcpy(&obj->v6, data_6, sizeof(obj->v6));
        memcpy(&obj->v7, data_7, sizeof(obj->v7));
        memcpy(&obj->v8, data_8, sizeof(obj->v8));
        memcpy(&obj->v9, data_9, sizeof(obj->v9));
        memcpy(&obj->v10, data_10, sizeof(obj->v10));
        memcpy(&obj->v11, data_11, sizeof(obj->v11));
        memcpy(&obj->v12, data_12, sizeof(obj->v12));
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_e9a0e68b {
    int8_t v0;
    float v1;
    float v2;
    float v3;
    float v4;
    float v5;
    float v6;
    float v7;
    float v8;
    float v9;
    float v10;
    float v11;
    float v12;
    float v13;
    int32_t v14;
};
int futhark_project_opaque_e9a0e68b_0(struct futhark_context *ctx, struct futhark_opaque_particleType **out, const struct futhark_opaque_e9a0e68b *obj)
{
    (void) ctx;
    
    struct futhark_opaque_particleType *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_opaque_particleType));
    v->v0 = obj->v0;
    v->v1 = obj->v1;
    v->v2 = obj->v2;
    v->v3 = obj->v3;
    v->v4 = obj->v4;
    v->v5 = obj->v5;
    v->v6 = obj->v6;
    v->v7 = obj->v7;
    v->v8 = obj->v8;
    v->v9 = obj->v9;
    v->v10 = obj->v10;
    v->v11 = obj->v11;
    v->v12 = obj->v12;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_e9a0e68b_1(struct futhark_context *ctx, float *out, const struct futhark_opaque_e9a0e68b *obj)
{
    (void) ctx;
    
    float v;
    
    v = obj->v13;
    *out = v;
    return 0;
}
int futhark_project_opaque_e9a0e68b_2(struct futhark_context *ctx, int32_t *out, const struct futhark_opaque_e9a0e68b *obj)
{
    (void) ctx;
    
    int32_t v;
    
    v = obj->v14;
    *out = v;
    return 0;
}
int futhark_new_opaque_e9a0e68b(struct futhark_context *ctx, struct futhark_opaque_e9a0e68b **out, const struct futhark_opaque_particleType *v0, const float v1, const int32_t v2)
{
    struct futhark_opaque_e9a0e68b *v = malloc(sizeof(struct futhark_opaque_e9a0e68b));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = v0->v0;
        v->v1 = v0->v1;
        v->v2 = v0->v2;
        v->v3 = v0->v3;
        v->v4 = v0->v4;
        v->v5 = v0->v5;
        v->v6 = v0->v6;
        v->v7 = v0->v7;
        v->v8 = v0->v8;
        v->v9 = v0->v9;
        v->v10 = v0->v10;
        v->v11 = v0->v11;
        v->v12 = v0->v12;
    }
    v->v13 = v1;
    v->v14 = v2;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_free_opaque_e9a0e68b(struct futhark_context *ctx, struct futhark_opaque_e9a0e68b *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    free(obj);
    return ret;
}
int futhark_store_opaque_e9a0e68b(struct futhark_context *ctx, const struct futhark_opaque_e9a0e68b *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 0 * sizeof(int64_t) + 1 * 1;
    int64_t size_1 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_2 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_3 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_4 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_5 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_6 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_7 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_8 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_9 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_10 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_11 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_12 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_13 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_14 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    
    *n = size_0 + size_1 + size_2 + size_3 + size_4 + size_5 + size_6 + size_7 + size_8 + size_9 + size_10 + size_11 + size_12 + size_13 + size_14;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, "  i8", 4);
        out += 4;
        memcpy(out, &obj->v0, sizeof(obj->v0));
        out += sizeof(obj->v0);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v1, sizeof(obj->v1));
        out += sizeof(obj->v1);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v2, sizeof(obj->v2));
        out += sizeof(obj->v2);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v3, sizeof(obj->v3));
        out += sizeof(obj->v3);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v4, sizeof(obj->v4));
        out += sizeof(obj->v4);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v5, sizeof(obj->v5));
        out += sizeof(obj->v5);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v6, sizeof(obj->v6));
        out += sizeof(obj->v6);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v7, sizeof(obj->v7));
        out += sizeof(obj->v7);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v8, sizeof(obj->v8));
        out += sizeof(obj->v8);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v9, sizeof(obj->v9));
        out += sizeof(obj->v9);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v10, sizeof(obj->v10));
        out += sizeof(obj->v10);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v11, sizeof(obj->v11));
        out += sizeof(obj->v11);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v12, sizeof(obj->v12));
        out += sizeof(obj->v12);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v13, sizeof(obj->v13));
        out += sizeof(obj->v13);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " i32", 4);
        out += 4;
        memcpy(out, &obj->v14, sizeof(obj->v14));
        out += sizeof(obj->v14);
    }
    return ret;
}
struct futhark_opaque_e9a0e68b *futhark_restore_opaque_e9a0e68b(struct futhark_context *ctx, const void *p)
{
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_e9a0e68b *obj = malloc(sizeof(struct futhark_opaque_e9a0e68b));
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, "  i8", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    src += sizeof(obj->v0);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    src += sizeof(obj->v1);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    src += sizeof(obj->v2);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_3 = src;
    
    src += sizeof(obj->v3);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_4 = src;
    
    src += sizeof(obj->v4);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_5 = src;
    
    src += sizeof(obj->v5);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_6 = src;
    
    src += sizeof(obj->v6);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_7 = src;
    
    src += sizeof(obj->v7);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_8 = src;
    
    src += sizeof(obj->v8);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_9 = src;
    
    src += sizeof(obj->v9);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_10 = src;
    
    src += sizeof(obj->v10);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_11 = src;
    
    src += sizeof(obj->v11);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_12 = src;
    
    src += sizeof(obj->v12);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_13 = src;
    
    src += sizeof(obj->v13);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " i32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_14 = src;
    
    src += sizeof(obj->v14);
    if (err == 0) {
        memcpy(&obj->v0, data_0, sizeof(obj->v0));
        memcpy(&obj->v1, data_1, sizeof(obj->v1));
        memcpy(&obj->v2, data_2, sizeof(obj->v2));
        memcpy(&obj->v3, data_3, sizeof(obj->v3));
        memcpy(&obj->v4, data_4, sizeof(obj->v4));
        memcpy(&obj->v5, data_5, sizeof(obj->v5));
        memcpy(&obj->v6, data_6, sizeof(obj->v6));
        memcpy(&obj->v7, data_7, sizeof(obj->v7));
        memcpy(&obj->v8, data_8, sizeof(obj->v8));
        memcpy(&obj->v9, data_9, sizeof(obj->v9));
        memcpy(&obj->v10, data_10, sizeof(obj->v10));
        memcpy(&obj->v11, data_11, sizeof(obj->v11));
        memcpy(&obj->v12, data_12, sizeof(obj->v12));
        memcpy(&obj->v13, data_13, sizeof(obj->v13));
        memcpy(&obj->v14, data_14, sizeof(obj->v14));
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_c5da5e9b {
    struct futhark_f32_1d *v0;
    struct futhark_f32_1d *v1;
    struct futhark_f32_1d *v2;
    struct futhark_f32_1d *v3;
    struct futhark_f32_1d *v4;
    struct futhark_f32_1d *v5;
};
int futhark_free_opaque_c5da5e9b(struct futhark_context *ctx, struct futhark_opaque_c5da5e9b *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    if (obj->v3 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v3)) != 0)
        ret = tmp;
    if (obj->v4 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v4)) != 0)
        ret = tmp;
    if (obj->v5 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v5)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_c5da5e9b(struct futhark_context *ctx, const struct futhark_opaque_c5da5e9b *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v0)[0] * 4;
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v1)[0] * 4;
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v2)[0] * 4;
    int64_t size_3 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v3)[0] * 4;
    int64_t size_4 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v4)[0] * 4;
    int64_t size_5 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v5)[0] * 4;
    
    *n = size_0 + size_1 + size_2 + size_3 + size_4 + size_5;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v0)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v1)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v2)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v3), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v3, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v3)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v4), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v4, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v4)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v5), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v5, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v5)[0] * 4;
    }
    return ret;
}
struct futhark_opaque_c5da5e9b *futhark_restore_opaque_c5da5e9b(struct futhark_context *ctx, const void *p)
{
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_c5da5e9b *obj = malloc(sizeof(struct futhark_opaque_c5da5e9b));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * 4;
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * 4;
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * 4;
    
    int64_t shape_3[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_3, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_3 = src;
    
    obj->v3 = NULL;
    src += shape_3[0] * 4;
    
    int64_t shape_4[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_4, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_4 = src;
    
    obj->v4 = NULL;
    src += shape_4[0] * 4;
    
    int64_t shape_5[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_5, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_5 = src;
    
    obj->v5 = NULL;
    src += shape_5[0] * 4;
    if (err == 0) {
        obj->v0 = futhark_new_f32_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_f32_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_f32_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
        obj->v3 = futhark_new_f32_1d(ctx, data_3, shape_3[0]);
        if (obj->v3 == NULL)
            err = 1;
        obj->v4 = futhark_new_f32_1d(ctx, data_4, shape_4[0]);
        if (obj->v4 == NULL)
            err = 1;
        obj->v5 = futhark_new_f32_1d(ctx, data_5, shape_5[0]);
        if (obj->v5 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        if (obj->v3 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v3)) != 0)
            ret = tmp;
        if (obj->v4 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v4)) != 0)
            ret = tmp;
        if (obj->v5 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v5)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_f270e689 {
    struct futhark_f32_2d *v0;
    struct futhark_f32_1d *v1;
};
int futhark_project_opaque_f270e689_0(struct futhark_context *ctx, struct futhark_f32_2d **out, const struct futhark_opaque_f270e689 *obj)
{
    (void) ctx;
    
    struct futhark_f32_2d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f32_2d));
    memcpy(v, obj->v0, sizeof(struct futhark_f32_2d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_f270e689_1(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_f270e689 *obj)
{
    (void) ctx;
    
    struct futhark_f32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f32_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_f32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_f270e689(struct futhark_context *ctx, struct futhark_opaque_f270e689 **out, const struct futhark_f32_2d *v0, const struct futhark_f32_1d *v1)
{
    struct futhark_opaque_f270e689 *v = malloc(sizeof(struct futhark_opaque_f270e689));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_f32_2d));
        *v->v0 = *v0;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_f32_1d));
        *v->v1 = *v1;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_free_opaque_f270e689(struct futhark_context *ctx, struct futhark_opaque_f270e689 *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_f270e689(struct futhark_context *ctx, const struct futhark_opaque_f270e689 *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v0)[0] * futhark_shape_f32_2d(ctx, obj->v0)[1] * 4;
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v1)[0] * 4;
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v0), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v0, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v0)[0] * futhark_shape_f32_2d(ctx, obj->v0)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v1)[0] * 4;
    }
    return ret;
}
struct futhark_opaque_f270e689 *futhark_restore_opaque_f270e689(struct futhark_context *ctx, const void *p)
{
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_f270e689 *obj = malloc(sizeof(struct futhark_opaque_f270e689));
    int64_t shape_0[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * shape_0[1] * 4;
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * 4;
    if (err == 0) {
        obj->v0 = futhark_new_f32_2d(ctx, data_0, shape_0[0], shape_0[1]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_f32_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_32531da2 {
    struct futhark_f32_2d *v0;
    struct futhark_f32_1d *v1;
};
int futhark_project_opaque_32531da2_0(struct futhark_context *ctx, struct futhark_f32_2d **out, const struct futhark_opaque_32531da2 *obj)
{
    (void) ctx;
    
    struct futhark_f32_2d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f32_2d));
    memcpy(v, obj->v0, sizeof(struct futhark_f32_2d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_32531da2_1(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_32531da2 *obj)
{
    (void) ctx;
    
    struct futhark_f32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f32_1d));
    memcpy(v, obj->v1, sizeof(struct futhark_f32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_32531da2(struct futhark_context *ctx, struct futhark_opaque_32531da2 **out, const struct futhark_f32_2d *v0, const struct futhark_f32_1d *v1)
{
    struct futhark_opaque_32531da2 *v = malloc(sizeof(struct futhark_opaque_32531da2));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = malloc(sizeof(struct futhark_f32_2d));
        *v->v0 = *v0;
        (void) (*v->v0->mem.references)++;
    }
    {
        v->v1 = malloc(sizeof(struct futhark_f32_1d));
        *v->v1 = *v1;
        (void) (*v->v1->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_free_opaque_32531da2(struct futhark_context *ctx, struct futhark_opaque_32531da2 *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_32531da2(struct futhark_context *ctx, const struct futhark_opaque_32531da2 *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v0)[0] * futhark_shape_f32_2d(ctx, obj->v0)[1] * 4;
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v1)[0] * 4;
    
    *n = size_0 + size_1;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v0), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v0, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v0)[0] * futhark_shape_f32_2d(ctx, obj->v0)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v1)[0] * 4;
    }
    return ret;
}
struct futhark_opaque_32531da2 *futhark_restore_opaque_32531da2(struct futhark_context *ctx, const void *p)
{
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_32531da2 *obj = malloc(sizeof(struct futhark_opaque_32531da2));
    int64_t shape_0[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * shape_0[1] * 4;
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * 4;
    if (err == 0) {
        obj->v0 = futhark_new_f32_2d(ctx, data_0, shape_0[0], shape_0[1]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_f32_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_8ce68ead {
    struct futhark_f32_2d *v0;
    struct futhark_f32_1d *v1;
    struct futhark_f32_2d *v2;
    struct futhark_f32_1d *v3;
};
int futhark_project_opaque_8ce68ead_0(struct futhark_context *ctx, struct futhark_opaque_f270e689 **out, const struct futhark_opaque_8ce68ead *obj)
{
    (void) ctx;
    
    struct futhark_opaque_f270e689 *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_opaque_f270e689));
    v->v0 = malloc(sizeof(*v->v0));
    *v->v0 = *obj->v0;
    (void) (*v->v0->mem.references)++;
    v->v1 = malloc(sizeof(*v->v1));
    *v->v1 = *obj->v1;
    (void) (*v->v1->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_8ce68ead_1(struct futhark_context *ctx, struct futhark_opaque_32531da2 **out, const struct futhark_opaque_8ce68ead *obj)
{
    (void) ctx;
    
    struct futhark_opaque_32531da2 *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_opaque_32531da2));
    v->v0 = malloc(sizeof(*v->v0));
    *v->v0 = *obj->v2;
    (void) (*v->v0->mem.references)++;
    v->v1 = malloc(sizeof(*v->v1));
    *v->v1 = *obj->v3;
    (void) (*v->v1->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_8ce68ead(struct futhark_context *ctx, struct futhark_opaque_8ce68ead **out, const struct futhark_opaque_f270e689 *v0, const struct futhark_opaque_32531da2 *v1)
{
    struct futhark_opaque_8ce68ead *v = malloc(sizeof(struct futhark_opaque_8ce68ead));
    
    lock_lock(&ctx->lock);
    {
        {
            v->v0 = malloc(sizeof(*v0->v0));
            *v->v0 = *v0->v0;
            (void) (*v->v0->mem.references)++;
        }
        {
            v->v1 = malloc(sizeof(*v0->v1));
            *v->v1 = *v0->v1;
            (void) (*v->v1->mem.references)++;
        }
    }
    {
        {
            v->v2 = malloc(sizeof(*v1->v0));
            *v->v2 = *v1->v0;
            (void) (*v->v2->mem.references)++;
        }
        {
            v->v3 = malloc(sizeof(*v1->v1));
            *v->v3 = *v1->v1;
            (void) (*v->v3->mem.references)++;
        }
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_free_opaque_8ce68ead(struct futhark_context *ctx, struct futhark_opaque_8ce68ead *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v2)) != 0)
        ret = tmp;
    if (obj->v3 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v3)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_8ce68ead(struct futhark_context *ctx, const struct futhark_opaque_8ce68ead *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v0)[0] * futhark_shape_f32_2d(ctx, obj->v0)[1] * 4;
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v1)[0] * 4;
    int64_t size_2 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v2)[0] * futhark_shape_f32_2d(ctx, obj->v2)[1] * 4;
    int64_t size_3 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v3)[0] * 4;
    
    *n = size_0 + size_1 + size_2 + size_3;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v0), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v0, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v0)[0] * futhark_shape_f32_2d(ctx, obj->v0)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v1)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v2), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v2, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v2)[0] * futhark_shape_f32_2d(ctx, obj->v2)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v3), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v3, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v3)[0] * 4;
    }
    return ret;
}
struct futhark_opaque_8ce68ead *futhark_restore_opaque_8ce68ead(struct futhark_context *ctx, const void *p)
{
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_8ce68ead *obj = malloc(sizeof(struct futhark_opaque_8ce68ead));
    int64_t shape_0[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * shape_0[1] * 4;
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * 4;
    
    int64_t shape_2[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * shape_2[1] * 4;
    
    int64_t shape_3[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_3, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_3 = src;
    
    obj->v3 = NULL;
    src += shape_3[0] * 4;
    if (err == 0) {
        obj->v0 = futhark_new_f32_2d(ctx, data_0, shape_0[0], shape_0[1]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_f32_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_f32_2d(ctx, data_2, shape_2[0], shape_2[1]);
        if (obj->v2 == NULL)
            err = 1;
        obj->v3 = futhark_new_f32_1d(ctx, data_3, shape_3[0]);
        if (obj->v3 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v2)) != 0)
            ret = tmp;
        if (obj->v3 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v3)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_8f5f2e9d {
    struct futhark_f32_2d *v0;
    struct futhark_f32_1d *v1;
    struct futhark_f32_2d *v2;
    struct futhark_f32_1d *v3;
    struct futhark_f32_2d *v4;
    struct futhark_f32_1d *v5;
};
int futhark_project_opaque_8f5f2e9d_0(struct futhark_context *ctx, struct futhark_opaque_8ce68ead **out, const struct futhark_opaque_8f5f2e9d *obj)
{
    (void) ctx;
    
    struct futhark_opaque_8ce68ead *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_opaque_8ce68ead));
    v->v0 = malloc(sizeof(*v->v0));
    *v->v0 = *obj->v0;
    (void) (*v->v0->mem.references)++;
    v->v1 = malloc(sizeof(*v->v1));
    *v->v1 = *obj->v1;
    (void) (*v->v1->mem.references)++;
    v->v2 = malloc(sizeof(*v->v2));
    *v->v2 = *obj->v2;
    (void) (*v->v2->mem.references)++;
    v->v3 = malloc(sizeof(*v->v3));
    *v->v3 = *obj->v3;
    (void) (*v->v3->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_8f5f2e9d_1(struct futhark_context *ctx, struct futhark_opaque_32531da2 **out, const struct futhark_opaque_8f5f2e9d *obj)
{
    (void) ctx;
    
    struct futhark_opaque_32531da2 *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_opaque_32531da2));
    v->v0 = malloc(sizeof(*v->v0));
    *v->v0 = *obj->v4;
    (void) (*v->v0->mem.references)++;
    v->v1 = malloc(sizeof(*v->v1));
    *v->v1 = *obj->v5;
    (void) (*v->v1->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_8f5f2e9d(struct futhark_context *ctx, struct futhark_opaque_8f5f2e9d **out, const struct futhark_opaque_8ce68ead *v0, const struct futhark_opaque_32531da2 *v1)
{
    struct futhark_opaque_8f5f2e9d *v = malloc(sizeof(struct futhark_opaque_8f5f2e9d));
    
    lock_lock(&ctx->lock);
    {
        {
            v->v0 = malloc(sizeof(*v0->v0));
            *v->v0 = *v0->v0;
            (void) (*v->v0->mem.references)++;
        }
        {
            v->v1 = malloc(sizeof(*v0->v1));
            *v->v1 = *v0->v1;
            (void) (*v->v1->mem.references)++;
        }
        {
            v->v2 = malloc(sizeof(*v0->v2));
            *v->v2 = *v0->v2;
            (void) (*v->v2->mem.references)++;
        }
        {
            v->v3 = malloc(sizeof(*v0->v3));
            *v->v3 = *v0->v3;
            (void) (*v->v3->mem.references)++;
        }
    }
    {
        {
            v->v4 = malloc(sizeof(*v1->v0));
            *v->v4 = *v1->v0;
            (void) (*v->v4->mem.references)++;
        }
        {
            v->v5 = malloc(sizeof(*v1->v1));
            *v->v5 = *v1->v1;
            (void) (*v->v5->mem.references)++;
        }
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_free_opaque_8f5f2e9d(struct futhark_context *ctx, struct futhark_opaque_8f5f2e9d *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v2)) != 0)
        ret = tmp;
    if (obj->v3 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v3)) != 0)
        ret = tmp;
    if (obj->v4 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v4)) != 0)
        ret = tmp;
    if (obj->v5 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v5)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_8f5f2e9d(struct futhark_context *ctx, const struct futhark_opaque_8f5f2e9d *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v0)[0] * futhark_shape_f32_2d(ctx, obj->v0)[1] * 4;
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v1)[0] * 4;
    int64_t size_2 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v2)[0] * futhark_shape_f32_2d(ctx, obj->v2)[1] * 4;
    int64_t size_3 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v3)[0] * 4;
    int64_t size_4 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v4)[0] * futhark_shape_f32_2d(ctx, obj->v4)[1] * 4;
    int64_t size_5 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v5)[0] * 4;
    
    *n = size_0 + size_1 + size_2 + size_3 + size_4 + size_5;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v0), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v0, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v0)[0] * futhark_shape_f32_2d(ctx, obj->v0)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v1)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v2), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v2, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v2)[0] * futhark_shape_f32_2d(ctx, obj->v2)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v3), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v3, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v3)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v4), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v4, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v4)[0] * futhark_shape_f32_2d(ctx, obj->v4)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v5), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v5, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v5)[0] * 4;
    }
    return ret;
}
struct futhark_opaque_8f5f2e9d *futhark_restore_opaque_8f5f2e9d(struct futhark_context *ctx, const void *p)
{
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_8f5f2e9d *obj = malloc(sizeof(struct futhark_opaque_8f5f2e9d));
    int64_t shape_0[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * shape_0[1] * 4;
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * 4;
    
    int64_t shape_2[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * shape_2[1] * 4;
    
    int64_t shape_3[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_3, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_3 = src;
    
    obj->v3 = NULL;
    src += shape_3[0] * 4;
    
    int64_t shape_4[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_4, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_4 = src;
    
    obj->v4 = NULL;
    src += shape_4[0] * shape_4[1] * 4;
    
    int64_t shape_5[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_5, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_5 = src;
    
    obj->v5 = NULL;
    src += shape_5[0] * 4;
    if (err == 0) {
        obj->v0 = futhark_new_f32_2d(ctx, data_0, shape_0[0], shape_0[1]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_f32_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_f32_2d(ctx, data_2, shape_2[0], shape_2[1]);
        if (obj->v2 == NULL)
            err = 1;
        obj->v3 = futhark_new_f32_1d(ctx, data_3, shape_3[0]);
        if (obj->v3 == NULL)
            err = 1;
        obj->v4 = futhark_new_f32_2d(ctx, data_4, shape_4[0], shape_4[1]);
        if (obj->v4 == NULL)
            err = 1;
        obj->v5 = futhark_new_f32_1d(ctx, data_5, shape_5[0]);
        if (obj->v5 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v2)) != 0)
            ret = tmp;
        if (obj->v3 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v3)) != 0)
            ret = tmp;
        if (obj->v4 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v4)) != 0)
            ret = tmp;
        if (obj->v5 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v5)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_b0aee03a {
    struct futhark_f32_2d *v0;
    struct futhark_f32_1d *v1;
    struct futhark_f32_2d *v2;
    struct futhark_f32_1d *v3;
    struct futhark_f32_2d *v4;
    struct futhark_f32_1d *v5;
    struct futhark_f32_1d *v6;
};
int futhark_project_opaque_b0aee03a_0(struct futhark_context *ctx, struct futhark_opaque_8f5f2e9d **out, const struct futhark_opaque_b0aee03a *obj)
{
    (void) ctx;
    
    struct futhark_opaque_8f5f2e9d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_opaque_8f5f2e9d));
    v->v0 = malloc(sizeof(*v->v0));
    *v->v0 = *obj->v0;
    (void) (*v->v0->mem.references)++;
    v->v1 = malloc(sizeof(*v->v1));
    *v->v1 = *obj->v1;
    (void) (*v->v1->mem.references)++;
    v->v2 = malloc(sizeof(*v->v2));
    *v->v2 = *obj->v2;
    (void) (*v->v2->mem.references)++;
    v->v3 = malloc(sizeof(*v->v3));
    *v->v3 = *obj->v3;
    (void) (*v->v3->mem.references)++;
    v->v4 = malloc(sizeof(*v->v4));
    *v->v4 = *obj->v4;
    (void) (*v->v4->mem.references)++;
    v->v5 = malloc(sizeof(*v->v5));
    *v->v5 = *obj->v5;
    (void) (*v->v5->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_b0aee03a_1(struct futhark_context *ctx, struct futhark_f32_1d **out, const struct futhark_opaque_b0aee03a *obj)
{
    (void) ctx;
    
    struct futhark_f32_1d *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_f32_1d));
    memcpy(v, obj->v6, sizeof(struct futhark_f32_1d));
    (void) (*v->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_b0aee03a(struct futhark_context *ctx, struct futhark_opaque_b0aee03a **out, const struct futhark_opaque_8f5f2e9d *v0, const struct futhark_f32_1d *v1)
{
    struct futhark_opaque_b0aee03a *v = malloc(sizeof(struct futhark_opaque_b0aee03a));
    
    lock_lock(&ctx->lock);
    {
        {
            v->v0 = malloc(sizeof(*v0->v0));
            *v->v0 = *v0->v0;
            (void) (*v->v0->mem.references)++;
        }
        {
            v->v1 = malloc(sizeof(*v0->v1));
            *v->v1 = *v0->v1;
            (void) (*v->v1->mem.references)++;
        }
        {
            v->v2 = malloc(sizeof(*v0->v2));
            *v->v2 = *v0->v2;
            (void) (*v->v2->mem.references)++;
        }
        {
            v->v3 = malloc(sizeof(*v0->v3));
            *v->v3 = *v0->v3;
            (void) (*v->v3->mem.references)++;
        }
        {
            v->v4 = malloc(sizeof(*v0->v4));
            *v->v4 = *v0->v4;
            (void) (*v->v4->mem.references)++;
        }
        {
            v->v5 = malloc(sizeof(*v0->v5));
            *v->v5 = *v0->v5;
            (void) (*v->v5->mem.references)++;
        }
    }
    {
        v->v6 = malloc(sizeof(struct futhark_f32_1d));
        *v->v6 = *v1;
        (void) (*v->v6->mem.references)++;
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_free_opaque_b0aee03a(struct futhark_context *ctx, struct futhark_opaque_b0aee03a *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v2)) != 0)
        ret = tmp;
    if (obj->v3 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v3)) != 0)
        ret = tmp;
    if (obj->v4 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v4)) != 0)
        ret = tmp;
    if (obj->v5 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v5)) != 0)
        ret = tmp;
    if (obj->v6 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v6)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_b0aee03a(struct futhark_context *ctx, const struct futhark_opaque_b0aee03a *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v0)[0] * futhark_shape_f32_2d(ctx, obj->v0)[1] * 4;
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v1)[0] * 4;
    int64_t size_2 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v2)[0] * futhark_shape_f32_2d(ctx, obj->v2)[1] * 4;
    int64_t size_3 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v3)[0] * 4;
    int64_t size_4 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v4)[0] * futhark_shape_f32_2d(ctx, obj->v4)[1] * 4;
    int64_t size_5 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v5)[0] * 4;
    int64_t size_6 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v6)[0] * 4;
    
    *n = size_0 + size_1 + size_2 + size_3 + size_4 + size_5 + size_6;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v0), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v0, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v0)[0] * futhark_shape_f32_2d(ctx, obj->v0)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v1)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v2), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v2, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v2)[0] * futhark_shape_f32_2d(ctx, obj->v2)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v3), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v3, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v3)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v4), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v4, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v4)[0] * futhark_shape_f32_2d(ctx, obj->v4)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v5), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v5, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v5)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v6), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v6, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v6)[0] * 4;
    }
    return ret;
}
struct futhark_opaque_b0aee03a *futhark_restore_opaque_b0aee03a(struct futhark_context *ctx, const void *p)
{
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_b0aee03a *obj = malloc(sizeof(struct futhark_opaque_b0aee03a));
    int64_t shape_0[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * shape_0[1] * 4;
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * 4;
    
    int64_t shape_2[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * shape_2[1] * 4;
    
    int64_t shape_3[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_3, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_3 = src;
    
    obj->v3 = NULL;
    src += shape_3[0] * 4;
    
    int64_t shape_4[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_4, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_4 = src;
    
    obj->v4 = NULL;
    src += shape_4[0] * shape_4[1] * 4;
    
    int64_t shape_5[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_5, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_5 = src;
    
    obj->v5 = NULL;
    src += shape_5[0] * 4;
    
    int64_t shape_6[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_6, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_6 = src;
    
    obj->v6 = NULL;
    src += shape_6[0] * 4;
    if (err == 0) {
        obj->v0 = futhark_new_f32_2d(ctx, data_0, shape_0[0], shape_0[1]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_f32_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_f32_2d(ctx, data_2, shape_2[0], shape_2[1]);
        if (obj->v2 == NULL)
            err = 1;
        obj->v3 = futhark_new_f32_1d(ctx, data_3, shape_3[0]);
        if (obj->v3 == NULL)
            err = 1;
        obj->v4 = futhark_new_f32_2d(ctx, data_4, shape_4[0], shape_4[1]);
        if (obj->v4 == NULL)
            err = 1;
        obj->v5 = futhark_new_f32_1d(ctx, data_5, shape_5[0]);
        if (obj->v5 == NULL)
            err = 1;
        obj->v6 = futhark_new_f32_1d(ctx, data_6, shape_6[0]);
        if (obj->v6 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v2)) != 0)
            ret = tmp;
        if (obj->v3 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v3)) != 0)
            ret = tmp;
        if (obj->v4 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v4)) != 0)
            ret = tmp;
        if (obj->v5 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v5)) != 0)
            ret = tmp;
        if (obj->v6 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v6)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_67daac7 {
    struct futhark_f32_1d *v0;
    struct futhark_f32_1d *v1;
    struct futhark_f32_1d *v2;
    struct futhark_f32_1d *v3;
    struct futhark_f32_1d *v4;
    struct futhark_f32_1d *v5;
    struct futhark_f32_2d *v6;
    struct futhark_f32_1d *v7;
    struct futhark_f32_2d *v8;
    struct futhark_f32_1d *v9;
    struct futhark_f32_2d *v10;
    struct futhark_f32_1d *v11;
    struct futhark_f32_1d *v12;
};
int futhark_project_opaque_67daac7_0(struct futhark_context *ctx, struct futhark_opaque_c5da5e9b **out, const struct futhark_opaque_67daac7 *obj)
{
    (void) ctx;
    
    struct futhark_opaque_c5da5e9b *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_opaque_c5da5e9b));
    v->v0 = malloc(sizeof(*v->v0));
    *v->v0 = *obj->v0;
    (void) (*v->v0->mem.references)++;
    v->v1 = malloc(sizeof(*v->v1));
    *v->v1 = *obj->v1;
    (void) (*v->v1->mem.references)++;
    v->v2 = malloc(sizeof(*v->v2));
    *v->v2 = *obj->v2;
    (void) (*v->v2->mem.references)++;
    v->v3 = malloc(sizeof(*v->v3));
    *v->v3 = *obj->v3;
    (void) (*v->v3->mem.references)++;
    v->v4 = malloc(sizeof(*v->v4));
    *v->v4 = *obj->v4;
    (void) (*v->v4->mem.references)++;
    v->v5 = malloc(sizeof(*v->v5));
    *v->v5 = *obj->v5;
    (void) (*v->v5->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_67daac7_1(struct futhark_context *ctx, struct futhark_opaque_b0aee03a **out, const struct futhark_opaque_67daac7 *obj)
{
    (void) ctx;
    
    struct futhark_opaque_b0aee03a *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_opaque_b0aee03a));
    v->v0 = malloc(sizeof(*v->v0));
    *v->v0 = *obj->v6;
    (void) (*v->v0->mem.references)++;
    v->v1 = malloc(sizeof(*v->v1));
    *v->v1 = *obj->v7;
    (void) (*v->v1->mem.references)++;
    v->v2 = malloc(sizeof(*v->v2));
    *v->v2 = *obj->v8;
    (void) (*v->v2->mem.references)++;
    v->v3 = malloc(sizeof(*v->v3));
    *v->v3 = *obj->v9;
    (void) (*v->v3->mem.references)++;
    v->v4 = malloc(sizeof(*v->v4));
    *v->v4 = *obj->v10;
    (void) (*v->v4->mem.references)++;
    v->v5 = malloc(sizeof(*v->v5));
    *v->v5 = *obj->v11;
    (void) (*v->v5->mem.references)++;
    v->v6 = malloc(sizeof(*v->v6));
    *v->v6 = *obj->v12;
    (void) (*v->v6->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_67daac7(struct futhark_context *ctx, struct futhark_opaque_67daac7 **out, const struct futhark_opaque_c5da5e9b *v0, const struct futhark_opaque_b0aee03a *v1)
{
    struct futhark_opaque_67daac7 *v = malloc(sizeof(struct futhark_opaque_67daac7));
    
    lock_lock(&ctx->lock);
    {
        {
            v->v0 = malloc(sizeof(*v0->v0));
            *v->v0 = *v0->v0;
            (void) (*v->v0->mem.references)++;
        }
        {
            v->v1 = malloc(sizeof(*v0->v1));
            *v->v1 = *v0->v1;
            (void) (*v->v1->mem.references)++;
        }
        {
            v->v2 = malloc(sizeof(*v0->v2));
            *v->v2 = *v0->v2;
            (void) (*v->v2->mem.references)++;
        }
        {
            v->v3 = malloc(sizeof(*v0->v3));
            *v->v3 = *v0->v3;
            (void) (*v->v3->mem.references)++;
        }
        {
            v->v4 = malloc(sizeof(*v0->v4));
            *v->v4 = *v0->v4;
            (void) (*v->v4->mem.references)++;
        }
        {
            v->v5 = malloc(sizeof(*v0->v5));
            *v->v5 = *v0->v5;
            (void) (*v->v5->mem.references)++;
        }
    }
    {
        {
            v->v6 = malloc(sizeof(*v1->v0));
            *v->v6 = *v1->v0;
            (void) (*v->v6->mem.references)++;
        }
        {
            v->v7 = malloc(sizeof(*v1->v1));
            *v->v7 = *v1->v1;
            (void) (*v->v7->mem.references)++;
        }
        {
            v->v8 = malloc(sizeof(*v1->v2));
            *v->v8 = *v1->v2;
            (void) (*v->v8->mem.references)++;
        }
        {
            v->v9 = malloc(sizeof(*v1->v3));
            *v->v9 = *v1->v3;
            (void) (*v->v9->mem.references)++;
        }
        {
            v->v10 = malloc(sizeof(*v1->v4));
            *v->v10 = *v1->v4;
            (void) (*v->v10->mem.references)++;
        }
        {
            v->v11 = malloc(sizeof(*v1->v5));
            *v->v11 = *v1->v5;
            (void) (*v->v11->mem.references)++;
        }
        {
            v->v12 = malloc(sizeof(*v1->v6));
            *v->v12 = *v1->v6;
            (void) (*v->v12->mem.references)++;
        }
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_free_opaque_67daac7(struct futhark_context *ctx, struct futhark_opaque_67daac7 *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v0 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if (obj->v2 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    if (obj->v3 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v3)) != 0)
        ret = tmp;
    if (obj->v4 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v4)) != 0)
        ret = tmp;
    if (obj->v5 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v5)) != 0)
        ret = tmp;
    if (obj->v6 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v6)) != 0)
        ret = tmp;
    if (obj->v7 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v7)) != 0)
        ret = tmp;
    if (obj->v8 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v8)) != 0)
        ret = tmp;
    if (obj->v9 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v9)) != 0)
        ret = tmp;
    if (obj->v10 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v10)) != 0)
        ret = tmp;
    if (obj->v11 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v11)) != 0)
        ret = tmp;
    if (obj->v12 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v12)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_67daac7(struct futhark_context *ctx, const struct futhark_opaque_67daac7 *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v0)[0] * 4;
    int64_t size_1 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v1)[0] * 4;
    int64_t size_2 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v2)[0] * 4;
    int64_t size_3 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v3)[0] * 4;
    int64_t size_4 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v4)[0] * 4;
    int64_t size_5 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v5)[0] * 4;
    int64_t size_6 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v6)[0] * futhark_shape_f32_2d(ctx, obj->v6)[1] * 4;
    int64_t size_7 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v7)[0] * 4;
    int64_t size_8 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v8)[0] * futhark_shape_f32_2d(ctx, obj->v8)[1] * 4;
    int64_t size_9 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v9)[0] * 4;
    int64_t size_10 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v10)[0] * futhark_shape_f32_2d(ctx, obj->v10)[1] * 4;
    int64_t size_11 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v11)[0] * 4;
    int64_t size_12 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v12)[0] * 4;
    
    *n = size_0 + size_1 + size_2 + size_3 + size_4 + size_5 + size_6 + size_7 + size_8 + size_9 + size_10 + size_11 + size_12;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v0), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v0, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v0)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v1), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v1, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v1)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v2), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v2, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v2)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v3), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v3, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v3)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v4), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v4, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v4)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v5), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v5, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v5)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v6), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v6, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v6)[0] * futhark_shape_f32_2d(ctx, obj->v6)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v7), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v7, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v7)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v8), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v8, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v8)[0] * futhark_shape_f32_2d(ctx, obj->v8)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v9), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v9, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v9)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v10), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v10, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v10)[0] * futhark_shape_f32_2d(ctx, obj->v10)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v11), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v11, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v11)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v12), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v12, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v12)[0] * 4;
    }
    return ret;
}
struct futhark_opaque_67daac7 *futhark_restore_opaque_67daac7(struct futhark_context *ctx, const void *p)
{
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_67daac7 *obj = malloc(sizeof(struct futhark_opaque_67daac7));
    int64_t shape_0[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_0, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    obj->v0 = NULL;
    src += shape_0[0] * 4;
    
    int64_t shape_1[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_1, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    obj->v1 = NULL;
    src += shape_1[0] * 4;
    
    int64_t shape_2[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_2, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    obj->v2 = NULL;
    src += shape_2[0] * 4;
    
    int64_t shape_3[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_3, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_3 = src;
    
    obj->v3 = NULL;
    src += shape_3[0] * 4;
    
    int64_t shape_4[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_4, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_4 = src;
    
    obj->v4 = NULL;
    src += shape_4[0] * 4;
    
    int64_t shape_5[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_5, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_5 = src;
    
    obj->v5 = NULL;
    src += shape_5[0] * 4;
    
    int64_t shape_6[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_6, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_6 = src;
    
    obj->v6 = NULL;
    src += shape_6[0] * shape_6[1] * 4;
    
    int64_t shape_7[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_7, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_7 = src;
    
    obj->v7 = NULL;
    src += shape_7[0] * 4;
    
    int64_t shape_8[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_8, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_8 = src;
    
    obj->v8 = NULL;
    src += shape_8[0] * shape_8[1] * 4;
    
    int64_t shape_9[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_9, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_9 = src;
    
    obj->v9 = NULL;
    src += shape_9[0] * 4;
    
    int64_t shape_10[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_10, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_10 = src;
    
    obj->v10 = NULL;
    src += shape_10[0] * shape_10[1] * 4;
    
    int64_t shape_11[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_11, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_11 = src;
    
    obj->v11 = NULL;
    src += shape_11[0] * 4;
    
    int64_t shape_12[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_12, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_12 = src;
    
    obj->v12 = NULL;
    src += shape_12[0] * 4;
    if (err == 0) {
        obj->v0 = futhark_new_f32_1d(ctx, data_0, shape_0[0]);
        if (obj->v0 == NULL)
            err = 1;
        obj->v1 = futhark_new_f32_1d(ctx, data_1, shape_1[0]);
        if (obj->v1 == NULL)
            err = 1;
        obj->v2 = futhark_new_f32_1d(ctx, data_2, shape_2[0]);
        if (obj->v2 == NULL)
            err = 1;
        obj->v3 = futhark_new_f32_1d(ctx, data_3, shape_3[0]);
        if (obj->v3 == NULL)
            err = 1;
        obj->v4 = futhark_new_f32_1d(ctx, data_4, shape_4[0]);
        if (obj->v4 == NULL)
            err = 1;
        obj->v5 = futhark_new_f32_1d(ctx, data_5, shape_5[0]);
        if (obj->v5 == NULL)
            err = 1;
        obj->v6 = futhark_new_f32_2d(ctx, data_6, shape_6[0], shape_6[1]);
        if (obj->v6 == NULL)
            err = 1;
        obj->v7 = futhark_new_f32_1d(ctx, data_7, shape_7[0]);
        if (obj->v7 == NULL)
            err = 1;
        obj->v8 = futhark_new_f32_2d(ctx, data_8, shape_8[0], shape_8[1]);
        if (obj->v8 == NULL)
            err = 1;
        obj->v9 = futhark_new_f32_1d(ctx, data_9, shape_9[0]);
        if (obj->v9 == NULL)
            err = 1;
        obj->v10 = futhark_new_f32_2d(ctx, data_10, shape_10[0], shape_10[1]);
        if (obj->v10 == NULL)
            err = 1;
        obj->v11 = futhark_new_f32_1d(ctx, data_11, shape_11[0]);
        if (obj->v11 == NULL)
            err = 1;
        obj->v12 = futhark_new_f32_1d(ctx, data_12, shape_12[0]);
        if (obj->v12 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v0 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v0)) != 0)
            ret = tmp;
        if (obj->v1 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
            ret = tmp;
        if (obj->v2 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v2)) != 0)
            ret = tmp;
        if (obj->v3 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v3)) != 0)
            ret = tmp;
        if (obj->v4 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v4)) != 0)
            ret = tmp;
        if (obj->v5 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v5)) != 0)
            ret = tmp;
        if (obj->v6 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v6)) != 0)
            ret = tmp;
        if (obj->v7 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v7)) != 0)
            ret = tmp;
        if (obj->v8 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v8)) != 0)
            ret = tmp;
        if (obj->v9 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v9)) != 0)
            ret = tmp;
        if (obj->v10 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v10)) != 0)
            ret = tmp;
        if (obj->v11 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v11)) != 0)
            ret = tmp;
        if (obj->v12 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v12)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}
struct futhark_opaque_networkParameter {
    int8_t v0;
    float v1;
    float v2;
    float v3;
    float v4;
    float v5;
    float v6;
    float v7;
    float v8;
    float v9;
    float v10;
    float v11;
    float v12;
    float v13;
    int32_t v14;
    struct futhark_f32_1d *v15;
    struct futhark_f32_1d *v16;
    struct futhark_f32_1d *v17;
    struct futhark_f32_1d *v18;
    struct futhark_f32_1d *v19;
    struct futhark_f32_1d *v20;
    struct futhark_f32_2d *v21;
    struct futhark_f32_1d *v22;
    struct futhark_f32_2d *v23;
    struct futhark_f32_1d *v24;
    struct futhark_f32_2d *v25;
    struct futhark_f32_1d *v26;
    struct futhark_f32_1d *v27;
};
int futhark_project_opaque_networkParameter_0(struct futhark_context *ctx, struct futhark_opaque_e9a0e68b **out, const struct futhark_opaque_networkParameter *obj)
{
    (void) ctx;
    
    struct futhark_opaque_e9a0e68b *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_opaque_e9a0e68b));
    v->v0 = obj->v0;
    v->v1 = obj->v1;
    v->v2 = obj->v2;
    v->v3 = obj->v3;
    v->v4 = obj->v4;
    v->v5 = obj->v5;
    v->v6 = obj->v6;
    v->v7 = obj->v7;
    v->v8 = obj->v8;
    v->v9 = obj->v9;
    v->v10 = obj->v10;
    v->v11 = obj->v11;
    v->v12 = obj->v12;
    v->v13 = obj->v13;
    v->v14 = obj->v14;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_project_opaque_networkParameter_1(struct futhark_context *ctx, struct futhark_opaque_67daac7 **out, const struct futhark_opaque_networkParameter *obj)
{
    (void) ctx;
    
    struct futhark_opaque_67daac7 *v;
    
    lock_lock(&ctx->lock);
    v = malloc(sizeof(struct futhark_opaque_67daac7));
    v->v0 = malloc(sizeof(*v->v0));
    *v->v0 = *obj->v15;
    (void) (*v->v0->mem.references)++;
    v->v1 = malloc(sizeof(*v->v1));
    *v->v1 = *obj->v16;
    (void) (*v->v1->mem.references)++;
    v->v2 = malloc(sizeof(*v->v2));
    *v->v2 = *obj->v17;
    (void) (*v->v2->mem.references)++;
    v->v3 = malloc(sizeof(*v->v3));
    *v->v3 = *obj->v18;
    (void) (*v->v3->mem.references)++;
    v->v4 = malloc(sizeof(*v->v4));
    *v->v4 = *obj->v19;
    (void) (*v->v4->mem.references)++;
    v->v5 = malloc(sizeof(*v->v5));
    *v->v5 = *obj->v20;
    (void) (*v->v5->mem.references)++;
    v->v6 = malloc(sizeof(*v->v6));
    *v->v6 = *obj->v21;
    (void) (*v->v6->mem.references)++;
    v->v7 = malloc(sizeof(*v->v7));
    *v->v7 = *obj->v22;
    (void) (*v->v7->mem.references)++;
    v->v8 = malloc(sizeof(*v->v8));
    *v->v8 = *obj->v23;
    (void) (*v->v8->mem.references)++;
    v->v9 = malloc(sizeof(*v->v9));
    *v->v9 = *obj->v24;
    (void) (*v->v9->mem.references)++;
    v->v10 = malloc(sizeof(*v->v10));
    *v->v10 = *obj->v25;
    (void) (*v->v10->mem.references)++;
    v->v11 = malloc(sizeof(*v->v11));
    *v->v11 = *obj->v26;
    (void) (*v->v11->mem.references)++;
    v->v12 = malloc(sizeof(*v->v12));
    *v->v12 = *obj->v27;
    (void) (*v->v12->mem.references)++;
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_new_opaque_networkParameter(struct futhark_context *ctx, struct futhark_opaque_networkParameter **out, const struct futhark_opaque_e9a0e68b *v0, const struct futhark_opaque_67daac7 *v1)
{
    struct futhark_opaque_networkParameter *v = malloc(sizeof(struct futhark_opaque_networkParameter));
    
    lock_lock(&ctx->lock);
    {
        v->v0 = v0->v0;
        v->v1 = v0->v1;
        v->v2 = v0->v2;
        v->v3 = v0->v3;
        v->v4 = v0->v4;
        v->v5 = v0->v5;
        v->v6 = v0->v6;
        v->v7 = v0->v7;
        v->v8 = v0->v8;
        v->v9 = v0->v9;
        v->v10 = v0->v10;
        v->v11 = v0->v11;
        v->v12 = v0->v12;
        v->v13 = v0->v13;
        v->v14 = v0->v14;
    }
    {
        {
            v->v15 = malloc(sizeof(*v1->v0));
            *v->v15 = *v1->v0;
            (void) (*v->v15->mem.references)++;
        }
        {
            v->v16 = malloc(sizeof(*v1->v1));
            *v->v16 = *v1->v1;
            (void) (*v->v16->mem.references)++;
        }
        {
            v->v17 = malloc(sizeof(*v1->v2));
            *v->v17 = *v1->v2;
            (void) (*v->v17->mem.references)++;
        }
        {
            v->v18 = malloc(sizeof(*v1->v3));
            *v->v18 = *v1->v3;
            (void) (*v->v18->mem.references)++;
        }
        {
            v->v19 = malloc(sizeof(*v1->v4));
            *v->v19 = *v1->v4;
            (void) (*v->v19->mem.references)++;
        }
        {
            v->v20 = malloc(sizeof(*v1->v5));
            *v->v20 = *v1->v5;
            (void) (*v->v20->mem.references)++;
        }
        {
            v->v21 = malloc(sizeof(*v1->v6));
            *v->v21 = *v1->v6;
            (void) (*v->v21->mem.references)++;
        }
        {
            v->v22 = malloc(sizeof(*v1->v7));
            *v->v22 = *v1->v7;
            (void) (*v->v22->mem.references)++;
        }
        {
            v->v23 = malloc(sizeof(*v1->v8));
            *v->v23 = *v1->v8;
            (void) (*v->v23->mem.references)++;
        }
        {
            v->v24 = malloc(sizeof(*v1->v9));
            *v->v24 = *v1->v9;
            (void) (*v->v24->mem.references)++;
        }
        {
            v->v25 = malloc(sizeof(*v1->v10));
            *v->v25 = *v1->v10;
            (void) (*v->v25->mem.references)++;
        }
        {
            v->v26 = malloc(sizeof(*v1->v11));
            *v->v26 = *v1->v11;
            (void) (*v->v26->mem.references)++;
        }
        {
            v->v27 = malloc(sizeof(*v1->v12));
            *v->v27 = *v1->v12;
            (void) (*v->v27->mem.references)++;
        }
    }
    lock_unlock(&ctx->lock);
    *out = v;
    return 0;
}
int futhark_free_opaque_networkParameter(struct futhark_context *ctx, struct futhark_opaque_networkParameter *obj)
{
    (void) ctx;
    
    int ret = 0, tmp;
    
    if (obj->v15 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v15)) != 0)
        ret = tmp;
    if (obj->v16 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v16)) != 0)
        ret = tmp;
    if (obj->v17 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v17)) != 0)
        ret = tmp;
    if (obj->v18 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v18)) != 0)
        ret = tmp;
    if (obj->v19 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v19)) != 0)
        ret = tmp;
    if (obj->v20 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v20)) != 0)
        ret = tmp;
    if (obj->v21 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v21)) != 0)
        ret = tmp;
    if (obj->v22 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v22)) != 0)
        ret = tmp;
    if (obj->v23 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v23)) != 0)
        ret = tmp;
    if (obj->v24 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v24)) != 0)
        ret = tmp;
    if (obj->v25 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v25)) != 0)
        ret = tmp;
    if (obj->v26 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v26)) != 0)
        ret = tmp;
    if (obj->v27 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v27)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_store_opaque_networkParameter(struct futhark_context *ctx, const struct futhark_opaque_networkParameter *obj, void **p, size_t *n)
{
    (void) ctx;
    
    int ret = 0;
    int64_t size_0 = 7 + 0 * sizeof(int64_t) + 1 * 1;
    int64_t size_1 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_2 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_3 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_4 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_5 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_6 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_7 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_8 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_9 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_10 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_11 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_12 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_13 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_14 = 7 + 0 * sizeof(int64_t) + 1 * 4;
    int64_t size_15 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v15)[0] * 4;
    int64_t size_16 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v16)[0] * 4;
    int64_t size_17 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v17)[0] * 4;
    int64_t size_18 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v18)[0] * 4;
    int64_t size_19 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v19)[0] * 4;
    int64_t size_20 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v20)[0] * 4;
    int64_t size_21 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v21)[0] * futhark_shape_f32_2d(ctx, obj->v21)[1] * 4;
    int64_t size_22 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v22)[0] * 4;
    int64_t size_23 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v23)[0] * futhark_shape_f32_2d(ctx, obj->v23)[1] * 4;
    int64_t size_24 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v24)[0] * 4;
    int64_t size_25 = 7 + 2 * sizeof(int64_t) + futhark_shape_f32_2d(ctx, obj->v25)[0] * futhark_shape_f32_2d(ctx, obj->v25)[1] * 4;
    int64_t size_26 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v26)[0] * 4;
    int64_t size_27 = 7 + 1 * sizeof(int64_t) + futhark_shape_f32_1d(ctx, obj->v27)[0] * 4;
    
    *n = size_0 + size_1 + size_2 + size_3 + size_4 + size_5 + size_6 + size_7 + size_8 + size_9 + size_10 + size_11 + size_12 + size_13 + size_14 + size_15 + size_16 + size_17 + size_18 + size_19 + size_20 + size_21 + size_22 + size_23 + size_24 + size_25 + size_26 + size_27;
    if (p != NULL && *p == NULL)
        *p = malloc(*n);
    if (p != NULL) {
        unsigned char *out = *p;
        
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, "  i8", 4);
        out += 4;
        memcpy(out, &obj->v0, sizeof(obj->v0));
        out += sizeof(obj->v0);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v1, sizeof(obj->v1));
        out += sizeof(obj->v1);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v2, sizeof(obj->v2));
        out += sizeof(obj->v2);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v3, sizeof(obj->v3));
        out += sizeof(obj->v3);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v4, sizeof(obj->v4));
        out += sizeof(obj->v4);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v5, sizeof(obj->v5));
        out += sizeof(obj->v5);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v6, sizeof(obj->v6));
        out += sizeof(obj->v6);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v7, sizeof(obj->v7));
        out += sizeof(obj->v7);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v8, sizeof(obj->v8));
        out += sizeof(obj->v8);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v9, sizeof(obj->v9));
        out += sizeof(obj->v9);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v10, sizeof(obj->v10));
        out += sizeof(obj->v10);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v11, sizeof(obj->v11));
        out += sizeof(obj->v11);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v12, sizeof(obj->v12));
        out += sizeof(obj->v12);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, &obj->v13, sizeof(obj->v13));
        out += sizeof(obj->v13);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 0;
        memcpy(out, " i32", 4);
        out += 4;
        memcpy(out, &obj->v14, sizeof(obj->v14));
        out += sizeof(obj->v14);
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v15), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v15, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v15)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v16), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v16, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v16)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v17), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v17, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v17)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v18), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v18, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v18)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v19), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v19, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v19)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v20), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v20, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v20)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v21), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v21, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v21)[0] * futhark_shape_f32_2d(ctx, obj->v21)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v22), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v22, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v22)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v23), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v23, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v23)[0] * futhark_shape_f32_2d(ctx, obj->v23)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v24), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v24, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v24)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 2;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_2d(ctx, obj->v25), 2 * sizeof(int64_t));
        out += 2 * sizeof(int64_t);
        ret |= futhark_values_f32_2d(ctx, obj->v25, (void *) out);
        out += futhark_shape_f32_2d(ctx, obj->v25)[0] * futhark_shape_f32_2d(ctx, obj->v25)[1] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v26), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v26, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v26)[0] * 4;
        *out++ = 'b';
        *out++ = 2;
        *out++ = 1;
        memcpy(out, " f32", 4);
        out += 4;
        memcpy(out, futhark_shape_f32_1d(ctx, obj->v27), 1 * sizeof(int64_t));
        out += 1 * sizeof(int64_t);
        ret |= futhark_values_f32_1d(ctx, obj->v27, (void *) out);
        out += futhark_shape_f32_1d(ctx, obj->v27)[0] * 4;
    }
    return ret;
}
struct futhark_opaque_networkParameter *futhark_restore_opaque_networkParameter(struct futhark_context *ctx, const void *p)
{
    int err = 0;
    const unsigned char *src = p;
    struct futhark_opaque_networkParameter *obj = malloc(sizeof(struct futhark_opaque_networkParameter));
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, "  i8", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_0 = src;
    
    src += sizeof(obj->v0);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_1 = src;
    
    src += sizeof(obj->v1);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_2 = src;
    
    src += sizeof(obj->v2);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_3 = src;
    
    src += sizeof(obj->v3);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_4 = src;
    
    src += sizeof(obj->v4);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_5 = src;
    
    src += sizeof(obj->v5);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_6 = src;
    
    src += sizeof(obj->v6);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_7 = src;
    
    src += sizeof(obj->v7);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_8 = src;
    
    src += sizeof(obj->v8);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_9 = src;
    
    src += sizeof(obj->v9);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_10 = src;
    
    src += sizeof(obj->v10);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_11 = src;
    
    src += sizeof(obj->v11);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_12 = src;
    
    src += sizeof(obj->v12);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_13 = src;
    
    src += sizeof(obj->v13);
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 0;
    err |= memcmp(src, " i32", 4) != 0;
    src += 4;
    if (err == 0) {
        src += 0 * sizeof(int64_t);
    }
    
    const void *data_14 = src;
    
    src += sizeof(obj->v14);
    
    int64_t shape_15[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_15, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_15 = src;
    
    obj->v15 = NULL;
    src += shape_15[0] * 4;
    
    int64_t shape_16[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_16, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_16 = src;
    
    obj->v16 = NULL;
    src += shape_16[0] * 4;
    
    int64_t shape_17[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_17, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_17 = src;
    
    obj->v17 = NULL;
    src += shape_17[0] * 4;
    
    int64_t shape_18[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_18, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_18 = src;
    
    obj->v18 = NULL;
    src += shape_18[0] * 4;
    
    int64_t shape_19[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_19, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_19 = src;
    
    obj->v19 = NULL;
    src += shape_19[0] * 4;
    
    int64_t shape_20[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_20, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_20 = src;
    
    obj->v20 = NULL;
    src += shape_20[0] * 4;
    
    int64_t shape_21[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_21, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_21 = src;
    
    obj->v21 = NULL;
    src += shape_21[0] * shape_21[1] * 4;
    
    int64_t shape_22[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_22, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_22 = src;
    
    obj->v22 = NULL;
    src += shape_22[0] * 4;
    
    int64_t shape_23[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_23, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_23 = src;
    
    obj->v23 = NULL;
    src += shape_23[0] * shape_23[1] * 4;
    
    int64_t shape_24[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_24, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_24 = src;
    
    obj->v24 = NULL;
    src += shape_24[0] * 4;
    
    int64_t shape_25[2] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 2;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_25, src, 2 * sizeof(int64_t));
        src += 2 * sizeof(int64_t);
    }
    
    const void *data_25 = src;
    
    obj->v25 = NULL;
    src += shape_25[0] * shape_25[1] * 4;
    
    int64_t shape_26[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_26, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_26 = src;
    
    obj->v26 = NULL;
    src += shape_26[0] * 4;
    
    int64_t shape_27[1] = {0};
    
    err |= *src++ != 'b';
    err |= *src++ != 2;
    err |= *src++ != 1;
    err |= memcmp(src, " f32", 4) != 0;
    src += 4;
    if (err == 0) {
        memcpy(shape_27, src, 1 * sizeof(int64_t));
        src += 1 * sizeof(int64_t);
    }
    
    const void *data_27 = src;
    
    obj->v27 = NULL;
    src += shape_27[0] * 4;
    if (err == 0) {
        memcpy(&obj->v0, data_0, sizeof(obj->v0));
        memcpy(&obj->v1, data_1, sizeof(obj->v1));
        memcpy(&obj->v2, data_2, sizeof(obj->v2));
        memcpy(&obj->v3, data_3, sizeof(obj->v3));
        memcpy(&obj->v4, data_4, sizeof(obj->v4));
        memcpy(&obj->v5, data_5, sizeof(obj->v5));
        memcpy(&obj->v6, data_6, sizeof(obj->v6));
        memcpy(&obj->v7, data_7, sizeof(obj->v7));
        memcpy(&obj->v8, data_8, sizeof(obj->v8));
        memcpy(&obj->v9, data_9, sizeof(obj->v9));
        memcpy(&obj->v10, data_10, sizeof(obj->v10));
        memcpy(&obj->v11, data_11, sizeof(obj->v11));
        memcpy(&obj->v12, data_12, sizeof(obj->v12));
        memcpy(&obj->v13, data_13, sizeof(obj->v13));
        memcpy(&obj->v14, data_14, sizeof(obj->v14));
        obj->v15 = futhark_new_f32_1d(ctx, data_15, shape_15[0]);
        if (obj->v15 == NULL)
            err = 1;
        obj->v16 = futhark_new_f32_1d(ctx, data_16, shape_16[0]);
        if (obj->v16 == NULL)
            err = 1;
        obj->v17 = futhark_new_f32_1d(ctx, data_17, shape_17[0]);
        if (obj->v17 == NULL)
            err = 1;
        obj->v18 = futhark_new_f32_1d(ctx, data_18, shape_18[0]);
        if (obj->v18 == NULL)
            err = 1;
        obj->v19 = futhark_new_f32_1d(ctx, data_19, shape_19[0]);
        if (obj->v19 == NULL)
            err = 1;
        obj->v20 = futhark_new_f32_1d(ctx, data_20, shape_20[0]);
        if (obj->v20 == NULL)
            err = 1;
        obj->v21 = futhark_new_f32_2d(ctx, data_21, shape_21[0], shape_21[1]);
        if (obj->v21 == NULL)
            err = 1;
        obj->v22 = futhark_new_f32_1d(ctx, data_22, shape_22[0]);
        if (obj->v22 == NULL)
            err = 1;
        obj->v23 = futhark_new_f32_2d(ctx, data_23, shape_23[0], shape_23[1]);
        if (obj->v23 == NULL)
            err = 1;
        obj->v24 = futhark_new_f32_1d(ctx, data_24, shape_24[0]);
        if (obj->v24 == NULL)
            err = 1;
        obj->v25 = futhark_new_f32_2d(ctx, data_25, shape_25[0], shape_25[1]);
        if (obj->v25 == NULL)
            err = 1;
        obj->v26 = futhark_new_f32_1d(ctx, data_26, shape_26[0]);
        if (obj->v26 == NULL)
            err = 1;
        obj->v27 = futhark_new_f32_1d(ctx, data_27, shape_27[0]);
        if (obj->v27 == NULL)
            err = 1;
    }
    if (err != 0) {
        int ret = 0, tmp;
        
        if (obj->v15 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v15)) != 0)
            ret = tmp;
        if (obj->v16 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v16)) != 0)
            ret = tmp;
        if (obj->v17 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v17)) != 0)
            ret = tmp;
        if (obj->v18 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v18)) != 0)
            ret = tmp;
        if (obj->v19 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v19)) != 0)
            ret = tmp;
        if (obj->v20 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v20)) != 0)
            ret = tmp;
        if (obj->v21 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v21)) != 0)
            ret = tmp;
        if (obj->v22 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v22)) != 0)
            ret = tmp;
        if (obj->v23 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v23)) != 0)
            ret = tmp;
        if (obj->v24 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v24)) != 0)
            ret = tmp;
        if (obj->v25 != NULL && (tmp = futhark_free_f32_2d(ctx, obj->v25)) != 0)
            ret = tmp;
        if (obj->v26 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v26)) != 0)
            ret = tmp;
        if (obj->v27 != NULL && (tmp = futhark_free_f32_1d(ctx, obj->v27)) != 0)
            ret = tmp;
        free(obj);
        obj = NULL;
    }
    return obj;
}

static int futrts_entry_hgoInteraction(struct futhark_context *ctx, struct memblock *mem_out_p_236134, int64_t *out_prim_out_236135, struct memblock locations_mem_234529, struct memblock orientations_mem_234530, int64_t nz2085U_192338, float epsilon_192339, float sigma_par_192340, float sigma_ort_192341)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_234533_cached_sizze_236136 = 0;
    unsigned char *mem_234533 = NULL;
    int64_t mem_234536_cached_sizze_236137 = 0;
    unsigned char *mem_234536 = NULL;
    int64_t mem_234539_cached_sizze_236138 = 0;
    unsigned char *mem_234539 = NULL;
    int64_t mem_234542_cached_sizze_236139 = 0;
    unsigned char *mem_234542 = NULL;
    int64_t mem_234545_cached_sizze_236140 = 0;
    unsigned char *mem_234545 = NULL;
    int64_t mem_234548_cached_sizze_236141 = 0;
    unsigned char *mem_234548 = NULL;
    int64_t mem_234551_cached_sizze_236142 = 0;
    unsigned char *mem_234551 = NULL;
    int64_t mem_234627_cached_sizze_236143 = 0;
    unsigned char *mem_234627 = NULL;
    int64_t mem_234630_cached_sizze_236144 = 0;
    unsigned char *mem_234630 = NULL;
    int64_t mem_234633_cached_sizze_236145 = 0;
    unsigned char *mem_234633 = NULL;
    int64_t mem_234677_cached_sizze_236146 = 0;
    unsigned char *mem_234677 = NULL;
    int64_t mem_234700_cached_sizze_236147 = 0;
    unsigned char *mem_234700 = NULL;
    int64_t mem_234705_cached_sizze_236148 = 0;
    unsigned char *mem_234705 = NULL;
    int64_t mem_234754_cached_sizze_236149 = 0;
    unsigned char *mem_234754 = NULL;
    int64_t mem_234757_cached_sizze_236150 = 0;
    unsigned char *mem_234757 = NULL;
    int64_t mem_234780_cached_sizze_236151 = 0;
    unsigned char *mem_234780 = NULL;
    int64_t mem_234783_cached_sizze_236152 = 0;
    unsigned char *mem_234783 = NULL;
    int64_t mem_234786_cached_sizze_236153 = 0;
    unsigned char *mem_234786 = NULL;
    int64_t mem_234819_cached_sizze_236154 = 0;
    unsigned char *mem_234819 = NULL;
    int64_t mem_234822_cached_sizze_236155 = 0;
    unsigned char *mem_234822 = NULL;
    int64_t mem_234825_cached_sizze_236156 = 0;
    unsigned char *mem_234825 = NULL;
    int64_t mem_234871_cached_sizze_236157 = 0;
    unsigned char *mem_234871 = NULL;
    int64_t mem_234874_cached_sizze_236158 = 0;
    unsigned char *mem_234874 = NULL;
    int64_t mem_234897_cached_sizze_236159 = 0;
    unsigned char *mem_234897 = NULL;
    int64_t mem_234946_cached_sizze_236160 = 0;
    unsigned char *mem_234946 = NULL;
    int64_t mem_234959_cached_sizze_236161 = 0;
    unsigned char *mem_234959 = NULL;
    int64_t mem_234972_cached_sizze_236162 = 0;
    unsigned char *mem_234972 = NULL;
    int64_t mem_234975_cached_sizze_236163 = 0;
    unsigned char *mem_234975 = NULL;
    int64_t mem_234978_cached_sizze_236164 = 0;
    unsigned char *mem_234978 = NULL;
    int64_t mem_235013_cached_sizze_236165 = 0;
    unsigned char *mem_235013 = NULL;
    int64_t mem_235026_cached_sizze_236166 = 0;
    unsigned char *mem_235026 = NULL;
    int64_t mem_235057_cached_sizze_236167 = 0;
    unsigned char *mem_235057 = NULL;
    int64_t mem_235060_cached_sizze_236168 = 0;
    unsigned char *mem_235060 = NULL;
    int64_t mem_235083_cached_sizze_236169 = 0;
    unsigned char *mem_235083 = NULL;
    int64_t mem_235132_cached_sizze_236170 = 0;
    unsigned char *mem_235132 = NULL;
    int64_t mem_235135_cached_sizze_236171 = 0;
    unsigned char *mem_235135 = NULL;
    int64_t mem_235158_cached_sizze_236172 = 0;
    unsigned char *mem_235158 = NULL;
    int64_t mem_235207_cached_sizze_236173 = 0;
    unsigned char *mem_235207 = NULL;
    int64_t mem_235210_cached_sizze_236174 = 0;
    unsigned char *mem_235210 = NULL;
    int64_t mem_235233_cached_sizze_236175 = 0;
    unsigned char *mem_235233 = NULL;
    int64_t mem_235247_cached_sizze_236176 = 0;
    unsigned char *mem_235247 = NULL;
    int64_t mem_235271_cached_sizze_236177 = 0;
    unsigned char *mem_235271 = NULL;
    int64_t mem_235302_cached_sizze_236178 = 0;
    unsigned char *mem_235302 = NULL;
    int64_t mem_235306_cached_sizze_236179 = 0;
    unsigned char *mem_235306 = NULL;
    int64_t mem_235310_cached_sizze_236180 = 0;
    unsigned char *mem_235310 = NULL;
    int64_t mem_235314_cached_sizze_236181 = 0;
    unsigned char *mem_235314 = NULL;
    int64_t mem_235318_cached_sizze_236182 = 0;
    unsigned char *mem_235318 = NULL;
    int64_t mem_235504_cached_sizze_236183 = 0;
    unsigned char *mem_235504 = NULL;
    int64_t mem_235507_cached_sizze_236184 = 0;
    unsigned char *mem_235507 = NULL;
    int64_t mem_235530_cached_sizze_236185 = 0;
    unsigned char *mem_235530 = NULL;
    int64_t mem_235579_cached_sizze_236186 = 0;
    unsigned char *mem_235579 = NULL;
    int64_t mem_235582_cached_sizze_236187 = 0;
    unsigned char *mem_235582 = NULL;
    int64_t mem_235585_cached_sizze_236188 = 0;
    unsigned char *mem_235585 = NULL;
    int64_t mem_235588_cached_sizze_236189 = 0;
    unsigned char *mem_235588 = NULL;
    int64_t mem_235591_cached_sizze_236190 = 0;
    unsigned char *mem_235591 = NULL;
    int64_t mem_235644_cached_sizze_236191 = 0;
    unsigned char *mem_235644 = NULL;
    int64_t mem_235647_cached_sizze_236192 = 0;
    unsigned char *mem_235647 = NULL;
    int64_t mem_235670_cached_sizze_236193 = 0;
    unsigned char *mem_235670 = NULL;
    int64_t mem_235673_cached_sizze_236194 = 0;
    unsigned char *mem_235673 = NULL;
    int64_t mem_235676_cached_sizze_236195 = 0;
    unsigned char *mem_235676 = NULL;
    int64_t mem_235679_cached_sizze_236196 = 0;
    unsigned char *mem_235679 = NULL;
    int64_t mem_235682_cached_sizze_236197 = 0;
    unsigned char *mem_235682 = NULL;
    int64_t mem_235735_cached_sizze_236198 = 0;
    unsigned char *mem_235735 = NULL;
    int64_t mem_235738_cached_sizze_236199 = 0;
    unsigned char *mem_235738 = NULL;
    int64_t mem_235741_cached_sizze_236200 = 0;
    unsigned char *mem_235741 = NULL;
    int64_t mem_235744_cached_sizze_236201 = 0;
    unsigned char *mem_235744 = NULL;
    int64_t mem_235747_cached_sizze_236202 = 0;
    unsigned char *mem_235747 = NULL;
    int64_t mem_235750_cached_sizze_236203 = 0;
    unsigned char *mem_235750 = NULL;
    int64_t mem_235753_cached_sizze_236204 = 0;
    unsigned char *mem_235753 = NULL;
    int64_t mem_235758_cached_sizze_236205 = 0;
    unsigned char *mem_235758 = NULL;
    int64_t mem_235771_cached_sizze_236206 = 0;
    unsigned char *mem_235771 = NULL;
    int64_t mem_235773_cached_sizze_236207 = 0;
    unsigned char *mem_235773 = NULL;
    struct memblock mem_235790;
    
    mem_235790.references = NULL;
    
    struct memblock mem_235184;
    
    mem_235184.references = NULL;
    
    struct memblock mem_235171;
    
    mem_235171.references = NULL;
    
    struct memblock ext_mem_235199;
    
    ext_mem_235199.references = NULL;
    
    struct memblock ext_mem_235204;
    
    ext_mem_235204.references = NULL;
    
    struct memblock mem_235109;
    
    mem_235109.references = NULL;
    
    struct memblock mem_235096;
    
    mem_235096.references = NULL;
    
    struct memblock ext_mem_235124;
    
    ext_mem_235124.references = NULL;
    
    struct memblock ext_mem_235129;
    
    ext_mem_235129.references = NULL;
    
    struct memblock mem_235039;
    
    mem_235039.references = NULL;
    
    struct memblock ext_mem_235054;
    
    ext_mem_235054.references = NULL;
    
    struct memblock mem_param_tmp_236046;
    
    mem_param_tmp_236046.references = NULL;
    
    struct memblock mem_param_tmp_236045;
    
    mem_param_tmp_236045.references = NULL;
    
    struct memblock mem_234913;
    
    mem_234913.references = NULL;
    
    struct memblock mem_234910;
    
    mem_234910.references = NULL;
    
    struct memblock mem_param_234868;
    
    mem_param_234868.references = NULL;
    
    struct memblock mem_param_234863;
    
    mem_param_234863.references = NULL;
    
    struct memblock ext_mem_234942;
    
    ext_mem_234942.references = NULL;
    
    struct memblock ext_mem_234943;
    
    ext_mem_234943.references = NULL;
    
    struct memblock mem_234858;
    
    mem_234858.references = NULL;
    
    struct memblock mem_235556;
    
    mem_235556.references = NULL;
    
    struct memblock mem_235543;
    
    mem_235543.references = NULL;
    
    struct memblock ext_mem_235571;
    
    ext_mem_235571.references = NULL;
    
    struct memblock ext_mem_235576;
    
    ext_mem_235576.references = NULL;
    
    struct memblock mem_235010;
    
    mem_235010.references = NULL;
    
    struct memblock mem_234624;
    
    mem_234624.references = NULL;
    
    struct memblock mem_out_235975;
    
    mem_out_235975.references = NULL;
    
    int64_t prim_out_235976;
    int64_t binop_y_234531 = (int64_t) 4 * nz2085U_192338;
    int64_t bytes_234532 = smax64((int64_t) 0, binop_y_234531);
    
    if (mem_234533_cached_sizze_236136 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_234533, &mem_234533_cached_sizze_236136, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234536_cached_sizze_236137 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_234536, &mem_234536_cached_sizze_236137, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234539_cached_sizze_236138 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_234539, &mem_234539_cached_sizze_236138, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234542_cached_sizze_236139 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_234542, &mem_234542_cached_sizze_236139, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234545_cached_sizze_236140 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_234545, &mem_234545_cached_sizze_236140, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234548_cached_sizze_236141 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_234548, &mem_234548_cached_sizze_236141, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234551_cached_sizze_236142 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_234551, &mem_234551_cached_sizze_236142, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    float defunc_0_f_res_225374;
    float defunc_0_f_res_225375;
    float defunc_0_f_res_225376;
    float defunc_0_f_res_225377;
    float defunc_0_f_res_225378;
    float defunc_0_f_res_225379;
    float redout_233594;
    float redout_233595;
    float redout_233596;
    float redout_233597;
    float redout_233598;
    float redout_233599;
    
    redout_233594 = 0.0F;
    redout_233595 = 0.0F;
    redout_233596 = 0.0F;
    redout_233597 = 0.0F;
    redout_233598 = 0.0F;
    redout_233599 = 0.0F;
    for (int64_t i_233607 = 0; i_233607 < nz2085U_192338; i_233607++) {
        float defunc_1_f_res_216315 = ((float *) locations_mem_234529.mem)[i_233607 * (int64_t) 3];
        float defunc_1_f_res_216316 = ((float *) locations_mem_234529.mem)[i_233607 * (int64_t) 3 + (int64_t) 1];
        float defunc_1_f_res_216317 = ((float *) locations_mem_234529.mem)[i_233607 * (int64_t) 3 + (int64_t) 2];
        float quaternion_arg_216318 = ((float *) orientations_mem_234530.mem)[i_233607 * (int64_t) 4 + (int64_t) 1];
        float quaternion_arg_216319 = ((float *) orientations_mem_234530.mem)[i_233607 * (int64_t) 4 + (int64_t) 2];
        float quaternion_arg_216320 = ((float *) orientations_mem_234530.mem)[i_233607 * (int64_t) 4 + (int64_t) 3];
        float quaternion_arg_216321 = ((float *) orientations_mem_234530.mem)[i_233607 * (int64_t) 4];
        float defunc_1_f_res_211784 = fmin32(defunc_1_f_res_216315, redout_233594);
        float defunc_1_f_res_211785 = fmin32(defunc_1_f_res_216316, redout_233595);
        float defunc_1_f_res_211786 = fmin32(defunc_1_f_res_216317, redout_233596);
        float defunc_1_f_res_211769 = fmax32(defunc_1_f_res_216315, redout_233597);
        float defunc_1_f_res_211770 = fmax32(defunc_1_f_res_216316, redout_233598);
        float defunc_1_f_res_211771 = fmax32(defunc_1_f_res_216317, redout_233599);
        
        ((float *) mem_234533)[i_233607] = defunc_1_f_res_216315;
        ((float *) mem_234536)[i_233607] = defunc_1_f_res_216316;
        ((float *) mem_234539)[i_233607] = defunc_1_f_res_216317;
        ((float *) mem_234542)[i_233607] = quaternion_arg_216321;
        ((float *) mem_234545)[i_233607] = quaternion_arg_216318;
        ((float *) mem_234548)[i_233607] = quaternion_arg_216319;
        ((float *) mem_234551)[i_233607] = quaternion_arg_216320;
        
        float redout_tmp_235977 = defunc_1_f_res_211784;
        float redout_tmp_235978 = defunc_1_f_res_211785;
        float redout_tmp_235979 = defunc_1_f_res_211786;
        float redout_tmp_235980 = defunc_1_f_res_211769;
        float redout_tmp_235981 = defunc_1_f_res_211770;
        float redout_tmp_235982 = defunc_1_f_res_211771;
        
        redout_233594 = redout_tmp_235977;
        redout_233595 = redout_tmp_235978;
        redout_233596 = redout_tmp_235979;
        redout_233597 = redout_tmp_235980;
        redout_233598 = redout_tmp_235981;
        redout_233599 = redout_tmp_235982;
    }
    defunc_0_f_res_225374 = redout_233594;
    defunc_0_f_res_225375 = redout_233595;
    defunc_0_f_res_225376 = redout_233596;
    defunc_0_f_res_225377 = redout_233597;
    defunc_0_f_res_225378 = redout_233598;
    defunc_0_f_res_225379 = redout_233599;
    
    float arg_197774 = sigma_par_192340 + sigma_ort_192341;
    float cutoffL_197775 = 3.0F * arg_197774;
    float defunc_1_f_res_211790 = defunc_0_f_res_225377 - defunc_0_f_res_225374;
    float defunc_1_f_res_211791 = defunc_0_f_res_225378 - defunc_0_f_res_225375;
    float defunc_1_f_res_211792 = defunc_0_f_res_225379 - defunc_0_f_res_225376;
    float defunc_1_f_res_211793 = cutoffL_197775 + defunc_1_f_res_211790;
    float defunc_1_f_res_211794 = cutoffL_197775 + defunc_1_f_res_211791;
    float defunc_1_f_res_211795 = cutoffL_197775 + defunc_1_f_res_211792;
    float defunc_1_f_res_213513 = defunc_1_f_res_211795 * defunc_1_f_res_211795;
    float sqrt_res_213516 = futrts_sqrt32(defunc_1_f_res_213513);
    float ceil_arg_213517 = sqrt_res_213516 / cutoffL_197775;
    float ceil_res_213518 = futrts_ceil32(ceil_arg_213517);
    int32_t defunc_0_f_res_213519 = fptosi_f32_i32(ceil_res_213518);
    float i64_res_213524 = sitofp_i32_f32(defunc_0_f_res_213519);
    float zs_res_213525 = 1.0F / i64_res_213524;
    float defunc_1_f_res_213534 = defunc_1_f_res_211795 * zs_res_213525;
    float defunc_1_f_res_213503 = defunc_1_f_res_211794 * defunc_1_f_res_211794;
    float sqrt_res_213507 = futrts_sqrt32(defunc_1_f_res_213503);
    float ceil_arg_213508 = sqrt_res_213507 / cutoffL_197775;
    float ceil_res_213509 = futrts_ceil32(ceil_arg_213508);
    int32_t defunc_0_f_res_213510 = fptosi_f32_i32(ceil_res_213509);
    float i64_res_213522 = sitofp_i32_f32(defunc_0_f_res_213510);
    float zs_res_213523 = 1.0F / i64_res_213522;
    float defunc_1_f_res_213530 = defunc_1_f_res_211794 * zs_res_213523;
    float arg_213726 = defunc_1_f_res_213530 * defunc_1_f_res_213534;
    float defunc_1_f_res_213493 = defunc_1_f_res_211793 * defunc_1_f_res_211793;
    float sqrt_res_213498 = futrts_sqrt32(defunc_1_f_res_213493);
    float ceil_arg_213499 = sqrt_res_213498 / cutoffL_197775;
    float ceil_res_213500 = futrts_ceil32(ceil_arg_213499);
    int32_t defunc_0_f_res_213501 = fptosi_f32_i32(ceil_res_213500);
    float i64_res_213520 = sitofp_i32_f32(defunc_0_f_res_213501);
    float zs_res_213521 = 1.0F / i64_res_213520;
    float defunc_1_f_res_213526 = defunc_1_f_res_211793 * zs_res_213521;
    float defunc_1_f_res_214420 = defunc_1_f_res_213526 * arg_213726;
    float arg_213691 = defunc_1_f_res_213526 * defunc_1_f_res_213530;
    float defunc_0_f_res_214433 = arg_213691 / defunc_1_f_res_214420;
    float arg_213647 = defunc_1_f_res_213526 * defunc_1_f_res_213534;
    float defunc_0_f_res_214429 = arg_213647 / defunc_1_f_res_214420;
    float defunc_0_f_res_214425 = arg_213726 / defunc_1_f_res_214420;
    
    if (memblock_alloc(ctx, &mem_234624, bytes_234532, "mem_234624")) {
        err = 1;
        goto cleanup;
    }
    if (mem_234627_cached_sizze_236143 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_234627, &mem_234627_cached_sizze_236143, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234630_cached_sizze_236144 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_234630, &mem_234630_cached_sizze_236144, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234633_cached_sizze_236145 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_234633, &mem_234633_cached_sizze_236145, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int32_t defunc_2_reduce_res_225387;
    int32_t redout_233619 = 0;
    
    for (int64_t i_233624 = 0; i_233624 < nz2085U_192338; i_233624++) {
        float x_216256 = ((float *) mem_234533)[i_233624];
        float x_216257 = ((float *) mem_234536)[i_233624];
        float x_216258 = ((float *) mem_234539)[i_233624];
        float defunc_1_f_res_216259 = x_216256 - defunc_0_f_res_225374;
        float defunc_1_f_res_216260 = x_216257 - defunc_0_f_res_225375;
        float defunc_1_f_res_216261 = x_216258 - defunc_0_f_res_225376;
        float defunc_1_f_res_216265 = defunc_0_f_res_214425 * defunc_1_f_res_216259;
        float defunc_1_f_res_216266 = defunc_0_f_res_214429 * defunc_1_f_res_216260;
        float defunc_1_f_res_216267 = defunc_0_f_res_214433 * defunc_1_f_res_216261;
        float defunc_0_f_res_216268 = futrts_floor32(defunc_1_f_res_216265);
        int32_t defunc_0_g_res_216269 = fptosi_f32_i32(defunc_0_f_res_216268);
        float defunc_0_f_res_216270 = futrts_floor32(defunc_1_f_res_216266);
        int32_t defunc_0_g_res_216271 = fptosi_f32_i32(defunc_0_f_res_216270);
        float defunc_0_f_res_216272 = futrts_floor32(defunc_1_f_res_216267);
        int32_t defunc_0_g_res_216273 = fptosi_f32_i32(defunc_0_f_res_216272);
        int32_t arg_216274 = mul32(defunc_0_f_res_213510, defunc_0_g_res_216269);
        int32_t arg_216275 = mul32(defunc_0_f_res_213519, arg_216274);
        int32_t arg_216276 = mul32(defunc_0_f_res_213519, defunc_0_g_res_216271);
        int32_t arg_216277 = add32(arg_216275, arg_216276);
        int32_t defunc_0_g_res_216278 = add32(defunc_0_g_res_216273, arg_216277);
        int32_t unsign_arg_214468 = umax32(defunc_0_g_res_216278, redout_233619);
        
        ((int32_t *) mem_234624.mem)[i_233624] = defunc_0_g_res_216278;
        ((float *) mem_234627)[i_233624] = defunc_1_f_res_216259;
        ((float *) mem_234630)[i_233624] = defunc_1_f_res_216260;
        ((float *) mem_234633)[i_233624] = defunc_1_f_res_216261;
        
        int32_t redout_tmp_235990 = unsign_arg_214468;
        
        redout_233619 = redout_tmp_235990;
    }
    defunc_2_reduce_res_225387 = redout_233619;
    
    float defunc_1_f_res_213535 = defunc_1_f_res_213526 * defunc_1_f_res_213526;
    float sqrt_res_213540 = futrts_sqrt32(defunc_1_f_res_213535);
    float defunc_1_f_res_213542 = defunc_1_f_res_213530 * defunc_1_f_res_213530;
    float sqrt_res_213546 = futrts_sqrt32(defunc_1_f_res_213542);
    float defunc_1_f_res_213549 = defunc_1_f_res_213534 * defunc_1_f_res_213534;
    float sqrt_res_213552 = futrts_sqrt32(defunc_1_f_res_213549);
    float defunc_0_f_res_213553 = cutoffL_197775 / sqrt_res_213540;
    float defunc_0_f_res_213554 = cutoffL_197775 / sqrt_res_213546;
    float defunc_0_f_res_213555 = cutoffL_197775 / sqrt_res_213552;
    float defunc_0_f_res_213556 = futrts_ceil32(defunc_0_f_res_213553);
    float defunc_0_f_res_213557 = futrts_ceil32(defunc_0_f_res_213554);
    float defunc_0_f_res_213558 = futrts_ceil32(defunc_0_f_res_213555);
    int64_t defunc_0_f_res_213559 = fptosi_f32_i64(defunc_0_f_res_213556);
    int64_t defunc_0_f_res_213560 = fptosi_f32_i64(defunc_0_f_res_213557);
    int64_t defunc_0_f_res_213561 = fptosi_f32_i64(defunc_0_f_res_213558);
    int64_t defunc_0_f_res_213562 = add64((int64_t) 1, defunc_0_f_res_213559);
    int64_t defunc_0_f_res_213563 = add64((int64_t) 1, defunc_0_f_res_213560);
    int64_t defunc_0_f_res_213564 = add64((int64_t) 1, defunc_0_f_res_213561);
    int64_t defunc_0_f_res_213565 = add64((int64_t) 2, defunc_0_f_res_213559);
    int64_t defunc_0_f_res_213566 = add64((int64_t) 2, defunc_0_f_res_213560);
    int64_t defunc_0_f_res_213567 = add64((int64_t) 2, defunc_0_f_res_213561);
    int64_t nnzq_213568 = add64(defunc_0_f_res_213563, defunc_0_f_res_213566);
    int64_t range_start_213569 = sub64((int64_t) 0, defunc_0_f_res_213562);
    bool bounds_invalid_upwards_213570 = slt64(defunc_0_f_res_213565, range_start_213569);
    int64_t distance_213571 = sub64(defunc_0_f_res_213565, range_start_213569);
    bool valid_213572 = !bounds_invalid_upwards_213570;
    bool range_valid_c_213573;
    
    if (!valid_213572) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) range_start_213569, "..<", (long long) defunc_0_f_res_213565, " is invalid.", "-> #0  associations.fut:81:22-28\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t range_start_213575 = sub64((int64_t) 0, defunc_0_f_res_213563);
    bool bounds_invalid_upwards_213576 = slt64(defunc_0_f_res_213566, range_start_213575);
    int64_t distance_213577 = sub64(defunc_0_f_res_213566, range_start_213575);
    bool valid_213578 = !bounds_invalid_upwards_213576;
    bool range_valid_c_213579;
    
    if (!valid_213578) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) range_start_213575, "..<", (long long) defunc_0_f_res_213566, " is invalid.", "-> #0  associations.fut:80:22-28\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_213581 = slt64(defunc_0_f_res_213567, (int64_t) 1);
    int64_t distance_213582 = sub64(defunc_0_f_res_213567, (int64_t) 1);
    bool valid_213583 = !bounds_invalid_upwards_213581;
    bool range_valid_c_213584;
    
    if (!valid_213583) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 1, "..<", (long long) defunc_0_f_res_213567, " is invalid.", "-> #0  associations.fut:79:22-27\n   #1  associations.fut:78:43-80:29\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool dim_match_213585 = defunc_0_f_res_213564 == distance_213582;
    bool empty_or_match_cert_213586;
    
    if (!dim_match_213585) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (core language) shape (", (long long) distance_213582, ") cannot match shape of type `[", (long long) defunc_0_f_res_213564, "](i64, i64, i64)`.", "-> #0  associations.fut:78:54-79:49\n   #1  associations.fut:78:43-80:29\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_x_234674 = defunc_0_f_res_213564 * distance_213577;
    int64_t binop_y_234675 = (int64_t) 8 * binop_x_234674;
    int64_t bytes_234676 = smax64((int64_t) 0, binop_y_234675);
    
    if (mem_234677_cached_sizze_236146 < bytes_234676) {
        err = lexical_realloc(ctx, &mem_234677, &mem_234677_cached_sizze_236146, bytes_234676);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233631 = 0; i_233631 < distance_213577; i_233631++) {
        int64_t index_primexp_234376 = add64(range_start_213575, i_233631);
        
        for (int64_t i_235996 = 0; i_235996 < defunc_0_f_res_213564; i_235996++) {
            ((int64_t *) mem_234677)[i_233631 * defunc_0_f_res_213564 + i_235996] = index_primexp_234376;
        }
    }
    
    bool dim_match_213591 = nnzq_213568 == distance_213577;
    bool empty_or_match_cert_213592;
    
    if (!dim_match_213591) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (core language) shape (", (long long) distance_213577, ", ", (long long) defunc_0_f_res_213564, ") cannot match shape of type `[", (long long) nnzq_213568, "][", (long long) defunc_0_f_res_213564, "](i64, i64, i64)`.", "-> #0  associations.fut:78:43-80:56\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_213606 = slt64(defunc_0_f_res_213566, (int64_t) 1);
    bool valid_213608 = !bounds_invalid_upwards_213606;
    bool range_valid_c_213609;
    
    if (!valid_213608) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 1, "..<", (long long) defunc_0_f_res_213566, " is invalid.", "-> #0  associations.fut:76:22-27\n   #1  associations.fut:75:29-77:29\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t distance_213607 = sub64(defunc_0_f_res_213566, (int64_t) 1);
    bool dim_match_213610 = defunc_0_f_res_213563 == distance_213607;
    bool empty_or_match_cert_213611;
    
    if (!dim_match_213610) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (core language) shape (", (long long) distance_213607, ") cannot match shape of type `[", (long long) defunc_0_f_res_213563, "](i64, i64, i64)`.", "-> #0  associations.fut:75:40-76:49\n   #1  associations.fut:75:29-77:29\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_x_234697 = defunc_0_f_res_213563 * distance_213571;
    int64_t binop_y_234698 = (int64_t) 8 * binop_x_234697;
    int64_t bytes_234699 = smax64((int64_t) 0, binop_y_234698);
    
    if (mem_234700_cached_sizze_236147 < bytes_234699) {
        err = lexical_realloc(ctx, &mem_234700, &mem_234700_cached_sizze_236147, bytes_234699);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_x_234701 = nnzq_213568 * distance_213571;
    int64_t binop_x_234702 = defunc_0_f_res_213564 * binop_x_234701;
    int64_t binop_y_234703 = (int64_t) 8 * binop_x_234702;
    int64_t bytes_234704 = smax64((int64_t) 0, binop_y_234703);
    
    if (mem_234705_cached_sizze_236148 < bytes_234704) {
        err = lexical_realloc(ctx, &mem_234705, &mem_234705_cached_sizze_236148, bytes_234704);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t ixfun_arg_234725 = defunc_0_f_res_213564 * nnzq_213568;
    
    for (int64_t i_233637 = 0; i_233637 < distance_213571; i_233637++) {
        int64_t index_primexp_234374 = add64(range_start_213569, i_233637);
        
        for (int64_t i_235999 = 0; i_235999 < nnzq_213568; i_235999++) {
            for (int64_t i_236000 = 0; i_236000 < defunc_0_f_res_213564; i_236000++) {
                ((int64_t *) mem_234705)[i_233637 * ixfun_arg_234725 + (i_235999 * defunc_0_f_res_213564 + i_236000)] = index_primexp_234374;
            }
        }
        for (int64_t i_236001 = 0; i_236001 < defunc_0_f_res_213563; i_236001++) {
            ((int64_t *) mem_234700)[i_233637 * defunc_0_f_res_213563 + i_236001] = index_primexp_234374;
        }
    }
    
    bool bounds_invalid_upwards_213622 = slt64(defunc_0_f_res_213565, (int64_t) 1);
    int64_t distance_213623 = sub64(defunc_0_f_res_213565, (int64_t) 1);
    bool valid_213624 = !bounds_invalid_upwards_213622;
    bool range_valid_c_213625;
    
    if (!valid_213624) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 1, "..<", (long long) defunc_0_f_res_213565, " is invalid.", "-> #0  associations.fut:74:40-45\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t conc_tmp_213628 = distance_213623 + binop_x_234697;
    int64_t conc_tmp_213629 = conc_tmp_213628 + binop_x_234702;
    float defunc_0_f_res_213634 = 0.0F - defunc_1_f_res_213526;
    float defunc_0_f_res_213638 = 0.0F - defunc_1_f_res_213530;
    float defunc_0_f_res_213642 = 0.0F - defunc_1_f_res_213534;
    float arg_213643 = cutoffL_197775 * cutoffL_197775;
    float arg_213656 = defunc_1_f_res_213534 * arg_213647;
    float arg_213665 = defunc_1_f_res_213526 * arg_213647;
    float defunc_1_f_res_213672 = defunc_1_f_res_213526 * arg_213656;
    float defunc_0_f_res_213677 = arg_213656 / defunc_1_f_res_213672;
    float defunc_0_f_res_213681 = arg_213647 / defunc_1_f_res_213672;
    float defunc_0_f_res_213682 = arg_213665 / defunc_1_f_res_213672;
    float arg_213694 = defunc_1_f_res_213530 * arg_213691;
    float arg_213703 = defunc_1_f_res_213526 * arg_213691;
    float defunc_1_f_res_213712 = defunc_1_f_res_213526 * arg_213694;
    float defunc_0_f_res_213717 = arg_213694 / defunc_1_f_res_213712;
    float defunc_0_f_res_213721 = arg_213703 / defunc_1_f_res_213712;
    float defunc_0_f_res_213725 = arg_213691 / defunc_1_f_res_213712;
    float arg_213741 = defunc_1_f_res_213534 * arg_213726;
    float arg_213750 = defunc_1_f_res_213530 * arg_213726;
    float defunc_1_f_res_213755 = arg_213726 * arg_213726;
    float defunc_0_f_res_213760 = arg_213726 / defunc_1_f_res_213755;
    float defunc_0_f_res_213761 = arg_213741 / defunc_1_f_res_213755;
    float defunc_0_f_res_213765 = arg_213750 / defunc_1_f_res_213755;
    int64_t binop_y_234752 = (int64_t) 8 * conc_tmp_213629;
    int64_t bytes_234753 = smax64((int64_t) 0, binop_y_234752);
    
    if (mem_234754_cached_sizze_236149 < bytes_234753) {
        err = lexical_realloc(ctx, &mem_234754, &mem_234754_cached_sizze_236149, bytes_234753);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234757_cached_sizze_236150 < bytes_234753) {
        err = lexical_realloc(ctx, &mem_234757, &mem_234757_cached_sizze_236150, bytes_234753);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_233648;
    int64_t scanacc_233642 = (int64_t) 0;
    
    for (int64_t i_233645 = 0; i_233645 < conc_tmp_213629; i_233645++) {
        bool index_concat_cmp_234364 = sle64(conc_tmp_213628, i_233645);
        int64_t index_concat_branch_234372;
        
        if (index_concat_cmp_234364 == 1) {
            int64_t index_concat_i_234365 = sub64(i_233645, conc_tmp_213628);
            int64_t new_index_234479 = squot64(index_concat_i_234365, ixfun_arg_234725);
            int64_t binop_y_234483 = new_index_234479 * ixfun_arg_234725;
            int64_t binop_x_234484 = index_concat_i_234365 - binop_y_234483;
            int64_t new_index_234485 = squot64(binop_x_234484, defunc_0_f_res_213564);
            int64_t binop_y_234497 = defunc_0_f_res_213564 * new_index_234485;
            int64_t new_index_234498 = binop_x_234484 - binop_y_234497;
            int64_t index_concat_234366 = ((int64_t *) mem_234705)[new_index_234479 * ixfun_arg_234725 + new_index_234485 * defunc_0_f_res_213564 + new_index_234498];
            
            index_concat_branch_234372 = index_concat_234366;
        } else {
            bool index_concat_cmp_234367 = sle64(distance_213623, i_233645);
            int64_t index_concat_branch_234371;
            
            if (index_concat_cmp_234367 == 1) {
                int64_t index_concat_i_234368 = sub64(i_233645, distance_213623);
                int64_t new_index_234499 = squot64(index_concat_i_234368, defunc_0_f_res_213563);
                int64_t binop_y_234501 = defunc_0_f_res_213563 * new_index_234499;
                int64_t new_index_234502 = index_concat_i_234368 - binop_y_234501;
                int64_t index_concat_234369 = ((int64_t *) mem_234700)[new_index_234499 * defunc_0_f_res_213563 + new_index_234502];
                
                index_concat_branch_234371 = index_concat_234369;
            } else {
                int64_t index_primexp_234504 = add64((int64_t) 1, i_233645);
                
                index_concat_branch_234371 = index_primexp_234504;
            }
            index_concat_branch_234372 = index_concat_branch_234371;
        }
        
        int64_t index_concat_branch_234361;
        
        if (index_concat_cmp_234364 == 1) {
            int64_t index_concat_i_234354 = sub64(i_233645, conc_tmp_213628);
            int64_t binop_x_234454 = squot64(index_concat_i_234354, ixfun_arg_234725);
            int64_t binop_y_234456 = binop_x_234454 * ixfun_arg_234725;
            int64_t binop_x_234457 = index_concat_i_234354 - binop_y_234456;
            int64_t new_index_234458 = squot64(binop_x_234457, defunc_0_f_res_213564);
            int64_t binop_y_234470 = defunc_0_f_res_213564 * new_index_234458;
            int64_t new_index_234471 = binop_x_234457 - binop_y_234470;
            int64_t index_concat_234355 = ((int64_t *) mem_234677)[new_index_234458 * defunc_0_f_res_213564 + new_index_234471];
            
            index_concat_branch_234361 = index_concat_234355;
        } else {
            bool index_concat_cmp_234356 = sle64(distance_213623, i_233645);
            int64_t index_concat_branch_234360;
            
            if (index_concat_cmp_234356 == 1) {
                int64_t index_concat_i_234357 = sub64(i_233645, distance_213623);
                int64_t binop_x_234473 = squot64(index_concat_i_234357, defunc_0_f_res_213563);
                int64_t binop_y_234474 = defunc_0_f_res_213563 * binop_x_234473;
                int64_t new_index_234475 = index_concat_i_234357 - binop_y_234474;
                int64_t index_primexp_234477 = add64((int64_t) 1, new_index_234475);
                
                index_concat_branch_234360 = index_primexp_234477;
            } else {
                index_concat_branch_234360 = (int64_t) 0;
            }
            index_concat_branch_234361 = index_concat_branch_234360;
        }
        
        int64_t index_concat_branch_234350;
        
        if (index_concat_cmp_234364 == 1) {
            int64_t index_concat_i_234347 = sub64(i_233645, conc_tmp_213628);
            int64_t binop_x_234446 = squot64(index_concat_i_234347, defunc_0_f_res_213564);
            int64_t binop_y_234447 = defunc_0_f_res_213564 * binop_x_234446;
            int64_t new_index_234448 = index_concat_i_234347 - binop_y_234447;
            int64_t index_primexp_234450 = add64((int64_t) 1, new_index_234448);
            
            index_concat_branch_234350 = index_primexp_234450;
        } else {
            index_concat_branch_234350 = (int64_t) 0;
        }
        
        float defunc_0_f_res_216021 = sitofp_i64_f32(index_concat_branch_234372);
        float defunc_0_f_res_216022 = sitofp_i64_f32(index_concat_branch_234361);
        float defunc_0_f_res_216023 = sitofp_i64_f32(index_concat_branch_234350);
        float defunc_1_f_res_216024 = defunc_1_f_res_213526 * defunc_0_f_res_216021;
        float defunc_1_f_res_216025 = defunc_1_f_res_213530 * defunc_0_f_res_216022;
        float defunc_1_f_res_216026 = defunc_1_f_res_213534 * defunc_0_f_res_216023;
        float defunc_1_f_res_216027 = defunc_1_f_res_216025 - defunc_0_f_res_213638;
        float defunc_1_f_res_216028 = defunc_0_f_res_213682 * defunc_1_f_res_216026;
        float defunc_1_f_res_216029 = defunc_0_f_res_213677 * defunc_1_f_res_216024;
        float defunc_1_f_res_216030 = defunc_0_f_res_213681 * defunc_1_f_res_216027;
        bool cond_216031 = -1.0F < defunc_1_f_res_216028;
        bool cond_t_res_216032 = defunc_1_f_res_216028 < 1.0F;
        bool x_216033 = cond_216031 && cond_t_res_216032;
        bool cond_t_res_216034 = -1.0F < defunc_1_f_res_216029;
        bool x_216035 = x_216033 && cond_t_res_216034;
        bool cond_t_res_216036 = defunc_1_f_res_216029 < 1.0F;
        bool x_216037 = x_216035 && cond_t_res_216036;
        float planeDD_res_216038;
        
        if (x_216037 == 1) {
            float arg_225158 = defunc_1_f_res_216030 * defunc_1_f_res_216030;
            float defunc_1_f_res_225159 = arg_213647 * arg_213647;
            float planeDD_res_t_res_225160 = arg_225158 * defunc_1_f_res_225159;
            
            planeDD_res_216038 = planeDD_res_t_res_225160;
        } else {
            planeDD_res_216038 = INFINITY;
        }
        
        float defunc_1_f_res_216042 = defunc_1_f_res_216025 - defunc_1_f_res_213530;
        float defunc_1_f_res_216043 = defunc_0_f_res_213681 * defunc_1_f_res_216042;
        float planeDD_res_216044;
        
        if (x_216037 == 1) {
            float arg_225161 = defunc_1_f_res_216043 * defunc_1_f_res_216043;
            float defunc_1_f_res_225162 = arg_213647 * arg_213647;
            float planeDD_res_t_res_225163 = arg_225161 * defunc_1_f_res_225162;
            
            planeDD_res_216044 = planeDD_res_t_res_225163;
        } else {
            planeDD_res_216044 = INFINITY;
        }
        
        float defunc_1_f_res_216048 = defunc_1_f_res_216026 - defunc_0_f_res_213642;
        float defunc_1_f_res_216049 = defunc_0_f_res_213717 * defunc_1_f_res_216024;
        float defunc_1_f_res_216050 = defunc_0_f_res_213721 * defunc_1_f_res_216025;
        float defunc_1_f_res_216051 = defunc_0_f_res_213725 * defunc_1_f_res_216048;
        bool cond_216052 = -1.0F < defunc_1_f_res_216049;
        bool cond_t_res_216053 = defunc_1_f_res_216049 < 1.0F;
        bool x_216054 = cond_216052 && cond_t_res_216053;
        bool cond_t_res_216055 = -1.0F < defunc_1_f_res_216050;
        bool x_216056 = x_216054 && cond_t_res_216055;
        bool cond_t_res_216057 = defunc_1_f_res_216050 < 1.0F;
        bool x_216058 = x_216056 && cond_t_res_216057;
        float planeDD_res_216059;
        
        if (x_216058 == 1) {
            float arg_225164 = defunc_1_f_res_216051 * defunc_1_f_res_216051;
            float defunc_1_f_res_225165 = arg_213691 * arg_213691;
            float planeDD_res_t_res_225166 = arg_225164 * defunc_1_f_res_225165;
            
            planeDD_res_216059 = planeDD_res_t_res_225166;
        } else {
            planeDD_res_216059 = INFINITY;
        }
        
        float defunc_1_f_res_216063 = defunc_1_f_res_216026 - defunc_1_f_res_213534;
        float defunc_1_f_res_216064 = defunc_0_f_res_213725 * defunc_1_f_res_216063;
        float planeDD_res_216065;
        
        if (x_216058 == 1) {
            float arg_225167 = defunc_1_f_res_216064 * defunc_1_f_res_216064;
            float defunc_1_f_res_225168 = arg_213691 * arg_213691;
            float planeDD_res_t_res_225169 = arg_225167 * defunc_1_f_res_225168;
            
            planeDD_res_216065 = planeDD_res_t_res_225169;
        } else {
            planeDD_res_216065 = INFINITY;
        }
        
        float defunc_1_f_res_216069 = defunc_1_f_res_216024 - defunc_0_f_res_213634;
        float defunc_1_f_res_216070 = defunc_0_f_res_213761 * defunc_1_f_res_216025;
        float defunc_1_f_res_216071 = defunc_0_f_res_213765 * defunc_1_f_res_216026;
        float defunc_1_f_res_216072 = defunc_0_f_res_213760 * defunc_1_f_res_216069;
        bool cond_216073 = -1.0F < defunc_1_f_res_216070;
        bool cond_t_res_216074 = defunc_1_f_res_216070 < 1.0F;
        bool x_216075 = cond_216073 && cond_t_res_216074;
        bool cond_t_res_216076 = -1.0F < defunc_1_f_res_216071;
        bool x_216077 = x_216075 && cond_t_res_216076;
        bool cond_t_res_216078 = defunc_1_f_res_216071 < 1.0F;
        bool x_216079 = x_216077 && cond_t_res_216078;
        float planeDD_res_216080;
        
        if (x_216079 == 1) {
            float arg_225170 = defunc_1_f_res_216072 * defunc_1_f_res_216072;
            float planeDD_res_t_res_225172 = defunc_1_f_res_213755 * arg_225170;
            
            planeDD_res_216080 = planeDD_res_t_res_225172;
        } else {
            planeDD_res_216080 = INFINITY;
        }
        
        float defunc_1_f_res_216084 = defunc_1_f_res_216024 - defunc_1_f_res_213526;
        float defunc_1_f_res_216085 = defunc_0_f_res_213760 * defunc_1_f_res_216084;
        float planeDD_res_216086;
        
        if (x_216079 == 1) {
            float arg_225173 = defunc_1_f_res_216085 * defunc_1_f_res_216085;
            float planeDD_res_t_res_225175 = defunc_1_f_res_213755 * arg_225173;
            
            planeDD_res_216086 = planeDD_res_t_res_225175;
        } else {
            planeDD_res_216086 = INFINITY;
        }
        
        float defunc_1_f_res_216090 = defunc_1_f_res_213526 * defunc_1_f_res_216024;
        float a_216091 = defunc_1_f_res_216090 / defunc_1_f_res_213535;
        bool cond_216092 = -1.0F < a_216091;
        bool cond_t_res_216093 = a_216091 < 1.0F;
        bool x_216094 = cond_216092 && cond_t_res_216093;
        float edgeDD_res_216095;
        
        if (x_216094 == 1) {
            float defunc_0_f_res_225176 = defunc_1_f_res_213526 * a_216091;
            float defunc_1_f_res_225177 = defunc_1_f_res_216024 - defunc_0_f_res_225176;
            float defunc_1_f_res_225178 = defunc_1_f_res_225177 * defunc_1_f_res_225177;
            float defunc_1_f_res_225179 = defunc_1_f_res_216027 * defunc_1_f_res_216027;
            float defunc_1_f_res_225180 = defunc_1_f_res_216048 * defunc_1_f_res_216048;
            float defunc_1_f_res_225181 = defunc_1_f_res_225179 + defunc_1_f_res_225180;
            float defunc_0_f_res_225182 = defunc_1_f_res_225178 + defunc_1_f_res_225181;
            
            edgeDD_res_216095 = defunc_0_f_res_225182;
        } else {
            edgeDD_res_216095 = INFINITY;
        }
        
        float edgeDD_res_216103;
        
        if (x_216094 == 1) {
            float defunc_0_f_res_225183 = defunc_1_f_res_213526 * a_216091;
            float defunc_1_f_res_225184 = defunc_1_f_res_216024 - defunc_0_f_res_225183;
            float defunc_1_f_res_225185 = defunc_1_f_res_225184 * defunc_1_f_res_225184;
            float defunc_1_f_res_225186 = defunc_1_f_res_216042 * defunc_1_f_res_216042;
            float defunc_1_f_res_225187 = defunc_1_f_res_216048 * defunc_1_f_res_216048;
            float defunc_1_f_res_225188 = defunc_1_f_res_225186 + defunc_1_f_res_225187;
            float defunc_0_f_res_225189 = defunc_1_f_res_225185 + defunc_1_f_res_225188;
            
            edgeDD_res_216103 = defunc_0_f_res_225189;
        } else {
            edgeDD_res_216103 = INFINITY;
        }
        
        float edgeDD_res_216111;
        
        if (x_216094 == 1) {
            float defunc_0_f_res_225190 = defunc_1_f_res_213526 * a_216091;
            float defunc_1_f_res_225191 = defunc_1_f_res_216024 - defunc_0_f_res_225190;
            float defunc_1_f_res_225192 = defunc_1_f_res_225191 * defunc_1_f_res_225191;
            float defunc_1_f_res_225193 = defunc_1_f_res_216027 * defunc_1_f_res_216027;
            float defunc_1_f_res_225194 = defunc_1_f_res_216063 * defunc_1_f_res_216063;
            float defunc_1_f_res_225195 = defunc_1_f_res_225193 + defunc_1_f_res_225194;
            float defunc_0_f_res_225196 = defunc_1_f_res_225192 + defunc_1_f_res_225195;
            
            edgeDD_res_216111 = defunc_0_f_res_225196;
        } else {
            edgeDD_res_216111 = INFINITY;
        }
        
        float edgeDD_res_216119;
        
        if (x_216094 == 1) {
            float defunc_0_f_res_225197 = defunc_1_f_res_213526 * a_216091;
            float defunc_1_f_res_225198 = defunc_1_f_res_216024 - defunc_0_f_res_225197;
            float defunc_1_f_res_225199 = defunc_1_f_res_225198 * defunc_1_f_res_225198;
            float defunc_1_f_res_225200 = defunc_1_f_res_216042 * defunc_1_f_res_216042;
            float defunc_1_f_res_225201 = defunc_1_f_res_216063 * defunc_1_f_res_216063;
            float defunc_1_f_res_225202 = defunc_1_f_res_225200 + defunc_1_f_res_225201;
            float defunc_0_f_res_225203 = defunc_1_f_res_225199 + defunc_1_f_res_225202;
            
            edgeDD_res_216119 = defunc_0_f_res_225203;
        } else {
            edgeDD_res_216119 = INFINITY;
        }
        
        float defunc_1_f_res_216127 = defunc_1_f_res_213530 * defunc_1_f_res_216025;
        float a_216128 = defunc_1_f_res_216127 / defunc_1_f_res_213542;
        bool cond_216129 = -1.0F < a_216128;
        bool cond_t_res_216130 = a_216128 < 1.0F;
        bool x_216131 = cond_216129 && cond_t_res_216130;
        float edgeDD_res_216132;
        
        if (x_216131 == 1) {
            float defunc_0_f_res_225204 = defunc_1_f_res_213530 * a_216128;
            float defunc_1_f_res_225205 = defunc_1_f_res_216025 - defunc_0_f_res_225204;
            float defunc_1_f_res_225206 = defunc_1_f_res_216069 * defunc_1_f_res_216069;
            float defunc_1_f_res_225207 = defunc_1_f_res_225205 * defunc_1_f_res_225205;
            float defunc_1_f_res_225208 = defunc_1_f_res_216048 * defunc_1_f_res_216048;
            float defunc_1_f_res_225209 = defunc_1_f_res_225207 + defunc_1_f_res_225208;
            float defunc_0_f_res_225210 = defunc_1_f_res_225206 + defunc_1_f_res_225209;
            
            edgeDD_res_216132 = defunc_0_f_res_225210;
        } else {
            edgeDD_res_216132 = INFINITY;
        }
        
        float edgeDD_res_216140;
        
        if (x_216131 == 1) {
            float defunc_0_f_res_225211 = defunc_1_f_res_213530 * a_216128;
            float defunc_1_f_res_225212 = defunc_1_f_res_216025 - defunc_0_f_res_225211;
            float defunc_1_f_res_225213 = defunc_1_f_res_216069 * defunc_1_f_res_216069;
            float defunc_1_f_res_225214 = defunc_1_f_res_225212 * defunc_1_f_res_225212;
            float defunc_1_f_res_225215 = defunc_1_f_res_216063 * defunc_1_f_res_216063;
            float defunc_1_f_res_225216 = defunc_1_f_res_225214 + defunc_1_f_res_225215;
            float defunc_0_f_res_225217 = defunc_1_f_res_225213 + defunc_1_f_res_225216;
            
            edgeDD_res_216140 = defunc_0_f_res_225217;
        } else {
            edgeDD_res_216140 = INFINITY;
        }
        
        float edgeDD_res_216148;
        
        if (x_216131 == 1) {
            float defunc_0_f_res_225218 = defunc_1_f_res_213530 * a_216128;
            float defunc_1_f_res_225219 = defunc_1_f_res_216025 - defunc_0_f_res_225218;
            float defunc_1_f_res_225220 = defunc_1_f_res_216084 * defunc_1_f_res_216084;
            float defunc_1_f_res_225221 = defunc_1_f_res_225219 * defunc_1_f_res_225219;
            float defunc_1_f_res_225222 = defunc_1_f_res_216048 * defunc_1_f_res_216048;
            float defunc_1_f_res_225223 = defunc_1_f_res_225221 + defunc_1_f_res_225222;
            float defunc_0_f_res_225224 = defunc_1_f_res_225220 + defunc_1_f_res_225223;
            
            edgeDD_res_216148 = defunc_0_f_res_225224;
        } else {
            edgeDD_res_216148 = INFINITY;
        }
        
        float edgeDD_res_216156;
        
        if (x_216131 == 1) {
            float defunc_0_f_res_225225 = defunc_1_f_res_213530 * a_216128;
            float defunc_1_f_res_225226 = defunc_1_f_res_216025 - defunc_0_f_res_225225;
            float defunc_1_f_res_225227 = defunc_1_f_res_216084 * defunc_1_f_res_216084;
            float defunc_1_f_res_225228 = defunc_1_f_res_225226 * defunc_1_f_res_225226;
            float defunc_1_f_res_225229 = defunc_1_f_res_216063 * defunc_1_f_res_216063;
            float defunc_1_f_res_225230 = defunc_1_f_res_225228 + defunc_1_f_res_225229;
            float defunc_0_f_res_225231 = defunc_1_f_res_225227 + defunc_1_f_res_225230;
            
            edgeDD_res_216156 = defunc_0_f_res_225231;
        } else {
            edgeDD_res_216156 = INFINITY;
        }
        
        float defunc_1_f_res_216164 = defunc_1_f_res_213534 * defunc_1_f_res_216026;
        float a_216165 = defunc_1_f_res_216164 / defunc_1_f_res_213549;
        bool cond_216166 = -1.0F < a_216165;
        bool cond_t_res_216167 = a_216165 < 1.0F;
        bool x_216168 = cond_216166 && cond_t_res_216167;
        float edgeDD_res_216169;
        
        if (x_216168 == 1) {
            float defunc_0_f_res_225232 = defunc_1_f_res_213534 * a_216165;
            float defunc_1_f_res_225233 = defunc_1_f_res_216026 - defunc_0_f_res_225232;
            float defunc_1_f_res_225234 = defunc_1_f_res_216069 * defunc_1_f_res_216069;
            float defunc_1_f_res_225235 = defunc_1_f_res_216027 * defunc_1_f_res_216027;
            float defunc_1_f_res_225236 = defunc_1_f_res_225233 * defunc_1_f_res_225233;
            float defunc_1_f_res_225237 = defunc_1_f_res_225235 + defunc_1_f_res_225236;
            float defunc_0_f_res_225238 = defunc_1_f_res_225234 + defunc_1_f_res_225237;
            
            edgeDD_res_216169 = defunc_0_f_res_225238;
        } else {
            edgeDD_res_216169 = INFINITY;
        }
        
        float edgeDD_res_216177;
        
        if (x_216168 == 1) {
            float defunc_0_f_res_225239 = defunc_1_f_res_213534 * a_216165;
            float defunc_1_f_res_225240 = defunc_1_f_res_216026 - defunc_0_f_res_225239;
            float defunc_1_f_res_225241 = defunc_1_f_res_216084 * defunc_1_f_res_216084;
            float defunc_1_f_res_225242 = defunc_1_f_res_216027 * defunc_1_f_res_216027;
            float defunc_1_f_res_225243 = defunc_1_f_res_225240 * defunc_1_f_res_225240;
            float defunc_1_f_res_225244 = defunc_1_f_res_225242 + defunc_1_f_res_225243;
            float defunc_0_f_res_225245 = defunc_1_f_res_225241 + defunc_1_f_res_225244;
            
            edgeDD_res_216177 = defunc_0_f_res_225245;
        } else {
            edgeDD_res_216177 = INFINITY;
        }
        
        float edgeDD_res_216185;
        
        if (x_216168 == 1) {
            float defunc_0_f_res_225246 = defunc_1_f_res_213534 * a_216165;
            float defunc_1_f_res_225247 = defunc_1_f_res_216026 - defunc_0_f_res_225246;
            float defunc_1_f_res_225248 = defunc_1_f_res_216069 * defunc_1_f_res_216069;
            float defunc_1_f_res_225249 = defunc_1_f_res_216042 * defunc_1_f_res_216042;
            float defunc_1_f_res_225250 = defunc_1_f_res_225247 * defunc_1_f_res_225247;
            float defunc_1_f_res_225251 = defunc_1_f_res_225249 + defunc_1_f_res_225250;
            float defunc_0_f_res_225252 = defunc_1_f_res_225248 + defunc_1_f_res_225251;
            
            edgeDD_res_216185 = defunc_0_f_res_225252;
        } else {
            edgeDD_res_216185 = INFINITY;
        }
        
        float edgeDD_res_216193;
        
        if (x_216168 == 1) {
            float defunc_0_f_res_225253 = defunc_1_f_res_213534 * a_216165;
            float defunc_1_f_res_225254 = defunc_1_f_res_216026 - defunc_0_f_res_225253;
            float defunc_1_f_res_225255 = defunc_1_f_res_216084 * defunc_1_f_res_216084;
            float defunc_1_f_res_225256 = defunc_1_f_res_216042 * defunc_1_f_res_216042;
            float defunc_1_f_res_225257 = defunc_1_f_res_225254 * defunc_1_f_res_225254;
            float defunc_1_f_res_225258 = defunc_1_f_res_225256 + defunc_1_f_res_225257;
            float defunc_0_f_res_225259 = defunc_1_f_res_225255 + defunc_1_f_res_225258;
            
            edgeDD_res_216193 = defunc_0_f_res_225259;
        } else {
            edgeDD_res_216193 = INFINITY;
        }
        
        float defunc_1_f_res_216201 = defunc_1_f_res_216069 * defunc_1_f_res_216069;
        float defunc_1_f_res_216202 = defunc_1_f_res_216027 * defunc_1_f_res_216027;
        float defunc_1_f_res_216203 = defunc_1_f_res_216048 * defunc_1_f_res_216048;
        float defunc_1_f_res_216204 = defunc_1_f_res_216202 + defunc_1_f_res_216203;
        float defunc_0_f_res_216205 = defunc_1_f_res_216201 + defunc_1_f_res_216204;
        float defunc_1_f_res_216206 = defunc_1_f_res_216084 * defunc_1_f_res_216084;
        float defunc_0_f_res_216207 = defunc_1_f_res_216204 + defunc_1_f_res_216206;
        float defunc_1_f_res_216208 = defunc_1_f_res_216042 * defunc_1_f_res_216042;
        float defunc_1_f_res_216209 = defunc_1_f_res_216203 + defunc_1_f_res_216208;
        float defunc_0_f_res_216210 = defunc_1_f_res_216201 + defunc_1_f_res_216209;
        float defunc_0_f_res_216211 = defunc_1_f_res_216206 + defunc_1_f_res_216209;
        float defunc_1_f_res_216212 = defunc_1_f_res_216063 * defunc_1_f_res_216063;
        float defunc_1_f_res_216213 = defunc_1_f_res_216202 + defunc_1_f_res_216212;
        float defunc_0_f_res_216214 = defunc_1_f_res_216201 + defunc_1_f_res_216213;
        float defunc_0_f_res_216215 = defunc_1_f_res_216206 + defunc_1_f_res_216213;
        float defunc_1_f_res_216216 = defunc_1_f_res_216208 + defunc_1_f_res_216212;
        float defunc_0_f_res_216217 = defunc_1_f_res_216201 + defunc_1_f_res_216216;
        float defunc_0_f_res_216218 = defunc_1_f_res_216206 + defunc_1_f_res_216216;
        float min_res_216219 = fmin32(INFINITY, defunc_0_f_res_216218);
        float min_res_216220 = fmin32(defunc_0_f_res_216217, min_res_216219);
        float min_res_216221 = fmin32(defunc_0_f_res_216215, min_res_216220);
        float min_res_216222 = fmin32(defunc_0_f_res_216214, min_res_216221);
        float min_res_216223 = fmin32(defunc_0_f_res_216211, min_res_216222);
        float min_res_216224 = fmin32(defunc_0_f_res_216210, min_res_216223);
        float min_res_216225 = fmin32(defunc_0_f_res_216207, min_res_216224);
        float min_res_216226 = fmin32(defunc_0_f_res_216205, min_res_216225);
        float min_res_216227 = fmin32(edgeDD_res_216193, min_res_216226);
        float min_res_216228 = fmin32(edgeDD_res_216185, min_res_216227);
        float min_res_216229 = fmin32(edgeDD_res_216177, min_res_216228);
        float min_res_216230 = fmin32(edgeDD_res_216169, min_res_216229);
        float min_res_216231 = fmin32(edgeDD_res_216156, min_res_216230);
        float min_res_216232 = fmin32(edgeDD_res_216148, min_res_216231);
        float min_res_216233 = fmin32(edgeDD_res_216140, min_res_216232);
        float min_res_216234 = fmin32(edgeDD_res_216132, min_res_216233);
        float min_res_216235 = fmin32(edgeDD_res_216119, min_res_216234);
        float min_res_216236 = fmin32(edgeDD_res_216111, min_res_216235);
        float min_res_216237 = fmin32(edgeDD_res_216103, min_res_216236);
        float min_res_216238 = fmin32(edgeDD_res_216095, min_res_216237);
        float min_res_216239 = fmin32(planeDD_res_216086, min_res_216238);
        float min_res_216240 = fmin32(planeDD_res_216080, min_res_216239);
        float min_res_216241 = fmin32(planeDD_res_216065, min_res_216240);
        float min_res_216242 = fmin32(planeDD_res_216059, min_res_216241);
        float min_res_216243 = fmin32(planeDD_res_216044, min_res_216242);
        float min_res_216244 = fmin32(planeDD_res_216038, min_res_216243);
        bool not_arg_216245 = arg_213643 < min_res_216244;
        int64_t defunc_1_lifted_lambda_res_216246 = btoi_bool_i64(not_arg_216245);
        bool is_i_216247 = defunc_1_lifted_lambda_res_216246 == (int64_t) 0;
        bool cond_neg_216248 = !is_i_216247;
        int64_t part_res_216249 = btoi_bool_i64(cond_neg_216248);
        int64_t part_res_216250 = btoi_bool_i64(is_i_216247);
        int64_t zz_214375 = part_res_216250 + scanacc_233642;
        
        ((int64_t *) mem_234754)[i_233645] = zz_214375;
        ((int64_t *) mem_234757)[i_233645] = part_res_216249;
        
        int64_t scanacc_tmp_236002 = zz_214375;
        
        scanacc_233642 = scanacc_tmp_236002;
    }
    discard_233648 = scanacc_233642;
    
    int64_t last_index_214377 = conc_tmp_213629 - (int64_t) 1;
    bool is_empty_214378 = conc_tmp_213629 == (int64_t) 0;
    bool x_214379 = !is_empty_214378;
    int64_t last_offset_214380;
    
    if (x_214379 == 1) {
        int64_t x_225260 = ((int64_t *) mem_234754)[last_index_214377];
        
        last_offset_214380 = x_225260;
    } else {
        last_offset_214380 = (int64_t) 0;
    }
    
    int64_t partition_sizze_214382;
    
    if (is_empty_214378 == 1) {
        partition_sizze_214382 = (int64_t) 0;
    } else {
        partition_sizze_214382 = last_offset_214380;
    }
    if (mem_234780_cached_sizze_236151 < bytes_234753) {
        err = lexical_realloc(ctx, &mem_234780, &mem_234780_cached_sizze_236151, bytes_234753);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234783_cached_sizze_236152 < bytes_234753) {
        err = lexical_realloc(ctx, &mem_234783, &mem_234783_cached_sizze_236152, bytes_234753);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234786_cached_sizze_236153 < bytes_234753) {
        err = lexical_realloc(ctx, &mem_234786, &mem_234786_cached_sizze_236153, bytes_234753);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t write_iter_233649 = 0; write_iter_233649 < conc_tmp_213629; write_iter_233649++) {
        int64_t write_iv_233653 = ((int64_t *) mem_234757)[write_iter_233649];
        int64_t write_iv_233654 = ((int64_t *) mem_234754)[write_iter_233649];
        bool index_concat_cmp_234336 = sle64(conc_tmp_213628, write_iter_233649);
        int64_t index_concat_branch_234344;
        
        if (index_concat_cmp_234336 == 1) {
            int64_t index_concat_i_234337 = sub64(write_iter_233649, conc_tmp_213628);
            int64_t new_index_234419 = squot64(index_concat_i_234337, ixfun_arg_234725);
            int64_t binop_y_234423 = new_index_234419 * ixfun_arg_234725;
            int64_t binop_x_234424 = index_concat_i_234337 - binop_y_234423;
            int64_t new_index_234425 = squot64(binop_x_234424, defunc_0_f_res_213564);
            int64_t binop_y_234437 = defunc_0_f_res_213564 * new_index_234425;
            int64_t new_index_234438 = binop_x_234424 - binop_y_234437;
            int64_t index_concat_234338 = ((int64_t *) mem_234705)[new_index_234419 * ixfun_arg_234725 + new_index_234425 * defunc_0_f_res_213564 + new_index_234438];
            
            index_concat_branch_234344 = index_concat_234338;
        } else {
            bool index_concat_cmp_234339 = sle64(distance_213623, write_iter_233649);
            int64_t index_concat_branch_234343;
            
            if (index_concat_cmp_234339 == 1) {
                int64_t index_concat_i_234340 = sub64(write_iter_233649, distance_213623);
                int64_t new_index_234439 = squot64(index_concat_i_234340, defunc_0_f_res_213563);
                int64_t binop_y_234441 = defunc_0_f_res_213563 * new_index_234439;
                int64_t new_index_234442 = index_concat_i_234340 - binop_y_234441;
                int64_t index_concat_234341 = ((int64_t *) mem_234700)[new_index_234439 * defunc_0_f_res_213563 + new_index_234442];
                
                index_concat_branch_234343 = index_concat_234341;
            } else {
                int64_t index_primexp_234444 = add64((int64_t) 1, write_iter_233649);
                
                index_concat_branch_234343 = index_primexp_234444;
            }
            index_concat_branch_234344 = index_concat_branch_234343;
        }
        
        int64_t index_concat_branch_234333;
        
        if (index_concat_cmp_234336 == 1) {
            int64_t index_concat_i_234326 = sub64(write_iter_233649, conc_tmp_213628);
            int64_t binop_x_234394 = squot64(index_concat_i_234326, ixfun_arg_234725);
            int64_t binop_y_234396 = binop_x_234394 * ixfun_arg_234725;
            int64_t binop_x_234397 = index_concat_i_234326 - binop_y_234396;
            int64_t new_index_234398 = squot64(binop_x_234397, defunc_0_f_res_213564);
            int64_t binop_y_234410 = defunc_0_f_res_213564 * new_index_234398;
            int64_t new_index_234411 = binop_x_234397 - binop_y_234410;
            int64_t index_concat_234327 = ((int64_t *) mem_234677)[new_index_234398 * defunc_0_f_res_213564 + new_index_234411];
            
            index_concat_branch_234333 = index_concat_234327;
        } else {
            bool index_concat_cmp_234328 = sle64(distance_213623, write_iter_233649);
            int64_t index_concat_branch_234332;
            
            if (index_concat_cmp_234328 == 1) {
                int64_t index_concat_i_234329 = sub64(write_iter_233649, distance_213623);
                int64_t binop_x_234413 = squot64(index_concat_i_234329, defunc_0_f_res_213563);
                int64_t binop_y_234414 = defunc_0_f_res_213563 * binop_x_234413;
                int64_t new_index_234415 = index_concat_i_234329 - binop_y_234414;
                int64_t index_primexp_234417 = add64((int64_t) 1, new_index_234415);
                
                index_concat_branch_234332 = index_primexp_234417;
            } else {
                index_concat_branch_234332 = (int64_t) 0;
            }
            index_concat_branch_234333 = index_concat_branch_234332;
        }
        
        int64_t index_concat_branch_234322;
        
        if (index_concat_cmp_234336 == 1) {
            int64_t index_concat_i_234319 = sub64(write_iter_233649, conc_tmp_213628);
            int64_t binop_x_234386 = squot64(index_concat_i_234319, defunc_0_f_res_213564);
            int64_t binop_y_234387 = defunc_0_f_res_213564 * binop_x_234386;
            int64_t new_index_234388 = index_concat_i_234319 - binop_y_234387;
            int64_t index_primexp_234390 = add64((int64_t) 1, new_index_234388);
            
            index_concat_branch_234322 = index_primexp_234390;
        } else {
            index_concat_branch_234322 = (int64_t) 0;
        }
        
        bool is_this_one_214394 = write_iv_233653 == (int64_t) 0;
        int64_t this_offset_214395 = (int64_t) -1 + write_iv_233654;
        int64_t total_res_214396;
        
        if (is_this_one_214394 == 1) {
            total_res_214396 = this_offset_214395;
        } else {
            total_res_214396 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, total_res_214396) && slt64(total_res_214396, conc_tmp_213629)) {
            ((int64_t *) mem_234780)[total_res_214396] = index_concat_branch_234344;
        }
        if (sle64((int64_t) 0, total_res_214396) && slt64(total_res_214396, conc_tmp_213629)) {
            ((int64_t *) mem_234783)[total_res_214396] = index_concat_branch_234333;
        }
        if (sle64((int64_t) 0, total_res_214396) && slt64(total_res_214396, conc_tmp_213629)) {
            ((int64_t *) mem_234786)[total_res_214396] = index_concat_branch_234322;
        }
    }
    
    bool eq_x_zz_214397 = (int64_t) 0 == last_offset_214380;
    bool p_and_eq_x_y_214398 = x_214379 && eq_x_zz_214397;
    bool empty_slice_214399 = is_empty_214378 || p_and_eq_x_y_214398;
    int64_t m_214400 = sub64(partition_sizze_214382, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_214401 = sle64((int64_t) 0, m_214400);
    bool i_p_m_t_s_leq_w_214402 = slt64(m_214400, conc_tmp_213629);
    bool i_lte_j_214403 = sle64((int64_t) 0, partition_sizze_214382);
    bool y_214404 = zzero_leq_i_p_m_t_s_214401 && i_p_m_t_s_leq_w_214402;
    bool y_214405 = i_lte_j_214403 && y_214404;
    bool ok_or_empty_214406 = empty_slice_214399 || y_214405;
    bool index_certs_214407;
    
    if (!ok_or_empty_214406) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) partition_sizze_214382, "] out of bounds for array of shape [", (long long) conc_tmp_213629, "].", "-> #0  /prelude/soacs.fut:173:6-16\n   #1  /prelude/functional.fut:9:42-44\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_234817 = (int64_t) 4 * partition_sizze_214382;
    int64_t bytes_234818 = smax64((int64_t) 0, binop_y_234817);
    
    if (mem_234819_cached_sizze_236154 < bytes_234818) {
        err = lexical_realloc(ctx, &mem_234819, &mem_234819_cached_sizze_236154, bytes_234818);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234822_cached_sizze_236155 < bytes_234818) {
        err = lexical_realloc(ctx, &mem_234822, &mem_234822_cached_sizze_236155, bytes_234818);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234825_cached_sizze_236156 < bytes_234818) {
        err = lexical_realloc(ctx, &mem_234825, &mem_234825_cached_sizze_236156, bytes_234818);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233667 = 0; i_233667 < partition_sizze_214382; i_233667++) {
        int64_t x_214414 = ((int64_t *) mem_234780)[i_233667];
        int64_t x_214415 = ((int64_t *) mem_234783)[i_233667];
        int64_t x_214416 = ((int64_t *) mem_234786)[i_233667];
        int32_t defunc_0_f_res_214417 = sext_i64_i32(x_214414);
        int32_t defunc_0_f_res_214418 = sext_i64_i32(x_214415);
        int32_t defunc_0_f_res_214419 = sext_i64_i32(x_214416);
        
        ((int32_t *) mem_234819)[i_233667] = defunc_0_f_res_214417;
        ((int32_t *) mem_234822)[i_233667] = defunc_0_f_res_214418;
        ((int32_t *) mem_234825)[i_233667] = defunc_0_f_res_214419;
    }
    
    int64_t binop_y_234856 = (int64_t) 8 * nz2085U_192338;
    int64_t bytes_234857 = smax64((int64_t) 0, binop_y_234856);
    int32_t defunc_1_f_res_214539 = mul32(defunc_0_f_res_213510, defunc_0_f_res_213519);
    int32_t defunc_0_f_res_214540 = mul32(defunc_0_f_res_213501, defunc_1_f_res_214539);
    int64_t defunc_0_f_res_214541 = sext_i32_i64(defunc_0_f_res_214540);
    int64_t binop_y_234957 = (int64_t) 4 * defunc_0_f_res_214541;
    int64_t bytes_234958 = smax64((int64_t) 0, binop_y_234957);
    
    if (mem_234959_cached_sizze_236161 < bytes_234958) {
        err = lexical_realloc(ctx, &mem_234959, &mem_234959_cached_sizze_236161, bytes_234958);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236011 = 0; i_236011 < defunc_0_f_res_214541; i_236011++) {
        ((int32_t *) mem_234959)[i_236011] = 0;
    }
    for (int64_t iter_233712 = 0; iter_233712 < nz2085U_192338; iter_233712++) {
        int32_t pixel_233714 = ((int32_t *) mem_234624.mem)[iter_233712];
        int64_t defunc_0_f_res_215995 = sext_i32_i64(pixel_233714);
        bool less_than_zzero_233716 = slt64(defunc_0_f_res_215995, (int64_t) 0);
        bool greater_than_sizze_233717 = sle64(defunc_0_f_res_214541, defunc_0_f_res_215995);
        bool outside_bounds_dim_233718 = less_than_zzero_233716 || greater_than_sizze_233717;
        
        if (!(outside_bounds_dim_233718 == 1)) {
            int32_t read_hist_233720 = ((int32_t *) mem_234959)[defunc_0_f_res_215995];
            int32_t defunc_1_f_res_214546 = add32(1, read_hist_233720);
            
            ((int32_t *) mem_234959)[defunc_0_f_res_215995] = defunc_1_f_res_214546;
        }
    }
    if (mem_234972_cached_sizze_236162 < bytes_234958) {
        err = lexical_realloc(ctx, &mem_234972, &mem_234972_cached_sizze_236162, bytes_234958);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234975_cached_sizze_236163 < bytes_234958) {
        err = lexical_realloc(ctx, &mem_234975, &mem_234975_cached_sizze_236163, bytes_234958);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234978_cached_sizze_236164 < bytes_234958) {
        err = lexical_realloc(ctx, &mem_234978, &mem_234978_cached_sizze_236164, bytes_234958);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int32_t inpacc_225405;
    int32_t defunc_2_reduce_res_225406;
    int32_t inpacc_225407;
    int32_t inpacc_216405;
    int32_t inpacc_216406;
    int32_t inpacc_216407;
    
    inpacc_216405 = 0;
    inpacc_216406 = 0;
    inpacc_216407 = 0;
    for (int64_t i_233751 = 0; i_233751 < defunc_0_f_res_214541; i_233751++) {
        int32_t x_234256 = ((int32_t *) mem_234959)[i_233751];
        int32_t defunc_1_op_res_234273 = add32(inpacc_216405, x_234256);
        int32_t defunc_1_op_res_234275 = add32(inpacc_216407, x_234256);
        int32_t arg_234277 = sub32(x_234256, 1);
        int32_t arg_234278 = mul32(x_234256, arg_234277);
        int32_t defunc_0_f_res_234279 = sdiv32(arg_234278, 2);
        int32_t defunc_1_op_res_216446 = add32(inpacc_216406, defunc_0_f_res_234279);
        
        ((int32_t *) mem_234972)[i_233751] = inpacc_216407;
        ((int32_t *) mem_234975)[i_233751] = defunc_0_f_res_234279;
        ((int32_t *) mem_234978)[i_233751] = inpacc_216405;
        
        int32_t inpacc_tmp_236013 = defunc_1_op_res_234273;
        int32_t inpacc_tmp_236014 = defunc_1_op_res_216446;
        int32_t inpacc_tmp_236015 = defunc_1_op_res_234275;
        
        inpacc_216405 = inpacc_tmp_236013;
        inpacc_216406 = inpacc_tmp_236014;
        inpacc_216407 = inpacc_tmp_236015;
    }
    inpacc_225405 = inpacc_216405;
    defunc_2_reduce_res_225406 = inpacc_216406;
    inpacc_225407 = inpacc_216407;
    
    int64_t i32_res_214568 = sext_i32_i64(defunc_2_reduce_res_225406);
    
    if (memblock_alloc(ctx, &mem_235010, (int64_t) 0, "mem_235010")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_235205 = (int64_t) 4 * i32_res_214568;
    int64_t bytes_235206 = smax64((int64_t) 0, binop_y_235205);
    int64_t i32_res_214760 = sext_i32_i64(defunc_0_f_res_213519);
    int64_t i32_res_214761 = sext_i32_i64(defunc_0_f_res_213510);
    int64_t i32_res_214762 = sext_i32_i64(defunc_0_f_res_213501);
    bool bounds_invalid_upwards_214763 = slt64(i32_res_214762, (int64_t) 0);
    bool valid_214764 = !bounds_invalid_upwards_214763;
    bool range_valid_c_214765;
    
    if (!valid_214764) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) i32_res_214762, " is invalid.", "-> #0  /prelude/array.fut:95:3-10\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_214767 = slt64(i32_res_214761, (int64_t) 0);
    bool valid_214768 = !bounds_invalid_upwards_214767;
    bool range_valid_c_214769;
    
    if (!valid_214768) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) i32_res_214761, " is invalid.", "-> #0  /prelude/array.fut:95:3-10\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_214771 = slt64(i32_res_214760, (int64_t) 0);
    bool valid_214772 = !bounds_invalid_upwards_214771;
    bool range_valid_c_214773;
    
    if (!valid_214772) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) i32_res_214760, " is invalid.", "-> #0  /prelude/array.fut:95:3-10\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_235231 = (int64_t) 4 * i32_res_214760;
    int64_t bytes_235232 = smax64((int64_t) 0, binop_y_235231);
    
    if (mem_235233_cached_sizze_236175 < bytes_235232) {
        err = lexical_realloc(ctx, &mem_235233, &mem_235233_cached_sizze_236175, bytes_235232);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233869 = 0; i_233869 < i32_res_214760; i_233869++) {
        int32_t defunc_0_f_res_214777 = sext_i64_i32(i_233869);
        
        ((int32_t *) mem_235233)[i_233869] = defunc_0_f_res_214777;
    }
    
    int64_t binop_x_235244 = i32_res_214760 * i32_res_214761;
    int64_t binop_y_235245 = (int64_t) 4 * binop_x_235244;
    int64_t bytes_235246 = smax64((int64_t) 0, binop_y_235245);
    
    if (mem_235247_cached_sizze_236176 < bytes_235246) {
        err = lexical_realloc(ctx, &mem_235247, &mem_235247_cached_sizze_236176, bytes_235246);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233873 = 0; i_233873 < i32_res_214761; i_233873++) {
        int32_t defunc_0_f_res_214780 = sext_i64_i32(i_233873);
        
        for (int64_t i_236021 = 0; i_236021 < i32_res_214760; i_236021++) {
            ((int32_t *) mem_235247)[i_233873 * i32_res_214760 + i_236021] = defunc_0_f_res_214780;
        }
    }
    
    bool zzero_214799 = defunc_0_f_res_213519 == 0;
    bool nonzzero_214800 = !zzero_214799;
    bool nonzzero_cert_214801;
    
    if (!nonzzero_214800) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  associations.fut:98:22-27\n   #1  algebra.fut:37:94-102\n   #2  /prelude/functional.fut:46:62-64\n   #3  associations.fut:107:12-30\n   #4  associations.fut:112:8-35\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool zzero_214796 = defunc_0_f_res_213510 == 0;
    bool nonzzero_214797 = !zzero_214796;
    bool nonzzero_cert_214798;
    
    if (!nonzzero_214797) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  associations.fut:98:22-27\n   #1  algebra.fut:37:83-91\n   #2  /prelude/functional.fut:46:62-64\n   #3  associations.fut:107:12-30\n   #4  associations.fut:112:8-35\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool zzero_214793 = defunc_0_f_res_213501 == 0;
    bool nonzzero_214794 = !zzero_214793;
    bool nonzzero_cert_214795;
    
    if (!nonzzero_214794) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  associations.fut:98:22-27\n   #1  algebra.fut:37:72-80\n   #2  /prelude/functional.fut:46:62-64\n   #3  associations.fut:107:12-30\n   #4  associations.fut:112:8-35\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t flat_dim_214787 = i32_res_214761 * i32_res_214762;
    int64_t flat_dim_214789 = i32_res_214760 * flat_dim_214787;
    int64_t binop_y_235269 = (int64_t) 4 * flat_dim_214789;
    int64_t bytes_235270 = smax64((int64_t) 0, binop_y_235269);
    
    if (mem_235271_cached_sizze_236177 < bytes_235270) {
        err = lexical_realloc(ctx, &mem_235271, &mem_235271_cached_sizze_236177, bytes_235270);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233877 = 0; i_233877 < i32_res_214762; i_233877++) {
        int32_t defunc_0_f_res_214785 = sext_i64_i32(i_233877);
        
        for (int64_t i_236023 = 0; i_236023 < i32_res_214761; i_236023++) {
            for (int64_t i_236024 = 0; i_236024 < i32_res_214760; i_236024++) {
                ((int32_t *) mem_235271)[i_233877 * binop_x_235244 + (i_236023 * i32_res_214760 + i_236024)] = defunc_0_f_res_214785;
            }
        }
    }
    
    int64_t binop_x_235299 = partition_sizze_214382 * flat_dim_214789;
    int64_t binop_y_235300 = (int64_t) 4 * binop_x_235299;
    int64_t bytes_235301 = smax64((int64_t) 0, binop_y_235300);
    
    if (mem_235302_cached_sizze_236178 < bytes_235301) {
        err = lexical_realloc(ctx, &mem_235302, &mem_235302_cached_sizze_236178, bytes_235301);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235306_cached_sizze_236179 < bytes_235301) {
        err = lexical_realloc(ctx, &mem_235306, &mem_235306_cached_sizze_236179, bytes_235301);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235310_cached_sizze_236180 < bytes_235301) {
        err = lexical_realloc(ctx, &mem_235310, &mem_235310_cached_sizze_236180, bytes_235301);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235314_cached_sizze_236181 < bytes_235301) {
        err = lexical_realloc(ctx, &mem_235314, &mem_235314_cached_sizze_236181, bytes_235301);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235318_cached_sizze_236182 < bytes_235301) {
        err = lexical_realloc(ctx, &mem_235318, &mem_235318_cached_sizze_236182, bytes_235301);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233902 = 0; i_233902 < flat_dim_214789; i_233902++) {
        int64_t new_index_234162 = squot64(i_233902, binop_x_235244);
        int64_t binop_y_234166 = new_index_234162 * binop_x_235244;
        int64_t binop_x_234167 = i_233902 - binop_y_234166;
        int64_t new_index_234168 = squot64(binop_x_234167, i32_res_214760);
        int64_t binop_y_234180 = i32_res_214760 * new_index_234168;
        int64_t new_index_234181 = binop_x_234167 - binop_y_234180;
        int32_t x_214807 = ((int32_t *) mem_235271)[new_index_234162 * binop_x_235244 + new_index_234168 * i32_res_214760 + new_index_234181];
        int32_t x_214808 = ((int32_t *) mem_235247)[new_index_234168 * i32_res_214760 + new_index_234181];
        int64_t binop_x_234204 = squot64(i_233902, i32_res_214760);
        int64_t binop_y_234205 = i32_res_214760 * binop_x_234204;
        int64_t new_index_234206 = i_233902 - binop_y_234205;
        int32_t x_214809 = ((int32_t *) mem_235233)[new_index_234206];
        
        for (int64_t i_233887 = 0; i_233887 < partition_sizze_214382; i_233887++) {
            int32_t x_217147 = ((int32_t *) mem_234819)[i_233887];
            int32_t x_217148 = ((int32_t *) mem_234822)[i_233887];
            int32_t x_217149 = ((int32_t *) mem_234825)[i_233887];
            int32_t defunc_1_f_res_217150 = add32(x_214807, x_217147);
            int32_t defunc_1_f_res_217151 = add32(x_214808, x_217148);
            int32_t defunc_1_f_res_217152 = add32(x_214809, x_217149);
            int32_t azq_217156 = srem32(defunc_1_f_res_217150, defunc_0_f_res_213501);
            bool cond_217157 = slt32(azq_217156, 0);
            int32_t azqzq_217158;
            
            if (cond_217157 == 1) {
                int32_t azqzq_t_res_225301 = add32(defunc_0_f_res_213501, azq_217156);
                
                azqzq_217158 = azqzq_t_res_225301;
            } else {
                azqzq_217158 = azq_217156;
            }
            
            int32_t arg_217160 = sub32(defunc_1_f_res_217150, azqzq_217158);
            int32_t j_217161 = squot32(arg_217160, defunc_0_f_res_213501);
            int32_t azq_217162 = srem32(defunc_1_f_res_217151, defunc_0_f_res_213510);
            bool cond_217163 = slt32(azq_217162, 0);
            int32_t azqzq_217164;
            
            if (cond_217163 == 1) {
                int32_t azqzq_t_res_225302 = add32(defunc_0_f_res_213510, azq_217162);
                
                azqzq_217164 = azqzq_t_res_225302;
            } else {
                azqzq_217164 = azq_217162;
            }
            
            int32_t arg_217166 = sub32(defunc_1_f_res_217151, azqzq_217164);
            int32_t j_217167 = squot32(arg_217166, defunc_0_f_res_213510);
            int32_t azq_217168 = srem32(defunc_1_f_res_217152, defunc_0_f_res_213519);
            bool cond_217169 = slt32(azq_217168, 0);
            int32_t azqzq_217170;
            
            if (cond_217169 == 1) {
                int32_t azqzq_t_res_225303 = add32(defunc_0_f_res_213519, azq_217168);
                
                azqzq_217170 = azqzq_t_res_225303;
            } else {
                azqzq_217170 = azq_217168;
            }
            
            int32_t arg_217172 = sub32(defunc_1_f_res_217152, azqzq_217170);
            int32_t j_217173 = squot32(arg_217172, defunc_0_f_res_213519);
            int32_t arg_217174 = mul32(defunc_0_f_res_213510, azqzq_217158);
            int32_t arg_217175 = mul32(defunc_0_f_res_213519, arg_217174);
            int32_t arg_217176 = mul32(defunc_0_f_res_213519, azqzq_217164);
            int32_t arg_217177 = add32(arg_217175, arg_217176);
            int32_t defunc_0_f_res_217178 = add32(azqzq_217170, arg_217177);
            
            ((int32_t *) mem_235306)[i_233902 * partition_sizze_214382 + i_233887] = defunc_0_f_res_217178;
            ((int32_t *) mem_235310)[i_233902 * partition_sizze_214382 + i_233887] = j_217161;
            ((int32_t *) mem_235314)[i_233902 * partition_sizze_214382 + i_233887] = j_217167;
            ((int32_t *) mem_235318)[i_233902 * partition_sizze_214382 + i_233887] = j_217173;
        }
        
        int32_t arg_214819 = mul32(defunc_0_f_res_213510, x_214807);
        int32_t arg_214820 = mul32(defunc_0_f_res_213519, arg_214819);
        int32_t arg_214821 = mul32(defunc_0_f_res_213519, x_214808);
        int32_t arg_214822 = add32(arg_214820, arg_214821);
        int32_t toLinear_res_214823 = add32(x_214809, arg_214822);
        
        for (int64_t i_236034 = 0; i_236034 < partition_sizze_214382; i_236034++) {
            ((int32_t *) mem_235302)[i_233902 * partition_sizze_214382 + i_236034] = toLinear_res_214823;
        }
    }
    
    int64_t i_214875 = sub64(binop_x_235299, (int64_t) 1);
    bool y_214877 = slt64(i_214875, binop_x_235299);
    bool x_214876 = sle64((int64_t) 0, i_214875);
    bool bounds_check_214878 = x_214876 && y_214877;
    bool cond_214874 = binop_x_235299 == (int64_t) 0;
    bool protect_assert_disj_214879 = cond_214874 || bounds_check_214878;
    bool index_certs_214880;
    
    if (!protect_assert_disj_214879) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_214875, "] out of bounds for array of shape [", (long long) binop_x_235299, "].", "-> #0  /prelude/array.fut:26:29-34\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t ext_235573;
    int64_t ext_235572;
    int64_t ext_235568;
    int64_t ext_235567;
    int64_t replSegmIota_res_214881;
    int64_t replSegmIota_res_214882;
    
    if (cond_214874 == 1) {
        if (memblock_set(ctx, &ext_mem_235576, &mem_235010, "mem_235010") != 0)
            return 1;
        ext_235573 = (int64_t) 0;
        ext_235572 = (int64_t) 0;
        if (memblock_set(ctx, &ext_mem_235571, &mem_235010, "mem_235010") != 0)
            return 1;
        ext_235568 = (int64_t) 0;
        ext_235567 = (int64_t) 0;
        replSegmIota_res_214881 = (int64_t) 0;
        replSegmIota_res_214882 = (int64_t) 0;
    } else {
        if (mem_235504_cached_sizze_236183 < bytes_235301) {
            err = lexical_realloc(ctx, &mem_235504, &mem_235504_cached_sizze_236183, bytes_235301);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_235507_cached_sizze_236184 < bytes_235301) {
            err = lexical_realloc(ctx, &mem_235507, &mem_235507_cached_sizze_236184, bytes_235301);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        
        int32_t inpacc_225314;
        int32_t inpacc_225037 = 0;
        
        for (int64_t i_233928 = 0; i_233928 < binop_x_235299; i_233928++) {
            int64_t new_index_234377 = squot64(i_233928, partition_sizze_214382);
            int64_t binop_y_234379 = partition_sizze_214382 * new_index_234377;
            int64_t new_index_234380 = i_233928 - binop_y_234379;
            int32_t x_234132 = ((int32_t *) mem_235302)[new_index_234377 * partition_sizze_214382 + new_index_234380];
            int32_t x_234133 = ((int32_t *) mem_235306)[new_index_234377 * partition_sizze_214382 + new_index_234380];
            int64_t i_234134 = sext_i32_i64(x_234132);
            bool x_234135 = sle64((int64_t) 0, i_234134);
            bool y_234136 = slt64(i_234134, defunc_0_f_res_214541);
            bool bounds_check_234137 = x_234135 && y_234136;
            bool index_certs_234138;
            
            if (!bounds_check_234137) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_234134, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:53:38-43\n   #1  associations.fut:53:17-64\n   #2  associations.fut:128:29-85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t arg_234139 = ((int32_t *) mem_234959)[i_234134];
            int64_t j_234140 = sext_i32_i64(x_234133);
            bool x_234141 = sle64((int64_t) 0, j_234140);
            bool y_234142 = slt64(j_234140, defunc_0_f_res_214541);
            bool bounds_check_234143 = x_234141 && y_234142;
            bool index_certs_234144;
            
            if (!bounds_check_234143) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_234140, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:53:45-50\n   #1  associations.fut:53:17-64\n   #2  associations.fut:128:29-85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t arg_234145 = ((int32_t *) mem_234959)[j_234140];
            int32_t defunc_0_f_res_234146 = mul32(arg_234139, arg_234145);
            int32_t defunc_1_op_res_234157 = add32(inpacc_225037, defunc_0_f_res_234146);
            
            ((int32_t *) mem_235504)[i_233928] = inpacc_225037;
            ((int32_t *) mem_235507)[i_233928] = defunc_1_op_res_234157;
            
            int32_t inpacc_tmp_236035 = defunc_1_op_res_234157;
            
            inpacc_225037 = inpacc_tmp_236035;
        }
        inpacc_225314 = inpacc_225037;
        
        int32_t last_res_214894 = ((int32_t *) mem_235507)[i_214875];
        int64_t i32_res_214899 = sext_i32_i64(last_res_214894);
        int64_t binop_y_235528 = (int64_t) 4 * i32_res_214899;
        int64_t bytes_235529 = smax64((int64_t) 0, binop_y_235528);
        
        if (mem_235530_cached_sizze_236185 < bytes_235529) {
            err = lexical_realloc(ctx, &mem_235530, &mem_235530_cached_sizze_236185, bytes_235529);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_236038 = 0; i_236038 < i32_res_214899; i_236038++) {
            ((int32_t *) mem_235530)[i_236038] = 0;
        }
        for (int64_t iter_233931 = 0; iter_233931 < binop_x_235299; iter_233931++) {
            int32_t pixel_233933 = ((int32_t *) mem_235507)[iter_233931];
            int64_t defunc_0_f_res_217217 = sext_i32_i64(pixel_233933);
            bool less_than_zzero_233935 = slt64(defunc_0_f_res_217217, (int64_t) 0);
            bool greater_than_sizze_233936 = sle64(i32_res_214899, defunc_0_f_res_217217);
            bool outside_bounds_dim_233937 = less_than_zzero_233935 || greater_than_sizze_233936;
            
            if (!(outside_bounds_dim_233937 == 1)) {
                int32_t read_hist_233939 = ((int32_t *) mem_235530)[defunc_0_f_res_217217];
                int32_t defunc_1_f_res_214904 = add32(1, read_hist_233939);
                
                ((int32_t *) mem_235530)[defunc_0_f_res_217217] = defunc_1_f_res_214904;
            }
        }
        if (memblock_alloc(ctx, &mem_235543, bytes_235529, "mem_235543")) {
            err = 1;
            goto cleanup;
        }
        
        int32_t discard_233947;
        int32_t scanacc_233943 = 0;
        
        for (int64_t i_233945 = 0; i_233945 < i32_res_214899; i_233945++) {
            int32_t x_214911 = ((int32_t *) mem_235530)[i_233945];
            int32_t defunc_1_op_res_214910 = add32(x_214911, scanacc_233943);
            
            ((int32_t *) mem_235543.mem)[i_233945] = defunc_1_op_res_214910;
            
            int32_t scanacc_tmp_236040 = defunc_1_op_res_214910;
            
            scanacc_233943 = scanacc_tmp_236040;
        }
        discard_233947 = scanacc_233943;
        if (memblock_alloc(ctx, &mem_235556, bytes_235529, "mem_235556")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_233950 = 0; i_233950 < i32_res_214899; i_233950++) {
            int32_t i64_res_214915 = sext_i64_i32(i_233950);
            int32_t i_214920 = ((int32_t *) mem_235543.mem)[i_233950];
            int64_t i_214921 = sext_i32_i64(i_214920);
            bool x_214922 = sle64((int64_t) 0, i_214921);
            bool y_214923 = slt64(i_214921, binop_x_235299);
            bool bounds_check_214924 = x_214922 && y_214923;
            bool index_certs_214925;
            
            if (!bounds_check_214924) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_214921, "] out of bounds for array of shape [", (long long) binop_x_235299, "].", "-> #0  associations.fut:26:57-71\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:200:3-17\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t arg_214926 = ((int32_t *) mem_235504)[i_214921];
            int32_t defunc_0_f_res_214927 = sub32(i64_res_214915, arg_214926);
            
            ((int32_t *) mem_235556.mem)[i_233950] = defunc_0_f_res_214927;
        }
        if (memblock_set(ctx, &ext_mem_235576, &mem_235543, "mem_235543") != 0)
            return 1;
        ext_235573 = i32_res_214899;
        ext_235572 = i32_res_214899;
        if (memblock_set(ctx, &ext_mem_235571, &mem_235556, "mem_235556") != 0)
            return 1;
        ext_235568 = i32_res_214899;
        ext_235567 = i32_res_214899;
        replSegmIota_res_214881 = i32_res_214899;
        replSegmIota_res_214882 = i32_res_214899;
    }
    
    int64_t binop_y_235577 = (int64_t) 4 * replSegmIota_res_214881;
    int64_t bytes_235578 = smax64((int64_t) 0, binop_y_235577);
    int64_t conc_tmp_214996 = i32_res_214568 + replSegmIota_res_214881;
    int64_t binop_y_235642 = (int64_t) 8 * conc_tmp_214996;
    int64_t bytes_235643 = smax64((int64_t) 0, binop_y_235642);
    int64_t binop_y_235668 = (int64_t) 4 * conc_tmp_214996;
    int64_t bytes_235669 = smax64((int64_t) 0, binop_y_235668);
    int64_t binop_y_235756 = (int64_t) 24 * nz2085U_192338;
    int64_t bytes_235757 = smax64((int64_t) 0, binop_y_235756);
    
    if (memblock_alloc(ctx, &mem_234858, bytes_234857, "mem_234858")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_236043 = 0; i_236043 < nz2085U_192338; i_236043++) {
        int64_t x_236044 = (int64_t) 0 + i_236043 * (int64_t) 1;
        
        ((int64_t *) mem_234858.mem)[i_236043] = x_236044;
    }
    
    int32_t clzz_res_214470 = futrts_clzz32(defunc_2_reduce_res_225387);
    int32_t defunc_0_f_res_214471 = sub32(32, clzz_res_214470);
    
    if (mem_234871_cached_sizze_236157 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_234871, &mem_234871_cached_sizze_236157, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234874_cached_sizze_236158 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_234874, &mem_234874_cached_sizze_236158, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234897_cached_sizze_236159 < bytes_234857) {
        err = lexical_realloc(ctx, &mem_234897, &mem_234897_cached_sizze_236159, bytes_234857);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_set(ctx, &mem_param_234863, &mem_234624, "mem_234624") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_234868, &mem_234858, "mem_234858") != 0)
        return 1;
    for (int32_t bit_214474 = 0; bit_214474 < defunc_0_f_res_214471; bit_214474++) {
        int32_t defunc_2_reduce_res_225264;
        int32_t redout_233673 = 0;
        
        for (int64_t i_233676 = 0; i_233676 < nz2085U_192338; i_233676++) {
            int32_t x_216850 = ((int32_t *) mem_param_234863.mem)[i_233676];
            int32_t arg_216851 = lshr32(x_216850, bit_214474);
            int32_t u32_arg_216852 = 1 & arg_216851;
            int32_t defunc_0_f_res_216854 = sub32(1, u32_arg_216852);
            int32_t defunc_1_op_res_214487 = add32(defunc_0_f_res_216854, redout_233673);
            
            ((int32_t *) mem_234871)[i_233676] = defunc_0_f_res_216854;
            ((int32_t *) mem_234874)[i_233676] = u32_arg_216852;
            
            int32_t redout_tmp_236049 = defunc_1_op_res_214487;
            
            redout_233673 = redout_tmp_236049;
        }
        defunc_2_reduce_res_225264 = redout_233673;
        
        int32_t inpacc_225267;
        int32_t inpacc_225268;
        int32_t inpacc_216785;
        int32_t inpacc_216786;
        
        inpacc_216785 = 0;
        inpacc_216786 = 0;
        for (int64_t i_233697 = 0; i_233697 < nz2085U_192338; i_233697++) {
            int32_t x_234289 = ((int32_t *) mem_234874)[i_233697];
            int32_t x_234297 = ((int32_t *) mem_234871)[i_233697];
            int32_t defunc_1_op_res_234308 = add32(inpacc_216785, x_234289);
            int32_t defunc_0_f_res_234309 = add32(defunc_2_reduce_res_225264, defunc_1_op_res_234308);
            int32_t defunc_1_f_res_234310 = mul32(x_234289, defunc_0_f_res_234309);
            int32_t defunc_1_op_res_234311 = add32(inpacc_216786, x_234297);
            int32_t defunc_1_f_res_234312 = mul32(x_234297, defunc_1_op_res_234311);
            int32_t defunc_1_f_res_234313 = add32(defunc_1_f_res_234310, defunc_1_f_res_234312);
            int32_t defunc_0_f_res_234314 = sub32(defunc_1_f_res_234313, 1);
            int64_t defunc_0_f_res_234315 = sext_i32_i64(defunc_0_f_res_234314);
            
            ((int64_t *) mem_234897)[i_233697] = defunc_0_f_res_234315;
            
            int32_t inpacc_tmp_236052 = defunc_1_op_res_234308;
            int32_t inpacc_tmp_236053 = defunc_1_op_res_234311;
            
            inpacc_216785 = inpacc_tmp_236052;
            inpacc_216786 = inpacc_tmp_236053;
        }
        inpacc_225267 = inpacc_216785;
        inpacc_225268 = inpacc_216786;
        if (memblock_alloc(ctx, &mem_234910, bytes_234532, "mem_234910")) {
            err = 1;
            goto cleanup;
        }
        if (nz2085U_192338 * (int64_t) 4 > 0)
            memmove(mem_234910.mem + (int64_t) 0, mem_param_234863.mem + (int64_t) 0, nz2085U_192338 * (int64_t) 4);
        if (memblock_alloc(ctx, &mem_234913, bytes_234857, "mem_234913")) {
            err = 1;
            goto cleanup;
        }
        if (nz2085U_192338 * (int64_t) 8 > 0)
            memmove(mem_234913.mem + (int64_t) 0, mem_param_234868.mem + (int64_t) 0, nz2085U_192338 * (int64_t) 8);
        for (int64_t write_iter_233699 = 0; write_iter_233699 < nz2085U_192338; write_iter_233699++) {
            int64_t write_iv_233702 = ((int64_t *) mem_234897)[write_iter_233699];
            int64_t write_iv_233703 = ((int64_t *) mem_param_234868.mem)[write_iter_233699];
            int32_t write_iv_233705 = ((int32_t *) mem_param_234863.mem)[write_iter_233699];
            
            if (sle64((int64_t) 0, write_iv_233702) && slt64(write_iv_233702, nz2085U_192338)) {
                ((int64_t *) mem_234913.mem)[write_iv_233702] = write_iv_233703;
            }
            if (sle64((int64_t) 0, write_iv_233702) && slt64(write_iv_233702, nz2085U_192338)) {
                ((int32_t *) mem_234910.mem)[write_iv_233702] = write_iv_233705;
            }
        }
        if (memblock_set(ctx, &mem_param_tmp_236045, &mem_234910, "mem_234910") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_236046, &mem_234913, "mem_234913") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_234863, &mem_param_tmp_236045, "mem_param_tmp_236045") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_234868, &mem_param_tmp_236046, "mem_param_tmp_236046") != 0)
            return 1;
    }
    if (memblock_set(ctx, &ext_mem_234943, &mem_param_234863, "mem_param_234863") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_234942, &mem_param_234868, "mem_param_234868") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_234624, "mem_234624") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_234858, "mem_234858") != 0)
        return 1;
    if (mem_234946_cached_sizze_236160 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_234946, &mem_234946_cached_sizze_236160, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233710 = 0; i_233710 < nz2085U_192338; i_233710++) {
        int64_t x_214529 = ((int64_t *) ext_mem_234942.mem)[i_233710];
        bool x_214530 = sle64((int64_t) 0, x_214529);
        bool y_214531 = slt64(x_214529, nz2085U_192338);
        bool bounds_check_214532 = x_214530 && y_214531;
        bool index_certs_214533;
        
        if (!bounds_check_214532) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) x_214529, "] out of bounds for array of shape [", (long long) nz2085U_192338, "].", "-> #0  sorting.fut:15:19-23\n   #1  sorting.fut:15:8-27\n   #2  /prelude/functional.fut:9:42-44\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t index_primexp_214534 = sext_i64_i32(x_214529);
        
        ((int32_t *) mem_234946)[i_233710] = index_primexp_214534;
    }
    if (memblock_unref(ctx, &ext_mem_234942, "ext_mem_234942") != 0)
        return 1;
    
    bool cond_214569 = defunc_0_f_res_214541 == (int64_t) 0;
    int64_t i_214571 = sub64(defunc_0_f_res_214541, (int64_t) 1);
    bool x_214572 = sle64((int64_t) 0, i_214571);
    bool y_214573 = slt64(i_214571, defunc_0_f_res_214541);
    bool bounds_check_214574 = x_214572 && y_214573;
    bool protect_assert_disj_214575 = cond_214569 || bounds_check_214574;
    bool index_certs_214576;
    
    if (!protect_assert_disj_214575) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_214571, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  /prelude/array.fut:26:29-34\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t ext_235051;
    int64_t ext_235050;
    int64_t repl_iota_res_214577;
    
    if (cond_214569 == 1) {
        if (memblock_set(ctx, &ext_mem_235054, &mem_235010, "mem_235010") != 0)
            return 1;
        ext_235051 = (int64_t) 0;
        ext_235050 = (int64_t) 0;
        repl_iota_res_214577 = (int64_t) 0;
    } else {
        if (mem_235013_cached_sizze_236165 < bytes_234958) {
            err = lexical_realloc(ctx, &mem_235013, &mem_235013_cached_sizze_236165, bytes_234958);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        
        int32_t discard_233760;
        int32_t scanacc_233756 = 0;
        
        for (int64_t i_233758 = 0; i_233758 < defunc_0_f_res_214541; i_233758++) {
            int32_t x_214583 = ((int32_t *) mem_234975)[i_233758];
            int32_t defunc_1_op_res_214582 = add32(x_214583, scanacc_233756);
            
            ((int32_t *) mem_235013)[i_233758] = defunc_1_op_res_214582;
            
            int32_t scanacc_tmp_236058 = defunc_1_op_res_214582;
            
            scanacc_233756 = scanacc_tmp_236058;
        }
        discard_233760 = scanacc_233756;
        
        int32_t last_res_214584 = ((int32_t *) mem_235013)[i_214571];
        int64_t i32_res_214589 = sext_i32_i64(last_res_214584);
        int64_t binop_y_235024 = (int64_t) 4 * i32_res_214589;
        int64_t bytes_235025 = smax64((int64_t) 0, binop_y_235024);
        
        if (mem_235026_cached_sizze_236166 < bytes_235025) {
            err = lexical_realloc(ctx, &mem_235026, &mem_235026_cached_sizze_236166, bytes_235025);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_236060 = 0; i_236060 < i32_res_214589; i_236060++) {
            ((int32_t *) mem_235026)[i_236060] = 0;
        }
        for (int64_t iter_233761 = 0; iter_233761 < defunc_0_f_res_214541; iter_233761++) {
            int32_t pixel_233763 = ((int32_t *) mem_235013)[iter_233761];
            int64_t defunc_0_f_res_216985 = sext_i32_i64(pixel_233763);
            bool less_than_zzero_233765 = slt64(defunc_0_f_res_216985, (int64_t) 0);
            bool greater_than_sizze_233766 = sle64(i32_res_214589, defunc_0_f_res_216985);
            bool outside_bounds_dim_233767 = less_than_zzero_233765 || greater_than_sizze_233766;
            
            if (!(outside_bounds_dim_233767 == 1)) {
                int32_t read_hist_233769 = ((int32_t *) mem_235026)[defunc_0_f_res_216985];
                int32_t defunc_1_f_res_214594 = add32(1, read_hist_233769);
                
                ((int32_t *) mem_235026)[defunc_0_f_res_216985] = defunc_1_f_res_214594;
            }
        }
        if (memblock_alloc(ctx, &mem_235039, bytes_235025, "mem_235039")) {
            err = 1;
            goto cleanup;
        }
        
        int32_t discard_233777;
        int32_t scanacc_233773 = 0;
        
        for (int64_t i_233775 = 0; i_233775 < i32_res_214589; i_233775++) {
            int32_t x_214601 = ((int32_t *) mem_235026)[i_233775];
            int32_t defunc_1_op_res_214600 = add32(x_214601, scanacc_233773);
            
            ((int32_t *) mem_235039.mem)[i_233775] = defunc_1_op_res_214600;
            
            int32_t scanacc_tmp_236062 = defunc_1_op_res_214600;
            
            scanacc_233773 = scanacc_tmp_236062;
        }
        discard_233777 = scanacc_233773;
        if (memblock_set(ctx, &ext_mem_235054, &mem_235039, "mem_235039") != 0)
            return 1;
        ext_235051 = i32_res_214589;
        ext_235050 = i32_res_214589;
        repl_iota_res_214577 = i32_res_214589;
    }
    
    bool dim_match_214602 = i32_res_214568 == repl_iota_res_214577;
    bool empty_or_match_cert_214603;
    
    if (!dim_match_214602) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (core language) shape (", (long long) repl_iota_res_214577, ") cannot match shape of type `[", (long long) i32_res_214568, "]i32`.", "-> #0  associations.fut:44:20-47\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t ext_235126;
    int64_t ext_235125;
    int64_t ext_235121;
    int64_t ext_235120;
    int64_t replSegmIota_res_214605;
    int64_t replSegmIota_res_214606;
    
    if (cond_214569 == 1) {
        if (memblock_set(ctx, &ext_mem_235129, &mem_235010, "mem_235010") != 0)
            return 1;
        ext_235126 = (int64_t) 0;
        ext_235125 = (int64_t) 0;
        if (memblock_set(ctx, &ext_mem_235124, &mem_235010, "mem_235010") != 0)
            return 1;
        ext_235121 = (int64_t) 0;
        ext_235120 = (int64_t) 0;
        replSegmIota_res_214605 = (int64_t) 0;
        replSegmIota_res_214606 = (int64_t) 0;
    } else {
        if (mem_235057_cached_sizze_236167 < bytes_234958) {
            err = lexical_realloc(ctx, &mem_235057, &mem_235057_cached_sizze_236167, bytes_234958);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_235060_cached_sizze_236168 < bytes_234958) {
            err = lexical_realloc(ctx, &mem_235060, &mem_235060_cached_sizze_236168, bytes_234958);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        
        int32_t inpacc_225284;
        int32_t inpacc_217024 = 0;
        
        for (int64_t i_233795 = 0; i_233795 < defunc_0_f_res_214541; i_233795++) {
            int32_t x_234237 = ((int32_t *) mem_234959)[i_233795];
            int32_t defunc_1_op_res_234247 = add32(inpacc_217024, x_234237);
            
            ((int32_t *) mem_235057)[i_233795] = inpacc_217024;
            ((int32_t *) mem_235060)[i_233795] = defunc_1_op_res_234247;
            
            int32_t inpacc_tmp_236064 = defunc_1_op_res_234247;
            
            inpacc_217024 = inpacc_tmp_236064;
        }
        inpacc_225284 = inpacc_217024;
        
        int32_t last_res_214618 = ((int32_t *) mem_235060)[i_214571];
        int64_t i32_res_214623 = sext_i32_i64(last_res_214618);
        int64_t binop_y_235081 = (int64_t) 4 * i32_res_214623;
        int64_t bytes_235082 = smax64((int64_t) 0, binop_y_235081);
        
        if (mem_235083_cached_sizze_236169 < bytes_235082) {
            err = lexical_realloc(ctx, &mem_235083, &mem_235083_cached_sizze_236169, bytes_235082);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_236067 = 0; i_236067 < i32_res_214623; i_236067++) {
            ((int32_t *) mem_235083)[i_236067] = 0;
        }
        for (int64_t iter_233798 = 0; iter_233798 < defunc_0_f_res_214541; iter_233798++) {
            int32_t pixel_233800 = ((int32_t *) mem_235060)[iter_233798];
            int64_t defunc_0_f_res_216993 = sext_i32_i64(pixel_233800);
            bool less_than_zzero_233802 = slt64(defunc_0_f_res_216993, (int64_t) 0);
            bool greater_than_sizze_233803 = sle64(i32_res_214623, defunc_0_f_res_216993);
            bool outside_bounds_dim_233804 = less_than_zzero_233802 || greater_than_sizze_233803;
            
            if (!(outside_bounds_dim_233804 == 1)) {
                int32_t read_hist_233806 = ((int32_t *) mem_235083)[defunc_0_f_res_216993];
                int32_t defunc_1_f_res_214628 = add32(1, read_hist_233806);
                
                ((int32_t *) mem_235083)[defunc_0_f_res_216993] = defunc_1_f_res_214628;
            }
        }
        if (memblock_alloc(ctx, &mem_235096, bytes_235082, "mem_235096")) {
            err = 1;
            goto cleanup;
        }
        
        int32_t discard_233814;
        int32_t scanacc_233810 = 0;
        
        for (int64_t i_233812 = 0; i_233812 < i32_res_214623; i_233812++) {
            int32_t x_214635 = ((int32_t *) mem_235083)[i_233812];
            int32_t defunc_1_op_res_214634 = add32(x_214635, scanacc_233810);
            
            ((int32_t *) mem_235096.mem)[i_233812] = defunc_1_op_res_214634;
            
            int32_t scanacc_tmp_236069 = defunc_1_op_res_214634;
            
            scanacc_233810 = scanacc_tmp_236069;
        }
        discard_233814 = scanacc_233810;
        if (memblock_alloc(ctx, &mem_235109, bytes_235082, "mem_235109")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_233817 = 0; i_233817 < i32_res_214623; i_233817++) {
            int32_t i64_res_214639 = sext_i64_i32(i_233817);
            int32_t i_214644 = ((int32_t *) mem_235096.mem)[i_233817];
            int64_t i_214645 = sext_i32_i64(i_214644);
            bool x_214646 = sle64((int64_t) 0, i_214645);
            bool y_214647 = slt64(i_214645, defunc_0_f_res_214541);
            bool bounds_check_214648 = x_214646 && y_214647;
            bool index_certs_214649;
            
            if (!bounds_check_214648) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_214645, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:26:57-71\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:200:3-17\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t arg_214650 = ((int32_t *) mem_235057)[i_214645];
            int32_t defunc_0_f_res_214651 = sub32(i64_res_214639, arg_214650);
            
            ((int32_t *) mem_235109.mem)[i_233817] = defunc_0_f_res_214651;
        }
        if (memblock_set(ctx, &ext_mem_235129, &mem_235096, "mem_235096") != 0)
            return 1;
        ext_235126 = i32_res_214623;
        ext_235125 = i32_res_214623;
        if (memblock_set(ctx, &ext_mem_235124, &mem_235109, "mem_235109") != 0)
            return 1;
        ext_235121 = i32_res_214623;
        ext_235120 = i32_res_214623;
        replSegmIota_res_214605 = i32_res_214623;
        replSegmIota_res_214606 = i32_res_214623;
    }
    
    int64_t i_214656 = sub64(replSegmIota_res_214605, (int64_t) 1);
    bool y_214658 = slt64(i_214656, replSegmIota_res_214605);
    bool x_214657 = sle64((int64_t) 0, i_214656);
    bool bounds_check_214659 = x_214657 && y_214658;
    bool cond_214655 = replSegmIota_res_214605 == (int64_t) 0;
    bool protect_assert_disj_214660 = cond_214655 || bounds_check_214659;
    bool index_certs_214661;
    
    if (!protect_assert_disj_214660) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_214656, "] out of bounds for array of shape [", (long long) replSegmIota_res_214605, "].", "-> #0  /prelude/array.fut:26:29-34\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool dim_match_214652 = replSegmIota_res_214605 == replSegmIota_res_214606;
    bool empty_or_match_cert_214653;
    
    if (!dim_match_214652) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Function return value does not match shape of declared return type.", "-> #0  associations.fut:19:1-27:22\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_235130 = (int64_t) 4 * replSegmIota_res_214605;
    int64_t bytes_235131 = smax64((int64_t) 0, binop_y_235130);
    int64_t ext_235201;
    int64_t ext_235200;
    int64_t ext_235196;
    int64_t ext_235195;
    int64_t replSegmIota_res_214662;
    int64_t replSegmIota_res_214663;
    
    if (cond_214655 == 1) {
        if (memblock_set(ctx, &ext_mem_235204, &mem_235010, "mem_235010") != 0)
            return 1;
        ext_235201 = (int64_t) 0;
        ext_235200 = (int64_t) 0;
        if (memblock_set(ctx, &ext_mem_235199, &mem_235010, "mem_235010") != 0)
            return 1;
        ext_235196 = (int64_t) 0;
        ext_235195 = (int64_t) 0;
        replSegmIota_res_214662 = (int64_t) 0;
        replSegmIota_res_214663 = (int64_t) 0;
    } else {
        if (mem_235132_cached_sizze_236170 < bytes_235131) {
            err = lexical_realloc(ctx, &mem_235132, &mem_235132_cached_sizze_236170, bytes_235131);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_235135_cached_sizze_236171 < bytes_235131) {
            err = lexical_realloc(ctx, &mem_235135, &mem_235135_cached_sizze_236171, bytes_235131);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        
        int32_t inpacc_225294;
        int32_t inpacc_217101 = 0;
        
        for (int64_t i_233836 = 0; i_233836 < replSegmIota_res_214605; i_233836++) {
            int32_t x_234218 = ((int32_t *) ext_mem_235124.mem)[i_233836];
            int32_t defunc_1_op_res_234228 = add32(inpacc_217101, x_234218);
            
            ((int32_t *) mem_235132)[i_233836] = inpacc_217101;
            ((int32_t *) mem_235135)[i_233836] = defunc_1_op_res_234228;
            
            int32_t inpacc_tmp_236072 = defunc_1_op_res_234228;
            
            inpacc_217101 = inpacc_tmp_236072;
        }
        inpacc_225294 = inpacc_217101;
        
        int32_t last_res_214675 = ((int32_t *) mem_235135)[i_214656];
        int64_t i32_res_214680 = sext_i32_i64(last_res_214675);
        int64_t binop_y_235156 = (int64_t) 4 * i32_res_214680;
        int64_t bytes_235157 = smax64((int64_t) 0, binop_y_235156);
        
        if (mem_235158_cached_sizze_236172 < bytes_235157) {
            err = lexical_realloc(ctx, &mem_235158, &mem_235158_cached_sizze_236172, bytes_235157);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_236075 = 0; i_236075 < i32_res_214680; i_236075++) {
            ((int32_t *) mem_235158)[i_236075] = 0;
        }
        for (int64_t iter_233839 = 0; iter_233839 < replSegmIota_res_214605; iter_233839++) {
            int32_t pixel_233841 = ((int32_t *) mem_235135)[iter_233839];
            int64_t defunc_0_f_res_217070 = sext_i32_i64(pixel_233841);
            bool less_than_zzero_233843 = slt64(defunc_0_f_res_217070, (int64_t) 0);
            bool greater_than_sizze_233844 = sle64(i32_res_214680, defunc_0_f_res_217070);
            bool outside_bounds_dim_233845 = less_than_zzero_233843 || greater_than_sizze_233844;
            
            if (!(outside_bounds_dim_233845 == 1)) {
                int32_t read_hist_233847 = ((int32_t *) mem_235158)[defunc_0_f_res_217070];
                int32_t defunc_1_f_res_214685 = add32(1, read_hist_233847);
                
                ((int32_t *) mem_235158)[defunc_0_f_res_217070] = defunc_1_f_res_214685;
            }
        }
        if (memblock_alloc(ctx, &mem_235171, bytes_235157, "mem_235171")) {
            err = 1;
            goto cleanup;
        }
        
        int32_t discard_233855;
        int32_t scanacc_233851 = 0;
        
        for (int64_t i_233853 = 0; i_233853 < i32_res_214680; i_233853++) {
            int32_t x_214692 = ((int32_t *) mem_235158)[i_233853];
            int32_t defunc_1_op_res_214691 = add32(x_214692, scanacc_233851);
            
            ((int32_t *) mem_235171.mem)[i_233853] = defunc_1_op_res_214691;
            
            int32_t scanacc_tmp_236077 = defunc_1_op_res_214691;
            
            scanacc_233851 = scanacc_tmp_236077;
        }
        discard_233855 = scanacc_233851;
        if (memblock_alloc(ctx, &mem_235184, bytes_235157, "mem_235184")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_233858 = 0; i_233858 < i32_res_214680; i_233858++) {
            int32_t i64_res_214696 = sext_i64_i32(i_233858);
            int32_t i_214701 = ((int32_t *) mem_235171.mem)[i_233858];
            int64_t i_214702 = sext_i32_i64(i_214701);
            bool x_214703 = sle64((int64_t) 0, i_214702);
            bool y_214704 = slt64(i_214702, replSegmIota_res_214605);
            bool bounds_check_214705 = x_214703 && y_214704;
            bool index_certs_214706;
            
            if (!bounds_check_214705) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_214702, "] out of bounds for array of shape [", (long long) replSegmIota_res_214605, "].", "-> #0  associations.fut:26:57-71\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:200:3-17\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t arg_214707 = ((int32_t *) mem_235132)[i_214702];
            int32_t defunc_0_f_res_214708 = sub32(i64_res_214696, arg_214707);
            
            ((int32_t *) mem_235184.mem)[i_233858] = defunc_0_f_res_214708;
        }
        if (memblock_set(ctx, &ext_mem_235204, &mem_235171, "mem_235171") != 0)
            return 1;
        ext_235201 = i32_res_214680;
        ext_235200 = i32_res_214680;
        if (memblock_set(ctx, &ext_mem_235199, &mem_235184, "mem_235184") != 0)
            return 1;
        ext_235196 = i32_res_214680;
        ext_235195 = i32_res_214680;
        replSegmIota_res_214662 = i32_res_214680;
        replSegmIota_res_214663 = i32_res_214680;
    }
    if (memblock_unref(ctx, &mem_235010, "mem_235010") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_235124, "ext_mem_235124") != 0)
        return 1;
    
    bool dim_match_214711 = i32_res_214568 == replSegmIota_res_214662;
    bool empty_or_match_cert_214712;
    
    if (!dim_match_214711) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (core language) shape (", (long long) replSegmIota_res_214662, ") cannot match shape of type `[", (long long) i32_res_214568, "](i32, i32)`.", "-> #0  associations.fut:46:15-53\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool dim_match_214709 = replSegmIota_res_214662 == replSegmIota_res_214663;
    bool empty_or_match_cert_214710;
    
    if (!dim_match_214709) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Function return value does not match shape of declared return type.", "-> #0  associations.fut:19:1-27:22\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (mem_235207_cached_sizze_236173 < bytes_235206) {
        err = lexical_realloc(ctx, &mem_235207, &mem_235207_cached_sizze_236173, bytes_235206);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235210_cached_sizze_236174 < bytes_235206) {
        err = lexical_realloc(ctx, &mem_235210, &mem_235210_cached_sizze_236174, bytes_235206);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233864 = 0; i_233864 < i32_res_214568; i_233864++) {
        int32_t x_215848 = ((int32_t *) ext_mem_235204.mem)[i_233864];
        int32_t x_215849 = ((int32_t *) ext_mem_235054.mem)[i_233864];
        int32_t x_215850 = ((int32_t *) ext_mem_235199.mem)[i_233864];
        int64_t j_215852 = sext_i32_i64(x_215849);
        bool x_215853 = sle64((int64_t) 0, j_215852);
        bool y_215854 = slt64(j_215852, defunc_0_f_res_214541);
        bool bounds_check_215855 = x_215853 && y_215854;
        bool index_certs_215856;
        
        if (!bounds_check_215855) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_215852, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:49:33-41\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  associations.fut:49:15-54\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t arg_215857 = ((int32_t *) mem_234972)[j_215852];
        int32_t defunc_1_f_res_215858 = sub32(x_215848, arg_215857);
        bool index_certs_215864;
        
        if (!bounds_check_215855) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_215852, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:125:37-50\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t arg_215865 = ((int32_t *) mem_234978)[j_215852];
        int32_t i_215866 = add32(defunc_1_f_res_215858, arg_215865);
        int64_t i_215867 = sext_i32_i64(i_215866);
        bool x_215868 = sle64((int64_t) 0, i_215867);
        bool y_215869 = slt64(i_215867, nz2085U_192338);
        bool bounds_check_215870 = x_215868 && y_215869;
        bool index_certs_215871;
        
        if (!bounds_check_215870) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_215867, "] out of bounds for array of shape [", (long long) nz2085U_192338, "].", "-> #0  associations.fut:125:29-57\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t lifted_index_res_215872 = ((int32_t *) mem_234946)[i_215867];
        int32_t i_215873 = add32(x_215850, arg_215865);
        int64_t i_215874 = sext_i32_i64(i_215873);
        bool x_215875 = sle64((int64_t) 0, i_215874);
        bool y_215876 = slt64(i_215874, nz2085U_192338);
        bool bounds_check_215877 = x_215875 && y_215876;
        bool index_certs_215878;
        
        if (!bounds_check_215877) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_215874, "] out of bounds for array of shape [", (long long) nz2085U_192338, "].", "-> #0  associations.fut:125:29-57\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t lifted_index_res_215879 = ((int32_t *) mem_234946)[i_215874];
        
        ((int32_t *) mem_235207)[i_233864] = lifted_index_res_215872;
        ((int32_t *) mem_235210)[i_233864] = lifted_index_res_215879;
    }
    if (memblock_unref(ctx, &ext_mem_235054, "ext_mem_235054") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_235199, "ext_mem_235199") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_235204, "ext_mem_235204") != 0)
        return 1;
    
    bool dim_match_214928 = replSegmIota_res_214881 == replSegmIota_res_214882;
    bool empty_or_match_cert_214929;
    
    if (!dim_match_214928) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Function return value does not match shape of declared return type.", "-> #0  associations.fut:19:1-27:22\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (mem_235579_cached_sizze_236186 < bytes_235578) {
        err = lexical_realloc(ctx, &mem_235579, &mem_235579_cached_sizze_236186, bytes_235578);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235582_cached_sizze_236187 < bytes_235578) {
        err = lexical_realloc(ctx, &mem_235582, &mem_235582_cached_sizze_236187, bytes_235578);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235585_cached_sizze_236188 < bytes_235578) {
        err = lexical_realloc(ctx, &mem_235585, &mem_235585_cached_sizze_236188, bytes_235578);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235588_cached_sizze_236189 < bytes_235578) {
        err = lexical_realloc(ctx, &mem_235588, &mem_235588_cached_sizze_236189, bytes_235578);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235591_cached_sizze_236190 < bytes_235578) {
        err = lexical_realloc(ctx, &mem_235591, &mem_235591_cached_sizze_236190, bytes_235578);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233962 = 0; i_233962 < replSegmIota_res_214881; i_233962++) {
        int32_t x_215788 = ((int32_t *) ext_mem_235576.mem)[i_233962];
        int32_t x_215789 = ((int32_t *) ext_mem_235571.mem)[i_233962];
        int64_t associationI_215790 = sext_i32_i64(x_215788);
        bool x_215791 = sle64((int64_t) 0, associationI_215790);
        bool y_215792 = slt64(associationI_215790, binop_x_235299);
        bool bounds_check_215793 = x_215791 && y_215792;
        bool index_certs_215794;
        
        if (!bounds_check_215793) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) associationI_215790, "] out of bounds for array of shape [", (long long) binop_x_235299, "].", "-> #0  associations.fut:55:59-84\n   #1  /prelude/functional.fut:9:42-44\n   #2  associations.fut:54:8-58:54\n   #3  associations.fut:128:29-85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t new_index_215795 = squot64(associationI_215790, partition_sizze_214382);
        int64_t binop_y_215796 = partition_sizze_214382 * new_index_215795;
        int64_t new_index_215797 = associationI_215790 - binop_y_215796;
        int32_t defunc_0_f_res_215798 = ((int32_t *) mem_235302)[new_index_215795 * partition_sizze_214382 + new_index_215797];
        int32_t defunc_0_f_res_215799 = ((int32_t *) mem_235306)[new_index_215795 * partition_sizze_214382 + new_index_215797];
        int32_t defunc_0_f_res_215800 = ((int32_t *) mem_235310)[new_index_215795 * partition_sizze_214382 + new_index_215797];
        int32_t defunc_0_f_res_215801 = ((int32_t *) mem_235314)[new_index_215795 * partition_sizze_214382 + new_index_215797];
        int32_t defunc_0_f_res_215802 = ((int32_t *) mem_235318)[new_index_215795 * partition_sizze_214382 + new_index_215797];
        int64_t i_215803 = sext_i32_i64(defunc_0_f_res_215798);
        bool x_215804 = sle64((int64_t) 0, i_215803);
        bool y_215805 = slt64(i_215803, defunc_0_f_res_214541);
        bool bounds_check_215806 = x_215804 && y_215805;
        bool index_certs_215807;
        
        if (!bounds_check_215806) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_215803, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:56:50-55\n   #1  /prelude/functional.fut:9:42-44\n   #2  associations.fut:54:8-58:54\n   #3  associations.fut:128:29-85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t arg_215808 = ((int32_t *) mem_234959)[i_215803];
        bool zzero_215809 = arg_215808 == 0;
        bool nonzzero_215810 = !zzero_215809;
        bool nonzzero_cert_215811;
        
        if (!nonzzero_215810) {
            set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  associations.fut:56:41-55\n   #1  /prelude/functional.fut:9:42-44\n   #2  associations.fut:54:8-58:54\n   #3  associations.fut:128:29-85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t a_215812 = smod32(x_215789, arg_215808);
        int32_t b_215813 = sdiv32(x_215789, arg_215808);
        bool index_certs_215825;
        
        if (!bounds_check_215806) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_215803, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:125:37-50\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t arg_215826 = ((int32_t *) mem_234978)[i_215803];
        int32_t i_215827 = add32(a_215812, arg_215826);
        int64_t i_215828 = sext_i32_i64(i_215827);
        bool x_215829 = sle64((int64_t) 0, i_215828);
        bool y_215830 = slt64(i_215828, nz2085U_192338);
        bool bounds_check_215831 = x_215829 && y_215830;
        bool index_certs_215832;
        
        if (!bounds_check_215831) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_215828, "] out of bounds for array of shape [", (long long) nz2085U_192338, "].", "-> #0  associations.fut:125:29-57\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t lifted_index_res_215833 = ((int32_t *) mem_234946)[i_215828];
        int64_t gridI_215834 = sext_i32_i64(defunc_0_f_res_215799);
        bool x_215835 = sle64((int64_t) 0, gridI_215834);
        bool y_215836 = slt64(gridI_215834, defunc_0_f_res_214541);
        bool bounds_check_215837 = x_215835 && y_215836;
        bool index_certs_215838;
        
        if (!bounds_check_215837) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gridI_215834, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:125:37-50\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t arg_215839 = ((int32_t *) mem_234978)[gridI_215834];
        int32_t i_215840 = add32(b_215813, arg_215839);
        int64_t i_215841 = sext_i32_i64(i_215840);
        bool x_215842 = sle64((int64_t) 0, i_215841);
        bool y_215843 = slt64(i_215841, nz2085U_192338);
        bool bounds_check_215844 = x_215842 && y_215843;
        bool index_certs_215845;
        
        if (!bounds_check_215844) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_215841, "] out of bounds for array of shape [", (long long) nz2085U_192338, "].", "-> #0  associations.fut:125:29-57\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t lifted_index_res_215846 = ((int32_t *) mem_234946)[i_215841];
        
        ((int32_t *) mem_235579)[i_233962] = lifted_index_res_215833;
        ((int32_t *) mem_235582)[i_233962] = lifted_index_res_215846;
        ((int32_t *) mem_235585)[i_233962] = defunc_0_f_res_215800;
        ((int32_t *) mem_235588)[i_233962] = defunc_0_f_res_215801;
        ((int32_t *) mem_235591)[i_233962] = defunc_0_f_res_215802;
    }
    if (memblock_unref(ctx, &ext_mem_235571, "ext_mem_235571") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_235576, "ext_mem_235576") != 0)
        return 1;
    
    float defunc_1_f_res_211817 = sigma_par_192340 * sigma_par_192340;
    
    if (mem_235644_cached_sizze_236191 < bytes_235643) {
        err = lexical_realloc(ctx, &mem_235644, &mem_235644_cached_sizze_236191, bytes_235643);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235647_cached_sizze_236192 < bytes_235643) {
        err = lexical_realloc(ctx, &mem_235647, &mem_235647_cached_sizze_236192, bytes_235643);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_233976;
    int64_t scanacc_233970 = (int64_t) 0;
    
    for (int64_t i_233973 = 0; i_233973 < conc_tmp_214996; i_233973++) {
        bool index_concat_cmp_234121 = sle64(i32_res_214568, i_233973);
        int32_t index_concat_branch_234125;
        
        if (index_concat_cmp_234121 == 1) {
            int64_t index_concat_i_234122 = sub64(i_233973, i32_res_214568);
            int32_t index_concat_234123 = ((int32_t *) mem_235579)[index_concat_i_234122];
            
            index_concat_branch_234125 = index_concat_234123;
        } else {
            int32_t index_concat_234124 = ((int32_t *) mem_235207)[i_233973];
            
            index_concat_branch_234125 = index_concat_234124;
        }
        
        int32_t index_concat_branch_234119;
        
        if (index_concat_cmp_234121 == 1) {
            int64_t index_concat_i_234116 = sub64(i_233973, i32_res_214568);
            int32_t index_concat_234117 = ((int32_t *) mem_235582)[index_concat_i_234116];
            
            index_concat_branch_234119 = index_concat_234117;
        } else {
            int32_t index_concat_234118 = ((int32_t *) mem_235210)[i_233973];
            
            index_concat_branch_234119 = index_concat_234118;
        }
        
        int32_t index_concat_branch_234113;
        
        if (index_concat_cmp_234121 == 1) {
            int64_t index_concat_i_234110 = sub64(i_233973, i32_res_214568);
            int32_t index_concat_234111 = ((int32_t *) mem_235585)[index_concat_i_234110];
            
            index_concat_branch_234113 = index_concat_234111;
        } else {
            index_concat_branch_234113 = 0;
        }
        
        int32_t index_concat_branch_234107;
        
        if (index_concat_cmp_234121 == 1) {
            int64_t index_concat_i_234104 = sub64(i_233973, i32_res_214568);
            int32_t index_concat_234105 = ((int32_t *) mem_235588)[index_concat_i_234104];
            
            index_concat_branch_234107 = index_concat_234105;
        } else {
            index_concat_branch_234107 = 0;
        }
        
        int32_t index_concat_branch_234101;
        
        if (index_concat_cmp_234121 == 1) {
            int64_t index_concat_i_234098 = sub64(i_233973, i32_res_214568);
            int32_t index_concat_234099 = ((int32_t *) mem_235591)[index_concat_i_234098];
            
            index_concat_branch_234101 = index_concat_234099;
        } else {
            index_concat_branch_234101 = 0;
        }
        
        int64_t i_215479 = sext_i32_i64(index_concat_branch_234125);
        bool x_215480 = sle64((int64_t) 0, i_215479);
        bool y_215481 = slt64(i_215479, nz2085U_192338);
        bool bounds_check_215482 = x_215480 && y_215481;
        bool index_certs_215483;
        
        if (!bounds_check_215482) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_215479, "] out of bounds for array of shape [", (long long) nz2085U_192338, "].", "-> #0  associations.fut:142:18-31\n   #1  /prelude/soacs.fut:172:53-55\n   #2  /prelude/functional.fut:9:42-44\n   #3  associations.fut:230:7-231:29\n   #4  futhark_interaction.fut:50:8-105\n   #5  futhark_interaction.fut:43:1-52:17\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        float defunc_0_p_res_215484 = ((float *) mem_234627)[i_215479];
        float defunc_0_p_res_215485 = ((float *) mem_234630)[i_215479];
        float defunc_0_p_res_215486 = ((float *) mem_234633)[i_215479];
        float defunc_0_p_res_215487 = ((float *) mem_234542)[i_215479];
        float defunc_0_p_res_215488 = ((float *) mem_234545)[i_215479];
        float defunc_0_p_res_215489 = ((float *) mem_234548)[i_215479];
        float defunc_0_p_res_215490 = ((float *) mem_234551)[i_215479];
        float defunc_0_f_res_215491 = sitofp_i32_f32(index_concat_branch_234113);
        float defunc_0_f_res_215492 = sitofp_i32_f32(index_concat_branch_234107);
        float defunc_0_f_res_215493 = sitofp_i32_f32(index_concat_branch_234101);
        float defunc_1_f_res_215494 = defunc_1_f_res_211793 * defunc_0_f_res_215491;
        float defunc_1_f_res_215495 = defunc_1_f_res_211794 * defunc_0_f_res_215492;
        float defunc_1_f_res_215496 = defunc_1_f_res_211795 * defunc_0_f_res_215493;
        int64_t j_215497 = sext_i32_i64(index_concat_branch_234119);
        bool x_215498 = sle64((int64_t) 0, j_215497);
        bool y_215499 = slt64(j_215497, nz2085U_192338);
        bool bounds_check_215500 = x_215498 && y_215499;
        bool index_certs_215501;
        
        if (!bounds_check_215500) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_215497, "] out of bounds for array of shape [", (long long) nz2085U_192338, "].", "-> #0  associations.fut:143:69-82\n   #1  /prelude/soacs.fut:172:53-55\n   #2  /prelude/functional.fut:9:42-44\n   #3  associations.fut:230:7-231:29\n   #4  futhark_interaction.fut:50:8-105\n   #5  futhark_interaction.fut:43:1-52:17\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        float dyn_translate_arg_215502 = ((float *) mem_234627)[j_215497];
        float dyn_translate_arg_215503 = ((float *) mem_234630)[j_215497];
        float dyn_translate_arg_215504 = ((float *) mem_234633)[j_215497];
        float dyn_translate_arg_215505 = ((float *) mem_234542)[j_215497];
        float dyn_translate_arg_215506 = ((float *) mem_234545)[j_215497];
        float dyn_translate_arg_215507 = ((float *) mem_234548)[j_215497];
        float dyn_translate_arg_215508 = ((float *) mem_234551)[j_215497];
        float defunc_1_f_res_215509 = defunc_1_f_res_215494 + dyn_translate_arg_215502;
        float defunc_1_f_res_215510 = defunc_1_f_res_215495 + dyn_translate_arg_215503;
        float defunc_1_f_res_215511 = defunc_1_f_res_215496 + dyn_translate_arg_215504;
        float defunc_1_f_res_215512 = defunc_1_f_res_215509 - defunc_0_p_res_215484;
        float defunc_1_f_res_215513 = defunc_1_f_res_215510 - defunc_0_p_res_215485;
        float defunc_1_f_res_215514 = defunc_1_f_res_215511 - defunc_0_p_res_215486;
        float defunc_0_f_res_215515 = 0.0F - defunc_0_p_res_215488;
        float defunc_0_f_res_215516 = 0.0F - defunc_0_p_res_215489;
        float defunc_0_f_res_215517 = 0.0F - defunc_0_p_res_215490;
        float defunc_0_f_res_215518 = 0.0F - defunc_0_f_res_215515;
        float defunc_0_f_res_215519 = 0.0F - defunc_0_f_res_215516;
        float defunc_0_f_res_215520 = 0.0F - defunc_0_f_res_215517;
        float defunc_1_f_res_215521 = defunc_1_f_res_215512 * defunc_0_f_res_215515;
        float defunc_1_f_res_215522 = defunc_1_f_res_215513 * defunc_0_f_res_215516;
        float defunc_1_f_res_215523 = defunc_1_f_res_215514 * defunc_0_f_res_215517;
        float defunc_1_f_res_215524 = defunc_1_f_res_215522 + defunc_1_f_res_215523;
        float defunc_0_f_res_215525 = defunc_1_f_res_215521 + defunc_1_f_res_215524;
        float qMult_res_215526 = 0.0F - defunc_0_f_res_215525;
        float arg_215527 = defunc_1_f_res_215514 * defunc_0_f_res_215516;
        float arg_215528 = defunc_1_f_res_215513 * defunc_0_f_res_215517;
        float cross_res_215529 = arg_215527 - arg_215528;
        float arg_215530 = defunc_1_f_res_215512 * defunc_0_f_res_215517;
        float arg_215531 = defunc_1_f_res_215514 * defunc_0_f_res_215515;
        float cross_res_215532 = arg_215530 - arg_215531;
        float arg_215533 = defunc_1_f_res_215513 * defunc_0_f_res_215515;
        float arg_215534 = defunc_1_f_res_215512 * defunc_0_f_res_215516;
        float cross_res_215535 = arg_215533 - arg_215534;
        float defunc_0_f_res_215536 = defunc_0_p_res_215487 * defunc_1_f_res_215512;
        float defunc_0_f_res_215537 = defunc_0_p_res_215487 * defunc_1_f_res_215513;
        float defunc_0_f_res_215538 = defunc_0_p_res_215487 * defunc_1_f_res_215514;
        float defunc_1_f_res_215539 = cross_res_215529 + defunc_0_f_res_215536;
        float defunc_1_f_res_215540 = cross_res_215532 + defunc_0_f_res_215537;
        float defunc_1_f_res_215541 = cross_res_215535 + defunc_0_f_res_215538;
        float arg_215542 = defunc_0_f_res_215520 * defunc_1_f_res_215540;
        float arg_215543 = defunc_0_f_res_215519 * defunc_1_f_res_215541;
        float cross_res_215544 = arg_215542 - arg_215543;
        float arg_215545 = defunc_0_f_res_215518 * defunc_1_f_res_215541;
        float arg_215546 = defunc_0_f_res_215520 * defunc_1_f_res_215539;
        float cross_res_215547 = arg_215545 - arg_215546;
        float arg_215548 = defunc_0_f_res_215519 * defunc_1_f_res_215539;
        float arg_215549 = defunc_0_f_res_215518 * defunc_1_f_res_215540;
        float cross_res_215550 = arg_215548 - arg_215549;
        float defunc_0_f_res_215551 = defunc_0_p_res_215487 * defunc_1_f_res_215539;
        float defunc_0_f_res_215552 = defunc_0_p_res_215487 * defunc_1_f_res_215540;
        float defunc_0_f_res_215553 = defunc_0_p_res_215487 * defunc_1_f_res_215541;
        float defunc_0_f_res_215554 = defunc_0_f_res_215518 * qMult_res_215526;
        float defunc_0_f_res_215555 = defunc_0_f_res_215519 * qMult_res_215526;
        float defunc_0_f_res_215556 = defunc_0_f_res_215520 * qMult_res_215526;
        float defunc_1_f_res_215557 = defunc_0_f_res_215551 + defunc_0_f_res_215554;
        float defunc_1_f_res_215558 = defunc_0_f_res_215552 + defunc_0_f_res_215555;
        float defunc_1_f_res_215559 = defunc_0_f_res_215553 + defunc_0_f_res_215556;
        float defunc_1_f_res_215560 = cross_res_215544 + defunc_1_f_res_215557;
        float defunc_1_f_res_215561 = cross_res_215547 + defunc_1_f_res_215558;
        float defunc_1_f_res_215562 = cross_res_215550 + defunc_1_f_res_215559;
        float arg_215563 = defunc_0_p_res_215487 * dyn_translate_arg_215505;
        float defunc_1_f_res_215564 = dyn_translate_arg_215506 * defunc_0_f_res_215515;
        float defunc_1_f_res_215565 = dyn_translate_arg_215507 * defunc_0_f_res_215516;
        float defunc_1_f_res_215566 = dyn_translate_arg_215508 * defunc_0_f_res_215517;
        float defunc_1_f_res_215567 = defunc_1_f_res_215565 + defunc_1_f_res_215566;
        float defunc_0_f_res_215568 = defunc_1_f_res_215564 + defunc_1_f_res_215567;
        float qMult_res_215569 = arg_215563 - defunc_0_f_res_215568;
        float arg_215570 = dyn_translate_arg_215508 * defunc_0_f_res_215516;
        float arg_215571 = dyn_translate_arg_215507 * defunc_0_f_res_215517;
        float cross_res_215572 = arg_215570 - arg_215571;
        float arg_215573 = dyn_translate_arg_215506 * defunc_0_f_res_215517;
        float arg_215574 = dyn_translate_arg_215508 * defunc_0_f_res_215515;
        float cross_res_215575 = arg_215573 - arg_215574;
        float arg_215576 = dyn_translate_arg_215507 * defunc_0_f_res_215515;
        float arg_215577 = dyn_translate_arg_215506 * defunc_0_f_res_215516;
        float cross_res_215578 = arg_215576 - arg_215577;
        float defunc_0_f_res_215579 = dyn_translate_arg_215505 * defunc_0_f_res_215515;
        float defunc_0_f_res_215580 = dyn_translate_arg_215505 * defunc_0_f_res_215516;
        float defunc_0_f_res_215581 = dyn_translate_arg_215505 * defunc_0_f_res_215517;
        float defunc_0_f_res_215582 = defunc_0_p_res_215487 * dyn_translate_arg_215506;
        float defunc_0_f_res_215583 = defunc_0_p_res_215487 * dyn_translate_arg_215507;
        float defunc_0_f_res_215584 = defunc_0_p_res_215487 * dyn_translate_arg_215508;
        float defunc_1_f_res_215585 = defunc_0_f_res_215579 + defunc_0_f_res_215582;
        float defunc_1_f_res_215586 = defunc_0_f_res_215580 + defunc_0_f_res_215583;
        float defunc_1_f_res_215587 = defunc_0_f_res_215581 + defunc_0_f_res_215584;
        float defunc_1_f_res_215588 = cross_res_215572 + defunc_1_f_res_215585;
        float defunc_1_f_res_215589 = cross_res_215575 + defunc_1_f_res_215586;
        float defunc_1_f_res_215590 = cross_res_215578 + defunc_1_f_res_215587;
        float defunc_0_f_res_215591 = 0.0F - defunc_1_f_res_215588;
        float defunc_0_f_res_215592 = 0.0F - defunc_1_f_res_215589;
        float defunc_0_f_res_215593 = 0.0F - defunc_1_f_res_215590;
        float defunc_1_f_res_215594 = sigma_par_192340 * defunc_1_f_res_215590;
        float qMult_res_215595 = 0.0F - defunc_1_f_res_215594;
        float arg_215596 = sigma_par_192340 * defunc_1_f_res_215589;
        float arg_215597 = sigma_par_192340 * defunc_1_f_res_215588;
        float cross_res_215598 = 0.0F - arg_215597;
        float defunc_0_f_res_215599 = sigma_par_192340 * qMult_res_215569;
        float arg_215600 = defunc_0_f_res_215593 * cross_res_215598;
        float arg_215601 = defunc_0_f_res_215592 * defunc_0_f_res_215599;
        float cross_res_215602 = arg_215600 - arg_215601;
        float arg_215603 = defunc_0_f_res_215591 * defunc_0_f_res_215599;
        float arg_215604 = defunc_0_f_res_215593 * arg_215596;
        float cross_res_215605 = arg_215603 - arg_215604;
        float arg_215606 = defunc_0_f_res_215592 * arg_215596;
        float arg_215607 = defunc_0_f_res_215591 * cross_res_215598;
        float cross_res_215608 = arg_215606 - arg_215607;
        float defunc_0_f_res_215609 = qMult_res_215569 * arg_215596;
        float defunc_0_f_res_215610 = qMult_res_215569 * cross_res_215598;
        float defunc_0_f_res_215611 = qMult_res_215569 * defunc_0_f_res_215599;
        float defunc_0_f_res_215612 = defunc_0_f_res_215591 * qMult_res_215595;
        float defunc_0_f_res_215613 = defunc_0_f_res_215592 * qMult_res_215595;
        float defunc_0_f_res_215614 = defunc_0_f_res_215593 * qMult_res_215595;
        float defunc_1_f_res_215615 = defunc_0_f_res_215609 + defunc_0_f_res_215612;
        float defunc_1_f_res_215616 = defunc_0_f_res_215610 + defunc_0_f_res_215613;
        float defunc_1_f_res_215617 = defunc_0_f_res_215611 + defunc_0_f_res_215614;
        float defunc_1_f_res_215618 = cross_res_215602 + defunc_1_f_res_215615;
        float defunc_1_f_res_215619 = cross_res_215605 + defunc_1_f_res_215616;
        float defunc_1_f_res_215620 = cross_res_215608 + defunc_1_f_res_215617;
        float defunc_0_f_res_215621 = 0.0F - defunc_1_f_res_215560;
        float defunc_0_f_res_215622 = 0.0F - defunc_1_f_res_215561;
        float defunc_0_f_res_215623 = 0.0F - defunc_1_f_res_215562;
        float defunc_1_f_res_215624 = sigma_par_192340 * defunc_1_f_res_215620;
        float defunc_1_f_res_215625 = sigma_par_192340 * defunc_0_f_res_215623;
        float defunc_1_f_res_215626 = defunc_1_f_res_215618 * defunc_1_f_res_215618;
        float defunc_1_f_res_215627 = defunc_1_f_res_215619 * defunc_1_f_res_215619;
        float defunc_1_f_res_215628 = defunc_1_f_res_215620 * defunc_1_f_res_215620;
        float defunc_1_f_res_215629 = defunc_1_f_res_215627 + defunc_1_f_res_215628;
        float defunc_0_f_res_215630 = defunc_1_f_res_215626 + defunc_1_f_res_215629;
        float defunc_1_f_res_215631 = defunc_1_f_res_215618 * defunc_0_f_res_215621;
        float defunc_1_f_res_215632 = defunc_1_f_res_215619 * defunc_0_f_res_215622;
        float defunc_1_f_res_215633 = defunc_1_f_res_215620 * defunc_0_f_res_215623;
        float defunc_1_f_res_215634 = defunc_1_f_res_215632 + defunc_1_f_res_215633;
        float defunc_0_f_res_215635 = defunc_1_f_res_215631 + defunc_1_f_res_215634;
        float arg_215636 = defunc_1_f_res_211817 * defunc_0_f_res_215630;
        float arg_215637 = defunc_1_f_res_215624 * defunc_1_f_res_215624;
        float det_215638 = arg_215636 - arg_215637;
        float arg_215639 = defunc_1_f_res_215625 * defunc_0_f_res_215630;
        float arg_215640 = defunc_1_f_res_215624 * defunc_0_f_res_215635;
        float arg_215641 = arg_215639 - arg_215640;
        float i_m_215642 = arg_215641 / det_215638;
        float arg_215643 = defunc_1_f_res_211817 * defunc_0_f_res_215635;
        float arg_215644 = defunc_1_f_res_215624 * defunc_1_f_res_215625;
        float arg_215645 = arg_215643 - arg_215644;
        float j_m_215646 = arg_215645 / det_215638;
        float arg_215647 = defunc_1_f_res_215625 - defunc_1_f_res_215624;
        float i_p_215648 = arg_215647 / defunc_1_f_res_211817;
        float arg_215649 = defunc_1_f_res_215624 + defunc_1_f_res_215625;
        float i_n_215650 = arg_215649 / defunc_1_f_res_211817;
        float arg_215651 = defunc_0_f_res_215635 - defunc_1_f_res_215624;
        float j_p_215652 = arg_215651 / defunc_0_f_res_215630;
        float arg_215653 = defunc_1_f_res_215624 + defunc_0_f_res_215635;
        float j_n_215654 = arg_215653 / defunc_0_f_res_215630;
        bool cond_215655 = det_215638 == 0.0F;
        bool cond_215656 = !cond_215655;
        bool cond_215657 = -1.0F <= i_m_215642;
        bool lifted_valid_res_t_res_215658 = i_m_215642 <= 1.0F;
        bool x_215659 = cond_215657 && lifted_valid_res_t_res_215658;
        bool x_215660 = cond_215656 && x_215659;
        bool cond_215661 = -1.0F <= j_m_215646;
        bool lifted_valid_res_t_res_215662 = j_m_215646 <= 1.0F;
        bool x_215663 = cond_215661 && lifted_valid_res_t_res_215662;
        bool x_215664 = x_215660 && x_215663;
        float rodDistance_res_215665;
        
        if (x_215664 == 1) {
            float defunc_0_f_res_225322 = defunc_1_f_res_215618 * j_m_215646;
            float defunc_0_f_res_225323 = defunc_1_f_res_215619 * j_m_215646;
            float defunc_0_f_res_225324 = defunc_1_f_res_215620 * j_m_215646;
            float defunc_0_f_res_225325 = sigma_par_192340 * i_m_215642;
            float defunc_1_f_res_225326 = defunc_0_f_res_225324 + defunc_0_f_res_225325;
            float defunc_1_f_res_225327 = defunc_0_f_res_225322 - defunc_0_f_res_215621;
            float defunc_1_f_res_225328 = defunc_0_f_res_225323 - defunc_0_f_res_215622;
            float defunc_1_f_res_225329 = defunc_1_f_res_225326 - defunc_0_f_res_215623;
            float defunc_1_f_res_225330 = defunc_1_f_res_225327 * defunc_1_f_res_225327;
            float defunc_1_f_res_225331 = defunc_1_f_res_225328 * defunc_1_f_res_225328;
            float defunc_1_f_res_225332 = defunc_1_f_res_225329 * defunc_1_f_res_225329;
            float defunc_1_f_res_225333 = defunc_1_f_res_225331 + defunc_1_f_res_225332;
            float defunc_0_f_res_225334 = defunc_1_f_res_225330 + defunc_1_f_res_225333;
            float sqrt_res_225335 = futrts_sqrt32(defunc_0_f_res_225334);
            
            rodDistance_res_215665 = sqrt_res_225335;
        } else {
            float defunc_0_f_res_215680 = -1.0F * defunc_1_f_res_215618;
            float defunc_0_f_res_215681 = -1.0F * defunc_1_f_res_215619;
            float defunc_0_f_res_215682 = -1.0F * defunc_1_f_res_215620;
            float defunc_0_f_res_215683 = -1.0F * sigma_par_192340;
            float defunc_1_f_res_215684 = defunc_0_f_res_215682 + defunc_0_f_res_215683;
            float defunc_1_f_res_215685 = defunc_0_f_res_215680 - defunc_0_f_res_215621;
            float defunc_1_f_res_215686 = defunc_0_f_res_215681 - defunc_0_f_res_215622;
            float defunc_1_f_res_215687 = defunc_1_f_res_215684 - defunc_0_f_res_215623;
            float defunc_1_f_res_215688 = defunc_1_f_res_215685 * defunc_1_f_res_215685;
            float defunc_1_f_res_215689 = defunc_1_f_res_215686 * defunc_1_f_res_215686;
            float defunc_1_f_res_215690 = defunc_1_f_res_215687 * defunc_1_f_res_215687;
            float defunc_1_f_res_215691 = defunc_1_f_res_215689 + defunc_1_f_res_215690;
            float defunc_0_f_res_215692 = defunc_1_f_res_215688 + defunc_1_f_res_215691;
            float defunc_1_f_res_215693 = defunc_1_f_res_215620 + defunc_0_f_res_215683;
            float defunc_1_f_res_215694 = defunc_1_f_res_215618 - defunc_0_f_res_215621;
            float defunc_1_f_res_215695 = defunc_1_f_res_215619 - defunc_0_f_res_215622;
            float defunc_1_f_res_215696 = defunc_1_f_res_215693 - defunc_0_f_res_215623;
            float defunc_1_f_res_215697 = defunc_1_f_res_215694 * defunc_1_f_res_215694;
            float defunc_1_f_res_215698 = defunc_1_f_res_215695 * defunc_1_f_res_215695;
            float defunc_1_f_res_215699 = defunc_1_f_res_215696 * defunc_1_f_res_215696;
            float defunc_1_f_res_215700 = defunc_1_f_res_215698 + defunc_1_f_res_215699;
            float defunc_0_f_res_215701 = defunc_1_f_res_215697 + defunc_1_f_res_215700;
            float defunc_1_f_res_215702 = sigma_par_192340 + defunc_0_f_res_215682;
            float defunc_1_f_res_215703 = defunc_1_f_res_215702 - defunc_0_f_res_215623;
            float defunc_1_f_res_215704 = defunc_1_f_res_215703 * defunc_1_f_res_215703;
            float defunc_1_f_res_215705 = defunc_1_f_res_215689 + defunc_1_f_res_215704;
            float defunc_0_f_res_215706 = defunc_1_f_res_215688 + defunc_1_f_res_215705;
            float defunc_1_f_res_215707 = sigma_par_192340 + defunc_1_f_res_215620;
            float defunc_1_f_res_215708 = defunc_1_f_res_215707 - defunc_0_f_res_215623;
            float defunc_1_f_res_215709 = defunc_1_f_res_215708 * defunc_1_f_res_215708;
            float defunc_1_f_res_215710 = defunc_1_f_res_215698 + defunc_1_f_res_215709;
            float defunc_0_f_res_215711 = defunc_1_f_res_215697 + defunc_1_f_res_215710;
            bool cond_215712 = -1.0F <= j_n_215654;
            bool lifted_valid_res_t_res_215713 = j_n_215654 <= 1.0F;
            bool x_215714 = cond_215712 && lifted_valid_res_t_res_215713;
            float min_arg_215715;
            
            if (x_215714 == 1) {
                float defunc_0_f_res_225336 = defunc_1_f_res_215618 * j_n_215654;
                float defunc_0_f_res_225337 = defunc_1_f_res_215619 * j_n_215654;
                float defunc_0_f_res_225338 = defunc_1_f_res_215620 * j_n_215654;
                float defunc_1_f_res_225339 = defunc_0_f_res_215683 + defunc_0_f_res_225338;
                float defunc_1_f_res_225340 = defunc_0_f_res_225336 - defunc_0_f_res_215621;
                float defunc_1_f_res_225341 = defunc_0_f_res_225337 - defunc_0_f_res_215622;
                float defunc_1_f_res_225342 = defunc_1_f_res_225339 - defunc_0_f_res_215623;
                float defunc_1_f_res_225343 = defunc_1_f_res_225340 * defunc_1_f_res_225340;
                float defunc_1_f_res_225344 = defunc_1_f_res_225341 * defunc_1_f_res_225341;
                float defunc_1_f_res_225345 = defunc_1_f_res_225342 * defunc_1_f_res_225342;
                float defunc_1_f_res_225346 = defunc_1_f_res_225344 + defunc_1_f_res_225345;
                float defunc_0_f_res_225347 = defunc_1_f_res_225343 + defunc_1_f_res_225346;
                
                min_arg_215715 = defunc_0_f_res_225347;
            } else {
                min_arg_215715 = INFINITY;
            }
            
            bool cond_215728 = -1.0F <= j_p_215652;
            bool lifted_valid_res_t_res_215729 = j_p_215652 <= 1.0F;
            bool x_215730 = cond_215728 && lifted_valid_res_t_res_215729;
            float min_arg_215731;
            
            if (x_215730 == 1) {
                float defunc_0_f_res_225348 = defunc_1_f_res_215618 * j_p_215652;
                float defunc_0_f_res_225349 = defunc_1_f_res_215619 * j_p_215652;
                float defunc_0_f_res_225350 = defunc_1_f_res_215620 * j_p_215652;
                float defunc_1_f_res_225351 = sigma_par_192340 + defunc_0_f_res_225350;
                float defunc_1_f_res_225352 = defunc_0_f_res_225348 - defunc_0_f_res_215621;
                float defunc_1_f_res_225353 = defunc_0_f_res_225349 - defunc_0_f_res_215622;
                float defunc_1_f_res_225354 = defunc_1_f_res_225351 - defunc_0_f_res_215623;
                float defunc_1_f_res_225355 = defunc_1_f_res_225352 * defunc_1_f_res_225352;
                float defunc_1_f_res_225356 = defunc_1_f_res_225353 * defunc_1_f_res_225353;
                float defunc_1_f_res_225357 = defunc_1_f_res_225354 * defunc_1_f_res_225354;
                float defunc_1_f_res_225358 = defunc_1_f_res_225356 + defunc_1_f_res_225357;
                float defunc_0_f_res_225359 = defunc_1_f_res_225355 + defunc_1_f_res_225358;
                
                min_arg_215731 = defunc_0_f_res_225359;
            } else {
                min_arg_215731 = INFINITY;
            }
            
            bool cond_215744 = -1.0F <= i_n_215650;
            bool lifted_valid_res_t_res_215745 = i_n_215650 <= 1.0F;
            bool x_215746 = cond_215744 && lifted_valid_res_t_res_215745;
            float min_arg_215747;
            
            if (x_215746 == 1) {
                float defunc_0_f_res_225360 = sigma_par_192340 * i_n_215650;
                float defunc_1_f_res_225361 = defunc_0_f_res_215682 + defunc_0_f_res_225360;
                float defunc_1_f_res_225362 = defunc_1_f_res_225361 - defunc_0_f_res_215623;
                float defunc_1_f_res_225363 = defunc_1_f_res_225362 * defunc_1_f_res_225362;
                float defunc_1_f_res_225364 = defunc_1_f_res_215689 + defunc_1_f_res_225363;
                float defunc_0_f_res_225365 = defunc_1_f_res_215688 + defunc_1_f_res_225364;
                
                min_arg_215747 = defunc_0_f_res_225365;
            } else {
                min_arg_215747 = INFINITY;
            }
            
            bool cond_215754 = -1.0F <= i_p_215648;
            bool lifted_valid_res_t_res_215755 = i_p_215648 <= 1.0F;
            bool x_215756 = cond_215754 && lifted_valid_res_t_res_215755;
            float min_arg_215757;
            
            if (x_215756 == 1) {
                float defunc_0_f_res_225366 = sigma_par_192340 * i_p_215648;
                float defunc_1_f_res_225367 = defunc_1_f_res_215620 + defunc_0_f_res_225366;
                float defunc_1_f_res_225368 = defunc_1_f_res_225367 - defunc_0_f_res_215623;
                float defunc_1_f_res_225369 = defunc_1_f_res_225368 * defunc_1_f_res_225368;
                float defunc_1_f_res_225370 = defunc_1_f_res_215698 + defunc_1_f_res_225369;
                float defunc_0_f_res_225371 = defunc_1_f_res_215697 + defunc_1_f_res_225370;
                
                min_arg_215757 = defunc_0_f_res_225371;
            } else {
                min_arg_215757 = INFINITY;
            }
            
            float min_res_215764 = fmin32(min_arg_215747, min_arg_215757);
            float min_res_215765 = fmin32(min_arg_215731, min_res_215764);
            float min_res_215766 = fmin32(min_arg_215715, min_res_215765);
            float min_res_215767 = fmin32(defunc_0_f_res_215711, min_res_215766);
            float min_res_215768 = fmin32(defunc_0_f_res_215706, min_res_215767);
            float min_res_215769 = fmin32(defunc_0_f_res_215701, min_res_215768);
            float min_res_215770 = fmin32(defunc_0_f_res_215692, min_res_215769);
            float sqrt_res_215771 = futrts_sqrt32(min_res_215770);
            
            rodDistance_res_215665 = sqrt_res_215771;
        }
        
        bool defunc_0_f_res_215772 = rodDistance_res_215665 <= cutoffL_197775;
        bool cond_neg_215773 = !defunc_0_f_res_215772;
        int64_t defunc_1_lifted_lambda_res_215774 = btoi_bool_i64(cond_neg_215773);
        bool is_i_215775 = defunc_1_lifted_lambda_res_215774 == (int64_t) 0;
        bool cond_neg_215776 = !is_i_215775;
        int64_t part_res_215777 = btoi_bool_i64(cond_neg_215776);
        int64_t part_res_215778 = btoi_bool_i64(is_i_215775);
        int64_t zz_197949 = part_res_215778 + scanacc_233970;
        
        ((int64_t *) mem_235644)[i_233973] = zz_197949;
        ((int64_t *) mem_235647)[i_233973] = part_res_215777;
        
        int64_t scanacc_tmp_236087 = zz_197949;
        
        scanacc_233970 = scanacc_tmp_236087;
    }
    discard_233976 = scanacc_233970;
    
    int64_t last_index_197951 = conc_tmp_214996 - (int64_t) 1;
    bool is_empty_197952 = conc_tmp_214996 == (int64_t) 0;
    bool x_197953 = !is_empty_197952;
    int64_t last_offset_197954;
    
    if (x_197953 == 1) {
        int64_t x_225372 = ((int64_t *) mem_235644)[last_index_197951];
        
        last_offset_197954 = x_225372;
    } else {
        last_offset_197954 = (int64_t) 0;
    }
    
    int64_t partition_sizze_197956;
    
    if (is_empty_197952 == 1) {
        partition_sizze_197956 = (int64_t) 0;
    } else {
        partition_sizze_197956 = last_offset_197954;
    }
    if (mem_235670_cached_sizze_236193 < bytes_235669) {
        err = lexical_realloc(ctx, &mem_235670, &mem_235670_cached_sizze_236193, bytes_235669);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235673_cached_sizze_236194 < bytes_235669) {
        err = lexical_realloc(ctx, &mem_235673, &mem_235673_cached_sizze_236194, bytes_235669);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235676_cached_sizze_236195 < bytes_235669) {
        err = lexical_realloc(ctx, &mem_235676, &mem_235676_cached_sizze_236195, bytes_235669);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235679_cached_sizze_236196 < bytes_235669) {
        err = lexical_realloc(ctx, &mem_235679, &mem_235679_cached_sizze_236196, bytes_235669);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235682_cached_sizze_236197 < bytes_235669) {
        err = lexical_realloc(ctx, &mem_235682, &mem_235682_cached_sizze_236197, bytes_235669);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t write_iter_233977 = 0; write_iter_233977 < conc_tmp_214996; write_iter_233977++) {
        int64_t write_iv_233983 = ((int64_t *) mem_235647)[write_iter_233977];
        int64_t write_iv_233984 = ((int64_t *) mem_235644)[write_iter_233977];
        bool index_concat_cmp_234091 = sle64(i32_res_214568, write_iter_233977);
        int32_t index_concat_branch_234095;
        
        if (index_concat_cmp_234091 == 1) {
            int64_t index_concat_i_234092 = sub64(write_iter_233977, i32_res_214568);
            int32_t index_concat_234093 = ((int32_t *) mem_235579)[index_concat_i_234092];
            
            index_concat_branch_234095 = index_concat_234093;
        } else {
            int32_t index_concat_234094 = ((int32_t *) mem_235207)[write_iter_233977];
            
            index_concat_branch_234095 = index_concat_234094;
        }
        
        int32_t index_concat_branch_234089;
        
        if (index_concat_cmp_234091 == 1) {
            int64_t index_concat_i_234086 = sub64(write_iter_233977, i32_res_214568);
            int32_t index_concat_234087 = ((int32_t *) mem_235582)[index_concat_i_234086];
            
            index_concat_branch_234089 = index_concat_234087;
        } else {
            int32_t index_concat_234088 = ((int32_t *) mem_235210)[write_iter_233977];
            
            index_concat_branch_234089 = index_concat_234088;
        }
        
        int32_t index_concat_branch_234083;
        
        if (index_concat_cmp_234091 == 1) {
            int64_t index_concat_i_234080 = sub64(write_iter_233977, i32_res_214568);
            int32_t index_concat_234081 = ((int32_t *) mem_235585)[index_concat_i_234080];
            
            index_concat_branch_234083 = index_concat_234081;
        } else {
            index_concat_branch_234083 = 0;
        }
        
        int32_t index_concat_branch_234077;
        
        if (index_concat_cmp_234091 == 1) {
            int64_t index_concat_i_234074 = sub64(write_iter_233977, i32_res_214568);
            int32_t index_concat_234075 = ((int32_t *) mem_235588)[index_concat_i_234074];
            
            index_concat_branch_234077 = index_concat_234075;
        } else {
            index_concat_branch_234077 = 0;
        }
        
        int32_t index_concat_branch_234071;
        
        if (index_concat_cmp_234091 == 1) {
            int64_t index_concat_i_234068 = sub64(write_iter_233977, i32_res_214568);
            int32_t index_concat_234069 = ((int32_t *) mem_235591)[index_concat_i_234068];
            
            index_concat_branch_234071 = index_concat_234069;
        } else {
            index_concat_branch_234071 = 0;
        }
        
        bool is_this_one_197974 = write_iv_233983 == (int64_t) 0;
        int64_t this_offset_197975 = (int64_t) -1 + write_iv_233984;
        int64_t total_res_197976;
        
        if (is_this_one_197974 == 1) {
            total_res_197976 = this_offset_197975;
        } else {
            total_res_197976 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, total_res_197976) && slt64(total_res_197976, conc_tmp_214996)) {
            ((int32_t *) mem_235670)[total_res_197976] = index_concat_branch_234095;
        }
        if (sle64((int64_t) 0, total_res_197976) && slt64(total_res_197976, conc_tmp_214996)) {
            ((int32_t *) mem_235673)[total_res_197976] = index_concat_branch_234089;
        }
        if (sle64((int64_t) 0, total_res_197976) && slt64(total_res_197976, conc_tmp_214996)) {
            ((int32_t *) mem_235676)[total_res_197976] = index_concat_branch_234083;
        }
        if (sle64((int64_t) 0, total_res_197976) && slt64(total_res_197976, conc_tmp_214996)) {
            ((int32_t *) mem_235679)[total_res_197976] = index_concat_branch_234077;
        }
        if (sle64((int64_t) 0, total_res_197976) && slt64(total_res_197976, conc_tmp_214996)) {
            ((int32_t *) mem_235682)[total_res_197976] = index_concat_branch_234071;
        }
    }
    
    bool eq_x_zz_197977 = (int64_t) 0 == last_offset_197954;
    bool p_and_eq_x_y_197978 = x_197953 && eq_x_zz_197977;
    bool empty_slice_197979 = is_empty_197952 || p_and_eq_x_y_197978;
    int64_t m_197980 = sub64(partition_sizze_197956, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_197981 = sle64((int64_t) 0, m_197980);
    bool i_p_m_t_s_leq_w_197982 = slt64(m_197980, conc_tmp_214996);
    bool i_lte_j_197983 = sle64((int64_t) 0, partition_sizze_197956);
    bool y_197984 = zzero_leq_i_p_m_t_s_197981 && i_p_m_t_s_leq_w_197982;
    bool y_197985 = i_lte_j_197983 && y_197984;
    bool ok_or_empty_197986 = empty_slice_197979 || y_197985;
    bool index_certs_197987;
    
    if (!ok_or_empty_197986) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) partition_sizze_197956, "] out of bounds for array of shape [", (long long) conc_tmp_214996, "].", "-> #0  /prelude/soacs.fut:173:6-16\n   #1  /prelude/functional.fut:9:42-44\n   #2  associations.fut:230:7-231:29\n   #3  futhark_interaction.fut:50:8-105\n   #4  futhark_interaction.fut:43:1-52:17\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (mem_235735_cached_sizze_236198 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_235735, &mem_235735_cached_sizze_236198, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236095 = 0; i_236095 < nz2085U_192338; i_236095++) {
        ((float *) mem_235735)[i_236095] = 0.0F;
    }
    if (mem_235738_cached_sizze_236199 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_235738, &mem_235738_cached_sizze_236199, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236096 = 0; i_236096 < nz2085U_192338; i_236096++) {
        ((float *) mem_235738)[i_236096] = 0.0F;
    }
    if (mem_235741_cached_sizze_236200 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_235741, &mem_235741_cached_sizze_236200, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236097 = 0; i_236097 < nz2085U_192338; i_236097++) {
        ((float *) mem_235741)[i_236097] = 0.0F;
    }
    if (mem_235744_cached_sizze_236201 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_235744, &mem_235744_cached_sizze_236201, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236098 = 0; i_236098 < nz2085U_192338; i_236098++) {
        ((float *) mem_235744)[i_236098] = 0.0F;
    }
    if (mem_235747_cached_sizze_236202 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_235747, &mem_235747_cached_sizze_236202, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236099 = 0; i_236099 < nz2085U_192338; i_236099++) {
        ((float *) mem_235747)[i_236099] = 0.0F;
    }
    if (mem_235750_cached_sizze_236203 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_235750, &mem_235750_cached_sizze_236203, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236100 = 0; i_236100 < nz2085U_192338; i_236100++) {
        ((float *) mem_235750)[i_236100] = 0.0F;
    }
    if (mem_235753_cached_sizze_236204 < bytes_234532) {
        err = lexical_realloc(ctx, &mem_235753, &mem_235753_cached_sizze_236204, bytes_234532);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236101 = 0; i_236101 < nz2085U_192338; i_236101++) {
        ((float *) mem_235753)[i_236101] = 0.0F;
    }
    
    float sigma_198000 = 1.4142135F * sigma_ort_192341;
    float lifted_sq_res_198002 = sigma_ort_192341 * sigma_ort_192341;
    float arg_198003 = defunc_1_f_res_211817 - lifted_sq_res_198002;
    float arg_198004 = lifted_sq_res_198002 + defunc_1_f_res_211817;
    float chi_198005 = arg_198003 / arg_198004;
    float arg_198006 = 0.5F * chi_198005;
    bool acc_cert_198036;
    
    for (int64_t i_233996 = 0; i_233996 < partition_sizze_197956; i_233996++) {
        int32_t x_198040 = ((int32_t *) mem_235670)[i_233996];
        int32_t x_198041 = ((int32_t *) mem_235673)[i_233996];
        int32_t x_198042 = ((int32_t *) mem_235676)[i_233996];
        int32_t x_198043 = ((int32_t *) mem_235679)[i_233996];
        int32_t x_198044 = ((int32_t *) mem_235682)[i_233996];
        int64_t i_198045 = sext_i32_i64(x_198040);
        bool x_198046 = sle64((int64_t) 0, i_198045);
        bool y_198047 = slt64(i_198045, nz2085U_192338);
        bool bounds_check_198048 = x_198046 && y_198047;
        bool index_certs_198049;
        
        if (!bounds_check_198048) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_198045, "] out of bounds for array of shape [", (long long) nz2085U_192338, "].", "-> #0  associations.fut:198:18-31\n   #1  associations.fut:203:21-208:24\n   #2  /prelude/functional.fut:9:42-44\n   #3  associations.fut:230:7-232:54\n   #4  futhark_interaction.fut:50:8-105\n   #5  futhark_interaction.fut:43:1-52:17\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        float defunc_1_f_res_198050 = ((float *) mem_234627)[i_198045];
        float defunc_1_f_res_198051 = ((float *) mem_234630)[i_198045];
        float defunc_1_f_res_198052 = ((float *) mem_234633)[i_198045];
        float defunc_1_f_res_198053 = ((float *) mem_234542)[i_198045];
        float defunc_1_f_res_198054 = ((float *) mem_234545)[i_198045];
        float defunc_1_f_res_198055 = ((float *) mem_234548)[i_198045];
        float defunc_1_f_res_198056 = ((float *) mem_234551)[i_198045];
        float defunc_0_f_res_198057 = sitofp_i32_f32(x_198042);
        float defunc_0_f_res_198058 = sitofp_i32_f32(x_198043);
        float defunc_0_f_res_198059 = sitofp_i32_f32(x_198044);
        float defunc_1_f_res_211396 = defunc_0_f_res_198057 * defunc_1_f_res_211793;
        float defunc_1_f_res_211406 = defunc_0_f_res_198058 * defunc_1_f_res_211794;
        float defunc_1_f_res_211416 = defunc_0_f_res_198059 * defunc_1_f_res_211795;
        int64_t j_198075 = sext_i32_i64(x_198041);
        bool x_198076 = sle64((int64_t) 0, j_198075);
        bool y_198077 = slt64(j_198075, nz2085U_192338);
        bool bounds_check_198078 = x_198076 && y_198077;
        bool index_certs_198079;
        
        if (!bounds_check_198078) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_198075, "] out of bounds for array of shape [", (long long) nz2085U_192338, "].", "-> #0  associations.fut:199:69-82\n   #1  associations.fut:203:21-208:24\n   #2  /prelude/functional.fut:9:42-44\n   #3  associations.fut:230:7-232:54\n   #4  futhark_interaction.fut:50:8-105\n   #5  futhark_interaction.fut:43:1-52:17\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        float dyn_translate_arg_198080 = ((float *) mem_234627)[j_198075];
        float dyn_translate_arg_198081 = ((float *) mem_234630)[j_198075];
        float dyn_translate_arg_198082 = ((float *) mem_234633)[j_198075];
        float dyn_translate_arg_198083 = ((float *) mem_234542)[j_198075];
        float dyn_translate_arg_198084 = ((float *) mem_234545)[j_198075];
        float dyn_translate_arg_198085 = ((float *) mem_234548)[j_198075];
        float dyn_translate_arg_198086 = ((float *) mem_234551)[j_198075];
        float defunc_1_f_res_211423 = dyn_translate_arg_198080 + defunc_1_f_res_211396;
        float defunc_1_f_res_211424 = dyn_translate_arg_198081 + defunc_1_f_res_211406;
        float defunc_1_f_res_211425 = dyn_translate_arg_198082 + defunc_1_f_res_211416;
        float defunc_1_f_res_215265 = defunc_1_f_res_211423 - defunc_1_f_res_198050;
        float defunc_1_f_res_215266 = defunc_1_f_res_211424 - defunc_1_f_res_198051;
        float defunc_1_f_res_215267 = defunc_1_f_res_211425 - defunc_1_f_res_198052;
        float defunc_0_f_res_215268 = 0.0F - defunc_1_f_res_198054;
        float defunc_0_f_res_215269 = 0.0F - defunc_1_f_res_198055;
        float defunc_0_f_res_215270 = 0.0F - defunc_1_f_res_198056;
        float defunc_0_f_res_215271 = 0.0F - defunc_0_f_res_215268;
        float defunc_0_f_res_215272 = 0.0F - defunc_0_f_res_215269;
        float defunc_0_f_res_215273 = 0.0F - defunc_0_f_res_215270;
        float defunc_1_f_res_215274 = defunc_1_f_res_215265 * defunc_0_f_res_215268;
        float defunc_1_f_res_215275 = defunc_1_f_res_215266 * defunc_0_f_res_215269;
        float defunc_1_f_res_215276 = defunc_1_f_res_215267 * defunc_0_f_res_215270;
        float defunc_1_f_res_215277 = defunc_1_f_res_215275 + defunc_1_f_res_215276;
        float defunc_0_f_res_215278 = defunc_1_f_res_215274 + defunc_1_f_res_215277;
        float qMult_res_215279 = 0.0F - defunc_0_f_res_215278;
        float arg_215280 = defunc_1_f_res_215267 * defunc_0_f_res_215269;
        float arg_215281 = defunc_1_f_res_215266 * defunc_0_f_res_215270;
        float cross_res_215282 = arg_215280 - arg_215281;
        float arg_215283 = defunc_1_f_res_215265 * defunc_0_f_res_215270;
        float arg_215284 = defunc_1_f_res_215267 * defunc_0_f_res_215268;
        float cross_res_215285 = arg_215283 - arg_215284;
        float arg_215286 = defunc_1_f_res_215266 * defunc_0_f_res_215268;
        float arg_215287 = defunc_1_f_res_215265 * defunc_0_f_res_215269;
        float cross_res_215288 = arg_215286 - arg_215287;
        float defunc_0_f_res_215289 = defunc_1_f_res_198053 * defunc_1_f_res_215265;
        float defunc_0_f_res_215290 = defunc_1_f_res_198053 * defunc_1_f_res_215266;
        float defunc_0_f_res_215291 = defunc_1_f_res_198053 * defunc_1_f_res_215267;
        float defunc_1_f_res_215292 = cross_res_215282 + defunc_0_f_res_215289;
        float defunc_1_f_res_215293 = cross_res_215285 + defunc_0_f_res_215290;
        float defunc_1_f_res_215294 = cross_res_215288 + defunc_0_f_res_215291;
        float arg_215295 = defunc_0_f_res_215273 * defunc_1_f_res_215293;
        float arg_215296 = defunc_0_f_res_215272 * defunc_1_f_res_215294;
        float cross_res_215297 = arg_215295 - arg_215296;
        float arg_215298 = defunc_0_f_res_215271 * defunc_1_f_res_215294;
        float arg_215299 = defunc_0_f_res_215273 * defunc_1_f_res_215292;
        float cross_res_215300 = arg_215298 - arg_215299;
        float arg_215301 = defunc_0_f_res_215272 * defunc_1_f_res_215292;
        float arg_215302 = defunc_0_f_res_215271 * defunc_1_f_res_215293;
        float cross_res_215303 = arg_215301 - arg_215302;
        float defunc_0_f_res_215304 = defunc_1_f_res_198053 * defunc_1_f_res_215292;
        float defunc_0_f_res_215305 = defunc_1_f_res_198053 * defunc_1_f_res_215293;
        float defunc_0_f_res_215306 = defunc_1_f_res_198053 * defunc_1_f_res_215294;
        float defunc_0_f_res_215307 = defunc_0_f_res_215271 * qMult_res_215279;
        float defunc_0_f_res_215308 = defunc_0_f_res_215272 * qMult_res_215279;
        float defunc_0_f_res_215309 = defunc_0_f_res_215273 * qMult_res_215279;
        float defunc_1_f_res_215310 = defunc_0_f_res_215304 + defunc_0_f_res_215307;
        float defunc_1_f_res_215311 = defunc_0_f_res_215305 + defunc_0_f_res_215308;
        float defunc_1_f_res_215312 = defunc_0_f_res_215306 + defunc_0_f_res_215309;
        float defunc_1_f_res_215313 = cross_res_215297 + defunc_1_f_res_215310;
        float defunc_1_f_res_215314 = cross_res_215300 + defunc_1_f_res_215311;
        float defunc_1_f_res_215315 = cross_res_215303 + defunc_1_f_res_215312;
        float arg_215316 = defunc_1_f_res_198053 * dyn_translate_arg_198083;
        float defunc_1_f_res_215317 = dyn_translate_arg_198084 * defunc_0_f_res_215268;
        float defunc_1_f_res_215318 = dyn_translate_arg_198085 * defunc_0_f_res_215269;
        float defunc_1_f_res_215319 = dyn_translate_arg_198086 * defunc_0_f_res_215270;
        float defunc_1_f_res_215320 = defunc_1_f_res_215318 + defunc_1_f_res_215319;
        float defunc_0_f_res_215321 = defunc_1_f_res_215317 + defunc_1_f_res_215320;
        float qMult_res_215322 = arg_215316 - defunc_0_f_res_215321;
        float arg_215323 = dyn_translate_arg_198086 * defunc_0_f_res_215269;
        float arg_215324 = dyn_translate_arg_198085 * defunc_0_f_res_215270;
        float cross_res_215325 = arg_215323 - arg_215324;
        float arg_215326 = dyn_translate_arg_198084 * defunc_0_f_res_215270;
        float arg_215327 = dyn_translate_arg_198086 * defunc_0_f_res_215268;
        float cross_res_215328 = arg_215326 - arg_215327;
        float arg_215329 = dyn_translate_arg_198085 * defunc_0_f_res_215268;
        float arg_215330 = dyn_translate_arg_198084 * defunc_0_f_res_215269;
        float cross_res_215331 = arg_215329 - arg_215330;
        float defunc_0_f_res_215332 = dyn_translate_arg_198083 * defunc_0_f_res_215268;
        float defunc_0_f_res_215333 = dyn_translate_arg_198083 * defunc_0_f_res_215269;
        float defunc_0_f_res_215334 = dyn_translate_arg_198083 * defunc_0_f_res_215270;
        float defunc_0_f_res_215335 = defunc_1_f_res_198053 * dyn_translate_arg_198084;
        float defunc_0_f_res_215336 = defunc_1_f_res_198053 * dyn_translate_arg_198085;
        float defunc_0_f_res_215337 = defunc_1_f_res_198053 * dyn_translate_arg_198086;
        float defunc_1_f_res_215338 = defunc_0_f_res_215332 + defunc_0_f_res_215335;
        float defunc_1_f_res_215339 = defunc_0_f_res_215333 + defunc_0_f_res_215336;
        float defunc_1_f_res_215340 = defunc_0_f_res_215334 + defunc_0_f_res_215337;
        float defunc_1_f_res_215341 = cross_res_215325 + defunc_1_f_res_215338;
        float defunc_1_f_res_215342 = cross_res_215328 + defunc_1_f_res_215339;
        float defunc_1_f_res_215343 = cross_res_215331 + defunc_1_f_res_215340;
        float defunc_1_f_res_215057 = defunc_1_f_res_215313 * defunc_1_f_res_215313;
        float defunc_1_f_res_215058 = defunc_1_f_res_215314 * defunc_1_f_res_215314;
        float defunc_1_f_res_215059 = defunc_1_f_res_215315 * defunc_1_f_res_215315;
        float defunc_1_f_res_215060 = defunc_1_f_res_215058 + defunc_1_f_res_215059;
        float defunc_0_f_res_215061 = defunc_1_f_res_215057 + defunc_1_f_res_215060;
        float sqrt_res_215062 = futrts_sqrt32(defunc_0_f_res_215061);
        float v3scale_arg_215063 = 1.0F / sqrt_res_215062;
        float defunc_0_f_res_215064 = v3scale_arg_215063 * defunc_1_f_res_215313;
        float defunc_0_f_res_215065 = v3scale_arg_215063 * defunc_1_f_res_215314;
        float defunc_0_f_res_215066 = v3scale_arg_215063 * defunc_1_f_res_215315;
        float defunc_0_f_res_215074 = 0.0F - defunc_1_f_res_215341;
        float defunc_0_f_res_215075 = 0.0F - defunc_1_f_res_215342;
        float defunc_0_f_res_215076 = 0.0F - defunc_1_f_res_215343;
        float arg_215098 = defunc_0_f_res_215074 * defunc_0_f_res_215076;
        float arg_215099 = defunc_0_f_res_215075 * qMult_res_215322;
        float cross_res_215100 = arg_215098 - arg_215099;
        float arg_215101 = defunc_0_f_res_215074 * qMult_res_215322;
        float arg_215102 = defunc_0_f_res_215076 * defunc_1_f_res_215342;
        float cross_res_215103 = arg_215101 - arg_215102;
        float arg_215104 = defunc_0_f_res_215075 * defunc_1_f_res_215342;
        float arg_215105 = defunc_0_f_res_215074 * defunc_0_f_res_215074;
        float cross_res_215106 = arg_215104 - arg_215105;
        float defunc_0_f_res_215107 = qMult_res_215322 * defunc_1_f_res_215342;
        float defunc_0_f_res_215109 = qMult_res_215322 * qMult_res_215322;
        float defunc_0_f_res_215111 = defunc_0_f_res_215075 * defunc_0_f_res_215076;
        float defunc_0_f_res_215112 = defunc_0_f_res_215076 * defunc_0_f_res_215076;
        float defunc_1_f_res_215113 = arg_215098 + defunc_0_f_res_215107;
        float defunc_1_f_res_215114 = arg_215101 + defunc_0_f_res_215111;
        float defunc_1_f_res_215115 = defunc_0_f_res_215109 + defunc_0_f_res_215112;
        float defunc_1_f_res_215116 = cross_res_215100 + defunc_1_f_res_215113;
        float defunc_1_f_res_215117 = cross_res_215103 + defunc_1_f_res_215114;
        float defunc_1_f_res_215118 = cross_res_215106 + defunc_1_f_res_215115;
        float lifted_sq_arg_198119 = chi_198005 * defunc_1_f_res_215118;
        float lifted_sq_res_198120 = lifted_sq_arg_198119 * lifted_sq_arg_198119;
        float sqrt_arg_198121 = 1.0F - lifted_sq_res_198120;
        float sqrt_res_198122 = futrts_sqrt32(sqrt_arg_198121);
        float epsilonzq_198123 = epsilon_192339 / sqrt_res_198122;
        float defunc_1_f_res_211910 = defunc_0_f_res_215064 * defunc_1_f_res_215116;
        float defunc_1_f_res_211911 = defunc_0_f_res_215065 * defunc_1_f_res_215117;
        float defunc_1_f_res_211912 = defunc_0_f_res_215066 * defunc_1_f_res_215118;
        float defunc_1_f_res_211913 = defunc_1_f_res_211911 + defunc_1_f_res_211912;
        float defunc_0_f_res_211914 = defunc_1_f_res_211910 + defunc_1_f_res_211913;
        float lifted_sq_arg_198126 = defunc_0_f_res_211914 + defunc_0_f_res_215066;
        float lifted_sq_res_198127 = lifted_sq_arg_198126 * lifted_sq_arg_198126;
        float arg_198128 = 1.0F + lifted_sq_arg_198119;
        float arg_198129 = lifted_sq_res_198127 / arg_198128;
        float lifted_sq_arg_198130 = defunc_0_f_res_215066 - defunc_0_f_res_211914;
        float lifted_sq_res_198131 = lifted_sq_arg_198130 * lifted_sq_arg_198130;
        float arg_198132 = 1.0F - lifted_sq_arg_198119;
        float arg_198133 = lifted_sq_res_198131 / arg_198132;
        float arg_198134 = arg_198129 + arg_198133;
        float arg_198135 = arg_198006 * arg_198134;
        float sqrt_arg_198136 = 1.0F - arg_198135;
        float sqrt_res_198137 = futrts_sqrt32(sqrt_arg_198136);
        float sigmazq_198138 = sigma_198000 / sqrt_res_198137;
        float arg_198140 = 0.0F - defunc_0_f_res_215061;
        float lifted_sq_res_198141 = sigmazq_198138 * sigmazq_198138;
        float exp_arg_198142 = arg_198140 / lifted_sq_res_198141;
        float exp_res_198143 = futrts_exp32(exp_arg_198142);
        float defunc_0_f_res_198144 = epsilonzq_198123 * exp_res_198143;
        float binop_y_221228 = 1.0F / lifted_sq_res_198141;
        float binop_x_adj_221229 = defunc_0_f_res_198144 * binop_y_221228;
        float binop_y_221230 = lifted_sq_res_198141 * lifted_sq_res_198141;
        float binop_y_221231 = arg_198140 / binop_y_221230;
        float binop_y_221232 = 0.0F - binop_y_221231;
        float binop_y_adj_221233 = defunc_0_f_res_198144 * binop_y_221232;
        float binop_x_adj_221234 = sigmazq_198138 * binop_y_adj_221233;
        float sigmazq_adj_221236 = binop_x_adj_221234 + binop_x_adj_221234;
        float binop_y_adj_221238 = -1.0F * binop_x_adj_221229;
        float binop_y_221241 = sqrt_res_198137 * sqrt_res_198137;
        float binop_y_221242 = sigma_198000 / binop_y_221241;
        float binop_y_221243 = 0.0F - binop_y_221242;
        float binop_y_adj_221244 = sigmazq_adj_221236 * binop_y_221243;
        float binop_y_221245 = fpow32(sqrt_arg_198136, 0.5F);
        float binop_y_221246 = 2.0F * binop_y_221245;
        float binop_y_221247 = 1.0F / binop_y_221246;
        float contrib_221248 = binop_y_adj_221244 * binop_y_221247;
        float binop_y_adj_221250 = -1.0F * contrib_221248;
        float binop_y_adj_221252 = arg_198006 * binop_y_adj_221250;
        float binop_y_221255 = 1.0F / arg_198132;
        float binop_x_adj_221256 = binop_y_adj_221252 * binop_y_221255;
        float binop_y_221257 = arg_198132 * arg_198132;
        float binop_y_221258 = lifted_sq_res_198131 / binop_y_221257;
        float binop_y_221259 = 0.0F - binop_y_221258;
        float binop_y_adj_221260 = binop_y_adj_221252 * binop_y_221259;
        float binop_y_adj_221262 = -1.0F * binop_y_adj_221260;
        float binop_x_adj_221263 = lifted_sq_arg_198130 * binop_x_adj_221256;
        float lifted_sq_arg_adj_221265 = binop_x_adj_221263 + binop_x_adj_221263;
        float binop_y_adj_221267 = -1.0F * lifted_sq_arg_adj_221265;
        float binop_y_221268 = 1.0F / arg_198128;
        float binop_x_adj_221269 = binop_y_adj_221252 * binop_y_221268;
        float binop_y_221270 = arg_198128 * arg_198128;
        float binop_y_221271 = lifted_sq_res_198127 / binop_y_221270;
        float binop_y_221272 = 0.0F - binop_y_221271;
        float binop_y_adj_221273 = binop_y_adj_221252 * binop_y_221272;
        float lifted_sq_arg_adj_221276 = binop_y_adj_221262 + binop_y_adj_221273;
        float binop_x_adj_221277 = lifted_sq_arg_198126 * binop_x_adj_221269;
        float lifted_sq_arg_adj_221279 = binop_x_adj_221277 + binop_x_adj_221277;
        float defunc_0_f_res_adj_221282 = binop_y_adj_221267 + lifted_sq_arg_adj_221279;
        float defunc_0_f_res_adj_221283 = lifted_sq_arg_adj_221265 + lifted_sq_arg_adj_221279;
        float binop_x_adj_221288 = defunc_1_f_res_215118 * defunc_0_f_res_adj_221282;
        float binop_y_adj_221289 = defunc_0_f_res_215066 * defunc_0_f_res_adj_221282;
        float defunc_0_f_res_adj_221290 = defunc_0_f_res_adj_221283 + binop_x_adj_221288;
        float binop_x_adj_221291 = defunc_1_f_res_215117 * defunc_0_f_res_adj_221282;
        float binop_y_adj_221292 = defunc_0_f_res_215065 * defunc_0_f_res_adj_221282;
        float binop_x_adj_221293 = defunc_1_f_res_215116 * defunc_0_f_res_adj_221282;
        float binop_y_adj_221294 = defunc_0_f_res_215064 * defunc_0_f_res_adj_221282;
        float binop_y_221297 = sqrt_res_198122 * sqrt_res_198122;
        float binop_y_221298 = epsilon_192339 / binop_y_221297;
        float binop_y_221299 = 0.0F - binop_y_221298;
        float binop_y_adj_221300 = exp_res_198143 * binop_y_221299;
        float binop_y_221301 = fpow32(sqrt_arg_198121, 0.5F);
        float binop_y_221302 = 2.0F * binop_y_221301;
        float binop_y_221303 = 1.0F / binop_y_221302;
        float contrib_221304 = binop_y_adj_221300 * binop_y_221303;
        float binop_y_adj_221306 = -1.0F * contrib_221304;
        float binop_x_adj_221307 = lifted_sq_arg_198119 * binop_y_adj_221306;
        float lifted_sq_arg_adj_221309 = lifted_sq_arg_adj_221276 + binop_x_adj_221307;
        float lifted_sq_arg_adj_221310 = binop_x_adj_221307 + lifted_sq_arg_adj_221309;
        float binop_y_adj_221312 = chi_198005 * lifted_sq_arg_adj_221310;
        float defunc_1_f_res_adj_221313 = binop_y_adj_221289 + binop_y_adj_221312;
        float binop_x_adj_221326 = defunc_0_f_res_215076 * defunc_1_f_res_adj_221313;
        float defunc_0_f_res_adj_221328 = binop_x_adj_221326 + binop_x_adj_221326;
        float binop_x_adj_221329 = defunc_0_f_res_215076 * binop_y_adj_221292;
        float binop_y_adj_221330 = defunc_0_f_res_215075 * binop_y_adj_221292;
        float defunc_0_f_res_adj_221331 = defunc_0_f_res_adj_221328 + binop_y_adj_221330;
        float binop_x_adj_221332 = qMult_res_215322 * defunc_1_f_res_adj_221313;
        float x_adj_221334 = binop_x_adj_221332 + binop_x_adj_221332;
        float binop_x_adj_221335 = defunc_1_f_res_215342 * binop_y_adj_221294;
        float binop_y_adj_221336 = qMult_res_215322 * binop_y_adj_221294;
        float x_adj_221337 = x_adj_221334 + binop_x_adj_221335;
        float binop_y_adj_221339 = -1.0F * defunc_1_f_res_adj_221313;
        float binop_x_adj_221340 = defunc_0_f_res_215074 * binop_y_adj_221339;
        float defunc_0_f_res_adj_221342 = binop_x_adj_221340 + binop_x_adj_221340;
        float binop_x_adj_221343 = defunc_0_f_res_215075 * defunc_1_f_res_adj_221313;
        float binop_y_adj_221344 = defunc_1_f_res_215342 * defunc_1_f_res_adj_221313;
        float x_adj_221345 = binop_y_adj_221336 + binop_x_adj_221343;
        float defunc_0_f_res_adj_221346 = binop_x_adj_221329 + binop_y_adj_221344;
        float binop_y_adj_221348 = -1.0F * binop_y_adj_221292;
        float arg_adj_221349 = binop_y_adj_221292 + binop_y_adj_221292;
        float binop_x_adj_221350 = defunc_0_f_res_215076 * binop_y_adj_221348;
        float binop_y_adj_221351 = defunc_1_f_res_215342 * binop_y_adj_221348;
        float x_adj_221352 = x_adj_221345 + binop_x_adj_221350;
        float defunc_0_f_res_adj_221353 = defunc_0_f_res_adj_221331 + binop_y_adj_221351;
        float binop_x_adj_221354 = defunc_0_f_res_215074 * arg_adj_221349;
        float binop_y_adj_221355 = qMult_res_215322 * arg_adj_221349;
        float x_adj_221356 = x_adj_221337 + binop_x_adj_221354;
        float defunc_0_f_res_adj_221357 = defunc_0_f_res_adj_221342 + binop_y_adj_221355;
        float binop_y_adj_221359 = -1.0F * binop_y_adj_221294;
        float arg_adj_221360 = binop_y_adj_221294 + binop_y_adj_221294;
        float binop_x_adj_221361 = defunc_0_f_res_215075 * binop_y_adj_221359;
        float binop_y_adj_221362 = qMult_res_215322 * binop_y_adj_221359;
        float x_adj_221363 = x_adj_221356 + binop_x_adj_221361;
        float defunc_0_f_res_adj_221364 = defunc_0_f_res_adj_221346 + binop_y_adj_221362;
        float binop_x_adj_221365 = defunc_0_f_res_215076 * arg_adj_221360;
        float binop_y_adj_221366 = defunc_0_f_res_215074 * arg_adj_221360;
        float defunc_0_f_res_adj_221367 = defunc_0_f_res_adj_221357 + binop_x_adj_221365;
        float defunc_0_f_res_adj_221368 = defunc_0_f_res_adj_221353 + binop_y_adj_221366;
        float binop_y_adj_221370 = -1.0F * defunc_0_f_res_adj_221368;
        float binop_y_adj_221372 = -1.0F * defunc_0_f_res_adj_221364;
        float x_adj_221373 = x_adj_221352 + binop_y_adj_221372;
        float binop_y_adj_221375 = -1.0F * defunc_0_f_res_adj_221367;
        float binop_x_adj_221376 = v3scale_arg_215063 * defunc_0_f_res_adj_221290;
        float binop_y_adj_221377 = defunc_1_f_res_215315 * defunc_0_f_res_adj_221290;
        float binop_x_adj_221378 = v3scale_arg_215063 * binop_x_adj_221291;
        float binop_y_adj_221379 = defunc_1_f_res_215314 * binop_x_adj_221291;
        float v3scale_arg_adj_221380 = binop_y_adj_221377 + binop_y_adj_221379;
        float binop_x_adj_221381 = v3scale_arg_215063 * binop_x_adj_221293;
        float binop_y_adj_221382 = defunc_1_f_res_215313 * binop_x_adj_221293;
        float v3scale_arg_adj_221383 = v3scale_arg_adj_221380 + binop_y_adj_221382;
        float binop_y_221386 = sqrt_res_215062 * sqrt_res_215062;
        float binop_y_221387 = 1.0F / binop_y_221386;
        float binop_y_221388 = 0.0F - binop_y_221387;
        float binop_y_adj_221389 = v3scale_arg_adj_221383 * binop_y_221388;
        float binop_y_221390 = fpow32(defunc_0_f_res_215061, 0.5F);
        float binop_y_221391 = 2.0F * binop_y_221390;
        float binop_y_221392 = 1.0F / binop_y_221391;
        float contrib_221393 = binop_y_adj_221389 * binop_y_221392;
        float defunc_0_f_res_adj_221394 = binop_y_adj_221238 + contrib_221393;
        float binop_x_adj_221399 = defunc_1_f_res_215315 * defunc_0_f_res_adj_221394;
        float x_adj_221401 = binop_x_adj_221376 + binop_x_adj_221399;
        float x_adj_221402 = binop_x_adj_221399 + x_adj_221401;
        float binop_x_adj_221403 = defunc_1_f_res_215314 * defunc_0_f_res_adj_221394;
        float x_adj_221405 = binop_x_adj_221378 + binop_x_adj_221403;
        float x_adj_221406 = binop_x_adj_221403 + x_adj_221405;
        float binop_x_adj_221407 = defunc_1_f_res_215313 * defunc_0_f_res_adj_221394;
        float x_adj_221409 = binop_x_adj_221381 + binop_x_adj_221407;
        float x_adj_221410 = binop_x_adj_221407 + x_adj_221409;
        float defunc_1_f_res_211946 = defunc_0_f_res_215074 * x_adj_221363;
        float defunc_1_f_res_211947 = qMult_res_215322 * binop_y_adj_221375;
        float defunc_1_f_res_211948 = defunc_0_f_res_215076 * x_adj_221373;
        float defunc_1_f_res_211949 = defunc_1_f_res_215342 * binop_y_adj_221370;
        float defunc_1_f_res_211950 = defunc_1_f_res_211948 + defunc_1_f_res_211949;
        float defunc_0_f_res_211951 = defunc_1_f_res_211947 + defunc_1_f_res_211950;
        float defunc_0_f_res_211952 = defunc_1_f_res_211946 + defunc_0_f_res_211951;
        float defunc_1_f_res_211953 = defunc_0_f_res_215075 * x_adj_221363;
        float defunc_1_f_res_211954 = defunc_1_f_res_215343 * binop_y_adj_221375;
        float defunc_1_f_res_211955 = qMult_res_215322 * x_adj_221373;
        float defunc_1_f_res_211956 = defunc_0_f_res_215074 * binop_y_adj_221370;
        float defunc_1_f_res_211957 = defunc_1_f_res_211955 + defunc_1_f_res_211956;
        float defunc_0_f_res_211958 = defunc_1_f_res_211954 + defunc_1_f_res_211957;
        float defunc_0_f_res_211959 = defunc_1_f_res_211953 + defunc_0_f_res_211958;
        float defunc_1_f_res_211960 = defunc_0_f_res_215076 * x_adj_221363;
        float defunc_1_f_res_211961 = defunc_0_f_res_215075 * binop_y_adj_221375;
        float defunc_1_f_res_211962 = defunc_1_f_res_215341 * x_adj_221373;
        float defunc_1_f_res_211963 = qMult_res_215322 * binop_y_adj_221370;
        float defunc_1_f_res_211964 = defunc_1_f_res_211962 + defunc_1_f_res_211963;
        float defunc_0_f_res_211965 = defunc_1_f_res_211961 + defunc_1_f_res_211964;
        float defunc_0_f_res_211966 = defunc_1_f_res_211960 + defunc_0_f_res_211965;
        float defunc_0_f_res_211967 = -0.5F * defunc_0_f_res_211952;
        float defunc_0_f_res_211968 = -0.5F * defunc_0_f_res_211959;
        float defunc_0_f_res_211969 = -0.5F * defunc_0_f_res_211966;
        float arg_211970 = defunc_1_f_res_215315 * x_adj_221406;
        float arg_211971 = defunc_1_f_res_215314 * x_adj_221402;
        float cross_res_211972 = arg_211970 - arg_211971;
        float arg_211973 = defunc_1_f_res_215313 * x_adj_221402;
        float arg_211974 = defunc_1_f_res_215315 * x_adj_221410;
        float cross_res_211975 = arg_211973 - arg_211974;
        float arg_211976 = defunc_1_f_res_215314 * x_adj_221410;
        float arg_211977 = defunc_1_f_res_215313 * x_adj_221406;
        float cross_res_211978 = arg_211976 - arg_211977;
        float defunc_1_f_res_211979 = defunc_0_f_res_211967 + cross_res_211972;
        float defunc_1_f_res_211980 = defunc_0_f_res_211968 + cross_res_211975;
        float defunc_1_f_res_211981 = defunc_0_f_res_211969 + cross_res_211978;
        float defunc_1_f_res_215367 = defunc_1_f_res_198054 * x_adj_221410;
        float defunc_1_f_res_215368 = defunc_1_f_res_198055 * x_adj_221406;
        float defunc_1_f_res_215369 = defunc_1_f_res_198056 * x_adj_221402;
        float defunc_1_f_res_215370 = defunc_1_f_res_215368 + defunc_1_f_res_215369;
        float defunc_0_f_res_215371 = defunc_1_f_res_215367 + defunc_1_f_res_215370;
        float qMult_res_215372 = 0.0F - defunc_0_f_res_215371;
        float arg_215373 = defunc_1_f_res_198055 * x_adj_221402;
        float arg_215374 = defunc_1_f_res_198056 * x_adj_221406;
        float cross_res_215375 = arg_215373 - arg_215374;
        float arg_215376 = defunc_1_f_res_198056 * x_adj_221410;
        float arg_215377 = defunc_1_f_res_198054 * x_adj_221402;
        float cross_res_215378 = arg_215376 - arg_215377;
        float arg_215379 = defunc_1_f_res_198054 * x_adj_221406;
        float arg_215380 = defunc_1_f_res_198055 * x_adj_221410;
        float cross_res_215381 = arg_215379 - arg_215380;
        float defunc_0_f_res_215382 = defunc_1_f_res_198053 * x_adj_221410;
        float defunc_0_f_res_215383 = defunc_1_f_res_198053 * x_adj_221406;
        float defunc_0_f_res_215384 = defunc_1_f_res_198053 * x_adj_221402;
        float defunc_1_f_res_215385 = cross_res_215375 + defunc_0_f_res_215382;
        float defunc_1_f_res_215386 = cross_res_215378 + defunc_0_f_res_215383;
        float defunc_1_f_res_215387 = cross_res_215381 + defunc_0_f_res_215384;
        float arg_215388 = defunc_0_f_res_215270 * defunc_1_f_res_215386;
        float arg_215389 = defunc_0_f_res_215269 * defunc_1_f_res_215387;
        float cross_res_215390 = arg_215388 - arg_215389;
        float arg_215391 = defunc_0_f_res_215268 * defunc_1_f_res_215387;
        float arg_215392 = defunc_0_f_res_215270 * defunc_1_f_res_215385;
        float cross_res_215393 = arg_215391 - arg_215392;
        float arg_215394 = defunc_0_f_res_215269 * defunc_1_f_res_215385;
        float arg_215395 = defunc_0_f_res_215268 * defunc_1_f_res_215386;
        float cross_res_215396 = arg_215394 - arg_215395;
        float defunc_0_f_res_215397 = defunc_1_f_res_198053 * defunc_1_f_res_215385;
        float defunc_0_f_res_215398 = defunc_1_f_res_198053 * defunc_1_f_res_215386;
        float defunc_0_f_res_215399 = defunc_1_f_res_198053 * defunc_1_f_res_215387;
        float defunc_0_f_res_215400 = defunc_0_f_res_215268 * qMult_res_215372;
        float defunc_0_f_res_215401 = defunc_0_f_res_215269 * qMult_res_215372;
        float defunc_0_f_res_215402 = defunc_0_f_res_215270 * qMult_res_215372;
        float defunc_1_f_res_215403 = defunc_0_f_res_215397 + defunc_0_f_res_215400;
        float defunc_1_f_res_215404 = defunc_0_f_res_215398 + defunc_0_f_res_215401;
        float defunc_1_f_res_215405 = defunc_0_f_res_215399 + defunc_0_f_res_215402;
        float defunc_1_f_res_215406 = cross_res_215390 + defunc_1_f_res_215403;
        float defunc_1_f_res_215407 = cross_res_215393 + defunc_1_f_res_215404;
        float defunc_1_f_res_215408 = cross_res_215396 + defunc_1_f_res_215405;
        float defunc_1_f_res_215412 = defunc_1_f_res_198054 * defunc_1_f_res_211979;
        float defunc_1_f_res_215413 = defunc_1_f_res_198055 * defunc_1_f_res_211980;
        float defunc_1_f_res_215414 = defunc_1_f_res_198056 * defunc_1_f_res_211981;
        float defunc_1_f_res_215415 = defunc_1_f_res_215413 + defunc_1_f_res_215414;
        float defunc_0_f_res_215416 = defunc_1_f_res_215412 + defunc_1_f_res_215415;
        float qMult_res_215417 = 0.0F - defunc_0_f_res_215416;
        float arg_215418 = defunc_1_f_res_198055 * defunc_1_f_res_211981;
        float arg_215419 = defunc_1_f_res_198056 * defunc_1_f_res_211980;
        float cross_res_215420 = arg_215418 - arg_215419;
        float arg_215421 = defunc_1_f_res_198056 * defunc_1_f_res_211979;
        float arg_215422 = defunc_1_f_res_198054 * defunc_1_f_res_211981;
        float cross_res_215423 = arg_215421 - arg_215422;
        float arg_215424 = defunc_1_f_res_198054 * defunc_1_f_res_211980;
        float arg_215425 = defunc_1_f_res_198055 * defunc_1_f_res_211979;
        float cross_res_215426 = arg_215424 - arg_215425;
        float defunc_0_f_res_215427 = defunc_1_f_res_198053 * defunc_1_f_res_211979;
        float defunc_0_f_res_215428 = defunc_1_f_res_198053 * defunc_1_f_res_211980;
        float defunc_0_f_res_215429 = defunc_1_f_res_198053 * defunc_1_f_res_211981;
        float defunc_1_f_res_215430 = cross_res_215420 + defunc_0_f_res_215427;
        float defunc_1_f_res_215431 = cross_res_215423 + defunc_0_f_res_215428;
        float defunc_1_f_res_215432 = cross_res_215426 + defunc_0_f_res_215429;
        float arg_215433 = defunc_0_f_res_215270 * defunc_1_f_res_215431;
        float arg_215434 = defunc_0_f_res_215269 * defunc_1_f_res_215432;
        float cross_res_215435 = arg_215433 - arg_215434;
        float arg_215436 = defunc_0_f_res_215268 * defunc_1_f_res_215432;
        float arg_215437 = defunc_0_f_res_215270 * defunc_1_f_res_215430;
        float cross_res_215438 = arg_215436 - arg_215437;
        float arg_215439 = defunc_0_f_res_215269 * defunc_1_f_res_215430;
        float arg_215440 = defunc_0_f_res_215268 * defunc_1_f_res_215431;
        float cross_res_215441 = arg_215439 - arg_215440;
        float defunc_0_f_res_215442 = defunc_1_f_res_198053 * defunc_1_f_res_215430;
        float defunc_0_f_res_215443 = defunc_1_f_res_198053 * defunc_1_f_res_215431;
        float defunc_0_f_res_215444 = defunc_1_f_res_198053 * defunc_1_f_res_215432;
        float defunc_0_f_res_215445 = defunc_0_f_res_215268 * qMult_res_215417;
        float defunc_0_f_res_215446 = defunc_0_f_res_215269 * qMult_res_215417;
        float defunc_0_f_res_215447 = defunc_0_f_res_215270 * qMult_res_215417;
        float defunc_1_f_res_215448 = defunc_0_f_res_215442 + defunc_0_f_res_215445;
        float defunc_1_f_res_215449 = defunc_0_f_res_215443 + defunc_0_f_res_215446;
        float defunc_1_f_res_215450 = defunc_0_f_res_215444 + defunc_0_f_res_215447;
        float defunc_1_f_res_215451 = cross_res_215435 + defunc_1_f_res_215448;
        float defunc_1_f_res_215452 = cross_res_215438 + defunc_1_f_res_215449;
        float defunc_1_f_res_215453 = cross_res_215441 + defunc_1_f_res_215450;
        float defunc_0_f_res_215454 = 0.0F - defunc_1_f_res_215406;
        float defunc_0_f_res_215455 = 0.0F - defunc_1_f_res_215407;
        float defunc_0_f_res_215456 = 0.0F - defunc_1_f_res_215408;
        float arg_215460 = defunc_1_f_res_215266 * defunc_1_f_res_215408;
        float arg_215461 = defunc_1_f_res_215267 * defunc_1_f_res_215407;
        float cross_res_215462 = arg_215460 - arg_215461;
        float arg_215463 = defunc_1_f_res_215267 * defunc_1_f_res_215406;
        float arg_215464 = defunc_1_f_res_215265 * defunc_1_f_res_215408;
        float cross_res_215465 = arg_215463 - arg_215464;
        float arg_215466 = defunc_1_f_res_215265 * defunc_1_f_res_215407;
        float arg_215467 = defunc_1_f_res_215266 * defunc_1_f_res_215406;
        float cross_res_215468 = arg_215466 - arg_215467;
        float defunc_1_f_res_215469 = cross_res_215462 - defunc_1_f_res_215451;
        float defunc_1_f_res_215470 = cross_res_215465 - defunc_1_f_res_215452;
        float defunc_1_f_res_215471 = cross_res_215468 - defunc_1_f_res_215453;
        
        // UpdateAcc
        {
            int64_t idx_198014 = i_198045;
            
            if (sle64((int64_t) 0, i_198045) && slt64(i_198045, nz2085U_192338)) {
                float x_198015;
                float x_198016;
                float x_198017;
                float x_198018;
                float x_198019;
                float x_198020;
                float x_198021;
                float x_198022;
                float x_198023;
                float x_198024;
                float x_198025;
                float x_198026;
                float x_198027;
                float x_198028;
                
                x_198015 = ((float *) mem_235735)[i_198045];
                x_198016 = ((float *) mem_235738)[i_198045];
                x_198017 = ((float *) mem_235741)[i_198045];
                x_198018 = ((float *) mem_235744)[i_198045];
                x_198019 = ((float *) mem_235747)[i_198045];
                x_198020 = ((float *) mem_235750)[i_198045];
                x_198021 = ((float *) mem_235753)[i_198045];
                x_198022 = defunc_1_f_res_215406;
                x_198023 = defunc_1_f_res_215407;
                x_198024 = defunc_1_f_res_215408;
                x_198025 = defunc_1_f_res_215451;
                x_198026 = defunc_1_f_res_215452;
                x_198027 = defunc_1_f_res_215453;
                x_198028 = 0.0F;
                
                float defunc_1_f_res_211876 = x_198015 + x_198022;
                float defunc_1_f_res_211877 = x_198016 + x_198023;
                float defunc_1_f_res_211878 = x_198017 + x_198024;
                float defunc_1_f_res_211879 = x_198018 + x_198025;
                float defunc_1_f_res_211880 = x_198019 + x_198026;
                float defunc_1_f_res_211881 = x_198020 + x_198027;
                float defunc_1_op_res_198035 = x_198021 + x_198028;
                
                ((float *) mem_235735)[i_198045] = defunc_1_f_res_211876;
                ((float *) mem_235738)[i_198045] = defunc_1_f_res_211877;
                ((float *) mem_235741)[i_198045] = defunc_1_f_res_211878;
                ((float *) mem_235744)[i_198045] = defunc_1_f_res_211879;
                ((float *) mem_235747)[i_198045] = defunc_1_f_res_211880;
                ((float *) mem_235750)[i_198045] = defunc_1_f_res_211881;
                ((float *) mem_235753)[i_198045] = defunc_1_op_res_198035;
            }
        }
        // UpdateAcc
        {
            int64_t idx_198014 = j_198075;
            
            if (sle64((int64_t) 0, j_198075) && slt64(j_198075, nz2085U_192338)) {
                float x_198015;
                float x_198016;
                float x_198017;
                float x_198018;
                float x_198019;
                float x_198020;
                float x_198021;
                float x_198022;
                float x_198023;
                float x_198024;
                float x_198025;
                float x_198026;
                float x_198027;
                float x_198028;
                
                x_198015 = ((float *) mem_235735)[j_198075];
                x_198016 = ((float *) mem_235738)[j_198075];
                x_198017 = ((float *) mem_235741)[j_198075];
                x_198018 = ((float *) mem_235744)[j_198075];
                x_198019 = ((float *) mem_235747)[j_198075];
                x_198020 = ((float *) mem_235750)[j_198075];
                x_198021 = ((float *) mem_235753)[j_198075];
                x_198022 = defunc_0_f_res_215454;
                x_198023 = defunc_0_f_res_215455;
                x_198024 = defunc_0_f_res_215456;
                x_198025 = defunc_1_f_res_215469;
                x_198026 = defunc_1_f_res_215470;
                x_198027 = defunc_1_f_res_215471;
                x_198028 = defunc_0_f_res_198144;
                
                float defunc_1_f_res_211876 = x_198015 + x_198022;
                float defunc_1_f_res_211877 = x_198016 + x_198023;
                float defunc_1_f_res_211878 = x_198017 + x_198024;
                float defunc_1_f_res_211879 = x_198018 + x_198025;
                float defunc_1_f_res_211880 = x_198019 + x_198026;
                float defunc_1_f_res_211881 = x_198020 + x_198027;
                float defunc_1_op_res_198035 = x_198021 + x_198028;
                
                ((float *) mem_235735)[j_198075] = defunc_1_f_res_211876;
                ((float *) mem_235738)[j_198075] = defunc_1_f_res_211877;
                ((float *) mem_235741)[j_198075] = defunc_1_f_res_211878;
                ((float *) mem_235744)[j_198075] = defunc_1_f_res_211879;
                ((float *) mem_235747)[j_198075] = defunc_1_f_res_211880;
                ((float *) mem_235750)[j_198075] = defunc_1_f_res_211881;
                ((float *) mem_235753)[j_198075] = defunc_1_op_res_198035;
            }
        }
    }
    if (mem_235758_cached_sizze_236205 < bytes_235757) {
        err = lexical_realloc(ctx, &mem_235758, &mem_235758_cached_sizze_236205, bytes_235757);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235771_cached_sizze_236206 < (int64_t) 12) {
        err = lexical_realloc(ctx, &mem_235771, &mem_235771_cached_sizze_236206, (int64_t) 12);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235773_cached_sizze_236207 < (int64_t) 12) {
        err = lexical_realloc(ctx, &mem_235773, &mem_235773_cached_sizze_236207, (int64_t) 12);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233999 = 0; i_233999 < nz2085U_192338; i_233999++) {
        float x_198210 = ((float *) mem_235735)[i_233999];
        float x_198211 = ((float *) mem_235738)[i_233999];
        float x_198212 = ((float *) mem_235741)[i_233999];
        float x_198213 = ((float *) mem_235744)[i_233999];
        float x_198214 = ((float *) mem_235747)[i_233999];
        float x_198215 = ((float *) mem_235750)[i_233999];
        
        ((float *) mem_235771)[(int64_t) 0] = x_198210;
        ((float *) mem_235771)[(int64_t) 1] = x_198211;
        ((float *) mem_235771)[(int64_t) 2] = x_198212;
        ((float *) mem_235773)[(int64_t) 0] = x_198213;
        ((float *) mem_235773)[(int64_t) 1] = x_198214;
        ((float *) mem_235773)[(int64_t) 2] = x_198215;
        if ((int64_t) 12 > 0)
            memmove(mem_235758 + i_233999 * (int64_t) 6 * (int64_t) 4, mem_235771 + (int64_t) 0, (int64_t) 12);
        if ((int64_t) 12 > 0)
            memmove(mem_235758 + (i_233999 * (int64_t) 6 + (int64_t) 3) * (int64_t) 4, mem_235773 + (int64_t) 0, (int64_t) 12);
    }
    
    int64_t flat_dim_198219 = (int64_t) 2 * nz2085U_192338;
    
    if (memblock_alloc(ctx, &mem_235790, bytes_235757, "mem_235790")) {
        err = 1;
        goto cleanup;
    }
    if (flat_dim_198219 * (int64_t) 3 * (int64_t) 4 > 0)
        memmove(mem_235790.mem + (int64_t) 0, mem_235758 + (int64_t) 0, flat_dim_198219 * (int64_t) 3 * (int64_t) 4);
    if (memblock_set(ctx, &mem_out_235975, &mem_235790, "mem_235790") != 0)
        return 1;
    prim_out_235976 = flat_dim_198219;
    (*mem_out_p_236134).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_236134, &mem_out_235975, "mem_out_235975") != 0)
        return 1;
    *out_prim_out_236135 = prim_out_235976;
    
  cleanup:
    {
        free(mem_234533);
        free(mem_234536);
        free(mem_234539);
        free(mem_234542);
        free(mem_234545);
        free(mem_234548);
        free(mem_234551);
        free(mem_234627);
        free(mem_234630);
        free(mem_234633);
        free(mem_234677);
        free(mem_234700);
        free(mem_234705);
        free(mem_234754);
        free(mem_234757);
        free(mem_234780);
        free(mem_234783);
        free(mem_234786);
        free(mem_234819);
        free(mem_234822);
        free(mem_234825);
        free(mem_234871);
        free(mem_234874);
        free(mem_234897);
        free(mem_234946);
        free(mem_234959);
        free(mem_234972);
        free(mem_234975);
        free(mem_234978);
        free(mem_235013);
        free(mem_235026);
        free(mem_235057);
        free(mem_235060);
        free(mem_235083);
        free(mem_235132);
        free(mem_235135);
        free(mem_235158);
        free(mem_235207);
        free(mem_235210);
        free(mem_235233);
        free(mem_235247);
        free(mem_235271);
        free(mem_235302);
        free(mem_235306);
        free(mem_235310);
        free(mem_235314);
        free(mem_235318);
        free(mem_235504);
        free(mem_235507);
        free(mem_235530);
        free(mem_235579);
        free(mem_235582);
        free(mem_235585);
        free(mem_235588);
        free(mem_235591);
        free(mem_235644);
        free(mem_235647);
        free(mem_235670);
        free(mem_235673);
        free(mem_235676);
        free(mem_235679);
        free(mem_235682);
        free(mem_235735);
        free(mem_235738);
        free(mem_235741);
        free(mem_235744);
        free(mem_235747);
        free(mem_235750);
        free(mem_235753);
        free(mem_235758);
        free(mem_235771);
        free(mem_235773);
        if (memblock_unref(ctx, &mem_235790, "mem_235790") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235184, "mem_235184") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235171, "mem_235171") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_235199, "ext_mem_235199") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_235204, "ext_mem_235204") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235109, "mem_235109") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235096, "mem_235096") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_235124, "ext_mem_235124") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_235129, "ext_mem_235129") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235039, "mem_235039") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_235054, "ext_mem_235054") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_236046, "mem_param_tmp_236046") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_236045, "mem_param_tmp_236045") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_234913, "mem_234913") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_234910, "mem_234910") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_234868, "mem_param_234868") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_234863, "mem_param_234863") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_234942, "ext_mem_234942") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_234943, "ext_mem_234943") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_234858, "mem_234858") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235556, "mem_235556") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235543, "mem_235543") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_235571, "ext_mem_235571") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_235576, "ext_mem_235576") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235010, "mem_235010") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_234624, "mem_234624") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_235975, "mem_out_235975") != 0)
            return 1;
    }
    return err;
}
static int futrts_entry_hgoPotential(struct futhark_context *ctx, float *out_prim_out_236208, struct memblock location_mem_234529, struct memblock orientation_mem_234530, float epsilon_146344, float sigma_par_146345, float sigma_ort_146346)
{
    (void) ctx;
    
    int err = 0;
    float prim_out_235975;
    float fromLO_res_211292 = ((float *) location_mem_234529.mem)[(int64_t) 0];
    float fromLO_res_211293 = ((float *) location_mem_234529.mem)[(int64_t) 1];
    float fromLO_res_211294 = ((float *) location_mem_234529.mem)[(int64_t) 2];
    float quaternion_arg_211295 = ((float *) orientation_mem_234530.mem)[(int64_t) 1];
    float quaternion_arg_211296 = ((float *) orientation_mem_234530.mem)[(int64_t) 2];
    float quaternion_arg_211297 = ((float *) orientation_mem_234530.mem)[(int64_t) 3];
    float quaternion_arg_211298 = ((float *) orientation_mem_234530.mem)[(int64_t) 0];
    float defunc_1_f_res_213481 = fromLO_res_211292 * fromLO_res_211292;
    float defunc_1_f_res_213482 = fromLO_res_211293 * fromLO_res_211293;
    float defunc_1_f_res_213483 = fromLO_res_211294 * fromLO_res_211294;
    float defunc_1_f_res_213484 = defunc_1_f_res_213482 + defunc_1_f_res_213483;
    float defunc_0_f_res_213485 = defunc_1_f_res_213481 + defunc_1_f_res_213484;
    float sqrt_res_213486 = futrts_sqrt32(defunc_0_f_res_213485);
    float v3scale_arg_213487 = 1.0F / sqrt_res_213486;
    float defunc_0_f_res_213488 = fromLO_res_211292 * v3scale_arg_213487;
    float defunc_0_f_res_213489 = fromLO_res_211293 * v3scale_arg_213487;
    float defunc_0_f_res_213490 = fromLO_res_211294 * v3scale_arg_213487;
    float defunc_0_f_res_213498 = 0.0F - quaternion_arg_211295;
    float defunc_0_f_res_213499 = 0.0F - quaternion_arg_211296;
    float defunc_0_f_res_213500 = 0.0F - quaternion_arg_211297;
    float arg_213522 = defunc_0_f_res_213498 * defunc_0_f_res_213500;
    float arg_213523 = quaternion_arg_211298 * defunc_0_f_res_213499;
    float cross_res_213524 = arg_213522 - arg_213523;
    float arg_213525 = quaternion_arg_211298 * defunc_0_f_res_213498;
    float arg_213526 = quaternion_arg_211296 * defunc_0_f_res_213500;
    float cross_res_213527 = arg_213525 - arg_213526;
    float arg_213528 = quaternion_arg_211296 * defunc_0_f_res_213499;
    float arg_213529 = defunc_0_f_res_213498 * defunc_0_f_res_213498;
    float cross_res_213530 = arg_213528 - arg_213529;
    float defunc_0_f_res_213531 = quaternion_arg_211296 * quaternion_arg_211298;
    float defunc_0_f_res_213533 = quaternion_arg_211298 * quaternion_arg_211298;
    float defunc_0_f_res_213535 = defunc_0_f_res_213499 * defunc_0_f_res_213500;
    float defunc_0_f_res_213536 = defunc_0_f_res_213500 * defunc_0_f_res_213500;
    float defunc_1_f_res_213537 = arg_213522 + defunc_0_f_res_213531;
    float defunc_1_f_res_213538 = arg_213525 + defunc_0_f_res_213535;
    float defunc_1_f_res_213539 = defunc_0_f_res_213533 + defunc_0_f_res_213536;
    float defunc_1_f_res_213540 = cross_res_213524 + defunc_1_f_res_213537;
    float defunc_1_f_res_213541 = cross_res_213527 + defunc_1_f_res_213538;
    float defunc_1_f_res_213542 = cross_res_213530 + defunc_1_f_res_213539;
    float sigma_195589 = 1.4142135F * sigma_ort_146346;
    float lifted_sq_res_195590 = sigma_par_146345 * sigma_par_146345;
    float lifted_sq_res_195591 = sigma_ort_146346 * sigma_ort_146346;
    float arg_195592 = lifted_sq_res_195590 - lifted_sq_res_195591;
    float arg_195595 = lifted_sq_res_195590 + lifted_sq_res_195591;
    float chi_195596 = arg_195592 / arg_195595;
    float lifted_sq_arg_195598 = chi_195596 * defunc_1_f_res_213542;
    float lifted_sq_res_195599 = lifted_sq_arg_195598 * lifted_sq_arg_195598;
    float sqrt_arg_195600 = 1.0F - lifted_sq_res_195599;
    float sqrt_res_195601 = futrts_sqrt32(sqrt_arg_195600);
    float epsilonzq_195602 = epsilon_146344 / sqrt_res_195601;
    float arg_195603 = 0.5F * chi_195596;
    float defunc_1_f_res_211779 = defunc_0_f_res_213488 * defunc_1_f_res_213540;
    float defunc_1_f_res_211780 = defunc_0_f_res_213489 * defunc_1_f_res_213541;
    float defunc_1_f_res_211781 = defunc_0_f_res_213490 * defunc_1_f_res_213542;
    float defunc_1_f_res_211782 = defunc_1_f_res_211780 + defunc_1_f_res_211781;
    float defunc_0_f_res_211783 = defunc_1_f_res_211779 + defunc_1_f_res_211782;
    float lifted_sq_arg_195606 = defunc_0_f_res_211783 + defunc_0_f_res_213490;
    float lifted_sq_res_195607 = lifted_sq_arg_195606 * lifted_sq_arg_195606;
    float arg_195610 = 1.0F + lifted_sq_arg_195598;
    float arg_195611 = lifted_sq_res_195607 / arg_195610;
    float lifted_sq_arg_195614 = defunc_0_f_res_213490 - defunc_0_f_res_211783;
    float lifted_sq_res_195615 = lifted_sq_arg_195614 * lifted_sq_arg_195614;
    float arg_195618 = 1.0F - lifted_sq_arg_195598;
    float arg_195619 = lifted_sq_res_195615 / arg_195618;
    float arg_195620 = arg_195611 + arg_195619;
    float arg_195621 = arg_195603 * arg_195620;
    float sqrt_arg_195622 = 1.0F - arg_195621;
    float sqrt_res_195623 = futrts_sqrt32(sqrt_arg_195622);
    float sigmazq_195624 = sigma_195589 / sqrt_res_195623;
    float arg_195626 = 0.0F - defunc_0_f_res_213485;
    float lifted_sq_res_195627 = sigmazq_195624 * sigmazq_195624;
    float exp_arg_195628 = arg_195626 / lifted_sq_res_195627;
    float exp_res_195629 = futrts_exp32(exp_arg_195628);
    float hgo_res_195630 = epsilonzq_195602 * exp_res_195629;
    
    prim_out_235975 = hgo_res_195630;
    *out_prim_out_236208 = prim_out_235975;
    
  cleanup:
    { }
    return err;
}
static int futrts_entry_networkInteraction(struct futhark_context *ctx, struct memblock *mem_out_p_236209, int64_t *out_prim_out_236210, struct memblock z31U_mem_234529, struct memblock z31U_mem_234530, struct memblock z31U_mem_234531, struct memblock z31U_mem_234532, struct memblock z31U_mem_234533, struct memblock z31U_mem_234534, struct memblock z31U_mem_234535, struct memblock z31U_mem_234536, struct memblock z31U_mem_234537, struct memblock z31U_mem_234538, struct memblock z31U_mem_234539, struct memblock z31U_mem_234540, struct memblock z31U_mem_234541, struct memblock locations_mem_234542, struct memblock orientations_mem_234543, int64_t dz2080U_189274, int64_t dz2081U_189275, int64_t nz2084U_189276, int8_t z30U_189277, float z30U_189278, float z30U_189279, float z30U_189280, float z30U_189281, float z30U_189282, float z30U_189283, float z30U_189284, float z30U_189285, float z30U_189286, float z30U_189287, float z30U_189288, float z30U_189289, float z30U_189290, int32_t z30U_189291)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_234546_cached_sizze_236211 = 0;
    unsigned char *mem_234546 = NULL;
    int64_t mem_234549_cached_sizze_236212 = 0;
    unsigned char *mem_234549 = NULL;
    int64_t mem_234552_cached_sizze_236213 = 0;
    unsigned char *mem_234552 = NULL;
    int64_t mem_234555_cached_sizze_236214 = 0;
    unsigned char *mem_234555 = NULL;
    int64_t mem_234558_cached_sizze_236215 = 0;
    unsigned char *mem_234558 = NULL;
    int64_t mem_234561_cached_sizze_236216 = 0;
    unsigned char *mem_234561 = NULL;
    int64_t mem_234564_cached_sizze_236217 = 0;
    unsigned char *mem_234564 = NULL;
    int64_t mem_234640_cached_sizze_236218 = 0;
    unsigned char *mem_234640 = NULL;
    int64_t mem_234643_cached_sizze_236219 = 0;
    unsigned char *mem_234643 = NULL;
    int64_t mem_234646_cached_sizze_236220 = 0;
    unsigned char *mem_234646 = NULL;
    int64_t mem_234690_cached_sizze_236221 = 0;
    unsigned char *mem_234690 = NULL;
    int64_t mem_234713_cached_sizze_236222 = 0;
    unsigned char *mem_234713 = NULL;
    int64_t mem_234718_cached_sizze_236223 = 0;
    unsigned char *mem_234718 = NULL;
    int64_t mem_234767_cached_sizze_236224 = 0;
    unsigned char *mem_234767 = NULL;
    int64_t mem_234770_cached_sizze_236225 = 0;
    unsigned char *mem_234770 = NULL;
    int64_t mem_234793_cached_sizze_236226 = 0;
    unsigned char *mem_234793 = NULL;
    int64_t mem_234796_cached_sizze_236227 = 0;
    unsigned char *mem_234796 = NULL;
    int64_t mem_234799_cached_sizze_236228 = 0;
    unsigned char *mem_234799 = NULL;
    int64_t mem_234832_cached_sizze_236229 = 0;
    unsigned char *mem_234832 = NULL;
    int64_t mem_234835_cached_sizze_236230 = 0;
    unsigned char *mem_234835 = NULL;
    int64_t mem_234838_cached_sizze_236231 = 0;
    unsigned char *mem_234838 = NULL;
    int64_t mem_234884_cached_sizze_236232 = 0;
    unsigned char *mem_234884 = NULL;
    int64_t mem_234887_cached_sizze_236233 = 0;
    unsigned char *mem_234887 = NULL;
    int64_t mem_234910_cached_sizze_236234 = 0;
    unsigned char *mem_234910 = NULL;
    int64_t mem_234959_cached_sizze_236235 = 0;
    unsigned char *mem_234959 = NULL;
    int64_t mem_234972_cached_sizze_236236 = 0;
    unsigned char *mem_234972 = NULL;
    int64_t mem_234985_cached_sizze_236237 = 0;
    unsigned char *mem_234985 = NULL;
    int64_t mem_234988_cached_sizze_236238 = 0;
    unsigned char *mem_234988 = NULL;
    int64_t mem_234991_cached_sizze_236239 = 0;
    unsigned char *mem_234991 = NULL;
    int64_t mem_235026_cached_sizze_236240 = 0;
    unsigned char *mem_235026 = NULL;
    int64_t mem_235039_cached_sizze_236241 = 0;
    unsigned char *mem_235039 = NULL;
    int64_t mem_235070_cached_sizze_236242 = 0;
    unsigned char *mem_235070 = NULL;
    int64_t mem_235073_cached_sizze_236243 = 0;
    unsigned char *mem_235073 = NULL;
    int64_t mem_235096_cached_sizze_236244 = 0;
    unsigned char *mem_235096 = NULL;
    int64_t mem_235145_cached_sizze_236245 = 0;
    unsigned char *mem_235145 = NULL;
    int64_t mem_235148_cached_sizze_236246 = 0;
    unsigned char *mem_235148 = NULL;
    int64_t mem_235171_cached_sizze_236247 = 0;
    unsigned char *mem_235171 = NULL;
    int64_t mem_235220_cached_sizze_236248 = 0;
    unsigned char *mem_235220 = NULL;
    int64_t mem_235223_cached_sizze_236249 = 0;
    unsigned char *mem_235223 = NULL;
    int64_t mem_235246_cached_sizze_236250 = 0;
    unsigned char *mem_235246 = NULL;
    int64_t mem_235260_cached_sizze_236251 = 0;
    unsigned char *mem_235260 = NULL;
    int64_t mem_235284_cached_sizze_236252 = 0;
    unsigned char *mem_235284 = NULL;
    int64_t mem_235315_cached_sizze_236253 = 0;
    unsigned char *mem_235315 = NULL;
    int64_t mem_235319_cached_sizze_236254 = 0;
    unsigned char *mem_235319 = NULL;
    int64_t mem_235323_cached_sizze_236255 = 0;
    unsigned char *mem_235323 = NULL;
    int64_t mem_235327_cached_sizze_236256 = 0;
    unsigned char *mem_235327 = NULL;
    int64_t mem_235331_cached_sizze_236257 = 0;
    unsigned char *mem_235331 = NULL;
    int64_t mem_235517_cached_sizze_236258 = 0;
    unsigned char *mem_235517 = NULL;
    int64_t mem_235520_cached_sizze_236259 = 0;
    unsigned char *mem_235520 = NULL;
    int64_t mem_235543_cached_sizze_236260 = 0;
    unsigned char *mem_235543 = NULL;
    int64_t mem_235592_cached_sizze_236261 = 0;
    unsigned char *mem_235592 = NULL;
    int64_t mem_235595_cached_sizze_236262 = 0;
    unsigned char *mem_235595 = NULL;
    int64_t mem_235598_cached_sizze_236263 = 0;
    unsigned char *mem_235598 = NULL;
    int64_t mem_235601_cached_sizze_236264 = 0;
    unsigned char *mem_235601 = NULL;
    int64_t mem_235604_cached_sizze_236265 = 0;
    unsigned char *mem_235604 = NULL;
    int64_t mem_235657_cached_sizze_236266 = 0;
    unsigned char *mem_235657 = NULL;
    int64_t mem_235660_cached_sizze_236267 = 0;
    unsigned char *mem_235660 = NULL;
    int64_t mem_235683_cached_sizze_236268 = 0;
    unsigned char *mem_235683 = NULL;
    int64_t mem_235686_cached_sizze_236269 = 0;
    unsigned char *mem_235686 = NULL;
    int64_t mem_235689_cached_sizze_236270 = 0;
    unsigned char *mem_235689 = NULL;
    int64_t mem_235692_cached_sizze_236271 = 0;
    unsigned char *mem_235692 = NULL;
    int64_t mem_235695_cached_sizze_236272 = 0;
    unsigned char *mem_235695 = NULL;
    int64_t mem_235748_cached_sizze_236273 = 0;
    unsigned char *mem_235748 = NULL;
    int64_t mem_235751_cached_sizze_236274 = 0;
    unsigned char *mem_235751 = NULL;
    int64_t mem_235754_cached_sizze_236275 = 0;
    unsigned char *mem_235754 = NULL;
    int64_t mem_235757_cached_sizze_236276 = 0;
    unsigned char *mem_235757 = NULL;
    int64_t mem_235760_cached_sizze_236277 = 0;
    unsigned char *mem_235760 = NULL;
    int64_t mem_235763_cached_sizze_236278 = 0;
    unsigned char *mem_235763 = NULL;
    int64_t mem_235766_cached_sizze_236279 = 0;
    unsigned char *mem_235766 = NULL;
    int64_t mem_235769_cached_sizze_236280 = 0;
    unsigned char *mem_235769 = NULL;
    int64_t mem_235772_cached_sizze_236281 = 0;
    unsigned char *mem_235772 = NULL;
    int64_t mem_235775_cached_sizze_236282 = 0;
    unsigned char *mem_235775 = NULL;
    int64_t mem_235778_cached_sizze_236283 = 0;
    unsigned char *mem_235778 = NULL;
    int64_t mem_235821_cached_sizze_236284 = 0;
    unsigned char *mem_235821 = NULL;
    int64_t mem_235824_cached_sizze_236285 = 0;
    unsigned char *mem_235824 = NULL;
    int64_t mem_235847_cached_sizze_236286 = 0;
    unsigned char *mem_235847 = NULL;
    int64_t mem_235850_cached_sizze_236287 = 0;
    unsigned char *mem_235850 = NULL;
    int64_t mem_235873_cached_sizze_236288 = 0;
    unsigned char *mem_235873 = NULL;
    int64_t mem_235886_cached_sizze_236289 = 0;
    unsigned char *mem_235886 = NULL;
    int64_t mem_235899_cached_sizze_236290 = 0;
    unsigned char *mem_235899 = NULL;
    int64_t mem_235914_cached_sizze_236291 = 0;
    unsigned char *mem_235914 = NULL;
    int64_t mem_235927_cached_sizze_236292 = 0;
    unsigned char *mem_235927 = NULL;
    int64_t mem_235929_cached_sizze_236293 = 0;
    unsigned char *mem_235929 = NULL;
    struct memblock mem_235946;
    
    mem_235946.references = NULL;
    
    struct memblock mem_235197;
    
    mem_235197.references = NULL;
    
    struct memblock mem_235184;
    
    mem_235184.references = NULL;
    
    struct memblock ext_mem_235212;
    
    ext_mem_235212.references = NULL;
    
    struct memblock ext_mem_235217;
    
    ext_mem_235217.references = NULL;
    
    struct memblock mem_235122;
    
    mem_235122.references = NULL;
    
    struct memblock mem_235109;
    
    mem_235109.references = NULL;
    
    struct memblock ext_mem_235137;
    
    ext_mem_235137.references = NULL;
    
    struct memblock ext_mem_235142;
    
    ext_mem_235142.references = NULL;
    
    struct memblock mem_235052;
    
    mem_235052.references = NULL;
    
    struct memblock ext_mem_235067;
    
    ext_mem_235067.references = NULL;
    
    struct memblock mem_param_tmp_236046;
    
    mem_param_tmp_236046.references = NULL;
    
    struct memblock mem_param_tmp_236045;
    
    mem_param_tmp_236045.references = NULL;
    
    struct memblock mem_234926;
    
    mem_234926.references = NULL;
    
    struct memblock mem_234923;
    
    mem_234923.references = NULL;
    
    struct memblock mem_param_234881;
    
    mem_param_234881.references = NULL;
    
    struct memblock mem_param_234876;
    
    mem_param_234876.references = NULL;
    
    struct memblock ext_mem_234955;
    
    ext_mem_234955.references = NULL;
    
    struct memblock ext_mem_234956;
    
    ext_mem_234956.references = NULL;
    
    struct memblock mem_234871;
    
    mem_234871.references = NULL;
    
    struct memblock mem_235569;
    
    mem_235569.references = NULL;
    
    struct memblock mem_235556;
    
    mem_235556.references = NULL;
    
    struct memblock ext_mem_235584;
    
    ext_mem_235584.references = NULL;
    
    struct memblock ext_mem_235589;
    
    ext_mem_235589.references = NULL;
    
    struct memblock mem_235023;
    
    mem_235023.references = NULL;
    
    struct memblock mem_234637;
    
    mem_234637.references = NULL;
    
    struct memblock mem_out_235975;
    
    mem_out_235975.references = NULL;
    
    int64_t prim_out_235976;
    int64_t binop_y_234544 = (int64_t) 4 * nz2084U_189276;
    int64_t bytes_234545 = smax64((int64_t) 0, binop_y_234544);
    
    if (mem_234546_cached_sizze_236211 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_234546, &mem_234546_cached_sizze_236211, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234549_cached_sizze_236212 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_234549, &mem_234549_cached_sizze_236212, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234552_cached_sizze_236213 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_234552, &mem_234552_cached_sizze_236213, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234555_cached_sizze_236214 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_234555, &mem_234555_cached_sizze_236214, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234558_cached_sizze_236215 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_234558, &mem_234558_cached_sizze_236215, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234561_cached_sizze_236216 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_234561, &mem_234561_cached_sizze_236216, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234564_cached_sizze_236217 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_234564, &mem_234564_cached_sizze_236217, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    float defunc_0_f_res_233518;
    float defunc_0_f_res_233519;
    float defunc_0_f_res_233520;
    float defunc_0_f_res_233521;
    float defunc_0_f_res_233522;
    float defunc_0_f_res_233523;
    float redout_233594;
    float redout_233595;
    float redout_233596;
    float redout_233597;
    float redout_233598;
    float redout_233599;
    
    redout_233594 = 0.0F;
    redout_233595 = 0.0F;
    redout_233596 = 0.0F;
    redout_233597 = 0.0F;
    redout_233598 = 0.0F;
    redout_233599 = 0.0F;
    for (int64_t i_233607 = 0; i_233607 < nz2084U_189276; i_233607++) {
        float defunc_1_f_res_216387 = ((float *) locations_mem_234542.mem)[i_233607 * (int64_t) 3];
        float defunc_1_f_res_216388 = ((float *) locations_mem_234542.mem)[i_233607 * (int64_t) 3 + (int64_t) 1];
        float defunc_1_f_res_216389 = ((float *) locations_mem_234542.mem)[i_233607 * (int64_t) 3 + (int64_t) 2];
        float quaternion_arg_216390 = ((float *) orientations_mem_234543.mem)[i_233607 * (int64_t) 4 + (int64_t) 1];
        float quaternion_arg_216391 = ((float *) orientations_mem_234543.mem)[i_233607 * (int64_t) 4 + (int64_t) 2];
        float quaternion_arg_216392 = ((float *) orientations_mem_234543.mem)[i_233607 * (int64_t) 4 + (int64_t) 3];
        float quaternion_arg_216393 = ((float *) orientations_mem_234543.mem)[i_233607 * (int64_t) 4];
        float defunc_1_f_res_211784 = fmin32(defunc_1_f_res_216387, redout_233594);
        float defunc_1_f_res_211785 = fmin32(defunc_1_f_res_216388, redout_233595);
        float defunc_1_f_res_211786 = fmin32(defunc_1_f_res_216389, redout_233596);
        float defunc_1_f_res_211769 = fmax32(defunc_1_f_res_216387, redout_233597);
        float defunc_1_f_res_211770 = fmax32(defunc_1_f_res_216388, redout_233598);
        float defunc_1_f_res_211771 = fmax32(defunc_1_f_res_216389, redout_233599);
        
        ((float *) mem_234546)[i_233607] = defunc_1_f_res_216387;
        ((float *) mem_234549)[i_233607] = defunc_1_f_res_216388;
        ((float *) mem_234552)[i_233607] = defunc_1_f_res_216389;
        ((float *) mem_234555)[i_233607] = quaternion_arg_216393;
        ((float *) mem_234558)[i_233607] = quaternion_arg_216390;
        ((float *) mem_234561)[i_233607] = quaternion_arg_216391;
        ((float *) mem_234564)[i_233607] = quaternion_arg_216392;
        
        float redout_tmp_235977 = defunc_1_f_res_211784;
        float redout_tmp_235978 = defunc_1_f_res_211785;
        float redout_tmp_235979 = defunc_1_f_res_211786;
        float redout_tmp_235980 = defunc_1_f_res_211769;
        float redout_tmp_235981 = defunc_1_f_res_211770;
        float redout_tmp_235982 = defunc_1_f_res_211771;
        
        redout_233594 = redout_tmp_235977;
        redout_233595 = redout_tmp_235978;
        redout_233596 = redout_tmp_235979;
        redout_233597 = redout_tmp_235980;
        redout_233598 = redout_tmp_235981;
        redout_233599 = redout_tmp_235982;
    }
    defunc_0_f_res_233518 = redout_233594;
    defunc_0_f_res_233519 = redout_233595;
    defunc_0_f_res_233520 = redout_233596;
    defunc_0_f_res_233521 = redout_233597;
    defunc_0_f_res_233522 = redout_233598;
    defunc_0_f_res_233523 = redout_233599;
    
    float defunc_1_f_res_212127 = z30U_189281 * z30U_189281;
    float defunc_1_f_res_212128 = z30U_189282 * z30U_189282;
    float defunc_1_f_res_212129 = z30U_189283 * z30U_189283;
    float defunc_1_f_res_212130 = defunc_1_f_res_212128 + defunc_1_f_res_212129;
    float defunc_0_f_res_212131 = defunc_1_f_res_212127 + defunc_1_f_res_212130;
    float sqrt_res_212132 = futrts_sqrt32(defunc_0_f_res_212131);
    float arg_210361 = z30U_189290 + sqrt_res_212132;
    float case_res_210363 = arg_210361 + sqrt_res_212132;
    float representativeLength_res_210359;
    
    if (z30U_189277 == (int8_t) 1) {
        representativeLength_res_210359 = case_res_210363;
    } else if (z30U_189277 == (int8_t) 2) {
        representativeLength_res_210359 = z30U_189290;
    } else {
        bool hole_c_210364;
        
        if (!0) {
            set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Reached hole of type: f32", "-> #0  potential.fut:184:32-34\n   #1  futhark_interaction.fut:36:19-45\n   #2  futhark_interaction.fut:32:1-41:17\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        representativeLength_res_210359 = z30U_189290;
    }
    
    float defunc_1_f_res_211790 = defunc_0_f_res_233521 - defunc_0_f_res_233518;
    float defunc_1_f_res_211791 = defunc_0_f_res_233522 - defunc_0_f_res_233519;
    float defunc_1_f_res_211792 = defunc_0_f_res_233523 - defunc_0_f_res_233520;
    float defunc_1_f_res_211793 = representativeLength_res_210359 + defunc_1_f_res_211790;
    float defunc_1_f_res_211794 = representativeLength_res_210359 + defunc_1_f_res_211791;
    float defunc_1_f_res_211795 = representativeLength_res_210359 + defunc_1_f_res_211792;
    float defunc_1_f_res_213513 = defunc_1_f_res_211795 * defunc_1_f_res_211795;
    float sqrt_res_213516 = futrts_sqrt32(defunc_1_f_res_213513);
    float ceil_arg_213517 = sqrt_res_213516 / representativeLength_res_210359;
    float ceil_res_213518 = futrts_ceil32(ceil_arg_213517);
    int32_t defunc_0_f_res_213519 = fptosi_f32_i32(ceil_res_213518);
    float i64_res_213524 = sitofp_i32_f32(defunc_0_f_res_213519);
    float zs_res_213525 = 1.0F / i64_res_213524;
    float defunc_1_f_res_213534 = defunc_1_f_res_211795 * zs_res_213525;
    float defunc_1_f_res_213503 = defunc_1_f_res_211794 * defunc_1_f_res_211794;
    float sqrt_res_213507 = futrts_sqrt32(defunc_1_f_res_213503);
    float ceil_arg_213508 = sqrt_res_213507 / representativeLength_res_210359;
    float ceil_res_213509 = futrts_ceil32(ceil_arg_213508);
    int32_t defunc_0_f_res_213510 = fptosi_f32_i32(ceil_res_213509);
    float i64_res_213522 = sitofp_i32_f32(defunc_0_f_res_213510);
    float zs_res_213523 = 1.0F / i64_res_213522;
    float defunc_1_f_res_213530 = defunc_1_f_res_211794 * zs_res_213523;
    float arg_213726 = defunc_1_f_res_213530 * defunc_1_f_res_213534;
    float defunc_1_f_res_213493 = defunc_1_f_res_211793 * defunc_1_f_res_211793;
    float sqrt_res_213498 = futrts_sqrt32(defunc_1_f_res_213493);
    float ceil_arg_213499 = sqrt_res_213498 / representativeLength_res_210359;
    float ceil_res_213500 = futrts_ceil32(ceil_arg_213499);
    int32_t defunc_0_f_res_213501 = fptosi_f32_i32(ceil_res_213500);
    float i64_res_213520 = sitofp_i32_f32(defunc_0_f_res_213501);
    float zs_res_213521 = 1.0F / i64_res_213520;
    float defunc_1_f_res_213526 = defunc_1_f_res_211793 * zs_res_213521;
    float defunc_1_f_res_214420 = defunc_1_f_res_213526 * arg_213726;
    float arg_213691 = defunc_1_f_res_213526 * defunc_1_f_res_213530;
    float defunc_0_f_res_214433 = arg_213691 / defunc_1_f_res_214420;
    float arg_213647 = defunc_1_f_res_213526 * defunc_1_f_res_213534;
    float defunc_0_f_res_214429 = arg_213647 / defunc_1_f_res_214420;
    float defunc_0_f_res_214425 = arg_213726 / defunc_1_f_res_214420;
    
    if (memblock_alloc(ctx, &mem_234637, bytes_234545, "mem_234637")) {
        err = 1;
        goto cleanup;
    }
    if (mem_234640_cached_sizze_236218 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_234640, &mem_234640_cached_sizze_236218, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234643_cached_sizze_236219 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_234643, &mem_234643_cached_sizze_236219, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234646_cached_sizze_236220 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_234646, &mem_234646_cached_sizze_236220, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int32_t defunc_2_reduce_res_233531;
    int32_t redout_233619 = 0;
    
    for (int64_t i_233624 = 0; i_233624 < nz2084U_189276; i_233624++) {
        float x_216328 = ((float *) mem_234546)[i_233624];
        float x_216329 = ((float *) mem_234549)[i_233624];
        float x_216330 = ((float *) mem_234552)[i_233624];
        float defunc_1_f_res_216331 = x_216328 - defunc_0_f_res_233518;
        float defunc_1_f_res_216332 = x_216329 - defunc_0_f_res_233519;
        float defunc_1_f_res_216333 = x_216330 - defunc_0_f_res_233520;
        float defunc_1_f_res_216337 = defunc_0_f_res_214425 * defunc_1_f_res_216331;
        float defunc_1_f_res_216338 = defunc_0_f_res_214429 * defunc_1_f_res_216332;
        float defunc_1_f_res_216339 = defunc_0_f_res_214433 * defunc_1_f_res_216333;
        float defunc_0_f_res_216340 = futrts_floor32(defunc_1_f_res_216337);
        int32_t defunc_0_g_res_216341 = fptosi_f32_i32(defunc_0_f_res_216340);
        float defunc_0_f_res_216342 = futrts_floor32(defunc_1_f_res_216338);
        int32_t defunc_0_g_res_216343 = fptosi_f32_i32(defunc_0_f_res_216342);
        float defunc_0_f_res_216344 = futrts_floor32(defunc_1_f_res_216339);
        int32_t defunc_0_g_res_216345 = fptosi_f32_i32(defunc_0_f_res_216344);
        int32_t arg_216346 = mul32(defunc_0_f_res_213510, defunc_0_g_res_216341);
        int32_t arg_216347 = mul32(defunc_0_f_res_213519, arg_216346);
        int32_t arg_216348 = mul32(defunc_0_f_res_213519, defunc_0_g_res_216343);
        int32_t arg_216349 = add32(arg_216347, arg_216348);
        int32_t defunc_0_g_res_216350 = add32(defunc_0_g_res_216345, arg_216349);
        int32_t unsign_arg_214468 = umax32(defunc_0_g_res_216350, redout_233619);
        
        ((int32_t *) mem_234637.mem)[i_233624] = defunc_0_g_res_216350;
        ((float *) mem_234640)[i_233624] = defunc_1_f_res_216331;
        ((float *) mem_234643)[i_233624] = defunc_1_f_res_216332;
        ((float *) mem_234646)[i_233624] = defunc_1_f_res_216333;
        
        int32_t redout_tmp_235990 = unsign_arg_214468;
        
        redout_233619 = redout_tmp_235990;
    }
    defunc_2_reduce_res_233531 = redout_233619;
    
    float defunc_1_f_res_213535 = defunc_1_f_res_213526 * defunc_1_f_res_213526;
    float sqrt_res_213540 = futrts_sqrt32(defunc_1_f_res_213535);
    float defunc_1_f_res_213542 = defunc_1_f_res_213530 * defunc_1_f_res_213530;
    float sqrt_res_213546 = futrts_sqrt32(defunc_1_f_res_213542);
    float defunc_1_f_res_213549 = defunc_1_f_res_213534 * defunc_1_f_res_213534;
    float sqrt_res_213552 = futrts_sqrt32(defunc_1_f_res_213549);
    float defunc_0_f_res_213553 = representativeLength_res_210359 / sqrt_res_213540;
    float defunc_0_f_res_213554 = representativeLength_res_210359 / sqrt_res_213546;
    float defunc_0_f_res_213555 = representativeLength_res_210359 / sqrt_res_213552;
    float defunc_0_f_res_213556 = futrts_ceil32(defunc_0_f_res_213553);
    float defunc_0_f_res_213557 = futrts_ceil32(defunc_0_f_res_213554);
    float defunc_0_f_res_213558 = futrts_ceil32(defunc_0_f_res_213555);
    int64_t defunc_0_f_res_213559 = fptosi_f32_i64(defunc_0_f_res_213556);
    int64_t defunc_0_f_res_213560 = fptosi_f32_i64(defunc_0_f_res_213557);
    int64_t defunc_0_f_res_213561 = fptosi_f32_i64(defunc_0_f_res_213558);
    int64_t defunc_0_f_res_213562 = add64((int64_t) 1, defunc_0_f_res_213559);
    int64_t defunc_0_f_res_213563 = add64((int64_t) 1, defunc_0_f_res_213560);
    int64_t defunc_0_f_res_213564 = add64((int64_t) 1, defunc_0_f_res_213561);
    int64_t defunc_0_f_res_213565 = add64((int64_t) 2, defunc_0_f_res_213559);
    int64_t defunc_0_f_res_213566 = add64((int64_t) 2, defunc_0_f_res_213560);
    int64_t defunc_0_f_res_213567 = add64((int64_t) 2, defunc_0_f_res_213561);
    int64_t nnzq_213568 = add64(defunc_0_f_res_213563, defunc_0_f_res_213566);
    int64_t range_start_213569 = sub64((int64_t) 0, defunc_0_f_res_213562);
    bool bounds_invalid_upwards_213570 = slt64(defunc_0_f_res_213565, range_start_213569);
    int64_t distance_213571 = sub64(defunc_0_f_res_213565, range_start_213569);
    bool valid_213572 = !bounds_invalid_upwards_213570;
    bool range_valid_c_213573;
    
    if (!valid_213572) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) range_start_213569, "..<", (long long) defunc_0_f_res_213565, " is invalid.", "-> #0  associations.fut:81:22-28\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t range_start_213575 = sub64((int64_t) 0, defunc_0_f_res_213563);
    bool bounds_invalid_upwards_213576 = slt64(defunc_0_f_res_213566, range_start_213575);
    int64_t distance_213577 = sub64(defunc_0_f_res_213566, range_start_213575);
    bool valid_213578 = !bounds_invalid_upwards_213576;
    bool range_valid_c_213579;
    
    if (!valid_213578) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) range_start_213575, "..<", (long long) defunc_0_f_res_213566, " is invalid.", "-> #0  associations.fut:80:22-28\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_213581 = slt64(defunc_0_f_res_213567, (int64_t) 1);
    int64_t distance_213582 = sub64(defunc_0_f_res_213567, (int64_t) 1);
    bool valid_213583 = !bounds_invalid_upwards_213581;
    bool range_valid_c_213584;
    
    if (!valid_213583) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 1, "..<", (long long) defunc_0_f_res_213567, " is invalid.", "-> #0  associations.fut:79:22-27\n   #1  associations.fut:78:43-80:29\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool dim_match_213585 = defunc_0_f_res_213564 == distance_213582;
    bool empty_or_match_cert_213586;
    
    if (!dim_match_213585) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (core language) shape (", (long long) distance_213582, ") cannot match shape of type `[", (long long) defunc_0_f_res_213564, "](i64, i64, i64)`.", "-> #0  associations.fut:78:54-79:49\n   #1  associations.fut:78:43-80:29\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_x_234687 = defunc_0_f_res_213564 * distance_213577;
    int64_t binop_y_234688 = (int64_t) 8 * binop_x_234687;
    int64_t bytes_234689 = smax64((int64_t) 0, binop_y_234688);
    
    if (mem_234690_cached_sizze_236221 < bytes_234689) {
        err = lexical_realloc(ctx, &mem_234690, &mem_234690_cached_sizze_236221, bytes_234689);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233631 = 0; i_233631 < distance_213577; i_233631++) {
        int64_t index_primexp_234376 = add64(range_start_213575, i_233631);
        
        for (int64_t i_235996 = 0; i_235996 < defunc_0_f_res_213564; i_235996++) {
            ((int64_t *) mem_234690)[i_233631 * defunc_0_f_res_213564 + i_235996] = index_primexp_234376;
        }
    }
    
    bool dim_match_213591 = nnzq_213568 == distance_213577;
    bool empty_or_match_cert_213592;
    
    if (!dim_match_213591) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (core language) shape (", (long long) distance_213577, ", ", (long long) defunc_0_f_res_213564, ") cannot match shape of type `[", (long long) nnzq_213568, "][", (long long) defunc_0_f_res_213564, "](i64, i64, i64)`.", "-> #0  associations.fut:78:43-80:56\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_213606 = slt64(defunc_0_f_res_213566, (int64_t) 1);
    bool valid_213608 = !bounds_invalid_upwards_213606;
    bool range_valid_c_213609;
    
    if (!valid_213608) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 1, "..<", (long long) defunc_0_f_res_213566, " is invalid.", "-> #0  associations.fut:76:22-27\n   #1  associations.fut:75:29-77:29\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t distance_213607 = sub64(defunc_0_f_res_213566, (int64_t) 1);
    bool dim_match_213610 = defunc_0_f_res_213563 == distance_213607;
    bool empty_or_match_cert_213611;
    
    if (!dim_match_213610) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (core language) shape (", (long long) distance_213607, ") cannot match shape of type `[", (long long) defunc_0_f_res_213563, "](i64, i64, i64)`.", "-> #0  associations.fut:75:40-76:49\n   #1  associations.fut:75:29-77:29\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_x_234710 = defunc_0_f_res_213563 * distance_213571;
    int64_t binop_y_234711 = (int64_t) 8 * binop_x_234710;
    int64_t bytes_234712 = smax64((int64_t) 0, binop_y_234711);
    
    if (mem_234713_cached_sizze_236222 < bytes_234712) {
        err = lexical_realloc(ctx, &mem_234713, &mem_234713_cached_sizze_236222, bytes_234712);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t binop_x_234714 = nnzq_213568 * distance_213571;
    int64_t binop_x_234715 = defunc_0_f_res_213564 * binop_x_234714;
    int64_t binop_y_234716 = (int64_t) 8 * binop_x_234715;
    int64_t bytes_234717 = smax64((int64_t) 0, binop_y_234716);
    
    if (mem_234718_cached_sizze_236223 < bytes_234717) {
        err = lexical_realloc(ctx, &mem_234718, &mem_234718_cached_sizze_236223, bytes_234717);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t ixfun_arg_234738 = defunc_0_f_res_213564 * nnzq_213568;
    
    for (int64_t i_233637 = 0; i_233637 < distance_213571; i_233637++) {
        int64_t index_primexp_234374 = add64(range_start_213569, i_233637);
        
        for (int64_t i_235999 = 0; i_235999 < nnzq_213568; i_235999++) {
            for (int64_t i_236000 = 0; i_236000 < defunc_0_f_res_213564; i_236000++) {
                ((int64_t *) mem_234718)[i_233637 * ixfun_arg_234738 + (i_235999 * defunc_0_f_res_213564 + i_236000)] = index_primexp_234374;
            }
        }
        for (int64_t i_236001 = 0; i_236001 < defunc_0_f_res_213563; i_236001++) {
            ((int64_t *) mem_234713)[i_233637 * defunc_0_f_res_213563 + i_236001] = index_primexp_234374;
        }
    }
    
    bool bounds_invalid_upwards_213622 = slt64(defunc_0_f_res_213565, (int64_t) 1);
    int64_t distance_213623 = sub64(defunc_0_f_res_213565, (int64_t) 1);
    bool valid_213624 = !bounds_invalid_upwards_213622;
    bool range_valid_c_213625;
    
    if (!valid_213624) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 1, "..<", (long long) defunc_0_f_res_213565, " is invalid.", "-> #0  associations.fut:74:40-45\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t conc_tmp_213628 = distance_213623 + binop_x_234710;
    int64_t conc_tmp_213629 = conc_tmp_213628 + binop_x_234715;
    float defunc_0_f_res_213634 = 0.0F - defunc_1_f_res_213526;
    float defunc_0_f_res_213638 = 0.0F - defunc_1_f_res_213530;
    float defunc_0_f_res_213642 = 0.0F - defunc_1_f_res_213534;
    float arg_213643 = representativeLength_res_210359 * representativeLength_res_210359;
    float arg_213656 = defunc_1_f_res_213534 * arg_213647;
    float arg_213665 = defunc_1_f_res_213526 * arg_213647;
    float defunc_1_f_res_213672 = defunc_1_f_res_213526 * arg_213656;
    float defunc_0_f_res_213677 = arg_213656 / defunc_1_f_res_213672;
    float defunc_0_f_res_213681 = arg_213647 / defunc_1_f_res_213672;
    float defunc_0_f_res_213682 = arg_213665 / defunc_1_f_res_213672;
    float arg_213694 = defunc_1_f_res_213530 * arg_213691;
    float arg_213703 = defunc_1_f_res_213526 * arg_213691;
    float defunc_1_f_res_213712 = defunc_1_f_res_213526 * arg_213694;
    float defunc_0_f_res_213717 = arg_213694 / defunc_1_f_res_213712;
    float defunc_0_f_res_213721 = arg_213703 / defunc_1_f_res_213712;
    float defunc_0_f_res_213725 = arg_213691 / defunc_1_f_res_213712;
    float arg_213741 = defunc_1_f_res_213534 * arg_213726;
    float arg_213750 = defunc_1_f_res_213530 * arg_213726;
    float defunc_1_f_res_213755 = arg_213726 * arg_213726;
    float defunc_0_f_res_213760 = arg_213726 / defunc_1_f_res_213755;
    float defunc_0_f_res_213761 = arg_213741 / defunc_1_f_res_213755;
    float defunc_0_f_res_213765 = arg_213750 / defunc_1_f_res_213755;
    int64_t binop_y_234765 = (int64_t) 8 * conc_tmp_213629;
    int64_t bytes_234766 = smax64((int64_t) 0, binop_y_234765);
    
    if (mem_234767_cached_sizze_236224 < bytes_234766) {
        err = lexical_realloc(ctx, &mem_234767, &mem_234767_cached_sizze_236224, bytes_234766);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234770_cached_sizze_236225 < bytes_234766) {
        err = lexical_realloc(ctx, &mem_234770, &mem_234770_cached_sizze_236225, bytes_234766);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_233648;
    int64_t scanacc_233642 = (int64_t) 0;
    
    for (int64_t i_233645 = 0; i_233645 < conc_tmp_213629; i_233645++) {
        bool index_concat_cmp_234364 = sle64(conc_tmp_213628, i_233645);
        int64_t index_concat_branch_234372;
        
        if (index_concat_cmp_234364 == 1) {
            int64_t index_concat_i_234365 = sub64(i_233645, conc_tmp_213628);
            int64_t new_index_234479 = squot64(index_concat_i_234365, ixfun_arg_234738);
            int64_t binop_y_234483 = new_index_234479 * ixfun_arg_234738;
            int64_t binop_x_234484 = index_concat_i_234365 - binop_y_234483;
            int64_t new_index_234485 = squot64(binop_x_234484, defunc_0_f_res_213564);
            int64_t binop_y_234497 = defunc_0_f_res_213564 * new_index_234485;
            int64_t new_index_234498 = binop_x_234484 - binop_y_234497;
            int64_t index_concat_234366 = ((int64_t *) mem_234718)[new_index_234479 * ixfun_arg_234738 + new_index_234485 * defunc_0_f_res_213564 + new_index_234498];
            
            index_concat_branch_234372 = index_concat_234366;
        } else {
            bool index_concat_cmp_234367 = sle64(distance_213623, i_233645);
            int64_t index_concat_branch_234371;
            
            if (index_concat_cmp_234367 == 1) {
                int64_t index_concat_i_234368 = sub64(i_233645, distance_213623);
                int64_t new_index_234499 = squot64(index_concat_i_234368, defunc_0_f_res_213563);
                int64_t binop_y_234501 = defunc_0_f_res_213563 * new_index_234499;
                int64_t new_index_234502 = index_concat_i_234368 - binop_y_234501;
                int64_t index_concat_234369 = ((int64_t *) mem_234713)[new_index_234499 * defunc_0_f_res_213563 + new_index_234502];
                
                index_concat_branch_234371 = index_concat_234369;
            } else {
                int64_t index_primexp_234504 = add64((int64_t) 1, i_233645);
                
                index_concat_branch_234371 = index_primexp_234504;
            }
            index_concat_branch_234372 = index_concat_branch_234371;
        }
        
        int64_t index_concat_branch_234361;
        
        if (index_concat_cmp_234364 == 1) {
            int64_t index_concat_i_234354 = sub64(i_233645, conc_tmp_213628);
            int64_t binop_x_234454 = squot64(index_concat_i_234354, ixfun_arg_234738);
            int64_t binop_y_234456 = binop_x_234454 * ixfun_arg_234738;
            int64_t binop_x_234457 = index_concat_i_234354 - binop_y_234456;
            int64_t new_index_234458 = squot64(binop_x_234457, defunc_0_f_res_213564);
            int64_t binop_y_234470 = defunc_0_f_res_213564 * new_index_234458;
            int64_t new_index_234471 = binop_x_234457 - binop_y_234470;
            int64_t index_concat_234355 = ((int64_t *) mem_234690)[new_index_234458 * defunc_0_f_res_213564 + new_index_234471];
            
            index_concat_branch_234361 = index_concat_234355;
        } else {
            bool index_concat_cmp_234356 = sle64(distance_213623, i_233645);
            int64_t index_concat_branch_234360;
            
            if (index_concat_cmp_234356 == 1) {
                int64_t index_concat_i_234357 = sub64(i_233645, distance_213623);
                int64_t binop_x_234473 = squot64(index_concat_i_234357, defunc_0_f_res_213563);
                int64_t binop_y_234474 = defunc_0_f_res_213563 * binop_x_234473;
                int64_t new_index_234475 = index_concat_i_234357 - binop_y_234474;
                int64_t index_primexp_234477 = add64((int64_t) 1, new_index_234475);
                
                index_concat_branch_234360 = index_primexp_234477;
            } else {
                index_concat_branch_234360 = (int64_t) 0;
            }
            index_concat_branch_234361 = index_concat_branch_234360;
        }
        
        int64_t index_concat_branch_234350;
        
        if (index_concat_cmp_234364 == 1) {
            int64_t index_concat_i_234347 = sub64(i_233645, conc_tmp_213628);
            int64_t binop_x_234446 = squot64(index_concat_i_234347, defunc_0_f_res_213564);
            int64_t binop_y_234447 = defunc_0_f_res_213564 * binop_x_234446;
            int64_t new_index_234448 = index_concat_i_234347 - binop_y_234447;
            int64_t index_primexp_234450 = add64((int64_t) 1, new_index_234448);
            
            index_concat_branch_234350 = index_primexp_234450;
        } else {
            index_concat_branch_234350 = (int64_t) 0;
        }
        
        float defunc_0_f_res_216093 = sitofp_i64_f32(index_concat_branch_234372);
        float defunc_0_f_res_216094 = sitofp_i64_f32(index_concat_branch_234361);
        float defunc_0_f_res_216095 = sitofp_i64_f32(index_concat_branch_234350);
        float defunc_1_f_res_216096 = defunc_1_f_res_213526 * defunc_0_f_res_216093;
        float defunc_1_f_res_216097 = defunc_1_f_res_213530 * defunc_0_f_res_216094;
        float defunc_1_f_res_216098 = defunc_1_f_res_213534 * defunc_0_f_res_216095;
        float defunc_1_f_res_216099 = defunc_1_f_res_216097 - defunc_0_f_res_213638;
        float defunc_1_f_res_216100 = defunc_0_f_res_213682 * defunc_1_f_res_216098;
        float defunc_1_f_res_216101 = defunc_0_f_res_213677 * defunc_1_f_res_216096;
        float defunc_1_f_res_216102 = defunc_0_f_res_213681 * defunc_1_f_res_216099;
        bool cond_216103 = -1.0F < defunc_1_f_res_216100;
        bool cond_t_res_216104 = defunc_1_f_res_216100 < 1.0F;
        bool x_216105 = cond_216103 && cond_t_res_216104;
        bool cond_t_res_216106 = -1.0F < defunc_1_f_res_216101;
        bool x_216107 = x_216105 && cond_t_res_216106;
        bool cond_t_res_216108 = defunc_1_f_res_216101 < 1.0F;
        bool x_216109 = x_216107 && cond_t_res_216108;
        float planeDD_res_216110;
        
        if (x_216109 == 1) {
            float arg_231382 = defunc_1_f_res_216102 * defunc_1_f_res_216102;
            float defunc_1_f_res_231383 = arg_213647 * arg_213647;
            float planeDD_res_t_res_231384 = arg_231382 * defunc_1_f_res_231383;
            
            planeDD_res_216110 = planeDD_res_t_res_231384;
        } else {
            planeDD_res_216110 = INFINITY;
        }
        
        float defunc_1_f_res_216114 = defunc_1_f_res_216097 - defunc_1_f_res_213530;
        float defunc_1_f_res_216115 = defunc_0_f_res_213681 * defunc_1_f_res_216114;
        float planeDD_res_216116;
        
        if (x_216109 == 1) {
            float arg_231385 = defunc_1_f_res_216115 * defunc_1_f_res_216115;
            float defunc_1_f_res_231386 = arg_213647 * arg_213647;
            float planeDD_res_t_res_231387 = arg_231385 * defunc_1_f_res_231386;
            
            planeDD_res_216116 = planeDD_res_t_res_231387;
        } else {
            planeDD_res_216116 = INFINITY;
        }
        
        float defunc_1_f_res_216120 = defunc_1_f_res_216098 - defunc_0_f_res_213642;
        float defunc_1_f_res_216121 = defunc_0_f_res_213717 * defunc_1_f_res_216096;
        float defunc_1_f_res_216122 = defunc_0_f_res_213721 * defunc_1_f_res_216097;
        float defunc_1_f_res_216123 = defunc_0_f_res_213725 * defunc_1_f_res_216120;
        bool cond_216124 = -1.0F < defunc_1_f_res_216121;
        bool cond_t_res_216125 = defunc_1_f_res_216121 < 1.0F;
        bool x_216126 = cond_216124 && cond_t_res_216125;
        bool cond_t_res_216127 = -1.0F < defunc_1_f_res_216122;
        bool x_216128 = x_216126 && cond_t_res_216127;
        bool cond_t_res_216129 = defunc_1_f_res_216122 < 1.0F;
        bool x_216130 = x_216128 && cond_t_res_216129;
        float planeDD_res_216131;
        
        if (x_216130 == 1) {
            float arg_231388 = defunc_1_f_res_216123 * defunc_1_f_res_216123;
            float defunc_1_f_res_231389 = arg_213691 * arg_213691;
            float planeDD_res_t_res_231390 = arg_231388 * defunc_1_f_res_231389;
            
            planeDD_res_216131 = planeDD_res_t_res_231390;
        } else {
            planeDD_res_216131 = INFINITY;
        }
        
        float defunc_1_f_res_216135 = defunc_1_f_res_216098 - defunc_1_f_res_213534;
        float defunc_1_f_res_216136 = defunc_0_f_res_213725 * defunc_1_f_res_216135;
        float planeDD_res_216137;
        
        if (x_216130 == 1) {
            float arg_231391 = defunc_1_f_res_216136 * defunc_1_f_res_216136;
            float defunc_1_f_res_231392 = arg_213691 * arg_213691;
            float planeDD_res_t_res_231393 = arg_231391 * defunc_1_f_res_231392;
            
            planeDD_res_216137 = planeDD_res_t_res_231393;
        } else {
            planeDD_res_216137 = INFINITY;
        }
        
        float defunc_1_f_res_216141 = defunc_1_f_res_216096 - defunc_0_f_res_213634;
        float defunc_1_f_res_216142 = defunc_0_f_res_213761 * defunc_1_f_res_216097;
        float defunc_1_f_res_216143 = defunc_0_f_res_213765 * defunc_1_f_res_216098;
        float defunc_1_f_res_216144 = defunc_0_f_res_213760 * defunc_1_f_res_216141;
        bool cond_216145 = -1.0F < defunc_1_f_res_216142;
        bool cond_t_res_216146 = defunc_1_f_res_216142 < 1.0F;
        bool x_216147 = cond_216145 && cond_t_res_216146;
        bool cond_t_res_216148 = -1.0F < defunc_1_f_res_216143;
        bool x_216149 = x_216147 && cond_t_res_216148;
        bool cond_t_res_216150 = defunc_1_f_res_216143 < 1.0F;
        bool x_216151 = x_216149 && cond_t_res_216150;
        float planeDD_res_216152;
        
        if (x_216151 == 1) {
            float arg_231394 = defunc_1_f_res_216144 * defunc_1_f_res_216144;
            float planeDD_res_t_res_231396 = defunc_1_f_res_213755 * arg_231394;
            
            planeDD_res_216152 = planeDD_res_t_res_231396;
        } else {
            planeDD_res_216152 = INFINITY;
        }
        
        float defunc_1_f_res_216156 = defunc_1_f_res_216096 - defunc_1_f_res_213526;
        float defunc_1_f_res_216157 = defunc_0_f_res_213760 * defunc_1_f_res_216156;
        float planeDD_res_216158;
        
        if (x_216151 == 1) {
            float arg_231397 = defunc_1_f_res_216157 * defunc_1_f_res_216157;
            float planeDD_res_t_res_231399 = defunc_1_f_res_213755 * arg_231397;
            
            planeDD_res_216158 = planeDD_res_t_res_231399;
        } else {
            planeDD_res_216158 = INFINITY;
        }
        
        float defunc_1_f_res_216162 = defunc_1_f_res_213526 * defunc_1_f_res_216096;
        float a_216163 = defunc_1_f_res_216162 / defunc_1_f_res_213535;
        bool cond_216164 = -1.0F < a_216163;
        bool cond_t_res_216165 = a_216163 < 1.0F;
        bool x_216166 = cond_216164 && cond_t_res_216165;
        float edgeDD_res_216167;
        
        if (x_216166 == 1) {
            float defunc_0_f_res_231400 = defunc_1_f_res_213526 * a_216163;
            float defunc_1_f_res_231401 = defunc_1_f_res_216096 - defunc_0_f_res_231400;
            float defunc_1_f_res_231402 = defunc_1_f_res_231401 * defunc_1_f_res_231401;
            float defunc_1_f_res_231403 = defunc_1_f_res_216099 * defunc_1_f_res_216099;
            float defunc_1_f_res_231404 = defunc_1_f_res_216120 * defunc_1_f_res_216120;
            float defunc_1_f_res_231405 = defunc_1_f_res_231403 + defunc_1_f_res_231404;
            float defunc_0_f_res_231406 = defunc_1_f_res_231402 + defunc_1_f_res_231405;
            
            edgeDD_res_216167 = defunc_0_f_res_231406;
        } else {
            edgeDD_res_216167 = INFINITY;
        }
        
        float edgeDD_res_216175;
        
        if (x_216166 == 1) {
            float defunc_0_f_res_231407 = defunc_1_f_res_213526 * a_216163;
            float defunc_1_f_res_231408 = defunc_1_f_res_216096 - defunc_0_f_res_231407;
            float defunc_1_f_res_231409 = defunc_1_f_res_231408 * defunc_1_f_res_231408;
            float defunc_1_f_res_231410 = defunc_1_f_res_216114 * defunc_1_f_res_216114;
            float defunc_1_f_res_231411 = defunc_1_f_res_216120 * defunc_1_f_res_216120;
            float defunc_1_f_res_231412 = defunc_1_f_res_231410 + defunc_1_f_res_231411;
            float defunc_0_f_res_231413 = defunc_1_f_res_231409 + defunc_1_f_res_231412;
            
            edgeDD_res_216175 = defunc_0_f_res_231413;
        } else {
            edgeDD_res_216175 = INFINITY;
        }
        
        float edgeDD_res_216183;
        
        if (x_216166 == 1) {
            float defunc_0_f_res_231414 = defunc_1_f_res_213526 * a_216163;
            float defunc_1_f_res_231415 = defunc_1_f_res_216096 - defunc_0_f_res_231414;
            float defunc_1_f_res_231416 = defunc_1_f_res_231415 * defunc_1_f_res_231415;
            float defunc_1_f_res_231417 = defunc_1_f_res_216099 * defunc_1_f_res_216099;
            float defunc_1_f_res_231418 = defunc_1_f_res_216135 * defunc_1_f_res_216135;
            float defunc_1_f_res_231419 = defunc_1_f_res_231417 + defunc_1_f_res_231418;
            float defunc_0_f_res_231420 = defunc_1_f_res_231416 + defunc_1_f_res_231419;
            
            edgeDD_res_216183 = defunc_0_f_res_231420;
        } else {
            edgeDD_res_216183 = INFINITY;
        }
        
        float edgeDD_res_216191;
        
        if (x_216166 == 1) {
            float defunc_0_f_res_231421 = defunc_1_f_res_213526 * a_216163;
            float defunc_1_f_res_231422 = defunc_1_f_res_216096 - defunc_0_f_res_231421;
            float defunc_1_f_res_231423 = defunc_1_f_res_231422 * defunc_1_f_res_231422;
            float defunc_1_f_res_231424 = defunc_1_f_res_216114 * defunc_1_f_res_216114;
            float defunc_1_f_res_231425 = defunc_1_f_res_216135 * defunc_1_f_res_216135;
            float defunc_1_f_res_231426 = defunc_1_f_res_231424 + defunc_1_f_res_231425;
            float defunc_0_f_res_231427 = defunc_1_f_res_231423 + defunc_1_f_res_231426;
            
            edgeDD_res_216191 = defunc_0_f_res_231427;
        } else {
            edgeDD_res_216191 = INFINITY;
        }
        
        float defunc_1_f_res_216199 = defunc_1_f_res_213530 * defunc_1_f_res_216097;
        float a_216200 = defunc_1_f_res_216199 / defunc_1_f_res_213542;
        bool cond_216201 = -1.0F < a_216200;
        bool cond_t_res_216202 = a_216200 < 1.0F;
        bool x_216203 = cond_216201 && cond_t_res_216202;
        float edgeDD_res_216204;
        
        if (x_216203 == 1) {
            float defunc_0_f_res_231428 = defunc_1_f_res_213530 * a_216200;
            float defunc_1_f_res_231429 = defunc_1_f_res_216097 - defunc_0_f_res_231428;
            float defunc_1_f_res_231430 = defunc_1_f_res_216141 * defunc_1_f_res_216141;
            float defunc_1_f_res_231431 = defunc_1_f_res_231429 * defunc_1_f_res_231429;
            float defunc_1_f_res_231432 = defunc_1_f_res_216120 * defunc_1_f_res_216120;
            float defunc_1_f_res_231433 = defunc_1_f_res_231431 + defunc_1_f_res_231432;
            float defunc_0_f_res_231434 = defunc_1_f_res_231430 + defunc_1_f_res_231433;
            
            edgeDD_res_216204 = defunc_0_f_res_231434;
        } else {
            edgeDD_res_216204 = INFINITY;
        }
        
        float edgeDD_res_216212;
        
        if (x_216203 == 1) {
            float defunc_0_f_res_231435 = defunc_1_f_res_213530 * a_216200;
            float defunc_1_f_res_231436 = defunc_1_f_res_216097 - defunc_0_f_res_231435;
            float defunc_1_f_res_231437 = defunc_1_f_res_216141 * defunc_1_f_res_216141;
            float defunc_1_f_res_231438 = defunc_1_f_res_231436 * defunc_1_f_res_231436;
            float defunc_1_f_res_231439 = defunc_1_f_res_216135 * defunc_1_f_res_216135;
            float defunc_1_f_res_231440 = defunc_1_f_res_231438 + defunc_1_f_res_231439;
            float defunc_0_f_res_231441 = defunc_1_f_res_231437 + defunc_1_f_res_231440;
            
            edgeDD_res_216212 = defunc_0_f_res_231441;
        } else {
            edgeDD_res_216212 = INFINITY;
        }
        
        float edgeDD_res_216220;
        
        if (x_216203 == 1) {
            float defunc_0_f_res_231442 = defunc_1_f_res_213530 * a_216200;
            float defunc_1_f_res_231443 = defunc_1_f_res_216097 - defunc_0_f_res_231442;
            float defunc_1_f_res_231444 = defunc_1_f_res_216156 * defunc_1_f_res_216156;
            float defunc_1_f_res_231445 = defunc_1_f_res_231443 * defunc_1_f_res_231443;
            float defunc_1_f_res_231446 = defunc_1_f_res_216120 * defunc_1_f_res_216120;
            float defunc_1_f_res_231447 = defunc_1_f_res_231445 + defunc_1_f_res_231446;
            float defunc_0_f_res_231448 = defunc_1_f_res_231444 + defunc_1_f_res_231447;
            
            edgeDD_res_216220 = defunc_0_f_res_231448;
        } else {
            edgeDD_res_216220 = INFINITY;
        }
        
        float edgeDD_res_216228;
        
        if (x_216203 == 1) {
            float defunc_0_f_res_231449 = defunc_1_f_res_213530 * a_216200;
            float defunc_1_f_res_231450 = defunc_1_f_res_216097 - defunc_0_f_res_231449;
            float defunc_1_f_res_231451 = defunc_1_f_res_216156 * defunc_1_f_res_216156;
            float defunc_1_f_res_231452 = defunc_1_f_res_231450 * defunc_1_f_res_231450;
            float defunc_1_f_res_231453 = defunc_1_f_res_216135 * defunc_1_f_res_216135;
            float defunc_1_f_res_231454 = defunc_1_f_res_231452 + defunc_1_f_res_231453;
            float defunc_0_f_res_231455 = defunc_1_f_res_231451 + defunc_1_f_res_231454;
            
            edgeDD_res_216228 = defunc_0_f_res_231455;
        } else {
            edgeDD_res_216228 = INFINITY;
        }
        
        float defunc_1_f_res_216236 = defunc_1_f_res_213534 * defunc_1_f_res_216098;
        float a_216237 = defunc_1_f_res_216236 / defunc_1_f_res_213549;
        bool cond_216238 = -1.0F < a_216237;
        bool cond_t_res_216239 = a_216237 < 1.0F;
        bool x_216240 = cond_216238 && cond_t_res_216239;
        float edgeDD_res_216241;
        
        if (x_216240 == 1) {
            float defunc_0_f_res_231456 = defunc_1_f_res_213534 * a_216237;
            float defunc_1_f_res_231457 = defunc_1_f_res_216098 - defunc_0_f_res_231456;
            float defunc_1_f_res_231458 = defunc_1_f_res_216141 * defunc_1_f_res_216141;
            float defunc_1_f_res_231459 = defunc_1_f_res_216099 * defunc_1_f_res_216099;
            float defunc_1_f_res_231460 = defunc_1_f_res_231457 * defunc_1_f_res_231457;
            float defunc_1_f_res_231461 = defunc_1_f_res_231459 + defunc_1_f_res_231460;
            float defunc_0_f_res_231462 = defunc_1_f_res_231458 + defunc_1_f_res_231461;
            
            edgeDD_res_216241 = defunc_0_f_res_231462;
        } else {
            edgeDD_res_216241 = INFINITY;
        }
        
        float edgeDD_res_216249;
        
        if (x_216240 == 1) {
            float defunc_0_f_res_231463 = defunc_1_f_res_213534 * a_216237;
            float defunc_1_f_res_231464 = defunc_1_f_res_216098 - defunc_0_f_res_231463;
            float defunc_1_f_res_231465 = defunc_1_f_res_216156 * defunc_1_f_res_216156;
            float defunc_1_f_res_231466 = defunc_1_f_res_216099 * defunc_1_f_res_216099;
            float defunc_1_f_res_231467 = defunc_1_f_res_231464 * defunc_1_f_res_231464;
            float defunc_1_f_res_231468 = defunc_1_f_res_231466 + defunc_1_f_res_231467;
            float defunc_0_f_res_231469 = defunc_1_f_res_231465 + defunc_1_f_res_231468;
            
            edgeDD_res_216249 = defunc_0_f_res_231469;
        } else {
            edgeDD_res_216249 = INFINITY;
        }
        
        float edgeDD_res_216257;
        
        if (x_216240 == 1) {
            float defunc_0_f_res_231470 = defunc_1_f_res_213534 * a_216237;
            float defunc_1_f_res_231471 = defunc_1_f_res_216098 - defunc_0_f_res_231470;
            float defunc_1_f_res_231472 = defunc_1_f_res_216141 * defunc_1_f_res_216141;
            float defunc_1_f_res_231473 = defunc_1_f_res_216114 * defunc_1_f_res_216114;
            float defunc_1_f_res_231474 = defunc_1_f_res_231471 * defunc_1_f_res_231471;
            float defunc_1_f_res_231475 = defunc_1_f_res_231473 + defunc_1_f_res_231474;
            float defunc_0_f_res_231476 = defunc_1_f_res_231472 + defunc_1_f_res_231475;
            
            edgeDD_res_216257 = defunc_0_f_res_231476;
        } else {
            edgeDD_res_216257 = INFINITY;
        }
        
        float edgeDD_res_216265;
        
        if (x_216240 == 1) {
            float defunc_0_f_res_231477 = defunc_1_f_res_213534 * a_216237;
            float defunc_1_f_res_231478 = defunc_1_f_res_216098 - defunc_0_f_res_231477;
            float defunc_1_f_res_231479 = defunc_1_f_res_216156 * defunc_1_f_res_216156;
            float defunc_1_f_res_231480 = defunc_1_f_res_216114 * defunc_1_f_res_216114;
            float defunc_1_f_res_231481 = defunc_1_f_res_231478 * defunc_1_f_res_231478;
            float defunc_1_f_res_231482 = defunc_1_f_res_231480 + defunc_1_f_res_231481;
            float defunc_0_f_res_231483 = defunc_1_f_res_231479 + defunc_1_f_res_231482;
            
            edgeDD_res_216265 = defunc_0_f_res_231483;
        } else {
            edgeDD_res_216265 = INFINITY;
        }
        
        float defunc_1_f_res_216273 = defunc_1_f_res_216141 * defunc_1_f_res_216141;
        float defunc_1_f_res_216274 = defunc_1_f_res_216099 * defunc_1_f_res_216099;
        float defunc_1_f_res_216275 = defunc_1_f_res_216120 * defunc_1_f_res_216120;
        float defunc_1_f_res_216276 = defunc_1_f_res_216274 + defunc_1_f_res_216275;
        float defunc_0_f_res_216277 = defunc_1_f_res_216273 + defunc_1_f_res_216276;
        float defunc_1_f_res_216278 = defunc_1_f_res_216156 * defunc_1_f_res_216156;
        float defunc_0_f_res_216279 = defunc_1_f_res_216276 + defunc_1_f_res_216278;
        float defunc_1_f_res_216280 = defunc_1_f_res_216114 * defunc_1_f_res_216114;
        float defunc_1_f_res_216281 = defunc_1_f_res_216275 + defunc_1_f_res_216280;
        float defunc_0_f_res_216282 = defunc_1_f_res_216273 + defunc_1_f_res_216281;
        float defunc_0_f_res_216283 = defunc_1_f_res_216278 + defunc_1_f_res_216281;
        float defunc_1_f_res_216284 = defunc_1_f_res_216135 * defunc_1_f_res_216135;
        float defunc_1_f_res_216285 = defunc_1_f_res_216274 + defunc_1_f_res_216284;
        float defunc_0_f_res_216286 = defunc_1_f_res_216273 + defunc_1_f_res_216285;
        float defunc_0_f_res_216287 = defunc_1_f_res_216278 + defunc_1_f_res_216285;
        float defunc_1_f_res_216288 = defunc_1_f_res_216280 + defunc_1_f_res_216284;
        float defunc_0_f_res_216289 = defunc_1_f_res_216273 + defunc_1_f_res_216288;
        float defunc_0_f_res_216290 = defunc_1_f_res_216278 + defunc_1_f_res_216288;
        float min_res_216291 = fmin32(INFINITY, defunc_0_f_res_216290);
        float min_res_216292 = fmin32(defunc_0_f_res_216289, min_res_216291);
        float min_res_216293 = fmin32(defunc_0_f_res_216287, min_res_216292);
        float min_res_216294 = fmin32(defunc_0_f_res_216286, min_res_216293);
        float min_res_216295 = fmin32(defunc_0_f_res_216283, min_res_216294);
        float min_res_216296 = fmin32(defunc_0_f_res_216282, min_res_216295);
        float min_res_216297 = fmin32(defunc_0_f_res_216279, min_res_216296);
        float min_res_216298 = fmin32(defunc_0_f_res_216277, min_res_216297);
        float min_res_216299 = fmin32(edgeDD_res_216265, min_res_216298);
        float min_res_216300 = fmin32(edgeDD_res_216257, min_res_216299);
        float min_res_216301 = fmin32(edgeDD_res_216249, min_res_216300);
        float min_res_216302 = fmin32(edgeDD_res_216241, min_res_216301);
        float min_res_216303 = fmin32(edgeDD_res_216228, min_res_216302);
        float min_res_216304 = fmin32(edgeDD_res_216220, min_res_216303);
        float min_res_216305 = fmin32(edgeDD_res_216212, min_res_216304);
        float min_res_216306 = fmin32(edgeDD_res_216204, min_res_216305);
        float min_res_216307 = fmin32(edgeDD_res_216191, min_res_216306);
        float min_res_216308 = fmin32(edgeDD_res_216183, min_res_216307);
        float min_res_216309 = fmin32(edgeDD_res_216175, min_res_216308);
        float min_res_216310 = fmin32(edgeDD_res_216167, min_res_216309);
        float min_res_216311 = fmin32(planeDD_res_216158, min_res_216310);
        float min_res_216312 = fmin32(planeDD_res_216152, min_res_216311);
        float min_res_216313 = fmin32(planeDD_res_216137, min_res_216312);
        float min_res_216314 = fmin32(planeDD_res_216131, min_res_216313);
        float min_res_216315 = fmin32(planeDD_res_216116, min_res_216314);
        float min_res_216316 = fmin32(planeDD_res_216110, min_res_216315);
        bool not_arg_216317 = arg_213643 < min_res_216316;
        int64_t defunc_1_lifted_lambda_res_216318 = btoi_bool_i64(not_arg_216317);
        bool is_i_216319 = defunc_1_lifted_lambda_res_216318 == (int64_t) 0;
        bool cond_neg_216320 = !is_i_216319;
        int64_t part_res_216321 = btoi_bool_i64(cond_neg_216320);
        int64_t part_res_216322 = btoi_bool_i64(is_i_216319);
        int64_t zz_214375 = part_res_216322 + scanacc_233642;
        
        ((int64_t *) mem_234767)[i_233645] = zz_214375;
        ((int64_t *) mem_234770)[i_233645] = part_res_216321;
        
        int64_t scanacc_tmp_236002 = zz_214375;
        
        scanacc_233642 = scanacc_tmp_236002;
    }
    discard_233648 = scanacc_233642;
    
    int64_t last_index_214377 = conc_tmp_213629 - (int64_t) 1;
    bool is_empty_214378 = conc_tmp_213629 == (int64_t) 0;
    bool x_214379 = !is_empty_214378;
    int64_t last_offset_214380;
    
    if (x_214379 == 1) {
        int64_t x_231484 = ((int64_t *) mem_234767)[last_index_214377];
        
        last_offset_214380 = x_231484;
    } else {
        last_offset_214380 = (int64_t) 0;
    }
    
    int64_t partition_sizze_214382;
    
    if (is_empty_214378 == 1) {
        partition_sizze_214382 = (int64_t) 0;
    } else {
        partition_sizze_214382 = last_offset_214380;
    }
    if (mem_234793_cached_sizze_236226 < bytes_234766) {
        err = lexical_realloc(ctx, &mem_234793, &mem_234793_cached_sizze_236226, bytes_234766);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234796_cached_sizze_236227 < bytes_234766) {
        err = lexical_realloc(ctx, &mem_234796, &mem_234796_cached_sizze_236227, bytes_234766);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234799_cached_sizze_236228 < bytes_234766) {
        err = lexical_realloc(ctx, &mem_234799, &mem_234799_cached_sizze_236228, bytes_234766);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t write_iter_233649 = 0; write_iter_233649 < conc_tmp_213629; write_iter_233649++) {
        int64_t write_iv_233653 = ((int64_t *) mem_234770)[write_iter_233649];
        int64_t write_iv_233654 = ((int64_t *) mem_234767)[write_iter_233649];
        bool index_concat_cmp_234336 = sle64(conc_tmp_213628, write_iter_233649);
        int64_t index_concat_branch_234344;
        
        if (index_concat_cmp_234336 == 1) {
            int64_t index_concat_i_234337 = sub64(write_iter_233649, conc_tmp_213628);
            int64_t new_index_234419 = squot64(index_concat_i_234337, ixfun_arg_234738);
            int64_t binop_y_234423 = new_index_234419 * ixfun_arg_234738;
            int64_t binop_x_234424 = index_concat_i_234337 - binop_y_234423;
            int64_t new_index_234425 = squot64(binop_x_234424, defunc_0_f_res_213564);
            int64_t binop_y_234437 = defunc_0_f_res_213564 * new_index_234425;
            int64_t new_index_234438 = binop_x_234424 - binop_y_234437;
            int64_t index_concat_234338 = ((int64_t *) mem_234718)[new_index_234419 * ixfun_arg_234738 + new_index_234425 * defunc_0_f_res_213564 + new_index_234438];
            
            index_concat_branch_234344 = index_concat_234338;
        } else {
            bool index_concat_cmp_234339 = sle64(distance_213623, write_iter_233649);
            int64_t index_concat_branch_234343;
            
            if (index_concat_cmp_234339 == 1) {
                int64_t index_concat_i_234340 = sub64(write_iter_233649, distance_213623);
                int64_t new_index_234439 = squot64(index_concat_i_234340, defunc_0_f_res_213563);
                int64_t binop_y_234441 = defunc_0_f_res_213563 * new_index_234439;
                int64_t new_index_234442 = index_concat_i_234340 - binop_y_234441;
                int64_t index_concat_234341 = ((int64_t *) mem_234713)[new_index_234439 * defunc_0_f_res_213563 + new_index_234442];
                
                index_concat_branch_234343 = index_concat_234341;
            } else {
                int64_t index_primexp_234444 = add64((int64_t) 1, write_iter_233649);
                
                index_concat_branch_234343 = index_primexp_234444;
            }
            index_concat_branch_234344 = index_concat_branch_234343;
        }
        
        int64_t index_concat_branch_234333;
        
        if (index_concat_cmp_234336 == 1) {
            int64_t index_concat_i_234326 = sub64(write_iter_233649, conc_tmp_213628);
            int64_t binop_x_234394 = squot64(index_concat_i_234326, ixfun_arg_234738);
            int64_t binop_y_234396 = binop_x_234394 * ixfun_arg_234738;
            int64_t binop_x_234397 = index_concat_i_234326 - binop_y_234396;
            int64_t new_index_234398 = squot64(binop_x_234397, defunc_0_f_res_213564);
            int64_t binop_y_234410 = defunc_0_f_res_213564 * new_index_234398;
            int64_t new_index_234411 = binop_x_234397 - binop_y_234410;
            int64_t index_concat_234327 = ((int64_t *) mem_234690)[new_index_234398 * defunc_0_f_res_213564 + new_index_234411];
            
            index_concat_branch_234333 = index_concat_234327;
        } else {
            bool index_concat_cmp_234328 = sle64(distance_213623, write_iter_233649);
            int64_t index_concat_branch_234332;
            
            if (index_concat_cmp_234328 == 1) {
                int64_t index_concat_i_234329 = sub64(write_iter_233649, distance_213623);
                int64_t binop_x_234413 = squot64(index_concat_i_234329, defunc_0_f_res_213563);
                int64_t binop_y_234414 = defunc_0_f_res_213563 * binop_x_234413;
                int64_t new_index_234415 = index_concat_i_234329 - binop_y_234414;
                int64_t index_primexp_234417 = add64((int64_t) 1, new_index_234415);
                
                index_concat_branch_234332 = index_primexp_234417;
            } else {
                index_concat_branch_234332 = (int64_t) 0;
            }
            index_concat_branch_234333 = index_concat_branch_234332;
        }
        
        int64_t index_concat_branch_234322;
        
        if (index_concat_cmp_234336 == 1) {
            int64_t index_concat_i_234319 = sub64(write_iter_233649, conc_tmp_213628);
            int64_t binop_x_234386 = squot64(index_concat_i_234319, defunc_0_f_res_213564);
            int64_t binop_y_234387 = defunc_0_f_res_213564 * binop_x_234386;
            int64_t new_index_234388 = index_concat_i_234319 - binop_y_234387;
            int64_t index_primexp_234390 = add64((int64_t) 1, new_index_234388);
            
            index_concat_branch_234322 = index_primexp_234390;
        } else {
            index_concat_branch_234322 = (int64_t) 0;
        }
        
        bool is_this_one_214394 = write_iv_233653 == (int64_t) 0;
        int64_t this_offset_214395 = (int64_t) -1 + write_iv_233654;
        int64_t total_res_214396;
        
        if (is_this_one_214394 == 1) {
            total_res_214396 = this_offset_214395;
        } else {
            total_res_214396 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, total_res_214396) && slt64(total_res_214396, conc_tmp_213629)) {
            ((int64_t *) mem_234793)[total_res_214396] = index_concat_branch_234344;
        }
        if (sle64((int64_t) 0, total_res_214396) && slt64(total_res_214396, conc_tmp_213629)) {
            ((int64_t *) mem_234796)[total_res_214396] = index_concat_branch_234333;
        }
        if (sle64((int64_t) 0, total_res_214396) && slt64(total_res_214396, conc_tmp_213629)) {
            ((int64_t *) mem_234799)[total_res_214396] = index_concat_branch_234322;
        }
    }
    
    bool eq_x_zz_214397 = (int64_t) 0 == last_offset_214380;
    bool p_and_eq_x_y_214398 = x_214379 && eq_x_zz_214397;
    bool empty_slice_214399 = is_empty_214378 || p_and_eq_x_y_214398;
    int64_t m_214400 = sub64(partition_sizze_214382, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_214401 = sle64((int64_t) 0, m_214400);
    bool i_p_m_t_s_leq_w_214402 = slt64(m_214400, conc_tmp_213629);
    bool i_lte_j_214403 = sle64((int64_t) 0, partition_sizze_214382);
    bool y_214404 = zzero_leq_i_p_m_t_s_214401 && i_p_m_t_s_leq_w_214402;
    bool y_214405 = i_lte_j_214403 && y_214404;
    bool ok_or_empty_214406 = empty_slice_214399 || y_214405;
    bool index_certs_214407;
    
    if (!ok_or_empty_214406) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) partition_sizze_214382, "] out of bounds for array of shape [", (long long) conc_tmp_213629, "].", "-> #0  /prelude/soacs.fut:173:6-16\n   #1  /prelude/functional.fut:9:42-44\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_234830 = (int64_t) 4 * partition_sizze_214382;
    int64_t bytes_234831 = smax64((int64_t) 0, binop_y_234830);
    
    if (mem_234832_cached_sizze_236229 < bytes_234831) {
        err = lexical_realloc(ctx, &mem_234832, &mem_234832_cached_sizze_236229, bytes_234831);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234835_cached_sizze_236230 < bytes_234831) {
        err = lexical_realloc(ctx, &mem_234835, &mem_234835_cached_sizze_236230, bytes_234831);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234838_cached_sizze_236231 < bytes_234831) {
        err = lexical_realloc(ctx, &mem_234838, &mem_234838_cached_sizze_236231, bytes_234831);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233667 = 0; i_233667 < partition_sizze_214382; i_233667++) {
        int64_t x_214414 = ((int64_t *) mem_234793)[i_233667];
        int64_t x_214415 = ((int64_t *) mem_234796)[i_233667];
        int64_t x_214416 = ((int64_t *) mem_234799)[i_233667];
        int32_t defunc_0_f_res_214417 = sext_i64_i32(x_214414);
        int32_t defunc_0_f_res_214418 = sext_i64_i32(x_214415);
        int32_t defunc_0_f_res_214419 = sext_i64_i32(x_214416);
        
        ((int32_t *) mem_234832)[i_233667] = defunc_0_f_res_214417;
        ((int32_t *) mem_234835)[i_233667] = defunc_0_f_res_214418;
        ((int32_t *) mem_234838)[i_233667] = defunc_0_f_res_214419;
    }
    
    int64_t binop_y_234869 = (int64_t) 8 * nz2084U_189276;
    int64_t bytes_234870 = smax64((int64_t) 0, binop_y_234869);
    int32_t defunc_1_f_res_214539 = mul32(defunc_0_f_res_213510, defunc_0_f_res_213519);
    int32_t defunc_0_f_res_214540 = mul32(defunc_0_f_res_213501, defunc_1_f_res_214539);
    int64_t defunc_0_f_res_214541 = sext_i32_i64(defunc_0_f_res_214540);
    int64_t binop_y_234970 = (int64_t) 4 * defunc_0_f_res_214541;
    int64_t bytes_234971 = smax64((int64_t) 0, binop_y_234970);
    
    if (mem_234972_cached_sizze_236236 < bytes_234971) {
        err = lexical_realloc(ctx, &mem_234972, &mem_234972_cached_sizze_236236, bytes_234971);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236011 = 0; i_236011 < defunc_0_f_res_214541; i_236011++) {
        ((int32_t *) mem_234972)[i_236011] = 0;
    }
    for (int64_t iter_233712 = 0; iter_233712 < nz2084U_189276; iter_233712++) {
        int32_t pixel_233714 = ((int32_t *) mem_234637.mem)[iter_233712];
        int64_t defunc_0_f_res_216067 = sext_i32_i64(pixel_233714);
        bool less_than_zzero_233716 = slt64(defunc_0_f_res_216067, (int64_t) 0);
        bool greater_than_sizze_233717 = sle64(defunc_0_f_res_214541, defunc_0_f_res_216067);
        bool outside_bounds_dim_233718 = less_than_zzero_233716 || greater_than_sizze_233717;
        
        if (!(outside_bounds_dim_233718 == 1)) {
            int32_t read_hist_233720 = ((int32_t *) mem_234972)[defunc_0_f_res_216067];
            int32_t defunc_1_f_res_214546 = add32(1, read_hist_233720);
            
            ((int32_t *) mem_234972)[defunc_0_f_res_216067] = defunc_1_f_res_214546;
        }
    }
    if (mem_234985_cached_sizze_236237 < bytes_234971) {
        err = lexical_realloc(ctx, &mem_234985, &mem_234985_cached_sizze_236237, bytes_234971);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234988_cached_sizze_236238 < bytes_234971) {
        err = lexical_realloc(ctx, &mem_234988, &mem_234988_cached_sizze_236238, bytes_234971);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234991_cached_sizze_236239 < bytes_234971) {
        err = lexical_realloc(ctx, &mem_234991, &mem_234991_cached_sizze_236239, bytes_234971);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int32_t inpacc_233549;
    int32_t defunc_2_reduce_res_233550;
    int32_t inpacc_233551;
    int32_t inpacc_216477;
    int32_t inpacc_216478;
    int32_t inpacc_216479;
    
    inpacc_216477 = 0;
    inpacc_216478 = 0;
    inpacc_216479 = 0;
    for (int64_t i_233751 = 0; i_233751 < defunc_0_f_res_214541; i_233751++) {
        int32_t x_234256 = ((int32_t *) mem_234972)[i_233751];
        int32_t defunc_1_op_res_234273 = add32(inpacc_216477, x_234256);
        int32_t defunc_1_op_res_234275 = add32(inpacc_216479, x_234256);
        int32_t arg_234277 = sub32(x_234256, 1);
        int32_t arg_234278 = mul32(x_234256, arg_234277);
        int32_t defunc_0_f_res_234279 = sdiv32(arg_234278, 2);
        int32_t defunc_1_op_res_216518 = add32(inpacc_216478, defunc_0_f_res_234279);
        
        ((int32_t *) mem_234985)[i_233751] = inpacc_216479;
        ((int32_t *) mem_234988)[i_233751] = defunc_0_f_res_234279;
        ((int32_t *) mem_234991)[i_233751] = inpacc_216477;
        
        int32_t inpacc_tmp_236013 = defunc_1_op_res_234273;
        int32_t inpacc_tmp_236014 = defunc_1_op_res_216518;
        int32_t inpacc_tmp_236015 = defunc_1_op_res_234275;
        
        inpacc_216477 = inpacc_tmp_236013;
        inpacc_216478 = inpacc_tmp_236014;
        inpacc_216479 = inpacc_tmp_236015;
    }
    inpacc_233549 = inpacc_216477;
    defunc_2_reduce_res_233550 = inpacc_216478;
    inpacc_233551 = inpacc_216479;
    
    int64_t i32_res_214568 = sext_i32_i64(defunc_2_reduce_res_233550);
    
    if (memblock_alloc(ctx, &mem_235023, (int64_t) 0, "mem_235023")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_235218 = (int64_t) 4 * i32_res_214568;
    int64_t bytes_235219 = smax64((int64_t) 0, binop_y_235218);
    int64_t i32_res_214760 = sext_i32_i64(defunc_0_f_res_213519);
    int64_t i32_res_214761 = sext_i32_i64(defunc_0_f_res_213510);
    int64_t i32_res_214762 = sext_i32_i64(defunc_0_f_res_213501);
    bool bounds_invalid_upwards_214763 = slt64(i32_res_214762, (int64_t) 0);
    bool valid_214764 = !bounds_invalid_upwards_214763;
    bool range_valid_c_214765;
    
    if (!valid_214764) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) i32_res_214762, " is invalid.", "-> #0  /prelude/array.fut:95:3-10\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_214767 = slt64(i32_res_214761, (int64_t) 0);
    bool valid_214768 = !bounds_invalid_upwards_214767;
    bool range_valid_c_214769;
    
    if (!valid_214768) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) i32_res_214761, " is invalid.", "-> #0  /prelude/array.fut:95:3-10\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_214771 = slt64(i32_res_214760, (int64_t) 0);
    bool valid_214772 = !bounds_invalid_upwards_214771;
    bool range_valid_c_214773;
    
    if (!valid_214772) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s", "Range ", (long long) (int64_t) 0, "..", (long long) (int64_t) 1, "..<", (long long) i32_res_214760, " is invalid.", "-> #0  /prelude/array.fut:95:3-10\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_235244 = (int64_t) 4 * i32_res_214760;
    int64_t bytes_235245 = smax64((int64_t) 0, binop_y_235244);
    
    if (mem_235246_cached_sizze_236250 < bytes_235245) {
        err = lexical_realloc(ctx, &mem_235246, &mem_235246_cached_sizze_236250, bytes_235245);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233869 = 0; i_233869 < i32_res_214760; i_233869++) {
        int32_t defunc_0_f_res_214777 = sext_i64_i32(i_233869);
        
        ((int32_t *) mem_235246)[i_233869] = defunc_0_f_res_214777;
    }
    
    int64_t binop_x_235257 = i32_res_214760 * i32_res_214761;
    int64_t binop_y_235258 = (int64_t) 4 * binop_x_235257;
    int64_t bytes_235259 = smax64((int64_t) 0, binop_y_235258);
    
    if (mem_235260_cached_sizze_236251 < bytes_235259) {
        err = lexical_realloc(ctx, &mem_235260, &mem_235260_cached_sizze_236251, bytes_235259);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233873 = 0; i_233873 < i32_res_214761; i_233873++) {
        int32_t defunc_0_f_res_214780 = sext_i64_i32(i_233873);
        
        for (int64_t i_236021 = 0; i_236021 < i32_res_214760; i_236021++) {
            ((int32_t *) mem_235260)[i_233873 * i32_res_214760 + i_236021] = defunc_0_f_res_214780;
        }
    }
    
    bool zzero_214799 = defunc_0_f_res_213519 == 0;
    bool nonzzero_214800 = !zzero_214799;
    bool nonzzero_cert_214801;
    
    if (!nonzzero_214800) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  associations.fut:98:22-27\n   #1  algebra.fut:37:94-102\n   #2  /prelude/functional.fut:46:62-64\n   #3  associations.fut:107:12-30\n   #4  associations.fut:112:8-35\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool zzero_214796 = defunc_0_f_res_213510 == 0;
    bool nonzzero_214797 = !zzero_214796;
    bool nonzzero_cert_214798;
    
    if (!nonzzero_214797) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  associations.fut:98:22-27\n   #1  algebra.fut:37:83-91\n   #2  /prelude/functional.fut:46:62-64\n   #3  associations.fut:107:12-30\n   #4  associations.fut:112:8-35\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool zzero_214793 = defunc_0_f_res_213501 == 0;
    bool nonzzero_214794 = !zzero_214793;
    bool nonzzero_cert_214795;
    
    if (!nonzzero_214794) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  associations.fut:98:22-27\n   #1  algebra.fut:37:72-80\n   #2  /prelude/functional.fut:46:62-64\n   #3  associations.fut:107:12-30\n   #4  associations.fut:112:8-35\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t flat_dim_214787 = i32_res_214761 * i32_res_214762;
    int64_t flat_dim_214789 = i32_res_214760 * flat_dim_214787;
    int64_t binop_y_235282 = (int64_t) 4 * flat_dim_214789;
    int64_t bytes_235283 = smax64((int64_t) 0, binop_y_235282);
    
    if (mem_235284_cached_sizze_236252 < bytes_235283) {
        err = lexical_realloc(ctx, &mem_235284, &mem_235284_cached_sizze_236252, bytes_235283);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233877 = 0; i_233877 < i32_res_214762; i_233877++) {
        int32_t defunc_0_f_res_214785 = sext_i64_i32(i_233877);
        
        for (int64_t i_236023 = 0; i_236023 < i32_res_214761; i_236023++) {
            for (int64_t i_236024 = 0; i_236024 < i32_res_214760; i_236024++) {
                ((int32_t *) mem_235284)[i_233877 * binop_x_235257 + (i_236023 * i32_res_214760 + i_236024)] = defunc_0_f_res_214785;
            }
        }
    }
    
    int64_t binop_x_235312 = partition_sizze_214382 * flat_dim_214789;
    int64_t binop_y_235313 = (int64_t) 4 * binop_x_235312;
    int64_t bytes_235314 = smax64((int64_t) 0, binop_y_235313);
    
    if (mem_235315_cached_sizze_236253 < bytes_235314) {
        err = lexical_realloc(ctx, &mem_235315, &mem_235315_cached_sizze_236253, bytes_235314);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235319_cached_sizze_236254 < bytes_235314) {
        err = lexical_realloc(ctx, &mem_235319, &mem_235319_cached_sizze_236254, bytes_235314);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235323_cached_sizze_236255 < bytes_235314) {
        err = lexical_realloc(ctx, &mem_235323, &mem_235323_cached_sizze_236255, bytes_235314);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235327_cached_sizze_236256 < bytes_235314) {
        err = lexical_realloc(ctx, &mem_235327, &mem_235327_cached_sizze_236256, bytes_235314);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235331_cached_sizze_236257 < bytes_235314) {
        err = lexical_realloc(ctx, &mem_235331, &mem_235331_cached_sizze_236257, bytes_235314);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233902 = 0; i_233902 < flat_dim_214789; i_233902++) {
        int64_t new_index_234162 = squot64(i_233902, binop_x_235257);
        int64_t binop_y_234166 = new_index_234162 * binop_x_235257;
        int64_t binop_x_234167 = i_233902 - binop_y_234166;
        int64_t new_index_234168 = squot64(binop_x_234167, i32_res_214760);
        int64_t binop_y_234180 = i32_res_214760 * new_index_234168;
        int64_t new_index_234181 = binop_x_234167 - binop_y_234180;
        int32_t x_214807 = ((int32_t *) mem_235284)[new_index_234162 * binop_x_235257 + new_index_234168 * i32_res_214760 + new_index_234181];
        int32_t x_214808 = ((int32_t *) mem_235260)[new_index_234168 * i32_res_214760 + new_index_234181];
        int64_t binop_x_234204 = squot64(i_233902, i32_res_214760);
        int64_t binop_y_234205 = i32_res_214760 * binop_x_234204;
        int64_t new_index_234206 = i_233902 - binop_y_234205;
        int32_t x_214809 = ((int32_t *) mem_235246)[new_index_234206];
        
        for (int64_t i_233887 = 0; i_233887 < partition_sizze_214382; i_233887++) {
            int32_t x_217219 = ((int32_t *) mem_234832)[i_233887];
            int32_t x_217220 = ((int32_t *) mem_234835)[i_233887];
            int32_t x_217221 = ((int32_t *) mem_234838)[i_233887];
            int32_t defunc_1_f_res_217222 = add32(x_214807, x_217219);
            int32_t defunc_1_f_res_217223 = add32(x_214808, x_217220);
            int32_t defunc_1_f_res_217224 = add32(x_214809, x_217221);
            int32_t azq_217228 = srem32(defunc_1_f_res_217222, defunc_0_f_res_213501);
            bool cond_217229 = slt32(azq_217228, 0);
            int32_t azqzq_217230;
            
            if (cond_217229 == 1) {
                int32_t azqzq_t_res_231525 = add32(defunc_0_f_res_213501, azq_217228);
                
                azqzq_217230 = azqzq_t_res_231525;
            } else {
                azqzq_217230 = azq_217228;
            }
            
            int32_t arg_217232 = sub32(defunc_1_f_res_217222, azqzq_217230);
            int32_t j_217233 = squot32(arg_217232, defunc_0_f_res_213501);
            int32_t azq_217234 = srem32(defunc_1_f_res_217223, defunc_0_f_res_213510);
            bool cond_217235 = slt32(azq_217234, 0);
            int32_t azqzq_217236;
            
            if (cond_217235 == 1) {
                int32_t azqzq_t_res_231526 = add32(defunc_0_f_res_213510, azq_217234);
                
                azqzq_217236 = azqzq_t_res_231526;
            } else {
                azqzq_217236 = azq_217234;
            }
            
            int32_t arg_217238 = sub32(defunc_1_f_res_217223, azqzq_217236);
            int32_t j_217239 = squot32(arg_217238, defunc_0_f_res_213510);
            int32_t azq_217240 = srem32(defunc_1_f_res_217224, defunc_0_f_res_213519);
            bool cond_217241 = slt32(azq_217240, 0);
            int32_t azqzq_217242;
            
            if (cond_217241 == 1) {
                int32_t azqzq_t_res_231527 = add32(defunc_0_f_res_213519, azq_217240);
                
                azqzq_217242 = azqzq_t_res_231527;
            } else {
                azqzq_217242 = azq_217240;
            }
            
            int32_t arg_217244 = sub32(defunc_1_f_res_217224, azqzq_217242);
            int32_t j_217245 = squot32(arg_217244, defunc_0_f_res_213519);
            int32_t arg_217246 = mul32(defunc_0_f_res_213510, azqzq_217230);
            int32_t arg_217247 = mul32(defunc_0_f_res_213519, arg_217246);
            int32_t arg_217248 = mul32(defunc_0_f_res_213519, azqzq_217236);
            int32_t arg_217249 = add32(arg_217247, arg_217248);
            int32_t defunc_0_f_res_217250 = add32(azqzq_217242, arg_217249);
            
            ((int32_t *) mem_235319)[i_233902 * partition_sizze_214382 + i_233887] = defunc_0_f_res_217250;
            ((int32_t *) mem_235323)[i_233902 * partition_sizze_214382 + i_233887] = j_217233;
            ((int32_t *) mem_235327)[i_233902 * partition_sizze_214382 + i_233887] = j_217239;
            ((int32_t *) mem_235331)[i_233902 * partition_sizze_214382 + i_233887] = j_217245;
        }
        
        int32_t arg_214819 = mul32(defunc_0_f_res_213510, x_214807);
        int32_t arg_214820 = mul32(defunc_0_f_res_213519, arg_214819);
        int32_t arg_214821 = mul32(defunc_0_f_res_213519, x_214808);
        int32_t arg_214822 = add32(arg_214820, arg_214821);
        int32_t toLinear_res_214823 = add32(x_214809, arg_214822);
        
        for (int64_t i_236034 = 0; i_236034 < partition_sizze_214382; i_236034++) {
            ((int32_t *) mem_235315)[i_233902 * partition_sizze_214382 + i_236034] = toLinear_res_214823;
        }
    }
    
    int64_t i_214875 = sub64(binop_x_235312, (int64_t) 1);
    bool y_214877 = slt64(i_214875, binop_x_235312);
    bool x_214876 = sle64((int64_t) 0, i_214875);
    bool bounds_check_214878 = x_214876 && y_214877;
    bool cond_214874 = binop_x_235312 == (int64_t) 0;
    bool protect_assert_disj_214879 = cond_214874 || bounds_check_214878;
    bool index_certs_214880;
    
    if (!protect_assert_disj_214879) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_214875, "] out of bounds for array of shape [", (long long) binop_x_235312, "].", "-> #0  /prelude/array.fut:26:29-34\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t ext_235586;
    int64_t ext_235585;
    int64_t ext_235581;
    int64_t ext_235580;
    int64_t replSegmIota_res_214881;
    int64_t replSegmIota_res_214882;
    
    if (cond_214874 == 1) {
        if (memblock_set(ctx, &ext_mem_235589, &mem_235023, "mem_235023") != 0)
            return 1;
        ext_235586 = (int64_t) 0;
        ext_235585 = (int64_t) 0;
        if (memblock_set(ctx, &ext_mem_235584, &mem_235023, "mem_235023") != 0)
            return 1;
        ext_235581 = (int64_t) 0;
        ext_235580 = (int64_t) 0;
        replSegmIota_res_214881 = (int64_t) 0;
        replSegmIota_res_214882 = (int64_t) 0;
    } else {
        if (mem_235517_cached_sizze_236258 < bytes_235314) {
            err = lexical_realloc(ctx, &mem_235517, &mem_235517_cached_sizze_236258, bytes_235314);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_235520_cached_sizze_236259 < bytes_235314) {
            err = lexical_realloc(ctx, &mem_235520, &mem_235520_cached_sizze_236259, bytes_235314);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        
        int32_t inpacc_231538;
        int32_t inpacc_225037 = 0;
        
        for (int64_t i_233928 = 0; i_233928 < binop_x_235312; i_233928++) {
            int64_t new_index_234377 = squot64(i_233928, partition_sizze_214382);
            int64_t binop_y_234379 = partition_sizze_214382 * new_index_234377;
            int64_t new_index_234380 = i_233928 - binop_y_234379;
            int32_t x_234132 = ((int32_t *) mem_235315)[new_index_234377 * partition_sizze_214382 + new_index_234380];
            int32_t x_234133 = ((int32_t *) mem_235319)[new_index_234377 * partition_sizze_214382 + new_index_234380];
            int64_t i_234134 = sext_i32_i64(x_234132);
            bool x_234135 = sle64((int64_t) 0, i_234134);
            bool y_234136 = slt64(i_234134, defunc_0_f_res_214541);
            bool bounds_check_234137 = x_234135 && y_234136;
            bool index_certs_234138;
            
            if (!bounds_check_234137) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_234134, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:53:38-43\n   #1  associations.fut:53:17-64\n   #2  associations.fut:128:29-85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t arg_234139 = ((int32_t *) mem_234972)[i_234134];
            int64_t j_234140 = sext_i32_i64(x_234133);
            bool x_234141 = sle64((int64_t) 0, j_234140);
            bool y_234142 = slt64(j_234140, defunc_0_f_res_214541);
            bool bounds_check_234143 = x_234141 && y_234142;
            bool index_certs_234144;
            
            if (!bounds_check_234143) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_234140, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:53:45-50\n   #1  associations.fut:53:17-64\n   #2  associations.fut:128:29-85\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t arg_234145 = ((int32_t *) mem_234972)[j_234140];
            int32_t defunc_0_f_res_234146 = mul32(arg_234139, arg_234145);
            int32_t defunc_1_op_res_234157 = add32(inpacc_225037, defunc_0_f_res_234146);
            
            ((int32_t *) mem_235517)[i_233928] = inpacc_225037;
            ((int32_t *) mem_235520)[i_233928] = defunc_1_op_res_234157;
            
            int32_t inpacc_tmp_236035 = defunc_1_op_res_234157;
            
            inpacc_225037 = inpacc_tmp_236035;
        }
        inpacc_231538 = inpacc_225037;
        
        int32_t last_res_214894 = ((int32_t *) mem_235520)[i_214875];
        int64_t i32_res_214899 = sext_i32_i64(last_res_214894);
        int64_t binop_y_235541 = (int64_t) 4 * i32_res_214899;
        int64_t bytes_235542 = smax64((int64_t) 0, binop_y_235541);
        
        if (mem_235543_cached_sizze_236260 < bytes_235542) {
            err = lexical_realloc(ctx, &mem_235543, &mem_235543_cached_sizze_236260, bytes_235542);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_236038 = 0; i_236038 < i32_res_214899; i_236038++) {
            ((int32_t *) mem_235543)[i_236038] = 0;
        }
        for (int64_t iter_233931 = 0; iter_233931 < binop_x_235312; iter_233931++) {
            int32_t pixel_233933 = ((int32_t *) mem_235520)[iter_233931];
            int64_t defunc_0_f_res_217289 = sext_i32_i64(pixel_233933);
            bool less_than_zzero_233935 = slt64(defunc_0_f_res_217289, (int64_t) 0);
            bool greater_than_sizze_233936 = sle64(i32_res_214899, defunc_0_f_res_217289);
            bool outside_bounds_dim_233937 = less_than_zzero_233935 || greater_than_sizze_233936;
            
            if (!(outside_bounds_dim_233937 == 1)) {
                int32_t read_hist_233939 = ((int32_t *) mem_235543)[defunc_0_f_res_217289];
                int32_t defunc_1_f_res_214904 = add32(1, read_hist_233939);
                
                ((int32_t *) mem_235543)[defunc_0_f_res_217289] = defunc_1_f_res_214904;
            }
        }
        if (memblock_alloc(ctx, &mem_235556, bytes_235542, "mem_235556")) {
            err = 1;
            goto cleanup;
        }
        
        int32_t discard_233947;
        int32_t scanacc_233943 = 0;
        
        for (int64_t i_233945 = 0; i_233945 < i32_res_214899; i_233945++) {
            int32_t x_214911 = ((int32_t *) mem_235543)[i_233945];
            int32_t defunc_1_op_res_214910 = add32(x_214911, scanacc_233943);
            
            ((int32_t *) mem_235556.mem)[i_233945] = defunc_1_op_res_214910;
            
            int32_t scanacc_tmp_236040 = defunc_1_op_res_214910;
            
            scanacc_233943 = scanacc_tmp_236040;
        }
        discard_233947 = scanacc_233943;
        if (memblock_alloc(ctx, &mem_235569, bytes_235542, "mem_235569")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_233950 = 0; i_233950 < i32_res_214899; i_233950++) {
            int32_t i64_res_214915 = sext_i64_i32(i_233950);
            int32_t i_214920 = ((int32_t *) mem_235556.mem)[i_233950];
            int64_t i_214921 = sext_i32_i64(i_214920);
            bool x_214922 = sle64((int64_t) 0, i_214921);
            bool y_214923 = slt64(i_214921, binop_x_235312);
            bool bounds_check_214924 = x_214922 && y_214923;
            bool index_certs_214925;
            
            if (!bounds_check_214924) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_214921, "] out of bounds for array of shape [", (long long) binop_x_235312, "].", "-> #0  associations.fut:26:57-71\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:200:3-17\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t arg_214926 = ((int32_t *) mem_235517)[i_214921];
            int32_t defunc_0_f_res_214927 = sub32(i64_res_214915, arg_214926);
            
            ((int32_t *) mem_235569.mem)[i_233950] = defunc_0_f_res_214927;
        }
        if (memblock_set(ctx, &ext_mem_235589, &mem_235556, "mem_235556") != 0)
            return 1;
        ext_235586 = i32_res_214899;
        ext_235585 = i32_res_214899;
        if (memblock_set(ctx, &ext_mem_235584, &mem_235569, "mem_235569") != 0)
            return 1;
        ext_235581 = i32_res_214899;
        ext_235580 = i32_res_214899;
        replSegmIota_res_214881 = i32_res_214899;
        replSegmIota_res_214882 = i32_res_214899;
    }
    
    int64_t binop_y_235590 = (int64_t) 4 * replSegmIota_res_214881;
    int64_t bytes_235591 = smax64((int64_t) 0, binop_y_235590);
    int64_t conc_tmp_214996 = i32_res_214568 + replSegmIota_res_214881;
    int64_t binop_y_235655 = (int64_t) 8 * conc_tmp_214996;
    int64_t bytes_235656 = smax64((int64_t) 0, binop_y_235655);
    int64_t binop_y_235681 = (int64_t) 4 * conc_tmp_214996;
    int64_t bytes_235682 = smax64((int64_t) 0, binop_y_235681);
    int64_t binop_y_235767 = (int64_t) 4 * dz2080U_189274;
    int64_t bytes_235768 = smax64((int64_t) 0, binop_y_235767);
    int64_t binop_y_235819 = (int64_t) 4 * dz2081U_189275;
    int64_t bytes_235820 = smax64((int64_t) 0, binop_y_235819);
    int64_t binop_y_235912 = (int64_t) 24 * nz2084U_189276;
    int64_t bytes_235913 = smax64((int64_t) 0, binop_y_235912);
    
    if (memblock_alloc(ctx, &mem_234871, bytes_234870, "mem_234871")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_236043 = 0; i_236043 < nz2084U_189276; i_236043++) {
        int64_t x_236044 = (int64_t) 0 + i_236043 * (int64_t) 1;
        
        ((int64_t *) mem_234871.mem)[i_236043] = x_236044;
    }
    
    int32_t clzz_res_214470 = futrts_clzz32(defunc_2_reduce_res_233531);
    int32_t defunc_0_f_res_214471 = sub32(32, clzz_res_214470);
    
    if (mem_234884_cached_sizze_236232 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_234884, &mem_234884_cached_sizze_236232, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234887_cached_sizze_236233 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_234887, &mem_234887_cached_sizze_236233, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_234910_cached_sizze_236234 < bytes_234870) {
        err = lexical_realloc(ctx, &mem_234910, &mem_234910_cached_sizze_236234, bytes_234870);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (memblock_set(ctx, &mem_param_234876, &mem_234637, "mem_234637") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_234881, &mem_234871, "mem_234871") != 0)
        return 1;
    for (int32_t bit_214474 = 0; bit_214474 < defunc_0_f_res_214471; bit_214474++) {
        int32_t defunc_2_reduce_res_231488;
        int32_t redout_233673 = 0;
        
        for (int64_t i_233676 = 0; i_233676 < nz2084U_189276; i_233676++) {
            int32_t x_216922 = ((int32_t *) mem_param_234876.mem)[i_233676];
            int32_t arg_216923 = lshr32(x_216922, bit_214474);
            int32_t u32_arg_216924 = 1 & arg_216923;
            int32_t defunc_0_f_res_216926 = sub32(1, u32_arg_216924);
            int32_t defunc_1_op_res_214487 = add32(defunc_0_f_res_216926, redout_233673);
            
            ((int32_t *) mem_234884)[i_233676] = defunc_0_f_res_216926;
            ((int32_t *) mem_234887)[i_233676] = u32_arg_216924;
            
            int32_t redout_tmp_236049 = defunc_1_op_res_214487;
            
            redout_233673 = redout_tmp_236049;
        }
        defunc_2_reduce_res_231488 = redout_233673;
        
        int32_t inpacc_231491;
        int32_t inpacc_231492;
        int32_t inpacc_216857;
        int32_t inpacc_216858;
        
        inpacc_216857 = 0;
        inpacc_216858 = 0;
        for (int64_t i_233697 = 0; i_233697 < nz2084U_189276; i_233697++) {
            int32_t x_234289 = ((int32_t *) mem_234887)[i_233697];
            int32_t x_234297 = ((int32_t *) mem_234884)[i_233697];
            int32_t defunc_1_op_res_234308 = add32(inpacc_216857, x_234289);
            int32_t defunc_0_f_res_234309 = add32(defunc_2_reduce_res_231488, defunc_1_op_res_234308);
            int32_t defunc_1_f_res_234310 = mul32(x_234289, defunc_0_f_res_234309);
            int32_t defunc_1_op_res_234311 = add32(inpacc_216858, x_234297);
            int32_t defunc_1_f_res_234312 = mul32(x_234297, defunc_1_op_res_234311);
            int32_t defunc_1_f_res_234313 = add32(defunc_1_f_res_234310, defunc_1_f_res_234312);
            int32_t defunc_0_f_res_234314 = sub32(defunc_1_f_res_234313, 1);
            int64_t defunc_0_f_res_234315 = sext_i32_i64(defunc_0_f_res_234314);
            
            ((int64_t *) mem_234910)[i_233697] = defunc_0_f_res_234315;
            
            int32_t inpacc_tmp_236052 = defunc_1_op_res_234308;
            int32_t inpacc_tmp_236053 = defunc_1_op_res_234311;
            
            inpacc_216857 = inpacc_tmp_236052;
            inpacc_216858 = inpacc_tmp_236053;
        }
        inpacc_231491 = inpacc_216857;
        inpacc_231492 = inpacc_216858;
        if (memblock_alloc(ctx, &mem_234923, bytes_234545, "mem_234923")) {
            err = 1;
            goto cleanup;
        }
        if (nz2084U_189276 * (int64_t) 4 > 0)
            memmove(mem_234923.mem + (int64_t) 0, mem_param_234876.mem + (int64_t) 0, nz2084U_189276 * (int64_t) 4);
        if (memblock_alloc(ctx, &mem_234926, bytes_234870, "mem_234926")) {
            err = 1;
            goto cleanup;
        }
        if (nz2084U_189276 * (int64_t) 8 > 0)
            memmove(mem_234926.mem + (int64_t) 0, mem_param_234881.mem + (int64_t) 0, nz2084U_189276 * (int64_t) 8);
        for (int64_t write_iter_233699 = 0; write_iter_233699 < nz2084U_189276; write_iter_233699++) {
            int64_t write_iv_233702 = ((int64_t *) mem_234910)[write_iter_233699];
            int64_t write_iv_233703 = ((int64_t *) mem_param_234881.mem)[write_iter_233699];
            int32_t write_iv_233705 = ((int32_t *) mem_param_234876.mem)[write_iter_233699];
            
            if (sle64((int64_t) 0, write_iv_233702) && slt64(write_iv_233702, nz2084U_189276)) {
                ((int64_t *) mem_234926.mem)[write_iv_233702] = write_iv_233703;
            }
            if (sle64((int64_t) 0, write_iv_233702) && slt64(write_iv_233702, nz2084U_189276)) {
                ((int32_t *) mem_234923.mem)[write_iv_233702] = write_iv_233705;
            }
        }
        if (memblock_set(ctx, &mem_param_tmp_236045, &mem_234923, "mem_234923") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_tmp_236046, &mem_234926, "mem_234926") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_234876, &mem_param_tmp_236045, "mem_param_tmp_236045") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_234881, &mem_param_tmp_236046, "mem_param_tmp_236046") != 0)
            return 1;
    }
    if (memblock_set(ctx, &ext_mem_234956, &mem_param_234876, "mem_param_234876") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_234955, &mem_param_234881, "mem_param_234881") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_234637, "mem_234637") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_234871, "mem_234871") != 0)
        return 1;
    if (mem_234959_cached_sizze_236235 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_234959, &mem_234959_cached_sizze_236235, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233710 = 0; i_233710 < nz2084U_189276; i_233710++) {
        int64_t x_214529 = ((int64_t *) ext_mem_234955.mem)[i_233710];
        bool x_214530 = sle64((int64_t) 0, x_214529);
        bool y_214531 = slt64(x_214529, nz2084U_189276);
        bool bounds_check_214532 = x_214530 && y_214531;
        bool index_certs_214533;
        
        if (!bounds_check_214532) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) x_214529, "] out of bounds for array of shape [", (long long) nz2084U_189276, "].", "-> #0  sorting.fut:15:19-23\n   #1  sorting.fut:15:8-27\n   #2  /prelude/functional.fut:9:42-44\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t index_primexp_214534 = sext_i64_i32(x_214529);
        
        ((int32_t *) mem_234959)[i_233710] = index_primexp_214534;
    }
    if (memblock_unref(ctx, &ext_mem_234955, "ext_mem_234955") != 0)
        return 1;
    
    bool cond_214569 = defunc_0_f_res_214541 == (int64_t) 0;
    int64_t i_214571 = sub64(defunc_0_f_res_214541, (int64_t) 1);
    bool x_214572 = sle64((int64_t) 0, i_214571);
    bool y_214573 = slt64(i_214571, defunc_0_f_res_214541);
    bool bounds_check_214574 = x_214572 && y_214573;
    bool protect_assert_disj_214575 = cond_214569 || bounds_check_214574;
    bool index_certs_214576;
    
    if (!protect_assert_disj_214575) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_214571, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  /prelude/array.fut:26:29-34\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t ext_235064;
    int64_t ext_235063;
    int64_t repl_iota_res_214577;
    
    if (cond_214569 == 1) {
        if (memblock_set(ctx, &ext_mem_235067, &mem_235023, "mem_235023") != 0)
            return 1;
        ext_235064 = (int64_t) 0;
        ext_235063 = (int64_t) 0;
        repl_iota_res_214577 = (int64_t) 0;
    } else {
        if (mem_235026_cached_sizze_236240 < bytes_234971) {
            err = lexical_realloc(ctx, &mem_235026, &mem_235026_cached_sizze_236240, bytes_234971);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        
        int32_t discard_233760;
        int32_t scanacc_233756 = 0;
        
        for (int64_t i_233758 = 0; i_233758 < defunc_0_f_res_214541; i_233758++) {
            int32_t x_214583 = ((int32_t *) mem_234988)[i_233758];
            int32_t defunc_1_op_res_214582 = add32(x_214583, scanacc_233756);
            
            ((int32_t *) mem_235026)[i_233758] = defunc_1_op_res_214582;
            
            int32_t scanacc_tmp_236058 = defunc_1_op_res_214582;
            
            scanacc_233756 = scanacc_tmp_236058;
        }
        discard_233760 = scanacc_233756;
        
        int32_t last_res_214584 = ((int32_t *) mem_235026)[i_214571];
        int64_t i32_res_214589 = sext_i32_i64(last_res_214584);
        int64_t binop_y_235037 = (int64_t) 4 * i32_res_214589;
        int64_t bytes_235038 = smax64((int64_t) 0, binop_y_235037);
        
        if (mem_235039_cached_sizze_236241 < bytes_235038) {
            err = lexical_realloc(ctx, &mem_235039, &mem_235039_cached_sizze_236241, bytes_235038);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_236060 = 0; i_236060 < i32_res_214589; i_236060++) {
            ((int32_t *) mem_235039)[i_236060] = 0;
        }
        for (int64_t iter_233761 = 0; iter_233761 < defunc_0_f_res_214541; iter_233761++) {
            int32_t pixel_233763 = ((int32_t *) mem_235026)[iter_233761];
            int64_t defunc_0_f_res_217057 = sext_i32_i64(pixel_233763);
            bool less_than_zzero_233765 = slt64(defunc_0_f_res_217057, (int64_t) 0);
            bool greater_than_sizze_233766 = sle64(i32_res_214589, defunc_0_f_res_217057);
            bool outside_bounds_dim_233767 = less_than_zzero_233765 || greater_than_sizze_233766;
            
            if (!(outside_bounds_dim_233767 == 1)) {
                int32_t read_hist_233769 = ((int32_t *) mem_235039)[defunc_0_f_res_217057];
                int32_t defunc_1_f_res_214594 = add32(1, read_hist_233769);
                
                ((int32_t *) mem_235039)[defunc_0_f_res_217057] = defunc_1_f_res_214594;
            }
        }
        if (memblock_alloc(ctx, &mem_235052, bytes_235038, "mem_235052")) {
            err = 1;
            goto cleanup;
        }
        
        int32_t discard_233777;
        int32_t scanacc_233773 = 0;
        
        for (int64_t i_233775 = 0; i_233775 < i32_res_214589; i_233775++) {
            int32_t x_214601 = ((int32_t *) mem_235039)[i_233775];
            int32_t defunc_1_op_res_214600 = add32(x_214601, scanacc_233773);
            
            ((int32_t *) mem_235052.mem)[i_233775] = defunc_1_op_res_214600;
            
            int32_t scanacc_tmp_236062 = defunc_1_op_res_214600;
            
            scanacc_233773 = scanacc_tmp_236062;
        }
        discard_233777 = scanacc_233773;
        if (memblock_set(ctx, &ext_mem_235067, &mem_235052, "mem_235052") != 0)
            return 1;
        ext_235064 = i32_res_214589;
        ext_235063 = i32_res_214589;
        repl_iota_res_214577 = i32_res_214589;
    }
    
    bool dim_match_214602 = i32_res_214568 == repl_iota_res_214577;
    bool empty_or_match_cert_214603;
    
    if (!dim_match_214602) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (core language) shape (", (long long) repl_iota_res_214577, ") cannot match shape of type `[", (long long) i32_res_214568, "]i32`.", "-> #0  associations.fut:44:20-47\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t ext_235139;
    int64_t ext_235138;
    int64_t ext_235134;
    int64_t ext_235133;
    int64_t replSegmIota_res_214605;
    int64_t replSegmIota_res_214606;
    
    if (cond_214569 == 1) {
        if (memblock_set(ctx, &ext_mem_235142, &mem_235023, "mem_235023") != 0)
            return 1;
        ext_235139 = (int64_t) 0;
        ext_235138 = (int64_t) 0;
        if (memblock_set(ctx, &ext_mem_235137, &mem_235023, "mem_235023") != 0)
            return 1;
        ext_235134 = (int64_t) 0;
        ext_235133 = (int64_t) 0;
        replSegmIota_res_214605 = (int64_t) 0;
        replSegmIota_res_214606 = (int64_t) 0;
    } else {
        if (mem_235070_cached_sizze_236242 < bytes_234971) {
            err = lexical_realloc(ctx, &mem_235070, &mem_235070_cached_sizze_236242, bytes_234971);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_235073_cached_sizze_236243 < bytes_234971) {
            err = lexical_realloc(ctx, &mem_235073, &mem_235073_cached_sizze_236243, bytes_234971);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        
        int32_t inpacc_231508;
        int32_t inpacc_217096 = 0;
        
        for (int64_t i_233795 = 0; i_233795 < defunc_0_f_res_214541; i_233795++) {
            int32_t x_234237 = ((int32_t *) mem_234972)[i_233795];
            int32_t defunc_1_op_res_234247 = add32(inpacc_217096, x_234237);
            
            ((int32_t *) mem_235070)[i_233795] = inpacc_217096;
            ((int32_t *) mem_235073)[i_233795] = defunc_1_op_res_234247;
            
            int32_t inpacc_tmp_236064 = defunc_1_op_res_234247;
            
            inpacc_217096 = inpacc_tmp_236064;
        }
        inpacc_231508 = inpacc_217096;
        
        int32_t last_res_214618 = ((int32_t *) mem_235073)[i_214571];
        int64_t i32_res_214623 = sext_i32_i64(last_res_214618);
        int64_t binop_y_235094 = (int64_t) 4 * i32_res_214623;
        int64_t bytes_235095 = smax64((int64_t) 0, binop_y_235094);
        
        if (mem_235096_cached_sizze_236244 < bytes_235095) {
            err = lexical_realloc(ctx, &mem_235096, &mem_235096_cached_sizze_236244, bytes_235095);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_236067 = 0; i_236067 < i32_res_214623; i_236067++) {
            ((int32_t *) mem_235096)[i_236067] = 0;
        }
        for (int64_t iter_233798 = 0; iter_233798 < defunc_0_f_res_214541; iter_233798++) {
            int32_t pixel_233800 = ((int32_t *) mem_235073)[iter_233798];
            int64_t defunc_0_f_res_217065 = sext_i32_i64(pixel_233800);
            bool less_than_zzero_233802 = slt64(defunc_0_f_res_217065, (int64_t) 0);
            bool greater_than_sizze_233803 = sle64(i32_res_214623, defunc_0_f_res_217065);
            bool outside_bounds_dim_233804 = less_than_zzero_233802 || greater_than_sizze_233803;
            
            if (!(outside_bounds_dim_233804 == 1)) {
                int32_t read_hist_233806 = ((int32_t *) mem_235096)[defunc_0_f_res_217065];
                int32_t defunc_1_f_res_214628 = add32(1, read_hist_233806);
                
                ((int32_t *) mem_235096)[defunc_0_f_res_217065] = defunc_1_f_res_214628;
            }
        }
        if (memblock_alloc(ctx, &mem_235109, bytes_235095, "mem_235109")) {
            err = 1;
            goto cleanup;
        }
        
        int32_t discard_233814;
        int32_t scanacc_233810 = 0;
        
        for (int64_t i_233812 = 0; i_233812 < i32_res_214623; i_233812++) {
            int32_t x_214635 = ((int32_t *) mem_235096)[i_233812];
            int32_t defunc_1_op_res_214634 = add32(x_214635, scanacc_233810);
            
            ((int32_t *) mem_235109.mem)[i_233812] = defunc_1_op_res_214634;
            
            int32_t scanacc_tmp_236069 = defunc_1_op_res_214634;
            
            scanacc_233810 = scanacc_tmp_236069;
        }
        discard_233814 = scanacc_233810;
        if (memblock_alloc(ctx, &mem_235122, bytes_235095, "mem_235122")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_233817 = 0; i_233817 < i32_res_214623; i_233817++) {
            int32_t i64_res_214639 = sext_i64_i32(i_233817);
            int32_t i_214644 = ((int32_t *) mem_235109.mem)[i_233817];
            int64_t i_214645 = sext_i32_i64(i_214644);
            bool x_214646 = sle64((int64_t) 0, i_214645);
            bool y_214647 = slt64(i_214645, defunc_0_f_res_214541);
            bool bounds_check_214648 = x_214646 && y_214647;
            bool index_certs_214649;
            
            if (!bounds_check_214648) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_214645, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:26:57-71\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:200:3-17\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t arg_214650 = ((int32_t *) mem_235070)[i_214645];
            int32_t defunc_0_f_res_214651 = sub32(i64_res_214639, arg_214650);
            
            ((int32_t *) mem_235122.mem)[i_233817] = defunc_0_f_res_214651;
        }
        if (memblock_set(ctx, &ext_mem_235142, &mem_235109, "mem_235109") != 0)
            return 1;
        ext_235139 = i32_res_214623;
        ext_235138 = i32_res_214623;
        if (memblock_set(ctx, &ext_mem_235137, &mem_235122, "mem_235122") != 0)
            return 1;
        ext_235134 = i32_res_214623;
        ext_235133 = i32_res_214623;
        replSegmIota_res_214605 = i32_res_214623;
        replSegmIota_res_214606 = i32_res_214623;
    }
    
    int64_t i_214656 = sub64(replSegmIota_res_214605, (int64_t) 1);
    bool y_214658 = slt64(i_214656, replSegmIota_res_214605);
    bool x_214657 = sle64((int64_t) 0, i_214656);
    bool bounds_check_214659 = x_214657 && y_214658;
    bool cond_214655 = replSegmIota_res_214605 == (int64_t) 0;
    bool protect_assert_disj_214660 = cond_214655 || bounds_check_214659;
    bool index_certs_214661;
    
    if (!protect_assert_disj_214660) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_214656, "] out of bounds for array of shape [", (long long) replSegmIota_res_214605, "].", "-> #0  /prelude/array.fut:26:29-34\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool dim_match_214652 = replSegmIota_res_214605 == replSegmIota_res_214606;
    bool empty_or_match_cert_214653;
    
    if (!dim_match_214652) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Function return value does not match shape of declared return type.", "-> #0  associations.fut:19:1-27:22\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    int64_t binop_y_235143 = (int64_t) 4 * replSegmIota_res_214605;
    int64_t bytes_235144 = smax64((int64_t) 0, binop_y_235143);
    int64_t ext_235214;
    int64_t ext_235213;
    int64_t ext_235209;
    int64_t ext_235208;
    int64_t replSegmIota_res_214662;
    int64_t replSegmIota_res_214663;
    
    if (cond_214655 == 1) {
        if (memblock_set(ctx, &ext_mem_235217, &mem_235023, "mem_235023") != 0)
            return 1;
        ext_235214 = (int64_t) 0;
        ext_235213 = (int64_t) 0;
        if (memblock_set(ctx, &ext_mem_235212, &mem_235023, "mem_235023") != 0)
            return 1;
        ext_235209 = (int64_t) 0;
        ext_235208 = (int64_t) 0;
        replSegmIota_res_214662 = (int64_t) 0;
        replSegmIota_res_214663 = (int64_t) 0;
    } else {
        if (mem_235145_cached_sizze_236245 < bytes_235144) {
            err = lexical_realloc(ctx, &mem_235145, &mem_235145_cached_sizze_236245, bytes_235144);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        if (mem_235148_cached_sizze_236246 < bytes_235144) {
            err = lexical_realloc(ctx, &mem_235148, &mem_235148_cached_sizze_236246, bytes_235144);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        
        int32_t inpacc_231518;
        int32_t inpacc_217173 = 0;
        
        for (int64_t i_233836 = 0; i_233836 < replSegmIota_res_214605; i_233836++) {
            int32_t x_234218 = ((int32_t *) ext_mem_235137.mem)[i_233836];
            int32_t defunc_1_op_res_234228 = add32(inpacc_217173, x_234218);
            
            ((int32_t *) mem_235145)[i_233836] = inpacc_217173;
            ((int32_t *) mem_235148)[i_233836] = defunc_1_op_res_234228;
            
            int32_t inpacc_tmp_236072 = defunc_1_op_res_234228;
            
            inpacc_217173 = inpacc_tmp_236072;
        }
        inpacc_231518 = inpacc_217173;
        
        int32_t last_res_214675 = ((int32_t *) mem_235148)[i_214656];
        int64_t i32_res_214680 = sext_i32_i64(last_res_214675);
        int64_t binop_y_235169 = (int64_t) 4 * i32_res_214680;
        int64_t bytes_235170 = smax64((int64_t) 0, binop_y_235169);
        
        if (mem_235171_cached_sizze_236247 < bytes_235170) {
            err = lexical_realloc(ctx, &mem_235171, &mem_235171_cached_sizze_236247, bytes_235170);
            if (err != FUTHARK_SUCCESS)
                goto cleanup;
        }
        for (int64_t i_236075 = 0; i_236075 < i32_res_214680; i_236075++) {
            ((int32_t *) mem_235171)[i_236075] = 0;
        }
        for (int64_t iter_233839 = 0; iter_233839 < replSegmIota_res_214605; iter_233839++) {
            int32_t pixel_233841 = ((int32_t *) mem_235148)[iter_233839];
            int64_t defunc_0_f_res_217142 = sext_i32_i64(pixel_233841);
            bool less_than_zzero_233843 = slt64(defunc_0_f_res_217142, (int64_t) 0);
            bool greater_than_sizze_233844 = sle64(i32_res_214680, defunc_0_f_res_217142);
            bool outside_bounds_dim_233845 = less_than_zzero_233843 || greater_than_sizze_233844;
            
            if (!(outside_bounds_dim_233845 == 1)) {
                int32_t read_hist_233847 = ((int32_t *) mem_235171)[defunc_0_f_res_217142];
                int32_t defunc_1_f_res_214685 = add32(1, read_hist_233847);
                
                ((int32_t *) mem_235171)[defunc_0_f_res_217142] = defunc_1_f_res_214685;
            }
        }
        if (memblock_alloc(ctx, &mem_235184, bytes_235170, "mem_235184")) {
            err = 1;
            goto cleanup;
        }
        
        int32_t discard_233855;
        int32_t scanacc_233851 = 0;
        
        for (int64_t i_233853 = 0; i_233853 < i32_res_214680; i_233853++) {
            int32_t x_214692 = ((int32_t *) mem_235171)[i_233853];
            int32_t defunc_1_op_res_214691 = add32(x_214692, scanacc_233851);
            
            ((int32_t *) mem_235184.mem)[i_233853] = defunc_1_op_res_214691;
            
            int32_t scanacc_tmp_236077 = defunc_1_op_res_214691;
            
            scanacc_233851 = scanacc_tmp_236077;
        }
        discard_233855 = scanacc_233851;
        if (memblock_alloc(ctx, &mem_235197, bytes_235170, "mem_235197")) {
            err = 1;
            goto cleanup;
        }
        for (int64_t i_233858 = 0; i_233858 < i32_res_214680; i_233858++) {
            int32_t i64_res_214696 = sext_i64_i32(i_233858);
            int32_t i_214701 = ((int32_t *) mem_235184.mem)[i_233858];
            int64_t i_214702 = sext_i32_i64(i_214701);
            bool x_214703 = sle64((int64_t) 0, i_214702);
            bool y_214704 = slt64(i_214702, replSegmIota_res_214605);
            bool bounds_check_214705 = x_214703 && y_214704;
            bool index_certs_214706;
            
            if (!bounds_check_214705) {
                set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_214702, "] out of bounds for array of shape [", (long long) replSegmIota_res_214605, "].", "-> #0  associations.fut:26:57-71\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:200:3-17\n"));
                err = FUTHARK_PROGRAM_ERROR;
                goto cleanup;
            }
            
            int32_t arg_214707 = ((int32_t *) mem_235145)[i_214702];
            int32_t defunc_0_f_res_214708 = sub32(i64_res_214696, arg_214707);
            
            ((int32_t *) mem_235197.mem)[i_233858] = defunc_0_f_res_214708;
        }
        if (memblock_set(ctx, &ext_mem_235217, &mem_235184, "mem_235184") != 0)
            return 1;
        ext_235214 = i32_res_214680;
        ext_235213 = i32_res_214680;
        if (memblock_set(ctx, &ext_mem_235212, &mem_235197, "mem_235197") != 0)
            return 1;
        ext_235209 = i32_res_214680;
        ext_235208 = i32_res_214680;
        replSegmIota_res_214662 = i32_res_214680;
        replSegmIota_res_214663 = i32_res_214680;
    }
    if (memblock_unref(ctx, &mem_235023, "mem_235023") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_235137, "ext_mem_235137") != 0)
        return 1;
    
    bool dim_match_214711 = i32_res_214568 == replSegmIota_res_214662;
    bool empty_or_match_cert_214712;
    
    if (!dim_match_214711) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Value of (core language) shape (", (long long) replSegmIota_res_214662, ") cannot match shape of type `[", (long long) i32_res_214568, "](i32, i32)`.", "-> #0  associations.fut:46:15-53\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    bool dim_match_214709 = replSegmIota_res_214662 == replSegmIota_res_214663;
    bool empty_or_match_cert_214710;
    
    if (!dim_match_214709) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Function return value does not match shape of declared return type.", "-> #0  associations.fut:19:1-27:22\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (mem_235220_cached_sizze_236248 < bytes_235219) {
        err = lexical_realloc(ctx, &mem_235220, &mem_235220_cached_sizze_236248, bytes_235219);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235223_cached_sizze_236249 < bytes_235219) {
        err = lexical_realloc(ctx, &mem_235223, &mem_235223_cached_sizze_236249, bytes_235219);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233864 = 0; i_233864 < i32_res_214568; i_233864++) {
        int32_t x_215920 = ((int32_t *) ext_mem_235217.mem)[i_233864];
        int32_t x_215921 = ((int32_t *) ext_mem_235067.mem)[i_233864];
        int32_t x_215922 = ((int32_t *) ext_mem_235212.mem)[i_233864];
        int64_t j_215924 = sext_i32_i64(x_215921);
        bool x_215925 = sle64((int64_t) 0, j_215924);
        bool y_215926 = slt64(j_215924, defunc_0_f_res_214541);
        bool bounds_check_215927 = x_215925 && y_215926;
        bool index_certs_215928;
        
        if (!bounds_check_215927) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_215924, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:49:33-41\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  associations.fut:49:15-54\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t arg_215929 = ((int32_t *) mem_234985)[j_215924];
        int32_t defunc_1_f_res_215930 = sub32(x_215920, arg_215929);
        bool index_certs_215936;
        
        if (!bounds_check_215927) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_215924, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:125:37-50\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t arg_215937 = ((int32_t *) mem_234991)[j_215924];
        int32_t i_215938 = add32(defunc_1_f_res_215930, arg_215937);
        int64_t i_215939 = sext_i32_i64(i_215938);
        bool x_215940 = sle64((int64_t) 0, i_215939);
        bool y_215941 = slt64(i_215939, nz2084U_189276);
        bool bounds_check_215942 = x_215940 && y_215941;
        bool index_certs_215943;
        
        if (!bounds_check_215942) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_215939, "] out of bounds for array of shape [", (long long) nz2084U_189276, "].", "-> #0  associations.fut:125:29-57\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t lifted_index_res_215944 = ((int32_t *) mem_234959)[i_215939];
        int32_t i_215945 = add32(x_215922, arg_215937);
        int64_t i_215946 = sext_i32_i64(i_215945);
        bool x_215947 = sle64((int64_t) 0, i_215946);
        bool y_215948 = slt64(i_215946, nz2084U_189276);
        bool bounds_check_215949 = x_215947 && y_215948;
        bool index_certs_215950;
        
        if (!bounds_check_215949) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_215946, "] out of bounds for array of shape [", (long long) nz2084U_189276, "].", "-> #0  associations.fut:125:29-57\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t lifted_index_res_215951 = ((int32_t *) mem_234959)[i_215946];
        
        ((int32_t *) mem_235220)[i_233864] = lifted_index_res_215944;
        ((int32_t *) mem_235223)[i_233864] = lifted_index_res_215951;
    }
    if (memblock_unref(ctx, &ext_mem_235067, "ext_mem_235067") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_235212, "ext_mem_235212") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_235217, "ext_mem_235217") != 0)
        return 1;
    
    bool dim_match_214928 = replSegmIota_res_214881 == replSegmIota_res_214882;
    bool empty_or_match_cert_214929;
    
    if (!dim_match_214928) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Function return value does not match shape of declared return type.", "-> #0  associations.fut:19:1-27:22\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (mem_235592_cached_sizze_236261 < bytes_235591) {
        err = lexical_realloc(ctx, &mem_235592, &mem_235592_cached_sizze_236261, bytes_235591);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235595_cached_sizze_236262 < bytes_235591) {
        err = lexical_realloc(ctx, &mem_235595, &mem_235595_cached_sizze_236262, bytes_235591);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235598_cached_sizze_236263 < bytes_235591) {
        err = lexical_realloc(ctx, &mem_235598, &mem_235598_cached_sizze_236263, bytes_235591);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235601_cached_sizze_236264 < bytes_235591) {
        err = lexical_realloc(ctx, &mem_235601, &mem_235601_cached_sizze_236264, bytes_235591);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235604_cached_sizze_236265 < bytes_235591) {
        err = lexical_realloc(ctx, &mem_235604, &mem_235604_cached_sizze_236265, bytes_235591);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233962 = 0; i_233962 < replSegmIota_res_214881; i_233962++) {
        int32_t x_215860 = ((int32_t *) ext_mem_235589.mem)[i_233962];
        int32_t x_215861 = ((int32_t *) ext_mem_235584.mem)[i_233962];
        int64_t associationI_215862 = sext_i32_i64(x_215860);
        bool x_215863 = sle64((int64_t) 0, associationI_215862);
        bool y_215864 = slt64(associationI_215862, binop_x_235312);
        bool bounds_check_215865 = x_215863 && y_215864;
        bool index_certs_215866;
        
        if (!bounds_check_215865) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) associationI_215862, "] out of bounds for array of shape [", (long long) binop_x_235312, "].", "-> #0  associations.fut:55:59-84\n   #1  /prelude/functional.fut:9:42-44\n   #2  associations.fut:54:8-58:54\n   #3  associations.fut:128:29-85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int64_t new_index_215867 = squot64(associationI_215862, partition_sizze_214382);
        int64_t binop_y_215868 = partition_sizze_214382 * new_index_215867;
        int64_t new_index_215869 = associationI_215862 - binop_y_215868;
        int32_t defunc_0_f_res_215870 = ((int32_t *) mem_235315)[new_index_215867 * partition_sizze_214382 + new_index_215869];
        int32_t defunc_0_f_res_215871 = ((int32_t *) mem_235319)[new_index_215867 * partition_sizze_214382 + new_index_215869];
        int32_t defunc_0_f_res_215872 = ((int32_t *) mem_235323)[new_index_215867 * partition_sizze_214382 + new_index_215869];
        int32_t defunc_0_f_res_215873 = ((int32_t *) mem_235327)[new_index_215867 * partition_sizze_214382 + new_index_215869];
        int32_t defunc_0_f_res_215874 = ((int32_t *) mem_235331)[new_index_215867 * partition_sizze_214382 + new_index_215869];
        int64_t i_215875 = sext_i32_i64(defunc_0_f_res_215870);
        bool x_215876 = sle64((int64_t) 0, i_215875);
        bool y_215877 = slt64(i_215875, defunc_0_f_res_214541);
        bool bounds_check_215878 = x_215876 && y_215877;
        bool index_certs_215879;
        
        if (!bounds_check_215878) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_215875, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:56:50-55\n   #1  /prelude/functional.fut:9:42-44\n   #2  associations.fut:54:8-58:54\n   #3  associations.fut:128:29-85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t arg_215880 = ((int32_t *) mem_234972)[i_215875];
        bool zzero_215881 = arg_215880 == 0;
        bool nonzzero_215882 = !zzero_215881;
        bool nonzzero_cert_215883;
        
        if (!nonzzero_215882) {
            set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "division by zero", "-> #0  associations.fut:56:41-55\n   #1  /prelude/functional.fut:9:42-44\n   #2  associations.fut:54:8-58:54\n   #3  associations.fut:128:29-85\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t a_215884 = smod32(x_215861, arg_215880);
        int32_t b_215885 = sdiv32(x_215861, arg_215880);
        bool index_certs_215897;
        
        if (!bounds_check_215878) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_215875, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:125:37-50\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t arg_215898 = ((int32_t *) mem_234991)[i_215875];
        int32_t i_215899 = add32(a_215884, arg_215898);
        int64_t i_215900 = sext_i32_i64(i_215899);
        bool x_215901 = sle64((int64_t) 0, i_215900);
        bool y_215902 = slt64(i_215900, nz2084U_189276);
        bool bounds_check_215903 = x_215901 && y_215902;
        bool index_certs_215904;
        
        if (!bounds_check_215903) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_215900, "] out of bounds for array of shape [", (long long) nz2084U_189276, "].", "-> #0  associations.fut:125:29-57\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t lifted_index_res_215905 = ((int32_t *) mem_234959)[i_215900];
        int64_t gridI_215906 = sext_i32_i64(defunc_0_f_res_215871);
        bool x_215907 = sle64((int64_t) 0, gridI_215906);
        bool y_215908 = slt64(gridI_215906, defunc_0_f_res_214541);
        bool bounds_check_215909 = x_215907 && y_215908;
        bool index_certs_215910;
        
        if (!bounds_check_215909) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) gridI_215906, "] out of bounds for array of shape [", (long long) defunc_0_f_res_214541, "].", "-> #0  associations.fut:125:37-50\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t arg_215911 = ((int32_t *) mem_234991)[gridI_215906];
        int32_t i_215912 = add32(b_215885, arg_215911);
        int64_t i_215913 = sext_i32_i64(i_215912);
        bool x_215914 = sle64((int64_t) 0, i_215913);
        bool y_215915 = slt64(i_215913, nz2084U_189276);
        bool bounds_check_215916 = x_215914 && y_215915;
        bool index_certs_215917;
        
        if (!bounds_check_215916) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_215913, "] out of bounds for array of shape [", (long long) nz2084U_189276, "].", "-> #0  associations.fut:125:29-57\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        int32_t lifted_index_res_215918 = ((int32_t *) mem_234959)[i_215913];
        
        ((int32_t *) mem_235592)[i_233962] = lifted_index_res_215905;
        ((int32_t *) mem_235595)[i_233962] = lifted_index_res_215918;
        ((int32_t *) mem_235598)[i_233962] = defunc_0_f_res_215872;
        ((int32_t *) mem_235601)[i_233962] = defunc_0_f_res_215873;
        ((int32_t *) mem_235604)[i_233962] = defunc_0_f_res_215874;
    }
    if (memblock_unref(ctx, &ext_mem_235584, "ext_mem_235584") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_235589, "ext_mem_235589") != 0)
        return 1;
    
    bool match_val_210397 = z30U_189277 == (int8_t) 2;
    bool match_val_210398 = z30U_189277 == (int8_t) 1;
    bool x_210399 = match_val_210397 || match_val_210398;
    bool hole_c_210400;
    
    if (!x_210399) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Reached hole of type: f32", "-> #0  potential.fut:141:59-61\n   #1  potential.fut:190:26-47\n   #2  potential.fut:192:48-72\n   #3  /prelude/functional.fut:9:42-44\n   #4  associations.fut:144:12-35\n   #5  /prelude/soacs.fut:172:53-55\n   #6  /prelude/functional.fut:9:42-44\n   #7  associations.fut:230:7-231:29\n   #8  futhark_interaction.fut:39:8-105\n   #9  futhark_interaction.fut:32:1-41:17\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    float defunc_1_f_res_211815 = z30U_189278 * z30U_189278;
    float defunc_1_f_res_211816 = z30U_189279 * z30U_189279;
    float defunc_1_f_res_211817 = z30U_189280 * z30U_189280;
    float defunc_1_f_res_211818 = defunc_1_f_res_211816 + defunc_1_f_res_211817;
    float defunc_0_f_res_211819 = defunc_1_f_res_211815 + defunc_1_f_res_211818;
    
    if (mem_235657_cached_sizze_236266 < bytes_235656) {
        err = lexical_realloc(ctx, &mem_235657, &mem_235657_cached_sizze_236266, bytes_235656);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235660_cached_sizze_236267 < bytes_235656) {
        err = lexical_realloc(ctx, &mem_235660, &mem_235660_cached_sizze_236267, bytes_235656);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    int64_t discard_233976;
    int64_t scanacc_233970 = (int64_t) 0;
    
    for (int64_t i_233973 = 0; i_233973 < conc_tmp_214996; i_233973++) {
        bool index_concat_cmp_234121 = sle64(i32_res_214568, i_233973);
        int32_t index_concat_branch_234125;
        
        if (index_concat_cmp_234121 == 1) {
            int64_t index_concat_i_234122 = sub64(i_233973, i32_res_214568);
            int32_t index_concat_234123 = ((int32_t *) mem_235592)[index_concat_i_234122];
            
            index_concat_branch_234125 = index_concat_234123;
        } else {
            int32_t index_concat_234124 = ((int32_t *) mem_235220)[i_233973];
            
            index_concat_branch_234125 = index_concat_234124;
        }
        
        int32_t index_concat_branch_234119;
        
        if (index_concat_cmp_234121 == 1) {
            int64_t index_concat_i_234116 = sub64(i_233973, i32_res_214568);
            int32_t index_concat_234117 = ((int32_t *) mem_235595)[index_concat_i_234116];
            
            index_concat_branch_234119 = index_concat_234117;
        } else {
            int32_t index_concat_234118 = ((int32_t *) mem_235223)[i_233973];
            
            index_concat_branch_234119 = index_concat_234118;
        }
        
        int32_t index_concat_branch_234113;
        
        if (index_concat_cmp_234121 == 1) {
            int64_t index_concat_i_234110 = sub64(i_233973, i32_res_214568);
            int32_t index_concat_234111 = ((int32_t *) mem_235598)[index_concat_i_234110];
            
            index_concat_branch_234113 = index_concat_234111;
        } else {
            index_concat_branch_234113 = 0;
        }
        
        int32_t index_concat_branch_234107;
        
        if (index_concat_cmp_234121 == 1) {
            int64_t index_concat_i_234104 = sub64(i_233973, i32_res_214568);
            int32_t index_concat_234105 = ((int32_t *) mem_235601)[index_concat_i_234104];
            
            index_concat_branch_234107 = index_concat_234105;
        } else {
            index_concat_branch_234107 = 0;
        }
        
        int32_t index_concat_branch_234101;
        
        if (index_concat_cmp_234121 == 1) {
            int64_t index_concat_i_234098 = sub64(i_233973, i32_res_214568);
            int32_t index_concat_234099 = ((int32_t *) mem_235604)[index_concat_i_234098];
            
            index_concat_branch_234101 = index_concat_234099;
        } else {
            index_concat_branch_234101 = 0;
        }
        
        int64_t i_215479 = sext_i32_i64(index_concat_branch_234125);
        bool x_215480 = sle64((int64_t) 0, i_215479);
        bool y_215481 = slt64(i_215479, nz2084U_189276);
        bool bounds_check_215482 = x_215480 && y_215481;
        bool index_certs_215483;
        
        if (!bounds_check_215482) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_215479, "] out of bounds for array of shape [", (long long) nz2084U_189276, "].", "-> #0  associations.fut:142:18-31\n   #1  /prelude/soacs.fut:172:53-55\n   #2  /prelude/functional.fut:9:42-44\n   #3  associations.fut:230:7-231:29\n   #4  futhark_interaction.fut:39:8-105\n   #5  futhark_interaction.fut:32:1-41:17\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        float defunc_0_p_res_215484 = ((float *) mem_234640)[i_215479];
        float defunc_0_p_res_215485 = ((float *) mem_234643)[i_215479];
        float defunc_0_p_res_215486 = ((float *) mem_234646)[i_215479];
        float defunc_0_p_res_215487 = ((float *) mem_234555)[i_215479];
        float defunc_0_p_res_215488 = ((float *) mem_234558)[i_215479];
        float defunc_0_p_res_215489 = ((float *) mem_234561)[i_215479];
        float defunc_0_p_res_215490 = ((float *) mem_234564)[i_215479];
        float defunc_0_f_res_215491 = sitofp_i32_f32(index_concat_branch_234113);
        float defunc_0_f_res_215492 = sitofp_i32_f32(index_concat_branch_234107);
        float defunc_0_f_res_215493 = sitofp_i32_f32(index_concat_branch_234101);
        float defunc_1_f_res_215494 = defunc_1_f_res_211793 * defunc_0_f_res_215491;
        float defunc_1_f_res_215495 = defunc_1_f_res_211794 * defunc_0_f_res_215492;
        float defunc_1_f_res_215496 = defunc_1_f_res_211795 * defunc_0_f_res_215493;
        int64_t j_215497 = sext_i32_i64(index_concat_branch_234119);
        bool x_215498 = sle64((int64_t) 0, j_215497);
        bool y_215499 = slt64(j_215497, nz2084U_189276);
        bool bounds_check_215500 = x_215498 && y_215499;
        bool index_certs_215501;
        
        if (!bounds_check_215500) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_215497, "] out of bounds for array of shape [", (long long) nz2084U_189276, "].", "-> #0  associations.fut:143:69-82\n   #1  /prelude/soacs.fut:172:53-55\n   #2  /prelude/functional.fut:9:42-44\n   #3  associations.fut:230:7-231:29\n   #4  futhark_interaction.fut:39:8-105\n   #5  futhark_interaction.fut:32:1-41:17\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        float dyn_translate_arg_215502 = ((float *) mem_234640)[j_215497];
        float dyn_translate_arg_215503 = ((float *) mem_234643)[j_215497];
        float dyn_translate_arg_215504 = ((float *) mem_234646)[j_215497];
        float dyn_translate_arg_215505 = ((float *) mem_234555)[j_215497];
        float dyn_translate_arg_215506 = ((float *) mem_234558)[j_215497];
        float dyn_translate_arg_215507 = ((float *) mem_234561)[j_215497];
        float dyn_translate_arg_215508 = ((float *) mem_234564)[j_215497];
        float defunc_1_f_res_215509 = defunc_1_f_res_215494 + dyn_translate_arg_215502;
        float defunc_1_f_res_215510 = defunc_1_f_res_215495 + dyn_translate_arg_215503;
        float defunc_1_f_res_215511 = defunc_1_f_res_215496 + dyn_translate_arg_215504;
        float defunc_1_f_res_215512 = defunc_1_f_res_215509 - defunc_0_p_res_215484;
        float defunc_1_f_res_215513 = defunc_1_f_res_215510 - defunc_0_p_res_215485;
        float defunc_1_f_res_215514 = defunc_1_f_res_215511 - defunc_0_p_res_215486;
        float defunc_0_f_res_215515 = 0.0F - defunc_0_p_res_215488;
        float defunc_0_f_res_215516 = 0.0F - defunc_0_p_res_215489;
        float defunc_0_f_res_215517 = 0.0F - defunc_0_p_res_215490;
        float defunc_0_f_res_215518 = 0.0F - defunc_0_f_res_215515;
        float defunc_0_f_res_215519 = 0.0F - defunc_0_f_res_215516;
        float defunc_0_f_res_215520 = 0.0F - defunc_0_f_res_215517;
        float defunc_1_f_res_215521 = defunc_1_f_res_215512 * defunc_0_f_res_215515;
        float defunc_1_f_res_215522 = defunc_1_f_res_215513 * defunc_0_f_res_215516;
        float defunc_1_f_res_215523 = defunc_1_f_res_215514 * defunc_0_f_res_215517;
        float defunc_1_f_res_215524 = defunc_1_f_res_215522 + defunc_1_f_res_215523;
        float defunc_0_f_res_215525 = defunc_1_f_res_215521 + defunc_1_f_res_215524;
        float qMult_res_215526 = 0.0F - defunc_0_f_res_215525;
        float arg_215527 = defunc_1_f_res_215514 * defunc_0_f_res_215516;
        float arg_215528 = defunc_1_f_res_215513 * defunc_0_f_res_215517;
        float cross_res_215529 = arg_215527 - arg_215528;
        float arg_215530 = defunc_1_f_res_215512 * defunc_0_f_res_215517;
        float arg_215531 = defunc_1_f_res_215514 * defunc_0_f_res_215515;
        float cross_res_215532 = arg_215530 - arg_215531;
        float arg_215533 = defunc_1_f_res_215513 * defunc_0_f_res_215515;
        float arg_215534 = defunc_1_f_res_215512 * defunc_0_f_res_215516;
        float cross_res_215535 = arg_215533 - arg_215534;
        float defunc_0_f_res_215536 = defunc_0_p_res_215487 * defunc_1_f_res_215512;
        float defunc_0_f_res_215537 = defunc_0_p_res_215487 * defunc_1_f_res_215513;
        float defunc_0_f_res_215538 = defunc_0_p_res_215487 * defunc_1_f_res_215514;
        float defunc_1_f_res_215539 = cross_res_215529 + defunc_0_f_res_215536;
        float defunc_1_f_res_215540 = cross_res_215532 + defunc_0_f_res_215537;
        float defunc_1_f_res_215541 = cross_res_215535 + defunc_0_f_res_215538;
        float arg_215542 = defunc_0_f_res_215520 * defunc_1_f_res_215540;
        float arg_215543 = defunc_0_f_res_215519 * defunc_1_f_res_215541;
        float cross_res_215544 = arg_215542 - arg_215543;
        float arg_215545 = defunc_0_f_res_215518 * defunc_1_f_res_215541;
        float arg_215546 = defunc_0_f_res_215520 * defunc_1_f_res_215539;
        float cross_res_215547 = arg_215545 - arg_215546;
        float arg_215548 = defunc_0_f_res_215519 * defunc_1_f_res_215539;
        float arg_215549 = defunc_0_f_res_215518 * defunc_1_f_res_215540;
        float cross_res_215550 = arg_215548 - arg_215549;
        float defunc_0_f_res_215551 = defunc_0_p_res_215487 * defunc_1_f_res_215539;
        float defunc_0_f_res_215552 = defunc_0_p_res_215487 * defunc_1_f_res_215540;
        float defunc_0_f_res_215553 = defunc_0_p_res_215487 * defunc_1_f_res_215541;
        float defunc_0_f_res_215554 = defunc_0_f_res_215518 * qMult_res_215526;
        float defunc_0_f_res_215555 = defunc_0_f_res_215519 * qMult_res_215526;
        float defunc_0_f_res_215556 = defunc_0_f_res_215520 * qMult_res_215526;
        float defunc_1_f_res_215557 = defunc_0_f_res_215551 + defunc_0_f_res_215554;
        float defunc_1_f_res_215558 = defunc_0_f_res_215552 + defunc_0_f_res_215555;
        float defunc_1_f_res_215559 = defunc_0_f_res_215553 + defunc_0_f_res_215556;
        float defunc_1_f_res_215560 = cross_res_215544 + defunc_1_f_res_215557;
        float defunc_1_f_res_215561 = cross_res_215547 + defunc_1_f_res_215558;
        float defunc_1_f_res_215562 = cross_res_215550 + defunc_1_f_res_215559;
        float arg_215563 = defunc_0_p_res_215487 * dyn_translate_arg_215505;
        float defunc_1_f_res_215564 = dyn_translate_arg_215506 * defunc_0_f_res_215515;
        float defunc_1_f_res_215565 = dyn_translate_arg_215507 * defunc_0_f_res_215516;
        float defunc_1_f_res_215566 = dyn_translate_arg_215508 * defunc_0_f_res_215517;
        float defunc_1_f_res_215567 = defunc_1_f_res_215565 + defunc_1_f_res_215566;
        float defunc_0_f_res_215568 = defunc_1_f_res_215564 + defunc_1_f_res_215567;
        float qMult_res_215569 = arg_215563 - defunc_0_f_res_215568;
        float arg_215570 = dyn_translate_arg_215508 * defunc_0_f_res_215516;
        float arg_215571 = dyn_translate_arg_215507 * defunc_0_f_res_215517;
        float cross_res_215572 = arg_215570 - arg_215571;
        float arg_215573 = dyn_translate_arg_215506 * defunc_0_f_res_215517;
        float arg_215574 = dyn_translate_arg_215508 * defunc_0_f_res_215515;
        float cross_res_215575 = arg_215573 - arg_215574;
        float arg_215576 = dyn_translate_arg_215507 * defunc_0_f_res_215515;
        float arg_215577 = dyn_translate_arg_215506 * defunc_0_f_res_215516;
        float cross_res_215578 = arg_215576 - arg_215577;
        float defunc_0_f_res_215579 = dyn_translate_arg_215505 * defunc_0_f_res_215515;
        float defunc_0_f_res_215580 = dyn_translate_arg_215505 * defunc_0_f_res_215516;
        float defunc_0_f_res_215581 = dyn_translate_arg_215505 * defunc_0_f_res_215517;
        float defunc_0_f_res_215582 = defunc_0_p_res_215487 * dyn_translate_arg_215506;
        float defunc_0_f_res_215583 = defunc_0_p_res_215487 * dyn_translate_arg_215507;
        float defunc_0_f_res_215584 = defunc_0_p_res_215487 * dyn_translate_arg_215508;
        float defunc_1_f_res_215585 = defunc_0_f_res_215579 + defunc_0_f_res_215582;
        float defunc_1_f_res_215586 = defunc_0_f_res_215580 + defunc_0_f_res_215583;
        float defunc_1_f_res_215587 = defunc_0_f_res_215581 + defunc_0_f_res_215584;
        float defunc_1_f_res_215588 = cross_res_215572 + defunc_1_f_res_215585;
        float defunc_1_f_res_215589 = cross_res_215575 + defunc_1_f_res_215586;
        float defunc_1_f_res_215590 = cross_res_215578 + defunc_1_f_res_215587;
        float distanceFunction_res_215591;
        
        if (z30U_189277 == (int8_t) 1) {
            float defunc_0_f_res_231626 = 0.0F - defunc_1_f_res_215588;
            float defunc_0_f_res_231627 = 0.0F - defunc_1_f_res_215589;
            float defunc_0_f_res_231628 = 0.0F - defunc_1_f_res_215590;
            float defunc_1_f_res_231629 = z30U_189281 * defunc_1_f_res_215588;
            float defunc_1_f_res_231630 = z30U_189282 * defunc_1_f_res_215589;
            float defunc_1_f_res_231631 = z30U_189283 * defunc_1_f_res_215590;
            float defunc_1_f_res_231632 = defunc_1_f_res_231630 + defunc_1_f_res_231631;
            float defunc_0_f_res_231633 = defunc_1_f_res_231629 + defunc_1_f_res_231632;
            float qMult_res_231634 = 0.0F - defunc_0_f_res_231633;
            float arg_231635 = z30U_189283 * defunc_1_f_res_215589;
            float arg_231636 = z30U_189282 * defunc_1_f_res_215590;
            float cross_res_231637 = arg_231635 - arg_231636;
            float arg_231638 = z30U_189281 * defunc_1_f_res_215590;
            float arg_231639 = z30U_189283 * defunc_1_f_res_215588;
            float cross_res_231640 = arg_231638 - arg_231639;
            float arg_231641 = z30U_189282 * defunc_1_f_res_215588;
            float arg_231642 = z30U_189281 * defunc_1_f_res_215589;
            float cross_res_231643 = arg_231641 - arg_231642;
            float defunc_0_f_res_231644 = z30U_189281 * qMult_res_215569;
            float defunc_0_f_res_231645 = z30U_189282 * qMult_res_215569;
            float defunc_0_f_res_231646 = z30U_189283 * qMult_res_215569;
            float defunc_1_f_res_231647 = cross_res_231637 + defunc_0_f_res_231644;
            float defunc_1_f_res_231648 = cross_res_231640 + defunc_0_f_res_231645;
            float defunc_1_f_res_231649 = cross_res_231643 + defunc_0_f_res_231646;
            float arg_231650 = defunc_0_f_res_231628 * defunc_1_f_res_231648;
            float arg_231651 = defunc_0_f_res_231627 * defunc_1_f_res_231649;
            float cross_res_231652 = arg_231650 - arg_231651;
            float arg_231653 = defunc_0_f_res_231626 * defunc_1_f_res_231649;
            float arg_231654 = defunc_0_f_res_231628 * defunc_1_f_res_231647;
            float cross_res_231655 = arg_231653 - arg_231654;
            float arg_231656 = defunc_0_f_res_231627 * defunc_1_f_res_231647;
            float arg_231657 = defunc_0_f_res_231626 * defunc_1_f_res_231648;
            float cross_res_231658 = arg_231656 - arg_231657;
            float defunc_0_f_res_231659 = qMult_res_215569 * defunc_1_f_res_231647;
            float defunc_0_f_res_231660 = qMult_res_215569 * defunc_1_f_res_231648;
            float defunc_0_f_res_231661 = qMult_res_215569 * defunc_1_f_res_231649;
            float defunc_0_f_res_231662 = defunc_0_f_res_231626 * qMult_res_231634;
            float defunc_0_f_res_231663 = defunc_0_f_res_231627 * qMult_res_231634;
            float defunc_0_f_res_231664 = defunc_0_f_res_231628 * qMult_res_231634;
            float defunc_1_f_res_231665 = defunc_0_f_res_231659 + defunc_0_f_res_231662;
            float defunc_1_f_res_231666 = defunc_0_f_res_231660 + defunc_0_f_res_231663;
            float defunc_1_f_res_231667 = defunc_0_f_res_231661 + defunc_0_f_res_231664;
            float defunc_1_f_res_231668 = cross_res_231652 + defunc_1_f_res_231665;
            float defunc_1_f_res_231669 = cross_res_231655 + defunc_1_f_res_231666;
            float defunc_1_f_res_231670 = cross_res_231658 + defunc_1_f_res_231667;
            float defunc_0_f_res_231671 = 0.0F - defunc_1_f_res_215560;
            float defunc_0_f_res_231672 = 0.0F - defunc_1_f_res_215561;
            float defunc_0_f_res_231673 = 0.0F - defunc_1_f_res_215562;
            float defunc_1_f_res_231674 = z30U_189278 * defunc_1_f_res_231668;
            float defunc_1_f_res_231675 = z30U_189279 * defunc_1_f_res_231669;
            float defunc_1_f_res_231676 = z30U_189280 * defunc_1_f_res_231670;
            float defunc_1_f_res_231677 = defunc_1_f_res_231675 + defunc_1_f_res_231676;
            float defunc_0_f_res_231678 = defunc_1_f_res_231674 + defunc_1_f_res_231677;
            float defunc_1_f_res_231679 = z30U_189278 * defunc_0_f_res_231671;
            float defunc_1_f_res_231680 = z30U_189279 * defunc_0_f_res_231672;
            float defunc_1_f_res_231681 = z30U_189280 * defunc_0_f_res_231673;
            float defunc_1_f_res_231682 = defunc_1_f_res_231680 + defunc_1_f_res_231681;
            float defunc_0_f_res_231683 = defunc_1_f_res_231679 + defunc_1_f_res_231682;
            float defunc_1_f_res_231684 = defunc_1_f_res_231668 * defunc_1_f_res_231668;
            float defunc_1_f_res_231685 = defunc_1_f_res_231669 * defunc_1_f_res_231669;
            float defunc_1_f_res_231686 = defunc_1_f_res_231670 * defunc_1_f_res_231670;
            float defunc_1_f_res_231687 = defunc_1_f_res_231685 + defunc_1_f_res_231686;
            float defunc_0_f_res_231688 = defunc_1_f_res_231684 + defunc_1_f_res_231687;
            float defunc_1_f_res_231689 = defunc_1_f_res_231668 * defunc_0_f_res_231671;
            float defunc_1_f_res_231690 = defunc_1_f_res_231669 * defunc_0_f_res_231672;
            float defunc_1_f_res_231691 = defunc_1_f_res_231670 * defunc_0_f_res_231673;
            float defunc_1_f_res_231692 = defunc_1_f_res_231690 + defunc_1_f_res_231691;
            float defunc_0_f_res_231693 = defunc_1_f_res_231689 + defunc_1_f_res_231692;
            float arg_231694 = defunc_0_f_res_211819 * defunc_0_f_res_231688;
            float arg_231695 = defunc_0_f_res_231678 * defunc_0_f_res_231678;
            float det_231696 = arg_231694 - arg_231695;
            float arg_231697 = defunc_0_f_res_231683 * defunc_0_f_res_231688;
            float arg_231698 = defunc_0_f_res_231678 * defunc_0_f_res_231693;
            float arg_231699 = arg_231697 - arg_231698;
            float i_m_231700 = arg_231699 / det_231696;
            float arg_231701 = defunc_0_f_res_211819 * defunc_0_f_res_231693;
            float arg_231702 = defunc_0_f_res_231678 * defunc_0_f_res_231683;
            float arg_231703 = arg_231701 - arg_231702;
            float j_m_231704 = arg_231703 / det_231696;
            float arg_231705 = defunc_0_f_res_231683 - defunc_0_f_res_231678;
            float i_p_231706 = arg_231705 / defunc_0_f_res_211819;
            float arg_231707 = defunc_0_f_res_231678 + defunc_0_f_res_231683;
            float i_n_231708 = arg_231707 / defunc_0_f_res_211819;
            float arg_231709 = defunc_0_f_res_231693 - defunc_0_f_res_231678;
            float j_p_231710 = arg_231709 / defunc_0_f_res_231688;
            float arg_231711 = defunc_0_f_res_231678 + defunc_0_f_res_231693;
            float j_n_231712 = arg_231711 / defunc_0_f_res_231688;
            bool cond_231713 = det_231696 == 0.0F;
            bool cond_231714 = !cond_231713;
            bool cond_231715 = -1.0F <= i_m_231700;
            bool lifted_valid_res_t_res_231716 = i_m_231700 <= 1.0F;
            bool x_231717 = cond_231715 && lifted_valid_res_t_res_231716;
            bool x_231718 = cond_231714 && x_231717;
            bool cond_231719 = -1.0F <= j_m_231704;
            bool lifted_valid_res_t_res_231720 = j_m_231704 <= 1.0F;
            bool x_231721 = cond_231719 && lifted_valid_res_t_res_231720;
            bool x_231722 = x_231718 && x_231721;
            float rodDistance_res_231723;
            
            if (x_231722 == 1) {
                float defunc_0_f_res_231724 = defunc_1_f_res_231668 * j_m_231704;
                float defunc_0_f_res_231725 = defunc_1_f_res_231669 * j_m_231704;
                float defunc_0_f_res_231726 = defunc_1_f_res_231670 * j_m_231704;
                float defunc_0_f_res_231727 = z30U_189278 * i_m_231700;
                float defunc_0_f_res_231728 = z30U_189279 * i_m_231700;
                float defunc_0_f_res_231729 = z30U_189280 * i_m_231700;
                float defunc_1_f_res_231730 = defunc_0_f_res_231724 + defunc_0_f_res_231727;
                float defunc_1_f_res_231731 = defunc_0_f_res_231725 + defunc_0_f_res_231728;
                float defunc_1_f_res_231732 = defunc_0_f_res_231726 + defunc_0_f_res_231729;
                float defunc_1_f_res_231733 = defunc_1_f_res_231730 - defunc_0_f_res_231671;
                float defunc_1_f_res_231734 = defunc_1_f_res_231731 - defunc_0_f_res_231672;
                float defunc_1_f_res_231735 = defunc_1_f_res_231732 - defunc_0_f_res_231673;
                float defunc_1_f_res_231736 = defunc_1_f_res_231733 * defunc_1_f_res_231733;
                float defunc_1_f_res_231737 = defunc_1_f_res_231734 * defunc_1_f_res_231734;
                float defunc_1_f_res_231738 = defunc_1_f_res_231735 * defunc_1_f_res_231735;
                float defunc_1_f_res_231739 = defunc_1_f_res_231737 + defunc_1_f_res_231738;
                float defunc_0_f_res_231740 = defunc_1_f_res_231736 + defunc_1_f_res_231739;
                float sqrt_res_231741 = futrts_sqrt32(defunc_0_f_res_231740);
                
                rodDistance_res_231723 = sqrt_res_231741;
            } else {
                float defunc_0_f_res_231742 = -1.0F * defunc_1_f_res_231668;
                float defunc_0_f_res_231743 = -1.0F * defunc_1_f_res_231669;
                float defunc_0_f_res_231744 = -1.0F * defunc_1_f_res_231670;
                float defunc_0_f_res_231745 = -1.0F * z30U_189278;
                float defunc_0_f_res_231746 = -1.0F * z30U_189279;
                float defunc_0_f_res_231747 = -1.0F * z30U_189280;
                float defunc_1_f_res_231748 = defunc_0_f_res_231742 + defunc_0_f_res_231745;
                float defunc_1_f_res_231749 = defunc_0_f_res_231743 + defunc_0_f_res_231746;
                float defunc_1_f_res_231750 = defunc_0_f_res_231744 + defunc_0_f_res_231747;
                float defunc_1_f_res_231751 = defunc_1_f_res_231748 - defunc_0_f_res_231671;
                float defunc_1_f_res_231752 = defunc_1_f_res_231749 - defunc_0_f_res_231672;
                float defunc_1_f_res_231753 = defunc_1_f_res_231750 - defunc_0_f_res_231673;
                float defunc_1_f_res_231754 = defunc_1_f_res_231751 * defunc_1_f_res_231751;
                float defunc_1_f_res_231755 = defunc_1_f_res_231752 * defunc_1_f_res_231752;
                float defunc_1_f_res_231756 = defunc_1_f_res_231753 * defunc_1_f_res_231753;
                float defunc_1_f_res_231757 = defunc_1_f_res_231755 + defunc_1_f_res_231756;
                float defunc_0_f_res_231758 = defunc_1_f_res_231754 + defunc_1_f_res_231757;
                float defunc_1_f_res_231759 = defunc_1_f_res_231668 + defunc_0_f_res_231745;
                float defunc_1_f_res_231760 = defunc_1_f_res_231669 + defunc_0_f_res_231746;
                float defunc_1_f_res_231761 = defunc_1_f_res_231670 + defunc_0_f_res_231747;
                float defunc_1_f_res_231762 = defunc_1_f_res_231759 - defunc_0_f_res_231671;
                float defunc_1_f_res_231763 = defunc_1_f_res_231760 - defunc_0_f_res_231672;
                float defunc_1_f_res_231764 = defunc_1_f_res_231761 - defunc_0_f_res_231673;
                float defunc_1_f_res_231765 = defunc_1_f_res_231762 * defunc_1_f_res_231762;
                float defunc_1_f_res_231766 = defunc_1_f_res_231763 * defunc_1_f_res_231763;
                float defunc_1_f_res_231767 = defunc_1_f_res_231764 * defunc_1_f_res_231764;
                float defunc_1_f_res_231768 = defunc_1_f_res_231766 + defunc_1_f_res_231767;
                float defunc_0_f_res_231769 = defunc_1_f_res_231765 + defunc_1_f_res_231768;
                float defunc_1_f_res_231770 = z30U_189278 + defunc_0_f_res_231742;
                float defunc_1_f_res_231771 = z30U_189279 + defunc_0_f_res_231743;
                float defunc_1_f_res_231772 = z30U_189280 + defunc_0_f_res_231744;
                float defunc_1_f_res_231773 = defunc_1_f_res_231770 - defunc_0_f_res_231671;
                float defunc_1_f_res_231774 = defunc_1_f_res_231771 - defunc_0_f_res_231672;
                float defunc_1_f_res_231775 = defunc_1_f_res_231772 - defunc_0_f_res_231673;
                float defunc_1_f_res_231776 = defunc_1_f_res_231773 * defunc_1_f_res_231773;
                float defunc_1_f_res_231777 = defunc_1_f_res_231774 * defunc_1_f_res_231774;
                float defunc_1_f_res_231778 = defunc_1_f_res_231775 * defunc_1_f_res_231775;
                float defunc_1_f_res_231779 = defunc_1_f_res_231777 + defunc_1_f_res_231778;
                float defunc_0_f_res_231780 = defunc_1_f_res_231776 + defunc_1_f_res_231779;
                float defunc_1_f_res_231781 = z30U_189278 + defunc_1_f_res_231668;
                float defunc_1_f_res_231782 = z30U_189279 + defunc_1_f_res_231669;
                float defunc_1_f_res_231783 = z30U_189280 + defunc_1_f_res_231670;
                float defunc_1_f_res_231784 = defunc_1_f_res_231781 - defunc_0_f_res_231671;
                float defunc_1_f_res_231785 = defunc_1_f_res_231782 - defunc_0_f_res_231672;
                float defunc_1_f_res_231786 = defunc_1_f_res_231783 - defunc_0_f_res_231673;
                float defunc_1_f_res_231787 = defunc_1_f_res_231784 * defunc_1_f_res_231784;
                float defunc_1_f_res_231788 = defunc_1_f_res_231785 * defunc_1_f_res_231785;
                float defunc_1_f_res_231789 = defunc_1_f_res_231786 * defunc_1_f_res_231786;
                float defunc_1_f_res_231790 = defunc_1_f_res_231788 + defunc_1_f_res_231789;
                float defunc_0_f_res_231791 = defunc_1_f_res_231787 + defunc_1_f_res_231790;
                bool cond_231792 = -1.0F <= j_n_231712;
                bool lifted_valid_res_t_res_231793 = j_n_231712 <= 1.0F;
                bool x_231794 = cond_231792 && lifted_valid_res_t_res_231793;
                float min_arg_231795;
                
                if (x_231794 == 1) {
                    float defunc_0_f_res_231796 = defunc_1_f_res_231668 * j_n_231712;
                    float defunc_0_f_res_231797 = defunc_1_f_res_231669 * j_n_231712;
                    float defunc_0_f_res_231798 = defunc_1_f_res_231670 * j_n_231712;
                    float defunc_1_f_res_231799 = defunc_0_f_res_231745 + defunc_0_f_res_231796;
                    float defunc_1_f_res_231800 = defunc_0_f_res_231746 + defunc_0_f_res_231797;
                    float defunc_1_f_res_231801 = defunc_0_f_res_231747 + defunc_0_f_res_231798;
                    float defunc_1_f_res_231802 = defunc_1_f_res_231799 - defunc_0_f_res_231671;
                    float defunc_1_f_res_231803 = defunc_1_f_res_231800 - defunc_0_f_res_231672;
                    float defunc_1_f_res_231804 = defunc_1_f_res_231801 - defunc_0_f_res_231673;
                    float defunc_1_f_res_231805 = defunc_1_f_res_231802 * defunc_1_f_res_231802;
                    float defunc_1_f_res_231806 = defunc_1_f_res_231803 * defunc_1_f_res_231803;
                    float defunc_1_f_res_231807 = defunc_1_f_res_231804 * defunc_1_f_res_231804;
                    float defunc_1_f_res_231808 = defunc_1_f_res_231806 + defunc_1_f_res_231807;
                    float defunc_0_f_res_231809 = defunc_1_f_res_231805 + defunc_1_f_res_231808;
                    
                    min_arg_231795 = defunc_0_f_res_231809;
                } else {
                    min_arg_231795 = INFINITY;
                }
                
                bool cond_231810 = -1.0F <= j_p_231710;
                bool lifted_valid_res_t_res_231811 = j_p_231710 <= 1.0F;
                bool x_231812 = cond_231810 && lifted_valid_res_t_res_231811;
                float min_arg_231813;
                
                if (x_231812 == 1) {
                    float defunc_0_f_res_231814 = defunc_1_f_res_231668 * j_p_231710;
                    float defunc_0_f_res_231815 = defunc_1_f_res_231669 * j_p_231710;
                    float defunc_0_f_res_231816 = defunc_1_f_res_231670 * j_p_231710;
                    float defunc_1_f_res_231817 = z30U_189278 + defunc_0_f_res_231814;
                    float defunc_1_f_res_231818 = z30U_189279 + defunc_0_f_res_231815;
                    float defunc_1_f_res_231819 = z30U_189280 + defunc_0_f_res_231816;
                    float defunc_1_f_res_231820 = defunc_1_f_res_231817 - defunc_0_f_res_231671;
                    float defunc_1_f_res_231821 = defunc_1_f_res_231818 - defunc_0_f_res_231672;
                    float defunc_1_f_res_231822 = defunc_1_f_res_231819 - defunc_0_f_res_231673;
                    float defunc_1_f_res_231823 = defunc_1_f_res_231820 * defunc_1_f_res_231820;
                    float defunc_1_f_res_231824 = defunc_1_f_res_231821 * defunc_1_f_res_231821;
                    float defunc_1_f_res_231825 = defunc_1_f_res_231822 * defunc_1_f_res_231822;
                    float defunc_1_f_res_231826 = defunc_1_f_res_231824 + defunc_1_f_res_231825;
                    float defunc_0_f_res_231827 = defunc_1_f_res_231823 + defunc_1_f_res_231826;
                    
                    min_arg_231813 = defunc_0_f_res_231827;
                } else {
                    min_arg_231813 = INFINITY;
                }
                
                bool cond_231828 = -1.0F <= i_n_231708;
                bool lifted_valid_res_t_res_231829 = i_n_231708 <= 1.0F;
                bool x_231830 = cond_231828 && lifted_valid_res_t_res_231829;
                float min_arg_231831;
                
                if (x_231830 == 1) {
                    float defunc_0_f_res_231832 = z30U_189278 * i_n_231708;
                    float defunc_0_f_res_231833 = z30U_189279 * i_n_231708;
                    float defunc_0_f_res_231834 = z30U_189280 * i_n_231708;
                    float defunc_1_f_res_231835 = defunc_0_f_res_231742 + defunc_0_f_res_231832;
                    float defunc_1_f_res_231836 = defunc_0_f_res_231743 + defunc_0_f_res_231833;
                    float defunc_1_f_res_231837 = defunc_0_f_res_231744 + defunc_0_f_res_231834;
                    float defunc_1_f_res_231838 = defunc_1_f_res_231835 - defunc_0_f_res_231671;
                    float defunc_1_f_res_231839 = defunc_1_f_res_231836 - defunc_0_f_res_231672;
                    float defunc_1_f_res_231840 = defunc_1_f_res_231837 - defunc_0_f_res_231673;
                    float defunc_1_f_res_231841 = defunc_1_f_res_231838 * defunc_1_f_res_231838;
                    float defunc_1_f_res_231842 = defunc_1_f_res_231839 * defunc_1_f_res_231839;
                    float defunc_1_f_res_231843 = defunc_1_f_res_231840 * defunc_1_f_res_231840;
                    float defunc_1_f_res_231844 = defunc_1_f_res_231842 + defunc_1_f_res_231843;
                    float defunc_0_f_res_231845 = defunc_1_f_res_231841 + defunc_1_f_res_231844;
                    
                    min_arg_231831 = defunc_0_f_res_231845;
                } else {
                    min_arg_231831 = INFINITY;
                }
                
                bool cond_231846 = -1.0F <= i_p_231706;
                bool lifted_valid_res_t_res_231847 = i_p_231706 <= 1.0F;
                bool x_231848 = cond_231846 && lifted_valid_res_t_res_231847;
                float min_arg_231849;
                
                if (x_231848 == 1) {
                    float defunc_0_f_res_231850 = z30U_189278 * i_p_231706;
                    float defunc_0_f_res_231851 = z30U_189279 * i_p_231706;
                    float defunc_0_f_res_231852 = z30U_189280 * i_p_231706;
                    float defunc_1_f_res_231853 = defunc_1_f_res_231668 + defunc_0_f_res_231850;
                    float defunc_1_f_res_231854 = defunc_1_f_res_231669 + defunc_0_f_res_231851;
                    float defunc_1_f_res_231855 = defunc_1_f_res_231670 + defunc_0_f_res_231852;
                    float defunc_1_f_res_231856 = defunc_1_f_res_231853 - defunc_0_f_res_231671;
                    float defunc_1_f_res_231857 = defunc_1_f_res_231854 - defunc_0_f_res_231672;
                    float defunc_1_f_res_231858 = defunc_1_f_res_231855 - defunc_0_f_res_231673;
                    float defunc_1_f_res_231859 = defunc_1_f_res_231856 * defunc_1_f_res_231856;
                    float defunc_1_f_res_231860 = defunc_1_f_res_231857 * defunc_1_f_res_231857;
                    float defunc_1_f_res_231861 = defunc_1_f_res_231858 * defunc_1_f_res_231858;
                    float defunc_1_f_res_231862 = defunc_1_f_res_231860 + defunc_1_f_res_231861;
                    float defunc_0_f_res_231863 = defunc_1_f_res_231859 + defunc_1_f_res_231862;
                    
                    min_arg_231849 = defunc_0_f_res_231863;
                } else {
                    min_arg_231849 = INFINITY;
                }
                
                float min_res_231864 = fmin32(min_arg_231831, min_arg_231849);
                float min_res_231865 = fmin32(min_arg_231813, min_res_231864);
                float min_res_231866 = fmin32(min_arg_231795, min_res_231865);
                float min_res_231867 = fmin32(defunc_0_f_res_231791, min_res_231866);
                float min_res_231868 = fmin32(defunc_0_f_res_231780, min_res_231867);
                float min_res_231869 = fmin32(defunc_0_f_res_231769, min_res_231868);
                float min_res_231870 = fmin32(defunc_0_f_res_231758, min_res_231869);
                float sqrt_res_231871 = futrts_sqrt32(min_res_231870);
                
                rodDistance_res_231723 = sqrt_res_231871;
            }
            distanceFunction_res_215591 = rodDistance_res_231723;
        } else if (z30U_189277 == (int8_t) 2) {
            float defunc_1_f_res_231546 = defunc_1_f_res_215560 * defunc_1_f_res_215560;
            float defunc_1_f_res_231547 = defunc_1_f_res_215561 * defunc_1_f_res_215561;
            float defunc_1_f_res_231548 = defunc_1_f_res_215562 * defunc_1_f_res_215562;
            float defunc_1_f_res_231549 = defunc_1_f_res_231547 + defunc_1_f_res_231548;
            float defunc_0_f_res_231550 = defunc_1_f_res_231546 + defunc_1_f_res_231549;
            float sqrt_res_231551 = futrts_sqrt32(defunc_0_f_res_231550);
            
            distanceFunction_res_215591 = sqrt_res_231551;
        } else {
            distanceFunction_res_215591 = 0.0F;
        }
        
        bool defunc_0_f_res_215844 = distanceFunction_res_215591 <= z30U_189290;
        bool cond_neg_215845 = !defunc_0_f_res_215844;
        int64_t defunc_1_lifted_lambda_res_215846 = btoi_bool_i64(cond_neg_215845);
        bool is_i_215847 = defunc_1_lifted_lambda_res_215846 == (int64_t) 0;
        bool cond_neg_215848 = !is_i_215847;
        int64_t part_res_215849 = btoi_bool_i64(cond_neg_215848);
        int64_t part_res_215850 = btoi_bool_i64(is_i_215847);
        int64_t zz_210538 = part_res_215850 + scanacc_233970;
        
        ((int64_t *) mem_235657)[i_233973] = zz_210538;
        ((int64_t *) mem_235660)[i_233973] = part_res_215849;
        
        int64_t scanacc_tmp_236087 = zz_210538;
        
        scanacc_233970 = scanacc_tmp_236087;
    }
    discard_233976 = scanacc_233970;
    
    int64_t last_index_210540 = conc_tmp_214996 - (int64_t) 1;
    bool is_empty_210541 = conc_tmp_214996 == (int64_t) 0;
    bool x_210542 = !is_empty_210541;
    int64_t last_offset_210543;
    
    if (x_210542 == 1) {
        int64_t x_231872 = ((int64_t *) mem_235657)[last_index_210540];
        
        last_offset_210543 = x_231872;
    } else {
        last_offset_210543 = (int64_t) 0;
    }
    
    int64_t partition_sizze_210545;
    
    if (is_empty_210541 == 1) {
        partition_sizze_210545 = (int64_t) 0;
    } else {
        partition_sizze_210545 = last_offset_210543;
    }
    if (mem_235683_cached_sizze_236268 < bytes_235682) {
        err = lexical_realloc(ctx, &mem_235683, &mem_235683_cached_sizze_236268, bytes_235682);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235686_cached_sizze_236269 < bytes_235682) {
        err = lexical_realloc(ctx, &mem_235686, &mem_235686_cached_sizze_236269, bytes_235682);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235689_cached_sizze_236270 < bytes_235682) {
        err = lexical_realloc(ctx, &mem_235689, &mem_235689_cached_sizze_236270, bytes_235682);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235692_cached_sizze_236271 < bytes_235682) {
        err = lexical_realloc(ctx, &mem_235692, &mem_235692_cached_sizze_236271, bytes_235682);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235695_cached_sizze_236272 < bytes_235682) {
        err = lexical_realloc(ctx, &mem_235695, &mem_235695_cached_sizze_236272, bytes_235682);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t write_iter_233977 = 0; write_iter_233977 < conc_tmp_214996; write_iter_233977++) {
        int64_t write_iv_233983 = ((int64_t *) mem_235660)[write_iter_233977];
        int64_t write_iv_233984 = ((int64_t *) mem_235657)[write_iter_233977];
        bool index_concat_cmp_234091 = sle64(i32_res_214568, write_iter_233977);
        int32_t index_concat_branch_234095;
        
        if (index_concat_cmp_234091 == 1) {
            int64_t index_concat_i_234092 = sub64(write_iter_233977, i32_res_214568);
            int32_t index_concat_234093 = ((int32_t *) mem_235592)[index_concat_i_234092];
            
            index_concat_branch_234095 = index_concat_234093;
        } else {
            int32_t index_concat_234094 = ((int32_t *) mem_235220)[write_iter_233977];
            
            index_concat_branch_234095 = index_concat_234094;
        }
        
        int32_t index_concat_branch_234089;
        
        if (index_concat_cmp_234091 == 1) {
            int64_t index_concat_i_234086 = sub64(write_iter_233977, i32_res_214568);
            int32_t index_concat_234087 = ((int32_t *) mem_235595)[index_concat_i_234086];
            
            index_concat_branch_234089 = index_concat_234087;
        } else {
            int32_t index_concat_234088 = ((int32_t *) mem_235223)[write_iter_233977];
            
            index_concat_branch_234089 = index_concat_234088;
        }
        
        int32_t index_concat_branch_234083;
        
        if (index_concat_cmp_234091 == 1) {
            int64_t index_concat_i_234080 = sub64(write_iter_233977, i32_res_214568);
            int32_t index_concat_234081 = ((int32_t *) mem_235598)[index_concat_i_234080];
            
            index_concat_branch_234083 = index_concat_234081;
        } else {
            index_concat_branch_234083 = 0;
        }
        
        int32_t index_concat_branch_234077;
        
        if (index_concat_cmp_234091 == 1) {
            int64_t index_concat_i_234074 = sub64(write_iter_233977, i32_res_214568);
            int32_t index_concat_234075 = ((int32_t *) mem_235601)[index_concat_i_234074];
            
            index_concat_branch_234077 = index_concat_234075;
        } else {
            index_concat_branch_234077 = 0;
        }
        
        int32_t index_concat_branch_234071;
        
        if (index_concat_cmp_234091 == 1) {
            int64_t index_concat_i_234068 = sub64(write_iter_233977, i32_res_214568);
            int32_t index_concat_234069 = ((int32_t *) mem_235604)[index_concat_i_234068];
            
            index_concat_branch_234071 = index_concat_234069;
        } else {
            index_concat_branch_234071 = 0;
        }
        
        bool is_this_one_210563 = write_iv_233983 == (int64_t) 0;
        int64_t this_offset_210564 = (int64_t) -1 + write_iv_233984;
        int64_t total_res_210565;
        
        if (is_this_one_210563 == 1) {
            total_res_210565 = this_offset_210564;
        } else {
            total_res_210565 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, total_res_210565) && slt64(total_res_210565, conc_tmp_214996)) {
            ((int32_t *) mem_235683)[total_res_210565] = index_concat_branch_234095;
        }
        if (sle64((int64_t) 0, total_res_210565) && slt64(total_res_210565, conc_tmp_214996)) {
            ((int32_t *) mem_235686)[total_res_210565] = index_concat_branch_234089;
        }
        if (sle64((int64_t) 0, total_res_210565) && slt64(total_res_210565, conc_tmp_214996)) {
            ((int32_t *) mem_235689)[total_res_210565] = index_concat_branch_234083;
        }
        if (sle64((int64_t) 0, total_res_210565) && slt64(total_res_210565, conc_tmp_214996)) {
            ((int32_t *) mem_235692)[total_res_210565] = index_concat_branch_234077;
        }
        if (sle64((int64_t) 0, total_res_210565) && slt64(total_res_210565, conc_tmp_214996)) {
            ((int32_t *) mem_235695)[total_res_210565] = index_concat_branch_234071;
        }
    }
    
    bool eq_x_zz_210566 = (int64_t) 0 == last_offset_210543;
    bool p_and_eq_x_y_210567 = x_210542 && eq_x_zz_210566;
    bool empty_slice_210568 = is_empty_210541 || p_and_eq_x_y_210567;
    int64_t m_210569 = sub64(partition_sizze_210545, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_210570 = sle64((int64_t) 0, m_210569);
    bool i_p_m_t_s_leq_w_210571 = slt64(m_210569, conc_tmp_214996);
    bool i_lte_j_210572 = sle64((int64_t) 0, partition_sizze_210545);
    bool y_210573 = zzero_leq_i_p_m_t_s_210570 && i_p_m_t_s_leq_w_210571;
    bool y_210574 = i_lte_j_210572 && y_210573;
    bool ok_or_empty_210575 = empty_slice_210568 || y_210574;
    bool index_certs_210576;
    
    if (!ok_or_empty_210575) {
        set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [:", (long long) partition_sizze_210545, "] out of bounds for array of shape [", (long long) conc_tmp_214996, "].", "-> #0  /prelude/soacs.fut:173:6-16\n   #1  /prelude/functional.fut:9:42-44\n   #2  associations.fut:230:7-231:29\n   #3  futhark_interaction.fut:39:8-105\n   #4  futhark_interaction.fut:32:1-41:17\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    if (mem_235748_cached_sizze_236273 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_235748, &mem_235748_cached_sizze_236273, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236095 = 0; i_236095 < nz2084U_189276; i_236095++) {
        ((float *) mem_235748)[i_236095] = 0.0F;
    }
    if (mem_235751_cached_sizze_236274 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_235751, &mem_235751_cached_sizze_236274, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236096 = 0; i_236096 < nz2084U_189276; i_236096++) {
        ((float *) mem_235751)[i_236096] = 0.0F;
    }
    if (mem_235754_cached_sizze_236275 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_235754, &mem_235754_cached_sizze_236275, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236097 = 0; i_236097 < nz2084U_189276; i_236097++) {
        ((float *) mem_235754)[i_236097] = 0.0F;
    }
    if (mem_235757_cached_sizze_236276 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_235757, &mem_235757_cached_sizze_236276, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236098 = 0; i_236098 < nz2084U_189276; i_236098++) {
        ((float *) mem_235757)[i_236098] = 0.0F;
    }
    if (mem_235760_cached_sizze_236277 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_235760, &mem_235760_cached_sizze_236277, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236099 = 0; i_236099 < nz2084U_189276; i_236099++) {
        ((float *) mem_235760)[i_236099] = 0.0F;
    }
    if (mem_235763_cached_sizze_236278 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_235763, &mem_235763_cached_sizze_236278, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236100 = 0; i_236100 < nz2084U_189276; i_236100++) {
        ((float *) mem_235763)[i_236100] = 0.0F;
    }
    if (mem_235766_cached_sizze_236279 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_235766, &mem_235766_cached_sizze_236279, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_236101 = 0; i_236101 < nz2084U_189276; i_236101++) {
        ((float *) mem_235766)[i_236101] = 0.0F;
    }
    
    bool hole_c_210592;
    
    if (!x_210399) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Reached hole of type: f32", "-> #0  potential.fut:141:59-61\n   #1  potential.fut:190:26-47\n   #2  potential.fut:434:57-81\n   #3  network.fut:25:28-32\n   #4  network.fut:152:24-42\n   #5  network.fut:110:23-40\n   #6  network.fut:140:23-41\n   #7  network.fut:109:23-40\n   #8  network.fut:128:23-41\n   #9  potential.fut:373:24-69\n   #10 /prelude/functional.fut:9:42-44\n   #11 potential.fut:137:19-47\n   #12 associations.fut:200:43-77\n   #13 associations.fut:203:21-208:24\n   #14 /prelude/functional.fut:9:42-44\n   #15 associations.fut:230:7-232:54\n   #16 futhark_interaction.fut:39:8-105\n   #17 futhark_interaction.fut:32:1-41:17\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    float i32_res_211464 = sitofp_i32_f32(z30U_189291);
    bool hole_c_211035;
    
    if (!x_210399) {
        set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Reached hole of type: f32", "-> #0  potential.fut:141:59-61\n   #1  potential.fut:190:26-47\n   #2  potential.fut:434:57-81\n   #3  network.fut:25:57-61\n   #4  /prelude/ad.fut:23:4-14\n   #5  network.fut:25:41-71\n   #6  network.fut:155:29-34\n   #7  network.fut:112:28-32\n   #8  network.fut:142:29-33\n   #9  network.fut:113:28-32\n   #10 network.fut:130:29-33\n   #11 potential.fut:374:26-32\n   #12 /prelude/functional.fut:9:42-44\n   #13 potential.fut:137:19-47\n   #14 associations.fut:200:43-77\n   #15 associations.fut:203:21-208:24\n   #16 /prelude/functional.fut:9:42-44\n   #17 associations.fut:230:7-232:54\n   #18 futhark_interaction.fut:39:8-105\n   #19 futhark_interaction.fut:32:1-41:17\n"));
        err = FUTHARK_PROGRAM_ERROR;
        goto cleanup;
    }
    
    float binop_y_221299 = 1.0F / z30U_189290;
    float binop_y_224178 = 1.0F / defunc_0_f_res_211819;
    
    if (mem_235769_cached_sizze_236280 < bytes_235768) {
        err = lexical_realloc(ctx, &mem_235769, &mem_235769_cached_sizze_236280, bytes_235768);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235772_cached_sizze_236281 < bytes_235768) {
        err = lexical_realloc(ctx, &mem_235772, &mem_235772_cached_sizze_236281, bytes_235768);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235775_cached_sizze_236282 < bytes_235768) {
        err = lexical_realloc(ctx, &mem_235775, &mem_235775_cached_sizze_236282, bytes_235768);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235778_cached_sizze_236283 < bytes_235768) {
        err = lexical_realloc(ctx, &mem_235778, &mem_235778_cached_sizze_236283, bytes_235768);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235821_cached_sizze_236284 < bytes_235820) {
        err = lexical_realloc(ctx, &mem_235821, &mem_235821_cached_sizze_236284, bytes_235820);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235824_cached_sizze_236285 < bytes_235820) {
        err = lexical_realloc(ctx, &mem_235824, &mem_235824_cached_sizze_236285, bytes_235820);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235847_cached_sizze_236286 < bytes_235820) {
        err = lexical_realloc(ctx, &mem_235847, &mem_235847_cached_sizze_236286, bytes_235820);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235850_cached_sizze_236287 < bytes_235820) {
        err = lexical_realloc(ctx, &mem_235850, &mem_235850_cached_sizze_236287, bytes_235820);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235873_cached_sizze_236288 < bytes_235820) {
        err = lexical_realloc(ctx, &mem_235873, &mem_235873_cached_sizze_236288, bytes_235820);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235886_cached_sizze_236289 < bytes_235820) {
        err = lexical_realloc(ctx, &mem_235886, &mem_235886_cached_sizze_236289, bytes_235820);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235899_cached_sizze_236290 < bytes_235820) {
        err = lexical_realloc(ctx, &mem_235899, &mem_235899_cached_sizze_236290, bytes_235820);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    
    bool acc_cert_210711;
    
    for (int64_t i_234061 = 0; i_234061 < partition_sizze_210545; i_234061++) {
        int32_t x_210715 = ((int32_t *) mem_235683)[i_234061];
        int32_t x_210716 = ((int32_t *) mem_235686)[i_234061];
        int32_t x_210717 = ((int32_t *) mem_235689)[i_234061];
        int32_t x_210718 = ((int32_t *) mem_235692)[i_234061];
        int32_t x_210719 = ((int32_t *) mem_235695)[i_234061];
        int64_t i_210720 = sext_i32_i64(x_210715);
        bool x_210721 = sle64((int64_t) 0, i_210720);
        bool y_210722 = slt64(i_210720, nz2084U_189276);
        bool bounds_check_210723 = x_210721 && y_210722;
        bool index_certs_210724;
        
        if (!bounds_check_210723) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) i_210720, "] out of bounds for array of shape [", (long long) nz2084U_189276, "].", "-> #0  associations.fut:198:18-31\n   #1  associations.fut:203:21-208:24\n   #2  /prelude/functional.fut:9:42-44\n   #3  associations.fut:230:7-232:54\n   #4  futhark_interaction.fut:39:8-105\n   #5  futhark_interaction.fut:32:1-41:17\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        float defunc_1_f_res_210725 = ((float *) mem_234640)[i_210720];
        float defunc_1_f_res_210726 = ((float *) mem_234643)[i_210720];
        float defunc_1_f_res_210727 = ((float *) mem_234646)[i_210720];
        float defunc_1_f_res_210728 = ((float *) mem_234555)[i_210720];
        float defunc_1_f_res_210729 = ((float *) mem_234558)[i_210720];
        float defunc_1_f_res_210730 = ((float *) mem_234561)[i_210720];
        float defunc_1_f_res_210731 = ((float *) mem_234564)[i_210720];
        float defunc_0_f_res_210732 = sitofp_i32_f32(x_210717);
        float defunc_0_f_res_210733 = sitofp_i32_f32(x_210718);
        float defunc_0_f_res_210734 = sitofp_i32_f32(x_210719);
        float defunc_1_f_res_211402 = defunc_0_f_res_210732 * defunc_1_f_res_211793;
        float defunc_1_f_res_211412 = defunc_0_f_res_210733 * defunc_1_f_res_211794;
        float defunc_1_f_res_211422 = defunc_0_f_res_210734 * defunc_1_f_res_211795;
        int64_t j_210750 = sext_i32_i64(x_210716);
        bool x_210751 = sle64((int64_t) 0, j_210750);
        bool y_210752 = slt64(j_210750, nz2084U_189276);
        bool bounds_check_210753 = x_210751 && y_210752;
        bool index_certs_210754;
        
        if (!bounds_check_210753) {
            set_error(ctx, msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s", "Index [", (long long) j_210750, "] out of bounds for array of shape [", (long long) nz2084U_189276, "].", "-> #0  associations.fut:199:69-82\n   #1  associations.fut:203:21-208:24\n   #2  /prelude/functional.fut:9:42-44\n   #3  associations.fut:230:7-232:54\n   #4  futhark_interaction.fut:39:8-105\n   #5  futhark_interaction.fut:32:1-41:17\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        
        float dyn_translate_arg_210755 = ((float *) mem_234640)[j_210750];
        float dyn_translate_arg_210756 = ((float *) mem_234643)[j_210750];
        float dyn_translate_arg_210757 = ((float *) mem_234646)[j_210750];
        float dyn_translate_arg_210758 = ((float *) mem_234555)[j_210750];
        float dyn_translate_arg_210759 = ((float *) mem_234558)[j_210750];
        float dyn_translate_arg_210760 = ((float *) mem_234561)[j_210750];
        float dyn_translate_arg_210761 = ((float *) mem_234564)[j_210750];
        float defunc_1_f_res_211429 = dyn_translate_arg_210755 + defunc_1_f_res_211402;
        float defunc_1_f_res_211430 = dyn_translate_arg_210756 + defunc_1_f_res_211412;
        float defunc_1_f_res_211431 = dyn_translate_arg_210757 + defunc_1_f_res_211422;
        float defunc_1_f_res_215265 = defunc_1_f_res_211429 - defunc_1_f_res_210725;
        float defunc_1_f_res_215266 = defunc_1_f_res_211430 - defunc_1_f_res_210726;
        float defunc_1_f_res_215267 = defunc_1_f_res_211431 - defunc_1_f_res_210727;
        float defunc_0_f_res_215268 = 0.0F - defunc_1_f_res_210729;
        float defunc_0_f_res_215269 = 0.0F - defunc_1_f_res_210730;
        float defunc_0_f_res_215270 = 0.0F - defunc_1_f_res_210731;
        float defunc_0_f_res_215271 = 0.0F - defunc_0_f_res_215268;
        float defunc_0_f_res_215272 = 0.0F - defunc_0_f_res_215269;
        float defunc_0_f_res_215273 = 0.0F - defunc_0_f_res_215270;
        float defunc_1_f_res_215274 = defunc_1_f_res_215265 * defunc_0_f_res_215268;
        float defunc_1_f_res_215275 = defunc_1_f_res_215266 * defunc_0_f_res_215269;
        float defunc_1_f_res_215276 = defunc_1_f_res_215267 * defunc_0_f_res_215270;
        float defunc_1_f_res_215277 = defunc_1_f_res_215275 + defunc_1_f_res_215276;
        float defunc_0_f_res_215278 = defunc_1_f_res_215274 + defunc_1_f_res_215277;
        float qMult_res_215279 = 0.0F - defunc_0_f_res_215278;
        float arg_215280 = defunc_1_f_res_215267 * defunc_0_f_res_215269;
        float arg_215281 = defunc_1_f_res_215266 * defunc_0_f_res_215270;
        float cross_res_215282 = arg_215280 - arg_215281;
        float arg_215283 = defunc_1_f_res_215265 * defunc_0_f_res_215270;
        float arg_215284 = defunc_1_f_res_215267 * defunc_0_f_res_215268;
        float cross_res_215285 = arg_215283 - arg_215284;
        float arg_215286 = defunc_1_f_res_215266 * defunc_0_f_res_215268;
        float arg_215287 = defunc_1_f_res_215265 * defunc_0_f_res_215269;
        float cross_res_215288 = arg_215286 - arg_215287;
        float defunc_0_f_res_215289 = defunc_1_f_res_210728 * defunc_1_f_res_215265;
        float defunc_0_f_res_215290 = defunc_1_f_res_210728 * defunc_1_f_res_215266;
        float defunc_0_f_res_215291 = defunc_1_f_res_210728 * defunc_1_f_res_215267;
        float defunc_1_f_res_215292 = cross_res_215282 + defunc_0_f_res_215289;
        float defunc_1_f_res_215293 = cross_res_215285 + defunc_0_f_res_215290;
        float defunc_1_f_res_215294 = cross_res_215288 + defunc_0_f_res_215291;
        float arg_215295 = defunc_0_f_res_215273 * defunc_1_f_res_215293;
        float arg_215296 = defunc_0_f_res_215272 * defunc_1_f_res_215294;
        float cross_res_215297 = arg_215295 - arg_215296;
        float arg_215298 = defunc_0_f_res_215271 * defunc_1_f_res_215294;
        float arg_215299 = defunc_0_f_res_215273 * defunc_1_f_res_215292;
        float cross_res_215300 = arg_215298 - arg_215299;
        float arg_215301 = defunc_0_f_res_215272 * defunc_1_f_res_215292;
        float arg_215302 = defunc_0_f_res_215271 * defunc_1_f_res_215293;
        float cross_res_215303 = arg_215301 - arg_215302;
        float defunc_0_f_res_215304 = defunc_1_f_res_210728 * defunc_1_f_res_215292;
        float defunc_0_f_res_215305 = defunc_1_f_res_210728 * defunc_1_f_res_215293;
        float defunc_0_f_res_215306 = defunc_1_f_res_210728 * defunc_1_f_res_215294;
        float defunc_0_f_res_215307 = defunc_0_f_res_215271 * qMult_res_215279;
        float defunc_0_f_res_215308 = defunc_0_f_res_215272 * qMult_res_215279;
        float defunc_0_f_res_215309 = defunc_0_f_res_215273 * qMult_res_215279;
        float defunc_1_f_res_215310 = defunc_0_f_res_215304 + defunc_0_f_res_215307;
        float defunc_1_f_res_215311 = defunc_0_f_res_215305 + defunc_0_f_res_215308;
        float defunc_1_f_res_215312 = defunc_0_f_res_215306 + defunc_0_f_res_215309;
        float defunc_1_f_res_215313 = cross_res_215297 + defunc_1_f_res_215310;
        float defunc_1_f_res_215314 = cross_res_215300 + defunc_1_f_res_215311;
        float defunc_1_f_res_215315 = cross_res_215303 + defunc_1_f_res_215312;
        float arg_215316 = defunc_1_f_res_210728 * dyn_translate_arg_210758;
        float defunc_1_f_res_215317 = dyn_translate_arg_210759 * defunc_0_f_res_215268;
        float defunc_1_f_res_215318 = dyn_translate_arg_210760 * defunc_0_f_res_215269;
        float defunc_1_f_res_215319 = dyn_translate_arg_210761 * defunc_0_f_res_215270;
        float defunc_1_f_res_215320 = defunc_1_f_res_215318 + defunc_1_f_res_215319;
        float defunc_0_f_res_215321 = defunc_1_f_res_215317 + defunc_1_f_res_215320;
        float qMult_res_215322 = arg_215316 - defunc_0_f_res_215321;
        float arg_215323 = dyn_translate_arg_210761 * defunc_0_f_res_215269;
        float arg_215324 = dyn_translate_arg_210760 * defunc_0_f_res_215270;
        float cross_res_215325 = arg_215323 - arg_215324;
        float arg_215326 = dyn_translate_arg_210759 * defunc_0_f_res_215270;
        float arg_215327 = dyn_translate_arg_210761 * defunc_0_f_res_215268;
        float cross_res_215328 = arg_215326 - arg_215327;
        float arg_215329 = dyn_translate_arg_210760 * defunc_0_f_res_215268;
        float arg_215330 = dyn_translate_arg_210759 * defunc_0_f_res_215269;
        float cross_res_215331 = arg_215329 - arg_215330;
        float defunc_0_f_res_215332 = dyn_translate_arg_210758 * defunc_0_f_res_215268;
        float defunc_0_f_res_215333 = dyn_translate_arg_210758 * defunc_0_f_res_215269;
        float defunc_0_f_res_215334 = dyn_translate_arg_210758 * defunc_0_f_res_215270;
        float defunc_0_f_res_215335 = defunc_1_f_res_210728 * dyn_translate_arg_210759;
        float defunc_0_f_res_215336 = defunc_1_f_res_210728 * dyn_translate_arg_210760;
        float defunc_0_f_res_215337 = defunc_1_f_res_210728 * dyn_translate_arg_210761;
        float defunc_1_f_res_215338 = defunc_0_f_res_215332 + defunc_0_f_res_215335;
        float defunc_1_f_res_215339 = defunc_0_f_res_215333 + defunc_0_f_res_215336;
        float defunc_1_f_res_215340 = defunc_0_f_res_215334 + defunc_0_f_res_215337;
        float defunc_1_f_res_215341 = cross_res_215325 + defunc_1_f_res_215338;
        float defunc_1_f_res_215342 = cross_res_215328 + defunc_1_f_res_215339;
        float defunc_1_f_res_215343 = cross_res_215331 + defunc_1_f_res_215340;
        float distanceFunction_res_210772;
        
        if (z30U_189277 == (int8_t) 1) {
            float defunc_0_f_res_231953 = 0.0F - defunc_1_f_res_215341;
            float defunc_0_f_res_231954 = 0.0F - defunc_1_f_res_215342;
            float defunc_0_f_res_231955 = 0.0F - defunc_1_f_res_215343;
            float defunc_1_f_res_231956 = z30U_189281 * defunc_1_f_res_215341;
            float defunc_1_f_res_231957 = z30U_189282 * defunc_1_f_res_215342;
            float defunc_1_f_res_231958 = z30U_189283 * defunc_1_f_res_215343;
            float defunc_1_f_res_231959 = defunc_1_f_res_231957 + defunc_1_f_res_231958;
            float defunc_0_f_res_231960 = defunc_1_f_res_231956 + defunc_1_f_res_231959;
            float qMult_res_231961 = 0.0F - defunc_0_f_res_231960;
            float arg_231962 = z30U_189283 * defunc_1_f_res_215342;
            float arg_231963 = z30U_189282 * defunc_1_f_res_215343;
            float cross_res_231964 = arg_231962 - arg_231963;
            float arg_231965 = z30U_189281 * defunc_1_f_res_215343;
            float arg_231966 = z30U_189283 * defunc_1_f_res_215341;
            float cross_res_231967 = arg_231965 - arg_231966;
            float arg_231968 = z30U_189282 * defunc_1_f_res_215341;
            float arg_231969 = z30U_189281 * defunc_1_f_res_215342;
            float cross_res_231970 = arg_231968 - arg_231969;
            float defunc_0_f_res_231971 = z30U_189281 * qMult_res_215322;
            float defunc_0_f_res_231972 = z30U_189282 * qMult_res_215322;
            float defunc_0_f_res_231973 = z30U_189283 * qMult_res_215322;
            float defunc_1_f_res_231974 = cross_res_231964 + defunc_0_f_res_231971;
            float defunc_1_f_res_231975 = cross_res_231967 + defunc_0_f_res_231972;
            float defunc_1_f_res_231976 = cross_res_231970 + defunc_0_f_res_231973;
            float arg_231977 = defunc_0_f_res_231955 * defunc_1_f_res_231975;
            float arg_231978 = defunc_0_f_res_231954 * defunc_1_f_res_231976;
            float cross_res_231979 = arg_231977 - arg_231978;
            float arg_231980 = defunc_0_f_res_231953 * defunc_1_f_res_231976;
            float arg_231981 = defunc_0_f_res_231955 * defunc_1_f_res_231974;
            float cross_res_231982 = arg_231980 - arg_231981;
            float arg_231983 = defunc_0_f_res_231954 * defunc_1_f_res_231974;
            float arg_231984 = defunc_0_f_res_231953 * defunc_1_f_res_231975;
            float cross_res_231985 = arg_231983 - arg_231984;
            float defunc_0_f_res_231986 = qMult_res_215322 * defunc_1_f_res_231974;
            float defunc_0_f_res_231987 = qMult_res_215322 * defunc_1_f_res_231975;
            float defunc_0_f_res_231988 = qMult_res_215322 * defunc_1_f_res_231976;
            float defunc_0_f_res_231989 = defunc_0_f_res_231953 * qMult_res_231961;
            float defunc_0_f_res_231990 = defunc_0_f_res_231954 * qMult_res_231961;
            float defunc_0_f_res_231991 = defunc_0_f_res_231955 * qMult_res_231961;
            float defunc_1_f_res_231992 = defunc_0_f_res_231986 + defunc_0_f_res_231989;
            float defunc_1_f_res_231993 = defunc_0_f_res_231987 + defunc_0_f_res_231990;
            float defunc_1_f_res_231994 = defunc_0_f_res_231988 + defunc_0_f_res_231991;
            float defunc_1_f_res_231995 = cross_res_231979 + defunc_1_f_res_231992;
            float defunc_1_f_res_231996 = cross_res_231982 + defunc_1_f_res_231993;
            float defunc_1_f_res_231997 = cross_res_231985 + defunc_1_f_res_231994;
            float defunc_0_f_res_231998 = 0.0F - defunc_1_f_res_215313;
            float defunc_0_f_res_231999 = 0.0F - defunc_1_f_res_215314;
            float defunc_0_f_res_232000 = 0.0F - defunc_1_f_res_215315;
            float defunc_1_f_res_232001 = z30U_189278 * defunc_1_f_res_231995;
            float defunc_1_f_res_232002 = z30U_189279 * defunc_1_f_res_231996;
            float defunc_1_f_res_232003 = z30U_189280 * defunc_1_f_res_231997;
            float defunc_1_f_res_232004 = defunc_1_f_res_232002 + defunc_1_f_res_232003;
            float defunc_0_f_res_232005 = defunc_1_f_res_232001 + defunc_1_f_res_232004;
            float defunc_1_f_res_232006 = z30U_189278 * defunc_0_f_res_231998;
            float defunc_1_f_res_232007 = z30U_189279 * defunc_0_f_res_231999;
            float defunc_1_f_res_232008 = z30U_189280 * defunc_0_f_res_232000;
            float defunc_1_f_res_232009 = defunc_1_f_res_232007 + defunc_1_f_res_232008;
            float defunc_0_f_res_232010 = defunc_1_f_res_232006 + defunc_1_f_res_232009;
            float defunc_1_f_res_232011 = defunc_1_f_res_231995 * defunc_1_f_res_231995;
            float defunc_1_f_res_232012 = defunc_1_f_res_231996 * defunc_1_f_res_231996;
            float defunc_1_f_res_232013 = defunc_1_f_res_231997 * defunc_1_f_res_231997;
            float defunc_1_f_res_232014 = defunc_1_f_res_232012 + defunc_1_f_res_232013;
            float defunc_0_f_res_232015 = defunc_1_f_res_232011 + defunc_1_f_res_232014;
            float defunc_1_f_res_232016 = defunc_1_f_res_231995 * defunc_0_f_res_231998;
            float defunc_1_f_res_232017 = defunc_1_f_res_231996 * defunc_0_f_res_231999;
            float defunc_1_f_res_232018 = defunc_1_f_res_231997 * defunc_0_f_res_232000;
            float defunc_1_f_res_232019 = defunc_1_f_res_232017 + defunc_1_f_res_232018;
            float defunc_0_f_res_232020 = defunc_1_f_res_232016 + defunc_1_f_res_232019;
            float arg_232021 = defunc_0_f_res_211819 * defunc_0_f_res_232015;
            float arg_232022 = defunc_0_f_res_232005 * defunc_0_f_res_232005;
            float det_232023 = arg_232021 - arg_232022;
            float arg_232024 = defunc_0_f_res_232010 * defunc_0_f_res_232015;
            float arg_232025 = defunc_0_f_res_232005 * defunc_0_f_res_232020;
            float arg_232026 = arg_232024 - arg_232025;
            float i_m_232027 = arg_232026 / det_232023;
            float arg_232028 = defunc_0_f_res_211819 * defunc_0_f_res_232020;
            float arg_232029 = defunc_0_f_res_232005 * defunc_0_f_res_232010;
            float arg_232030 = arg_232028 - arg_232029;
            float j_m_232031 = arg_232030 / det_232023;
            float arg_232032 = defunc_0_f_res_232010 - defunc_0_f_res_232005;
            float i_p_232033 = arg_232032 / defunc_0_f_res_211819;
            float arg_232034 = defunc_0_f_res_232005 + defunc_0_f_res_232010;
            float i_n_232035 = arg_232034 / defunc_0_f_res_211819;
            float arg_232036 = defunc_0_f_res_232020 - defunc_0_f_res_232005;
            float j_p_232037 = arg_232036 / defunc_0_f_res_232015;
            float arg_232038 = defunc_0_f_res_232005 + defunc_0_f_res_232020;
            float j_n_232039 = arg_232038 / defunc_0_f_res_232015;
            bool cond_232040 = det_232023 == 0.0F;
            bool cond_232041 = !cond_232040;
            bool cond_232042 = -1.0F <= i_m_232027;
            bool lifted_valid_res_t_res_232043 = i_m_232027 <= 1.0F;
            bool x_232044 = cond_232042 && lifted_valid_res_t_res_232043;
            bool x_232045 = cond_232041 && x_232044;
            bool cond_232046 = -1.0F <= j_m_232031;
            bool lifted_valid_res_t_res_232047 = j_m_232031 <= 1.0F;
            bool x_232048 = cond_232046 && lifted_valid_res_t_res_232047;
            bool x_232049 = x_232045 && x_232048;
            float rodDistance_res_232050;
            
            if (x_232049 == 1) {
                float defunc_0_f_res_232051 = defunc_1_f_res_231995 * j_m_232031;
                float defunc_0_f_res_232052 = defunc_1_f_res_231996 * j_m_232031;
                float defunc_0_f_res_232053 = defunc_1_f_res_231997 * j_m_232031;
                float defunc_0_f_res_232054 = z30U_189278 * i_m_232027;
                float defunc_0_f_res_232055 = z30U_189279 * i_m_232027;
                float defunc_0_f_res_232056 = z30U_189280 * i_m_232027;
                float defunc_1_f_res_232057 = defunc_0_f_res_232051 + defunc_0_f_res_232054;
                float defunc_1_f_res_232058 = defunc_0_f_res_232052 + defunc_0_f_res_232055;
                float defunc_1_f_res_232059 = defunc_0_f_res_232053 + defunc_0_f_res_232056;
                float defunc_1_f_res_232060 = defunc_1_f_res_232057 - defunc_0_f_res_231998;
                float defunc_1_f_res_232061 = defunc_1_f_res_232058 - defunc_0_f_res_231999;
                float defunc_1_f_res_232062 = defunc_1_f_res_232059 - defunc_0_f_res_232000;
                float defunc_1_f_res_232063 = defunc_1_f_res_232060 * defunc_1_f_res_232060;
                float defunc_1_f_res_232064 = defunc_1_f_res_232061 * defunc_1_f_res_232061;
                float defunc_1_f_res_232065 = defunc_1_f_res_232062 * defunc_1_f_res_232062;
                float defunc_1_f_res_232066 = defunc_1_f_res_232064 + defunc_1_f_res_232065;
                float defunc_0_f_res_232067 = defunc_1_f_res_232063 + defunc_1_f_res_232066;
                float sqrt_res_232068 = futrts_sqrt32(defunc_0_f_res_232067);
                
                rodDistance_res_232050 = sqrt_res_232068;
            } else {
                float defunc_0_f_res_232069 = -1.0F * defunc_1_f_res_231995;
                float defunc_0_f_res_232070 = -1.0F * defunc_1_f_res_231996;
                float defunc_0_f_res_232071 = -1.0F * defunc_1_f_res_231997;
                float defunc_0_f_res_232072 = -1.0F * z30U_189278;
                float defunc_0_f_res_232073 = -1.0F * z30U_189279;
                float defunc_0_f_res_232074 = -1.0F * z30U_189280;
                float defunc_1_f_res_232075 = defunc_0_f_res_232069 + defunc_0_f_res_232072;
                float defunc_1_f_res_232076 = defunc_0_f_res_232070 + defunc_0_f_res_232073;
                float defunc_1_f_res_232077 = defunc_0_f_res_232071 + defunc_0_f_res_232074;
                float defunc_1_f_res_232078 = defunc_1_f_res_232075 - defunc_0_f_res_231998;
                float defunc_1_f_res_232079 = defunc_1_f_res_232076 - defunc_0_f_res_231999;
                float defunc_1_f_res_232080 = defunc_1_f_res_232077 - defunc_0_f_res_232000;
                float defunc_1_f_res_232081 = defunc_1_f_res_232078 * defunc_1_f_res_232078;
                float defunc_1_f_res_232082 = defunc_1_f_res_232079 * defunc_1_f_res_232079;
                float defunc_1_f_res_232083 = defunc_1_f_res_232080 * defunc_1_f_res_232080;
                float defunc_1_f_res_232084 = defunc_1_f_res_232082 + defunc_1_f_res_232083;
                float defunc_0_f_res_232085 = defunc_1_f_res_232081 + defunc_1_f_res_232084;
                float defunc_1_f_res_232086 = defunc_1_f_res_231995 + defunc_0_f_res_232072;
                float defunc_1_f_res_232087 = defunc_1_f_res_231996 + defunc_0_f_res_232073;
                float defunc_1_f_res_232088 = defunc_1_f_res_231997 + defunc_0_f_res_232074;
                float defunc_1_f_res_232089 = defunc_1_f_res_232086 - defunc_0_f_res_231998;
                float defunc_1_f_res_232090 = defunc_1_f_res_232087 - defunc_0_f_res_231999;
                float defunc_1_f_res_232091 = defunc_1_f_res_232088 - defunc_0_f_res_232000;
                float defunc_1_f_res_232092 = defunc_1_f_res_232089 * defunc_1_f_res_232089;
                float defunc_1_f_res_232093 = defunc_1_f_res_232090 * defunc_1_f_res_232090;
                float defunc_1_f_res_232094 = defunc_1_f_res_232091 * defunc_1_f_res_232091;
                float defunc_1_f_res_232095 = defunc_1_f_res_232093 + defunc_1_f_res_232094;
                float defunc_0_f_res_232096 = defunc_1_f_res_232092 + defunc_1_f_res_232095;
                float defunc_1_f_res_232097 = z30U_189278 + defunc_0_f_res_232069;
                float defunc_1_f_res_232098 = z30U_189279 + defunc_0_f_res_232070;
                float defunc_1_f_res_232099 = z30U_189280 + defunc_0_f_res_232071;
                float defunc_1_f_res_232100 = defunc_1_f_res_232097 - defunc_0_f_res_231998;
                float defunc_1_f_res_232101 = defunc_1_f_res_232098 - defunc_0_f_res_231999;
                float defunc_1_f_res_232102 = defunc_1_f_res_232099 - defunc_0_f_res_232000;
                float defunc_1_f_res_232103 = defunc_1_f_res_232100 * defunc_1_f_res_232100;
                float defunc_1_f_res_232104 = defunc_1_f_res_232101 * defunc_1_f_res_232101;
                float defunc_1_f_res_232105 = defunc_1_f_res_232102 * defunc_1_f_res_232102;
                float defunc_1_f_res_232106 = defunc_1_f_res_232104 + defunc_1_f_res_232105;
                float defunc_0_f_res_232107 = defunc_1_f_res_232103 + defunc_1_f_res_232106;
                float defunc_1_f_res_232108 = z30U_189278 + defunc_1_f_res_231995;
                float defunc_1_f_res_232109 = z30U_189279 + defunc_1_f_res_231996;
                float defunc_1_f_res_232110 = z30U_189280 + defunc_1_f_res_231997;
                float defunc_1_f_res_232111 = defunc_1_f_res_232108 - defunc_0_f_res_231998;
                float defunc_1_f_res_232112 = defunc_1_f_res_232109 - defunc_0_f_res_231999;
                float defunc_1_f_res_232113 = defunc_1_f_res_232110 - defunc_0_f_res_232000;
                float defunc_1_f_res_232114 = defunc_1_f_res_232111 * defunc_1_f_res_232111;
                float defunc_1_f_res_232115 = defunc_1_f_res_232112 * defunc_1_f_res_232112;
                float defunc_1_f_res_232116 = defunc_1_f_res_232113 * defunc_1_f_res_232113;
                float defunc_1_f_res_232117 = defunc_1_f_res_232115 + defunc_1_f_res_232116;
                float defunc_0_f_res_232118 = defunc_1_f_res_232114 + defunc_1_f_res_232117;
                bool cond_232119 = -1.0F <= j_n_232039;
                bool lifted_valid_res_t_res_232120 = j_n_232039 <= 1.0F;
                bool x_232121 = cond_232119 && lifted_valid_res_t_res_232120;
                float min_arg_232122;
                
                if (x_232121 == 1) {
                    float defunc_0_f_res_232123 = defunc_1_f_res_231995 * j_n_232039;
                    float defunc_0_f_res_232124 = defunc_1_f_res_231996 * j_n_232039;
                    float defunc_0_f_res_232125 = defunc_1_f_res_231997 * j_n_232039;
                    float defunc_1_f_res_232126 = defunc_0_f_res_232072 + defunc_0_f_res_232123;
                    float defunc_1_f_res_232127 = defunc_0_f_res_232073 + defunc_0_f_res_232124;
                    float defunc_1_f_res_232128 = defunc_0_f_res_232074 + defunc_0_f_res_232125;
                    float defunc_1_f_res_232129 = defunc_1_f_res_232126 - defunc_0_f_res_231998;
                    float defunc_1_f_res_232130 = defunc_1_f_res_232127 - defunc_0_f_res_231999;
                    float defunc_1_f_res_232131 = defunc_1_f_res_232128 - defunc_0_f_res_232000;
                    float defunc_1_f_res_232132 = defunc_1_f_res_232129 * defunc_1_f_res_232129;
                    float defunc_1_f_res_232133 = defunc_1_f_res_232130 * defunc_1_f_res_232130;
                    float defunc_1_f_res_232134 = defunc_1_f_res_232131 * defunc_1_f_res_232131;
                    float defunc_1_f_res_232135 = defunc_1_f_res_232133 + defunc_1_f_res_232134;
                    float defunc_0_f_res_232136 = defunc_1_f_res_232132 + defunc_1_f_res_232135;
                    
                    min_arg_232122 = defunc_0_f_res_232136;
                } else {
                    min_arg_232122 = INFINITY;
                }
                
                bool cond_232137 = -1.0F <= j_p_232037;
                bool lifted_valid_res_t_res_232138 = j_p_232037 <= 1.0F;
                bool x_232139 = cond_232137 && lifted_valid_res_t_res_232138;
                float min_arg_232140;
                
                if (x_232139 == 1) {
                    float defunc_0_f_res_232141 = defunc_1_f_res_231995 * j_p_232037;
                    float defunc_0_f_res_232142 = defunc_1_f_res_231996 * j_p_232037;
                    float defunc_0_f_res_232143 = defunc_1_f_res_231997 * j_p_232037;
                    float defunc_1_f_res_232144 = z30U_189278 + defunc_0_f_res_232141;
                    float defunc_1_f_res_232145 = z30U_189279 + defunc_0_f_res_232142;
                    float defunc_1_f_res_232146 = z30U_189280 + defunc_0_f_res_232143;
                    float defunc_1_f_res_232147 = defunc_1_f_res_232144 - defunc_0_f_res_231998;
                    float defunc_1_f_res_232148 = defunc_1_f_res_232145 - defunc_0_f_res_231999;
                    float defunc_1_f_res_232149 = defunc_1_f_res_232146 - defunc_0_f_res_232000;
                    float defunc_1_f_res_232150 = defunc_1_f_res_232147 * defunc_1_f_res_232147;
                    float defunc_1_f_res_232151 = defunc_1_f_res_232148 * defunc_1_f_res_232148;
                    float defunc_1_f_res_232152 = defunc_1_f_res_232149 * defunc_1_f_res_232149;
                    float defunc_1_f_res_232153 = defunc_1_f_res_232151 + defunc_1_f_res_232152;
                    float defunc_0_f_res_232154 = defunc_1_f_res_232150 + defunc_1_f_res_232153;
                    
                    min_arg_232140 = defunc_0_f_res_232154;
                } else {
                    min_arg_232140 = INFINITY;
                }
                
                bool cond_232155 = -1.0F <= i_n_232035;
                bool lifted_valid_res_t_res_232156 = i_n_232035 <= 1.0F;
                bool x_232157 = cond_232155 && lifted_valid_res_t_res_232156;
                float min_arg_232158;
                
                if (x_232157 == 1) {
                    float defunc_0_f_res_232159 = z30U_189278 * i_n_232035;
                    float defunc_0_f_res_232160 = z30U_189279 * i_n_232035;
                    float defunc_0_f_res_232161 = z30U_189280 * i_n_232035;
                    float defunc_1_f_res_232162 = defunc_0_f_res_232069 + defunc_0_f_res_232159;
                    float defunc_1_f_res_232163 = defunc_0_f_res_232070 + defunc_0_f_res_232160;
                    float defunc_1_f_res_232164 = defunc_0_f_res_232071 + defunc_0_f_res_232161;
                    float defunc_1_f_res_232165 = defunc_1_f_res_232162 - defunc_0_f_res_231998;
                    float defunc_1_f_res_232166 = defunc_1_f_res_232163 - defunc_0_f_res_231999;
                    float defunc_1_f_res_232167 = defunc_1_f_res_232164 - defunc_0_f_res_232000;
                    float defunc_1_f_res_232168 = defunc_1_f_res_232165 * defunc_1_f_res_232165;
                    float defunc_1_f_res_232169 = defunc_1_f_res_232166 * defunc_1_f_res_232166;
                    float defunc_1_f_res_232170 = defunc_1_f_res_232167 * defunc_1_f_res_232167;
                    float defunc_1_f_res_232171 = defunc_1_f_res_232169 + defunc_1_f_res_232170;
                    float defunc_0_f_res_232172 = defunc_1_f_res_232168 + defunc_1_f_res_232171;
                    
                    min_arg_232158 = defunc_0_f_res_232172;
                } else {
                    min_arg_232158 = INFINITY;
                }
                
                bool cond_232173 = -1.0F <= i_p_232033;
                bool lifted_valid_res_t_res_232174 = i_p_232033 <= 1.0F;
                bool x_232175 = cond_232173 && lifted_valid_res_t_res_232174;
                float min_arg_232176;
                
                if (x_232175 == 1) {
                    float defunc_0_f_res_232177 = z30U_189278 * i_p_232033;
                    float defunc_0_f_res_232178 = z30U_189279 * i_p_232033;
                    float defunc_0_f_res_232179 = z30U_189280 * i_p_232033;
                    float defunc_1_f_res_232180 = defunc_1_f_res_231995 + defunc_0_f_res_232177;
                    float defunc_1_f_res_232181 = defunc_1_f_res_231996 + defunc_0_f_res_232178;
                    float defunc_1_f_res_232182 = defunc_1_f_res_231997 + defunc_0_f_res_232179;
                    float defunc_1_f_res_232183 = defunc_1_f_res_232180 - defunc_0_f_res_231998;
                    float defunc_1_f_res_232184 = defunc_1_f_res_232181 - defunc_0_f_res_231999;
                    float defunc_1_f_res_232185 = defunc_1_f_res_232182 - defunc_0_f_res_232000;
                    float defunc_1_f_res_232186 = defunc_1_f_res_232183 * defunc_1_f_res_232183;
                    float defunc_1_f_res_232187 = defunc_1_f_res_232184 * defunc_1_f_res_232184;
                    float defunc_1_f_res_232188 = defunc_1_f_res_232185 * defunc_1_f_res_232185;
                    float defunc_1_f_res_232189 = defunc_1_f_res_232187 + defunc_1_f_res_232188;
                    float defunc_0_f_res_232190 = defunc_1_f_res_232186 + defunc_1_f_res_232189;
                    
                    min_arg_232176 = defunc_0_f_res_232190;
                } else {
                    min_arg_232176 = INFINITY;
                }
                
                float min_res_232191 = fmin32(min_arg_232158, min_arg_232176);
                float min_res_232192 = fmin32(min_arg_232140, min_res_232191);
                float min_res_232193 = fmin32(min_arg_232122, min_res_232192);
                float min_res_232194 = fmin32(defunc_0_f_res_232118, min_res_232193);
                float min_res_232195 = fmin32(defunc_0_f_res_232107, min_res_232194);
                float min_res_232196 = fmin32(defunc_0_f_res_232096, min_res_232195);
                float min_res_232197 = fmin32(defunc_0_f_res_232085, min_res_232196);
                float sqrt_res_232198 = futrts_sqrt32(min_res_232197);
                
                rodDistance_res_232050 = sqrt_res_232198;
            }
            distanceFunction_res_210772 = rodDistance_res_232050;
        } else if (z30U_189277 == (int8_t) 2) {
            float defunc_1_f_res_231873 = defunc_1_f_res_215313 * defunc_1_f_res_215313;
            float defunc_1_f_res_231874 = defunc_1_f_res_215314 * defunc_1_f_res_215314;
            float defunc_1_f_res_231875 = defunc_1_f_res_215315 * defunc_1_f_res_215315;
            float defunc_1_f_res_231876 = defunc_1_f_res_231874 + defunc_1_f_res_231875;
            float defunc_0_f_res_231877 = defunc_1_f_res_231873 + defunc_1_f_res_231876;
            float sqrt_res_231878 = futrts_sqrt32(defunc_0_f_res_231877);
            
            distanceFunction_res_210772 = sqrt_res_231878;
        } else {
            distanceFunction_res_210772 = 0.0F;
        }
        
        float softcut_arg_210836 = distanceFunction_res_210772 / z30U_189290;
        float abs_res_211465 = (float) fabs(softcut_arg_210836);
        bool cond_211466 = abs_res_211465 < 1.0F;
        float softcut_res_211467;
        
        if (cond_211466 == 1) {
            float arg_232199 = softcut_arg_210836 * softcut_arg_210836;
            float arg_232200 = arg_232199 - 1.0F;
            float arg_232201 = i32_res_211464 * arg_232200;
            float arg_232202 = arg_232201 - 1.0F;
            float arg_232203 = 2.0F * i32_res_211464;
            float arg_232204 = fpow32(softcut_arg_210836, arg_232203);
            float arg_232205 = arg_232202 * arg_232204;
            float softcut_res_t_res_232206 = 1.0F + arg_232205;
            
            softcut_res_211467 = softcut_res_t_res_232206;
        } else {
            softcut_res_211467 = 0.0F;
        }
        
        float aa_211480 = qMult_res_215322 * qMult_res_215322;
        float ab_211481 = qMult_res_215322 * defunc_1_f_res_215341;
        float ac_211482 = qMult_res_215322 * defunc_1_f_res_215342;
        float ad_211483 = qMult_res_215322 * defunc_1_f_res_215343;
        float bb_211484 = defunc_1_f_res_215341 * defunc_1_f_res_215341;
        float bc_211485 = defunc_1_f_res_215341 * defunc_1_f_res_215342;
        float bd_211486 = defunc_1_f_res_215341 * defunc_1_f_res_215343;
        float cc_211487 = defunc_1_f_res_215342 * defunc_1_f_res_215342;
        float cd_211488 = defunc_1_f_res_215342 * defunc_1_f_res_215343;
        float dd_211489 = defunc_1_f_res_215343 * defunc_1_f_res_215343;
        float arg_211490 = aa_211480 + bb_211484;
        float arg_211491 = arg_211490 - cc_211487;
        float m33fromQuaternion_res_211492 = arg_211491 - dd_211489;
        float arg_211493 = bc_211485 - ad_211483;
        float m33fromQuaternion_res_211494 = 2.0F * arg_211493;
        float arg_211495 = ac_211482 + bd_211486;
        float m33fromQuaternion_res_211496 = 2.0F * arg_211495;
        float arg_211497 = ad_211483 + bc_211485;
        float m33fromQuaternion_res_211498 = 2.0F * arg_211497;
        float arg_211499 = aa_211480 - bb_211484;
        float arg_211500 = cc_211487 + arg_211499;
        float m33fromQuaternion_res_211501 = arg_211500 - dd_211489;
        float arg_211502 = cd_211488 - ab_211481;
        float m33fromQuaternion_res_211503 = 2.0F * arg_211502;
        float arg_211504 = bd_211486 - ac_211482;
        float m33fromQuaternion_res_211505 = 2.0F * arg_211504;
        float arg_211506 = ab_211481 + cd_211488;
        float m33fromQuaternion_res_211507 = 2.0F * arg_211506;
        float arg_211509 = arg_211499 - cc_211487;
        float m33fromQuaternion_res_211510 = dd_211489 + arg_211509;
        
        for (int64_t i_234003 = 0; i_234003 < dz2080U_189274; i_234003++) {
            float x_217785 = ((float *) z31U_mem_234529.mem)[i_234003];
            float x_217786 = ((float *) z31U_mem_234530.mem)[i_234003];
            float x_217787 = ((float *) z31U_mem_234531.mem)[i_234003];
            float x_217788 = ((float *) z31U_mem_234532.mem)[i_234003];
            float x_217789 = ((float *) z31U_mem_234533.mem)[i_234003];
            float x_217790 = ((float *) z31U_mem_234534.mem)[i_234003];
            float defunc_1_f_res_217791 = m33fromQuaternion_res_211492 * x_217788;
            float defunc_1_f_res_217792 = m33fromQuaternion_res_211494 * x_217789;
            float defunc_1_f_res_217793 = m33fromQuaternion_res_211496 * x_217790;
            float defunc_1_f_res_217794 = defunc_1_f_res_217792 + defunc_1_f_res_217793;
            float defunc_0_f_res_217795 = defunc_1_f_res_217791 + defunc_1_f_res_217794;
            float defunc_1_f_res_217796 = m33fromQuaternion_res_211498 * x_217788;
            float defunc_1_f_res_217797 = m33fromQuaternion_res_211501 * x_217789;
            float defunc_1_f_res_217798 = m33fromQuaternion_res_211503 * x_217790;
            float defunc_1_f_res_217799 = defunc_1_f_res_217797 + defunc_1_f_res_217798;
            float defunc_0_f_res_217800 = defunc_1_f_res_217796 + defunc_1_f_res_217799;
            float defunc_1_f_res_217801 = m33fromQuaternion_res_211505 * x_217788;
            float defunc_1_f_res_217802 = m33fromQuaternion_res_211507 * x_217789;
            float defunc_1_f_res_217803 = m33fromQuaternion_res_211510 * x_217790;
            float defunc_1_f_res_217804 = defunc_1_f_res_217802 + defunc_1_f_res_217803;
            float defunc_0_f_res_217805 = defunc_1_f_res_217801 + defunc_1_f_res_217804;
            float defunc_1_f_res_217806 = defunc_1_f_res_215313 + defunc_0_f_res_217795;
            float defunc_1_f_res_217807 = defunc_1_f_res_215314 + defunc_0_f_res_217800;
            float defunc_1_f_res_217808 = defunc_1_f_res_215315 + defunc_0_f_res_217805;
            float defunc_1_f_res_217809 = defunc_1_f_res_217806 - x_217785;
            float defunc_1_f_res_217810 = defunc_1_f_res_217807 - x_217786;
            float defunc_1_f_res_217811 = defunc_1_f_res_217808 - x_217787;
            float defunc_1_f_res_217815 = defunc_1_f_res_217809 * defunc_1_f_res_217809;
            float defunc_1_f_res_217816 = defunc_1_f_res_217810 * defunc_1_f_res_217810;
            float defunc_1_f_res_217817 = defunc_1_f_res_217811 * defunc_1_f_res_217811;
            float defunc_1_f_res_217818 = defunc_1_f_res_217816 + defunc_1_f_res_217817;
            float defunc_0_f_res_217819 = defunc_1_f_res_217815 + defunc_1_f_res_217818;
            bool cond_217820 = defunc_0_f_res_217819 == 0.0F;
            float defunc_0_f_res_217821;
            
            if (cond_217820 == 1) {
                defunc_0_f_res_217821 = 0.0F;
            } else {
                float sqrt_res_217822 = futrts_sqrt32(defunc_0_f_res_217819);
                
                defunc_0_f_res_217821 = sqrt_res_217822;
            }
            ((float *) mem_235769)[i_234003] = defunc_0_f_res_217821;
            ((float *) mem_235772)[i_234003] = defunc_1_f_res_217809;
            ((float *) mem_235775)[i_234003] = defunc_1_f_res_217810;
            ((float *) mem_235778)[i_234003] = defunc_1_f_res_217811;
        }
        for (int64_t i_234014 = 0; i_234014 < dz2081U_189275; i_234014++) {
            float x_217766 = ((float *) z31U_mem_234536.mem)[i_234014];
            float defunc_2_reduce_res_232207;
            float redout_234008 = 0.0F;
            
            for (int64_t i_234009 = 0; i_234009 < dz2080U_189274; i_234009++) {
                float x_218158 = ((float *) mem_235769)[i_234009];
                float x_218159 = ((float *) z31U_mem_234535.mem)[i_234014 * dz2080U_189274 + i_234009];
                float defunc_1_f_res_218160 = x_218158 * x_218159;
                float defunc_1_op_res_217774 = defunc_1_f_res_218160 + redout_234008;
                float redout_tmp_236109 = defunc_1_op_res_217774;
                
                redout_234008 = redout_tmp_236109;
            }
            defunc_2_reduce_res_232207 = redout_234008;
            
            float defunc_1_f_res_217777 = x_217766 + defunc_2_reduce_res_232207;
            float arg_217779 = 0.0F - defunc_1_f_res_217777;
            float exp_arg_217780 = defunc_1_f_res_217777 * arg_217779;
            float exp_res_217781 = futrts_exp32(exp_arg_217780);
            
            ((float *) mem_235821)[i_234014] = exp_res_217781;
            ((float *) mem_235824)[i_234014] = defunc_1_f_res_217777;
        }
        for (int64_t i_234023 = 0; i_234023 < dz2081U_189275; i_234023++) {
            float x_217742 = ((float *) z31U_mem_234538.mem)[i_234023];
            float defunc_2_reduce_res_232208;
            float redout_234017 = 0.0F;
            
            for (int64_t i_234018 = 0; i_234018 < dz2081U_189275; i_234018++) {
                float x_218164 = ((float *) mem_235821)[i_234018];
                float x_218165 = ((float *) z31U_mem_234537.mem)[i_234023 * dz2081U_189275 + i_234018];
                float defunc_1_f_res_218166 = x_218164 * x_218165;
                float defunc_1_op_res_217750 = defunc_1_f_res_218166 + redout_234017;
                float redout_tmp_236112 = defunc_1_op_res_217750;
                
                redout_234017 = redout_tmp_236112;
            }
            defunc_2_reduce_res_232208 = redout_234017;
            
            float defunc_1_f_res_217753 = x_217742 + defunc_2_reduce_res_232208;
            float defunc_0_f_res_217755 = futrts_tanh32(defunc_1_f_res_217753);
            
            ((float *) mem_235847)[i_234023] = defunc_0_f_res_217755;
            ((float *) mem_235850)[i_234023] = defunc_1_f_res_217753;
        }
        
        float defunc_2_reduce_res_233501;
        float redout_234029 = 0.0F;
        
        for (int64_t i_234031 = 0; i_234031 < dz2081U_189275; i_234031++) {
            float x_226453 = ((float *) z31U_mem_234540.mem)[i_234031];
            float x_226454 = ((float *) z31U_mem_234541.mem)[i_234031];
            float defunc_2_reduce_res_232209;
            float redout_234026 = 0.0F;
            
            for (int64_t i_234027 = 0; i_234027 < dz2081U_189275; i_234027++) {
                float x_226460 = ((float *) mem_235847)[i_234027];
                float x_226461 = ((float *) z31U_mem_234539.mem)[i_234031 * dz2081U_189275 + i_234027];
                float defunc_1_f_res_226462 = x_226460 * x_226461;
                float defunc_1_op_res_226459 = defunc_1_f_res_226462 + redout_234026;
                float redout_tmp_236115 = defunc_1_op_res_226459;
                
                redout_234026 = redout_tmp_236115;
            }
            defunc_2_reduce_res_232209 = redout_234026;
            
            float defunc_1_f_res_226463 = x_226453 + defunc_2_reduce_res_232209;
            float defunc_0_f_res_226464 = futrts_tanh32(defunc_1_f_res_226463);
            float defunc_1_f_res_226465 = x_226454 * defunc_0_f_res_226464;
            float defunc_2_f_res_226467 = softcut_res_211467 * x_226454;
            float binop_y_226470 = defunc_0_f_res_226464 * defunc_0_f_res_226464;
            float binop_y_226471 = 1.0F - binop_y_226470;
            float contrib_226472 = defunc_2_f_res_226467 * binop_y_226471;
            float defunc_1_op_res_211579 = defunc_1_f_res_226465 + redout_234029;
            
            ((float *) mem_235873)[i_234031] = contrib_226472;
            
            float redout_tmp_236113 = defunc_1_op_res_211579;
            
            redout_234029 = redout_tmp_236113;
        }
        defunc_2_reduce_res_233501 = redout_234029;
        
        float defunc_0_f_res_210916 = softcut_res_211467 * defunc_2_reduce_res_233501;
        float distanceFunction_res_210970;
        
        if (z30U_189277 == (int8_t) 1) {
            float defunc_0_f_res_232290 = 0.0F - defunc_1_f_res_215341;
            float defunc_0_f_res_232291 = 0.0F - defunc_1_f_res_215342;
            float defunc_0_f_res_232292 = 0.0F - defunc_1_f_res_215343;
            float defunc_1_f_res_232293 = z30U_189281 * defunc_1_f_res_215341;
            float defunc_1_f_res_232294 = z30U_189282 * defunc_1_f_res_215342;
            float defunc_1_f_res_232295 = z30U_189283 * defunc_1_f_res_215343;
            float defunc_1_f_res_232296 = defunc_1_f_res_232294 + defunc_1_f_res_232295;
            float defunc_0_f_res_232297 = defunc_1_f_res_232293 + defunc_1_f_res_232296;
            float qMult_res_232298 = 0.0F - defunc_0_f_res_232297;
            float arg_232299 = z30U_189283 * defunc_1_f_res_215342;
            float arg_232300 = z30U_189282 * defunc_1_f_res_215343;
            float cross_res_232301 = arg_232299 - arg_232300;
            float arg_232302 = z30U_189281 * defunc_1_f_res_215343;
            float arg_232303 = z30U_189283 * defunc_1_f_res_215341;
            float cross_res_232304 = arg_232302 - arg_232303;
            float arg_232305 = z30U_189282 * defunc_1_f_res_215341;
            float arg_232306 = z30U_189281 * defunc_1_f_res_215342;
            float cross_res_232307 = arg_232305 - arg_232306;
            float defunc_0_f_res_232308 = z30U_189281 * qMult_res_215322;
            float defunc_0_f_res_232309 = z30U_189282 * qMult_res_215322;
            float defunc_0_f_res_232310 = z30U_189283 * qMult_res_215322;
            float defunc_1_f_res_232311 = cross_res_232301 + defunc_0_f_res_232308;
            float defunc_1_f_res_232312 = cross_res_232304 + defunc_0_f_res_232309;
            float defunc_1_f_res_232313 = cross_res_232307 + defunc_0_f_res_232310;
            float arg_232314 = defunc_0_f_res_232292 * defunc_1_f_res_232312;
            float arg_232315 = defunc_0_f_res_232291 * defunc_1_f_res_232313;
            float cross_res_232316 = arg_232314 - arg_232315;
            float arg_232317 = defunc_0_f_res_232290 * defunc_1_f_res_232313;
            float arg_232318 = defunc_0_f_res_232292 * defunc_1_f_res_232311;
            float cross_res_232319 = arg_232317 - arg_232318;
            float arg_232320 = defunc_0_f_res_232291 * defunc_1_f_res_232311;
            float arg_232321 = defunc_0_f_res_232290 * defunc_1_f_res_232312;
            float cross_res_232322 = arg_232320 - arg_232321;
            float defunc_0_f_res_232323 = qMult_res_215322 * defunc_1_f_res_232311;
            float defunc_0_f_res_232324 = qMult_res_215322 * defunc_1_f_res_232312;
            float defunc_0_f_res_232325 = qMult_res_215322 * defunc_1_f_res_232313;
            float defunc_0_f_res_232326 = defunc_0_f_res_232290 * qMult_res_232298;
            float defunc_0_f_res_232327 = defunc_0_f_res_232291 * qMult_res_232298;
            float defunc_0_f_res_232328 = defunc_0_f_res_232292 * qMult_res_232298;
            float defunc_1_f_res_232329 = defunc_0_f_res_232323 + defunc_0_f_res_232326;
            float defunc_1_f_res_232330 = defunc_0_f_res_232324 + defunc_0_f_res_232327;
            float defunc_1_f_res_232331 = defunc_0_f_res_232325 + defunc_0_f_res_232328;
            float defunc_1_f_res_232332 = cross_res_232316 + defunc_1_f_res_232329;
            float defunc_1_f_res_232333 = cross_res_232319 + defunc_1_f_res_232330;
            float defunc_1_f_res_232334 = cross_res_232322 + defunc_1_f_res_232331;
            float defunc_0_f_res_232335 = 0.0F - defunc_1_f_res_215313;
            float defunc_0_f_res_232336 = 0.0F - defunc_1_f_res_215314;
            float defunc_0_f_res_232337 = 0.0F - defunc_1_f_res_215315;
            float defunc_1_f_res_232338 = z30U_189278 * defunc_1_f_res_232332;
            float defunc_1_f_res_232339 = z30U_189279 * defunc_1_f_res_232333;
            float defunc_1_f_res_232340 = z30U_189280 * defunc_1_f_res_232334;
            float defunc_1_f_res_232341 = defunc_1_f_res_232339 + defunc_1_f_res_232340;
            float defunc_0_f_res_232342 = defunc_1_f_res_232338 + defunc_1_f_res_232341;
            float defunc_1_f_res_232343 = z30U_189278 * defunc_0_f_res_232335;
            float defunc_1_f_res_232344 = z30U_189279 * defunc_0_f_res_232336;
            float defunc_1_f_res_232345 = z30U_189280 * defunc_0_f_res_232337;
            float defunc_1_f_res_232346 = defunc_1_f_res_232344 + defunc_1_f_res_232345;
            float defunc_0_f_res_232347 = defunc_1_f_res_232343 + defunc_1_f_res_232346;
            float defunc_1_f_res_232348 = defunc_1_f_res_232332 * defunc_1_f_res_232332;
            float defunc_1_f_res_232349 = defunc_1_f_res_232333 * defunc_1_f_res_232333;
            float defunc_1_f_res_232350 = defunc_1_f_res_232334 * defunc_1_f_res_232334;
            float defunc_1_f_res_232351 = defunc_1_f_res_232349 + defunc_1_f_res_232350;
            float defunc_0_f_res_232352 = defunc_1_f_res_232348 + defunc_1_f_res_232351;
            float defunc_1_f_res_232353 = defunc_1_f_res_232332 * defunc_0_f_res_232335;
            float defunc_1_f_res_232354 = defunc_1_f_res_232333 * defunc_0_f_res_232336;
            float defunc_1_f_res_232355 = defunc_1_f_res_232334 * defunc_0_f_res_232337;
            float defunc_1_f_res_232356 = defunc_1_f_res_232354 + defunc_1_f_res_232355;
            float defunc_0_f_res_232357 = defunc_1_f_res_232353 + defunc_1_f_res_232356;
            float arg_232358 = defunc_0_f_res_211819 * defunc_0_f_res_232352;
            float arg_232359 = defunc_0_f_res_232342 * defunc_0_f_res_232342;
            float det_232360 = arg_232358 - arg_232359;
            float arg_232361 = defunc_0_f_res_232347 * defunc_0_f_res_232352;
            float arg_232362 = defunc_0_f_res_232342 * defunc_0_f_res_232357;
            float arg_232363 = arg_232361 - arg_232362;
            float i_m_232364 = arg_232363 / det_232360;
            float arg_232365 = defunc_0_f_res_211819 * defunc_0_f_res_232357;
            float arg_232366 = defunc_0_f_res_232342 * defunc_0_f_res_232347;
            float arg_232367 = arg_232365 - arg_232366;
            float j_m_232368 = arg_232367 / det_232360;
            float arg_232369 = defunc_0_f_res_232347 - defunc_0_f_res_232342;
            float i_p_232370 = arg_232369 / defunc_0_f_res_211819;
            float arg_232371 = defunc_0_f_res_232342 + defunc_0_f_res_232347;
            float i_n_232372 = arg_232371 / defunc_0_f_res_211819;
            float arg_232373 = defunc_0_f_res_232357 - defunc_0_f_res_232342;
            float j_p_232374 = arg_232373 / defunc_0_f_res_232352;
            float arg_232375 = defunc_0_f_res_232342 + defunc_0_f_res_232357;
            float j_n_232376 = arg_232375 / defunc_0_f_res_232352;
            bool cond_232377 = det_232360 == 0.0F;
            bool cond_232378 = !cond_232377;
            bool cond_232379 = -1.0F <= i_m_232364;
            bool lifted_valid_res_t_res_232380 = i_m_232364 <= 1.0F;
            bool x_232381 = cond_232379 && lifted_valid_res_t_res_232380;
            bool x_232382 = cond_232378 && x_232381;
            bool cond_232383 = -1.0F <= j_m_232368;
            bool lifted_valid_res_t_res_232384 = j_m_232368 <= 1.0F;
            bool x_232385 = cond_232383 && lifted_valid_res_t_res_232384;
            bool x_232386 = x_232382 && x_232385;
            float rodDistance_res_232387;
            
            if (x_232386 == 1) {
                float defunc_0_f_res_232388 = defunc_1_f_res_232332 * j_m_232368;
                float defunc_0_f_res_232389 = defunc_1_f_res_232333 * j_m_232368;
                float defunc_0_f_res_232390 = defunc_1_f_res_232334 * j_m_232368;
                float defunc_0_f_res_232391 = z30U_189278 * i_m_232364;
                float defunc_0_f_res_232392 = z30U_189279 * i_m_232364;
                float defunc_0_f_res_232393 = z30U_189280 * i_m_232364;
                float defunc_1_f_res_232394 = defunc_0_f_res_232388 + defunc_0_f_res_232391;
                float defunc_1_f_res_232395 = defunc_0_f_res_232389 + defunc_0_f_res_232392;
                float defunc_1_f_res_232396 = defunc_0_f_res_232390 + defunc_0_f_res_232393;
                float defunc_1_f_res_232397 = defunc_1_f_res_232394 - defunc_0_f_res_232335;
                float defunc_1_f_res_232398 = defunc_1_f_res_232395 - defunc_0_f_res_232336;
                float defunc_1_f_res_232399 = defunc_1_f_res_232396 - defunc_0_f_res_232337;
                float defunc_1_f_res_232400 = defunc_1_f_res_232397 * defunc_1_f_res_232397;
                float defunc_1_f_res_232401 = defunc_1_f_res_232398 * defunc_1_f_res_232398;
                float defunc_1_f_res_232402 = defunc_1_f_res_232399 * defunc_1_f_res_232399;
                float defunc_1_f_res_232403 = defunc_1_f_res_232401 + defunc_1_f_res_232402;
                float defunc_0_f_res_232404 = defunc_1_f_res_232400 + defunc_1_f_res_232403;
                float sqrt_res_232405 = futrts_sqrt32(defunc_0_f_res_232404);
                
                rodDistance_res_232387 = sqrt_res_232405;
            } else {
                float defunc_0_f_res_232406 = -1.0F * defunc_1_f_res_232332;
                float defunc_0_f_res_232407 = -1.0F * defunc_1_f_res_232333;
                float defunc_0_f_res_232408 = -1.0F * defunc_1_f_res_232334;
                float defunc_0_f_res_232409 = -1.0F * z30U_189278;
                float defunc_0_f_res_232410 = -1.0F * z30U_189279;
                float defunc_0_f_res_232411 = -1.0F * z30U_189280;
                float defunc_1_f_res_232412 = defunc_0_f_res_232406 + defunc_0_f_res_232409;
                float defunc_1_f_res_232413 = defunc_0_f_res_232407 + defunc_0_f_res_232410;
                float defunc_1_f_res_232414 = defunc_0_f_res_232408 + defunc_0_f_res_232411;
                float defunc_1_f_res_232415 = defunc_1_f_res_232412 - defunc_0_f_res_232335;
                float defunc_1_f_res_232416 = defunc_1_f_res_232413 - defunc_0_f_res_232336;
                float defunc_1_f_res_232417 = defunc_1_f_res_232414 - defunc_0_f_res_232337;
                float defunc_1_f_res_232418 = defunc_1_f_res_232415 * defunc_1_f_res_232415;
                float defunc_1_f_res_232419 = defunc_1_f_res_232416 * defunc_1_f_res_232416;
                float defunc_1_f_res_232420 = defunc_1_f_res_232417 * defunc_1_f_res_232417;
                float defunc_1_f_res_232421 = defunc_1_f_res_232419 + defunc_1_f_res_232420;
                float defunc_0_f_res_232422 = defunc_1_f_res_232418 + defunc_1_f_res_232421;
                float defunc_1_f_res_232423 = defunc_1_f_res_232332 + defunc_0_f_res_232409;
                float defunc_1_f_res_232424 = defunc_1_f_res_232333 + defunc_0_f_res_232410;
                float defunc_1_f_res_232425 = defunc_1_f_res_232334 + defunc_0_f_res_232411;
                float defunc_1_f_res_232426 = defunc_1_f_res_232423 - defunc_0_f_res_232335;
                float defunc_1_f_res_232427 = defunc_1_f_res_232424 - defunc_0_f_res_232336;
                float defunc_1_f_res_232428 = defunc_1_f_res_232425 - defunc_0_f_res_232337;
                float defunc_1_f_res_232429 = defunc_1_f_res_232426 * defunc_1_f_res_232426;
                float defunc_1_f_res_232430 = defunc_1_f_res_232427 * defunc_1_f_res_232427;
                float defunc_1_f_res_232431 = defunc_1_f_res_232428 * defunc_1_f_res_232428;
                float defunc_1_f_res_232432 = defunc_1_f_res_232430 + defunc_1_f_res_232431;
                float defunc_0_f_res_232433 = defunc_1_f_res_232429 + defunc_1_f_res_232432;
                float defunc_1_f_res_232434 = z30U_189278 + defunc_0_f_res_232406;
                float defunc_1_f_res_232435 = z30U_189279 + defunc_0_f_res_232407;
                float defunc_1_f_res_232436 = z30U_189280 + defunc_0_f_res_232408;
                float defunc_1_f_res_232437 = defunc_1_f_res_232434 - defunc_0_f_res_232335;
                float defunc_1_f_res_232438 = defunc_1_f_res_232435 - defunc_0_f_res_232336;
                float defunc_1_f_res_232439 = defunc_1_f_res_232436 - defunc_0_f_res_232337;
                float defunc_1_f_res_232440 = defunc_1_f_res_232437 * defunc_1_f_res_232437;
                float defunc_1_f_res_232441 = defunc_1_f_res_232438 * defunc_1_f_res_232438;
                float defunc_1_f_res_232442 = defunc_1_f_res_232439 * defunc_1_f_res_232439;
                float defunc_1_f_res_232443 = defunc_1_f_res_232441 + defunc_1_f_res_232442;
                float defunc_0_f_res_232444 = defunc_1_f_res_232440 + defunc_1_f_res_232443;
                float defunc_1_f_res_232445 = z30U_189278 + defunc_1_f_res_232332;
                float defunc_1_f_res_232446 = z30U_189279 + defunc_1_f_res_232333;
                float defunc_1_f_res_232447 = z30U_189280 + defunc_1_f_res_232334;
                float defunc_1_f_res_232448 = defunc_1_f_res_232445 - defunc_0_f_res_232335;
                float defunc_1_f_res_232449 = defunc_1_f_res_232446 - defunc_0_f_res_232336;
                float defunc_1_f_res_232450 = defunc_1_f_res_232447 - defunc_0_f_res_232337;
                float defunc_1_f_res_232451 = defunc_1_f_res_232448 * defunc_1_f_res_232448;
                float defunc_1_f_res_232452 = defunc_1_f_res_232449 * defunc_1_f_res_232449;
                float defunc_1_f_res_232453 = defunc_1_f_res_232450 * defunc_1_f_res_232450;
                float defunc_1_f_res_232454 = defunc_1_f_res_232452 + defunc_1_f_res_232453;
                float defunc_0_f_res_232455 = defunc_1_f_res_232451 + defunc_1_f_res_232454;
                bool cond_232456 = -1.0F <= j_n_232376;
                bool lifted_valid_res_t_res_232457 = j_n_232376 <= 1.0F;
                bool x_232458 = cond_232456 && lifted_valid_res_t_res_232457;
                float min_arg_232459;
                
                if (x_232458 == 1) {
                    float defunc_0_f_res_232460 = defunc_1_f_res_232332 * j_n_232376;
                    float defunc_0_f_res_232461 = defunc_1_f_res_232333 * j_n_232376;
                    float defunc_0_f_res_232462 = defunc_1_f_res_232334 * j_n_232376;
                    float defunc_1_f_res_232463 = defunc_0_f_res_232409 + defunc_0_f_res_232460;
                    float defunc_1_f_res_232464 = defunc_0_f_res_232410 + defunc_0_f_res_232461;
                    float defunc_1_f_res_232465 = defunc_0_f_res_232411 + defunc_0_f_res_232462;
                    float defunc_1_f_res_232466 = defunc_1_f_res_232463 - defunc_0_f_res_232335;
                    float defunc_1_f_res_232467 = defunc_1_f_res_232464 - defunc_0_f_res_232336;
                    float defunc_1_f_res_232468 = defunc_1_f_res_232465 - defunc_0_f_res_232337;
                    float defunc_1_f_res_232469 = defunc_1_f_res_232466 * defunc_1_f_res_232466;
                    float defunc_1_f_res_232470 = defunc_1_f_res_232467 * defunc_1_f_res_232467;
                    float defunc_1_f_res_232471 = defunc_1_f_res_232468 * defunc_1_f_res_232468;
                    float defunc_1_f_res_232472 = defunc_1_f_res_232470 + defunc_1_f_res_232471;
                    float defunc_0_f_res_232473 = defunc_1_f_res_232469 + defunc_1_f_res_232472;
                    
                    min_arg_232459 = defunc_0_f_res_232473;
                } else {
                    min_arg_232459 = INFINITY;
                }
                
                bool cond_232474 = -1.0F <= j_p_232374;
                bool lifted_valid_res_t_res_232475 = j_p_232374 <= 1.0F;
                bool x_232476 = cond_232474 && lifted_valid_res_t_res_232475;
                float min_arg_232477;
                
                if (x_232476 == 1) {
                    float defunc_0_f_res_232478 = defunc_1_f_res_232332 * j_p_232374;
                    float defunc_0_f_res_232479 = defunc_1_f_res_232333 * j_p_232374;
                    float defunc_0_f_res_232480 = defunc_1_f_res_232334 * j_p_232374;
                    float defunc_1_f_res_232481 = z30U_189278 + defunc_0_f_res_232478;
                    float defunc_1_f_res_232482 = z30U_189279 + defunc_0_f_res_232479;
                    float defunc_1_f_res_232483 = z30U_189280 + defunc_0_f_res_232480;
                    float defunc_1_f_res_232484 = defunc_1_f_res_232481 - defunc_0_f_res_232335;
                    float defunc_1_f_res_232485 = defunc_1_f_res_232482 - defunc_0_f_res_232336;
                    float defunc_1_f_res_232486 = defunc_1_f_res_232483 - defunc_0_f_res_232337;
                    float defunc_1_f_res_232487 = defunc_1_f_res_232484 * defunc_1_f_res_232484;
                    float defunc_1_f_res_232488 = defunc_1_f_res_232485 * defunc_1_f_res_232485;
                    float defunc_1_f_res_232489 = defunc_1_f_res_232486 * defunc_1_f_res_232486;
                    float defunc_1_f_res_232490 = defunc_1_f_res_232488 + defunc_1_f_res_232489;
                    float defunc_0_f_res_232491 = defunc_1_f_res_232487 + defunc_1_f_res_232490;
                    
                    min_arg_232477 = defunc_0_f_res_232491;
                } else {
                    min_arg_232477 = INFINITY;
                }
                
                bool cond_232492 = -1.0F <= i_n_232372;
                bool lifted_valid_res_t_res_232493 = i_n_232372 <= 1.0F;
                bool x_232494 = cond_232492 && lifted_valid_res_t_res_232493;
                float min_arg_232495;
                
                if (x_232494 == 1) {
                    float defunc_0_f_res_232496 = z30U_189278 * i_n_232372;
                    float defunc_0_f_res_232497 = z30U_189279 * i_n_232372;
                    float defunc_0_f_res_232498 = z30U_189280 * i_n_232372;
                    float defunc_1_f_res_232499 = defunc_0_f_res_232406 + defunc_0_f_res_232496;
                    float defunc_1_f_res_232500 = defunc_0_f_res_232407 + defunc_0_f_res_232497;
                    float defunc_1_f_res_232501 = defunc_0_f_res_232408 + defunc_0_f_res_232498;
                    float defunc_1_f_res_232502 = defunc_1_f_res_232499 - defunc_0_f_res_232335;
                    float defunc_1_f_res_232503 = defunc_1_f_res_232500 - defunc_0_f_res_232336;
                    float defunc_1_f_res_232504 = defunc_1_f_res_232501 - defunc_0_f_res_232337;
                    float defunc_1_f_res_232505 = defunc_1_f_res_232502 * defunc_1_f_res_232502;
                    float defunc_1_f_res_232506 = defunc_1_f_res_232503 * defunc_1_f_res_232503;
                    float defunc_1_f_res_232507 = defunc_1_f_res_232504 * defunc_1_f_res_232504;
                    float defunc_1_f_res_232508 = defunc_1_f_res_232506 + defunc_1_f_res_232507;
                    float defunc_0_f_res_232509 = defunc_1_f_res_232505 + defunc_1_f_res_232508;
                    
                    min_arg_232495 = defunc_0_f_res_232509;
                } else {
                    min_arg_232495 = INFINITY;
                }
                
                bool cond_232510 = -1.0F <= i_p_232370;
                bool lifted_valid_res_t_res_232511 = i_p_232370 <= 1.0F;
                bool x_232512 = cond_232510 && lifted_valid_res_t_res_232511;
                float min_arg_232513;
                
                if (x_232512 == 1) {
                    float defunc_0_f_res_232514 = z30U_189278 * i_p_232370;
                    float defunc_0_f_res_232515 = z30U_189279 * i_p_232370;
                    float defunc_0_f_res_232516 = z30U_189280 * i_p_232370;
                    float defunc_1_f_res_232517 = defunc_1_f_res_232332 + defunc_0_f_res_232514;
                    float defunc_1_f_res_232518 = defunc_1_f_res_232333 + defunc_0_f_res_232515;
                    float defunc_1_f_res_232519 = defunc_1_f_res_232334 + defunc_0_f_res_232516;
                    float defunc_1_f_res_232520 = defunc_1_f_res_232517 - defunc_0_f_res_232335;
                    float defunc_1_f_res_232521 = defunc_1_f_res_232518 - defunc_0_f_res_232336;
                    float defunc_1_f_res_232522 = defunc_1_f_res_232519 - defunc_0_f_res_232337;
                    float defunc_1_f_res_232523 = defunc_1_f_res_232520 * defunc_1_f_res_232520;
                    float defunc_1_f_res_232524 = defunc_1_f_res_232521 * defunc_1_f_res_232521;
                    float defunc_1_f_res_232525 = defunc_1_f_res_232522 * defunc_1_f_res_232522;
                    float defunc_1_f_res_232526 = defunc_1_f_res_232524 + defunc_1_f_res_232525;
                    float defunc_0_f_res_232527 = defunc_1_f_res_232523 + defunc_1_f_res_232526;
                    
                    min_arg_232513 = defunc_0_f_res_232527;
                } else {
                    min_arg_232513 = INFINITY;
                }
                
                float min_res_232528 = fmin32(min_arg_232495, min_arg_232513);
                float min_res_232529 = fmin32(min_arg_232477, min_res_232528);
                float min_res_232530 = fmin32(min_arg_232459, min_res_232529);
                float min_res_232531 = fmin32(defunc_0_f_res_232455, min_res_232530);
                float min_res_232532 = fmin32(defunc_0_f_res_232444, min_res_232531);
                float min_res_232533 = fmin32(defunc_0_f_res_232433, min_res_232532);
                float min_res_232534 = fmin32(defunc_0_f_res_232422, min_res_232533);
                float sqrt_res_232535 = futrts_sqrt32(min_res_232534);
                
                rodDistance_res_232387 = sqrt_res_232535;
            }
            distanceFunction_res_210970 = rodDistance_res_232387;
        } else if (z30U_189277 == (int8_t) 2) {
            float defunc_1_f_res_232210 = defunc_1_f_res_215313 * defunc_1_f_res_215313;
            float defunc_1_f_res_232211 = defunc_1_f_res_215314 * defunc_1_f_res_215314;
            float defunc_1_f_res_232212 = defunc_1_f_res_215315 * defunc_1_f_res_215315;
            float defunc_1_f_res_232213 = defunc_1_f_res_232211 + defunc_1_f_res_232212;
            float defunc_0_f_res_232214 = defunc_1_f_res_232210 + defunc_1_f_res_232213;
            float sqrt_res_232215 = futrts_sqrt32(defunc_0_f_res_232214);
            
            distanceFunction_res_210970 = sqrt_res_232215;
        } else {
            distanceFunction_res_210970 = 0.0F;
        }
        
        float softcut_arg_211036 = distanceFunction_res_210970 / z30U_189290;
        float abs_res_211614 = (float) fabs(softcut_arg_211036);
        bool cond_211615 = abs_res_211614 < 1.0F;
        float branch_adj_221291;
        
        if (cond_211615 == 1) {
            float arg_232536 = softcut_arg_211036 * softcut_arg_211036;
            float arg_232537 = arg_232536 - 1.0F;
            float arg_232538 = i32_res_211464 * arg_232537;
            float arg_232539 = arg_232538 - 1.0F;
            float arg_232540 = 2.0F * i32_res_211464;
            float arg_232541 = fpow32(softcut_arg_211036, arg_232540);
            float binop_x_adj_232542 = arg_232541 * defunc_2_reduce_res_233501;
            float binop_y_adj_232543 = arg_232539 * defunc_2_reduce_res_233501;
            float binop_y_232544 = arg_232540 - 1.0F;
            float binop_y_232545 = fpow32(softcut_arg_211036, binop_y_232544);
            float binop_y_232546 = arg_232540 * binop_y_232545;
            float binop_x_adj_232547 = binop_y_adj_232543 * binop_y_232546;
            float binop_y_adj_232548 = i32_res_211464 * binop_x_adj_232542;
            float binop_x_adj_232549 = softcut_arg_211036 * binop_y_adj_232548;
            float softcut_arg_adj_232550 = binop_x_adj_232547 + binop_x_adj_232549;
            float softcut_arg_adj_232551 = binop_x_adj_232549 + softcut_arg_adj_232550;
            
            branch_adj_221291 = softcut_arg_adj_232551;
        } else {
            branch_adj_221291 = 0.0F;
        }
        
        float binop_x_adj_221300 = branch_adj_221291 * binop_y_221299;
        float branch_adj_224471;
        float branch_adj_224472;
        float branch_adj_224473;
        float branch_adj_224474;
        float branch_adj_224475;
        float branch_adj_224476;
        float branch_adj_224477;
        
        if (z30U_189277 == (int8_t) 1) {
            float defunc_0_f_res_232779 = 0.0F - defunc_1_f_res_215341;
            float defunc_0_f_res_232780 = 0.0F - defunc_1_f_res_215342;
            float defunc_0_f_res_232781 = 0.0F - defunc_1_f_res_215343;
            float defunc_1_f_res_232782 = z30U_189281 * defunc_1_f_res_215341;
            float defunc_1_f_res_232783 = z30U_189282 * defunc_1_f_res_215342;
            float defunc_1_f_res_232784 = z30U_189283 * defunc_1_f_res_215343;
            float defunc_1_f_res_232785 = defunc_1_f_res_232783 + defunc_1_f_res_232784;
            float defunc_0_f_res_232786 = defunc_1_f_res_232782 + defunc_1_f_res_232785;
            float qMult_res_232787 = 0.0F - defunc_0_f_res_232786;
            float arg_232788 = z30U_189283 * defunc_1_f_res_215342;
            float arg_232789 = z30U_189282 * defunc_1_f_res_215343;
            float cross_res_232790 = arg_232788 - arg_232789;
            float arg_232791 = z30U_189281 * defunc_1_f_res_215343;
            float arg_232792 = z30U_189283 * defunc_1_f_res_215341;
            float cross_res_232793 = arg_232791 - arg_232792;
            float arg_232794 = z30U_189282 * defunc_1_f_res_215341;
            float arg_232795 = z30U_189281 * defunc_1_f_res_215342;
            float cross_res_232796 = arg_232794 - arg_232795;
            float defunc_0_f_res_232797 = z30U_189281 * qMult_res_215322;
            float defunc_0_f_res_232798 = z30U_189282 * qMult_res_215322;
            float defunc_0_f_res_232799 = z30U_189283 * qMult_res_215322;
            float defunc_1_f_res_232800 = cross_res_232790 + defunc_0_f_res_232797;
            float defunc_1_f_res_232801 = cross_res_232793 + defunc_0_f_res_232798;
            float defunc_1_f_res_232802 = cross_res_232796 + defunc_0_f_res_232799;
            float arg_232803 = defunc_0_f_res_232781 * defunc_1_f_res_232801;
            float arg_232804 = defunc_0_f_res_232780 * defunc_1_f_res_232802;
            float cross_res_232805 = arg_232803 - arg_232804;
            float arg_232806 = defunc_0_f_res_232779 * defunc_1_f_res_232802;
            float arg_232807 = defunc_0_f_res_232781 * defunc_1_f_res_232800;
            float cross_res_232808 = arg_232806 - arg_232807;
            float arg_232809 = defunc_0_f_res_232780 * defunc_1_f_res_232800;
            float arg_232810 = defunc_0_f_res_232779 * defunc_1_f_res_232801;
            float cross_res_232811 = arg_232809 - arg_232810;
            float defunc_0_f_res_232812 = qMult_res_215322 * defunc_1_f_res_232800;
            float defunc_0_f_res_232813 = qMult_res_215322 * defunc_1_f_res_232801;
            float defunc_0_f_res_232814 = qMult_res_215322 * defunc_1_f_res_232802;
            float defunc_0_f_res_232815 = defunc_0_f_res_232779 * qMult_res_232787;
            float defunc_0_f_res_232816 = defunc_0_f_res_232780 * qMult_res_232787;
            float defunc_0_f_res_232817 = defunc_0_f_res_232781 * qMult_res_232787;
            float defunc_1_f_res_232818 = defunc_0_f_res_232812 + defunc_0_f_res_232815;
            float defunc_1_f_res_232819 = defunc_0_f_res_232813 + defunc_0_f_res_232816;
            float defunc_1_f_res_232820 = defunc_0_f_res_232814 + defunc_0_f_res_232817;
            float defunc_1_f_res_232821 = cross_res_232805 + defunc_1_f_res_232818;
            float defunc_1_f_res_232822 = cross_res_232808 + defunc_1_f_res_232819;
            float defunc_1_f_res_232823 = cross_res_232811 + defunc_1_f_res_232820;
            float defunc_0_f_res_232824 = 0.0F - defunc_1_f_res_215313;
            float defunc_0_f_res_232825 = 0.0F - defunc_1_f_res_215314;
            float defunc_0_f_res_232826 = 0.0F - defunc_1_f_res_215315;
            float defunc_1_f_res_232827 = z30U_189278 * defunc_1_f_res_232821;
            float defunc_1_f_res_232828 = z30U_189279 * defunc_1_f_res_232822;
            float defunc_1_f_res_232829 = z30U_189280 * defunc_1_f_res_232823;
            float defunc_1_f_res_232830 = defunc_1_f_res_232828 + defunc_1_f_res_232829;
            float defunc_0_f_res_232831 = defunc_1_f_res_232827 + defunc_1_f_res_232830;
            float defunc_1_f_res_232832 = z30U_189278 * defunc_0_f_res_232824;
            float defunc_1_f_res_232833 = z30U_189279 * defunc_0_f_res_232825;
            float defunc_1_f_res_232834 = z30U_189280 * defunc_0_f_res_232826;
            float defunc_1_f_res_232835 = defunc_1_f_res_232833 + defunc_1_f_res_232834;
            float defunc_0_f_res_232836 = defunc_1_f_res_232832 + defunc_1_f_res_232835;
            float defunc_1_f_res_232837 = defunc_1_f_res_232821 * defunc_1_f_res_232821;
            float defunc_1_f_res_232838 = defunc_1_f_res_232822 * defunc_1_f_res_232822;
            float defunc_1_f_res_232839 = defunc_1_f_res_232823 * defunc_1_f_res_232823;
            float defunc_1_f_res_232840 = defunc_1_f_res_232838 + defunc_1_f_res_232839;
            float defunc_0_f_res_232841 = defunc_1_f_res_232837 + defunc_1_f_res_232840;
            float defunc_1_f_res_232842 = defunc_1_f_res_232821 * defunc_0_f_res_232824;
            float defunc_1_f_res_232843 = defunc_1_f_res_232822 * defunc_0_f_res_232825;
            float defunc_1_f_res_232844 = defunc_1_f_res_232823 * defunc_0_f_res_232826;
            float defunc_1_f_res_232845 = defunc_1_f_res_232843 + defunc_1_f_res_232844;
            float defunc_0_f_res_232846 = defunc_1_f_res_232842 + defunc_1_f_res_232845;
            float arg_232847 = defunc_0_f_res_211819 * defunc_0_f_res_232841;
            float arg_232848 = defunc_0_f_res_232831 * defunc_0_f_res_232831;
            float det_232849 = arg_232847 - arg_232848;
            float arg_232850 = defunc_0_f_res_232836 * defunc_0_f_res_232841;
            float arg_232851 = defunc_0_f_res_232831 * defunc_0_f_res_232846;
            float arg_232852 = arg_232850 - arg_232851;
            float i_m_232853 = arg_232852 / det_232849;
            float arg_232854 = defunc_0_f_res_211819 * defunc_0_f_res_232846;
            float arg_232855 = defunc_0_f_res_232831 * defunc_0_f_res_232836;
            float arg_232856 = arg_232854 - arg_232855;
            float j_m_232857 = arg_232856 / det_232849;
            float arg_232858 = defunc_0_f_res_232836 - defunc_0_f_res_232831;
            float i_p_232859 = arg_232858 / defunc_0_f_res_211819;
            float arg_232860 = defunc_0_f_res_232831 + defunc_0_f_res_232836;
            float i_n_232861 = arg_232860 / defunc_0_f_res_211819;
            float arg_232862 = defunc_0_f_res_232846 - defunc_0_f_res_232831;
            float j_p_232863 = arg_232862 / defunc_0_f_res_232841;
            float arg_232864 = defunc_0_f_res_232831 + defunc_0_f_res_232846;
            float j_n_232865 = arg_232864 / defunc_0_f_res_232841;
            bool cond_232866 = det_232849 == 0.0F;
            bool cond_232867 = !cond_232866;
            bool cond_232868 = -1.0F <= i_m_232853;
            bool lifted_valid_res_t_res_232869 = i_m_232853 <= 1.0F;
            bool x_232870 = cond_232868 && lifted_valid_res_t_res_232869;
            bool x_232871 = cond_232867 && x_232870;
            bool cond_232872 = -1.0F <= j_m_232857;
            bool lifted_valid_res_t_res_232873 = j_m_232857 <= 1.0F;
            bool x_232874 = cond_232872 && lifted_valid_res_t_res_232873;
            bool x_232875 = x_232871 && x_232874;
            float branch_adj_232876;
            float branch_adj_232877;
            float branch_adj_232878;
            float branch_adj_232879;
            float branch_adj_232880;
            float branch_adj_232881;
            float branch_adj_232882;
            float branch_adj_232883;
            float branch_adj_232884;
            float branch_adj_232885;
            float branch_adj_232886;
            float branch_adj_232887;
            
            if (x_232875 == 1) {
                float defunc_0_f_res_232888 = defunc_1_f_res_232821 * j_m_232857;
                float defunc_0_f_res_232889 = defunc_1_f_res_232822 * j_m_232857;
                float defunc_0_f_res_232890 = defunc_1_f_res_232823 * j_m_232857;
                float defunc_0_f_res_232891 = z30U_189278 * i_m_232853;
                float defunc_0_f_res_232892 = z30U_189279 * i_m_232853;
                float defunc_0_f_res_232893 = z30U_189280 * i_m_232853;
                float defunc_1_f_res_232894 = defunc_0_f_res_232888 + defunc_0_f_res_232891;
                float defunc_1_f_res_232895 = defunc_0_f_res_232889 + defunc_0_f_res_232892;
                float defunc_1_f_res_232896 = defunc_0_f_res_232890 + defunc_0_f_res_232893;
                float defunc_1_f_res_232897 = defunc_1_f_res_232894 - defunc_0_f_res_232824;
                float defunc_1_f_res_232898 = defunc_1_f_res_232895 - defunc_0_f_res_232825;
                float defunc_1_f_res_232899 = defunc_1_f_res_232896 - defunc_0_f_res_232826;
                float defunc_1_f_res_232900 = defunc_1_f_res_232897 * defunc_1_f_res_232897;
                float defunc_1_f_res_232901 = defunc_1_f_res_232898 * defunc_1_f_res_232898;
                float defunc_1_f_res_232902 = defunc_1_f_res_232899 * defunc_1_f_res_232899;
                float defunc_1_f_res_232903 = defunc_1_f_res_232901 + defunc_1_f_res_232902;
                float defunc_0_f_res_232904 = defunc_1_f_res_232900 + defunc_1_f_res_232903;
                float binop_y_232905 = fpow32(defunc_0_f_res_232904, 0.5F);
                float binop_y_232906 = 2.0F * binop_y_232905;
                float binop_y_232907 = 1.0F / binop_y_232906;
                float contrib_232908 = binop_x_adj_221300 * binop_y_232907;
                float binop_x_adj_232909 = defunc_1_f_res_232899 * contrib_232908;
                float defunc_1_f_res_adj_232910 = binop_x_adj_232909 + binop_x_adj_232909;
                float binop_x_adj_232911 = defunc_1_f_res_232898 * contrib_232908;
                float defunc_1_f_res_adj_232912 = binop_x_adj_232911 + binop_x_adj_232911;
                float binop_x_adj_232913 = defunc_1_f_res_232897 * contrib_232908;
                float defunc_1_f_res_adj_232914 = binop_x_adj_232913 + binop_x_adj_232913;
                float binop_y_adj_232915 = -1.0F * defunc_1_f_res_adj_232910;
                float binop_y_adj_232916 = -1.0F * defunc_1_f_res_adj_232912;
                float binop_y_adj_232917 = -1.0F * defunc_1_f_res_adj_232914;
                float binop_y_adj_232918 = z30U_189280 * defunc_1_f_res_adj_232910;
                float binop_y_adj_232919 = z30U_189279 * defunc_1_f_res_adj_232912;
                float i_m_adj_232920 = binop_y_adj_232918 + binop_y_adj_232919;
                float binop_y_adj_232921 = z30U_189278 * defunc_1_f_res_adj_232914;
                float i_m_adj_232922 = i_m_adj_232920 + binop_y_adj_232921;
                float binop_x_adj_232923 = j_m_232857 * defunc_1_f_res_adj_232910;
                float binop_y_adj_232924 = defunc_1_f_res_232823 * defunc_1_f_res_adj_232910;
                float binop_x_adj_232925 = j_m_232857 * defunc_1_f_res_adj_232912;
                float binop_y_adj_232926 = defunc_1_f_res_232822 * defunc_1_f_res_adj_232912;
                float j_m_adj_232927 = binop_y_adj_232924 + binop_y_adj_232926;
                float binop_x_adj_232928 = j_m_232857 * defunc_1_f_res_adj_232914;
                float binop_y_adj_232929 = defunc_1_f_res_232821 * defunc_1_f_res_adj_232914;
                float j_m_adj_232930 = j_m_adj_232927 + binop_y_adj_232929;
                
                branch_adj_232876 = binop_x_adj_232928;
                branch_adj_232877 = binop_x_adj_232925;
                branch_adj_232878 = binop_x_adj_232923;
                branch_adj_232879 = binop_y_adj_232917;
                branch_adj_232880 = binop_y_adj_232916;
                branch_adj_232881 = binop_y_adj_232915;
                branch_adj_232882 = i_m_adj_232922;
                branch_adj_232883 = j_m_adj_232930;
                branch_adj_232884 = 0.0F;
                branch_adj_232885 = 0.0F;
                branch_adj_232886 = 0.0F;
                branch_adj_232887 = 0.0F;
            } else {
                float defunc_0_f_res_232931 = -1.0F * defunc_1_f_res_232821;
                float defunc_0_f_res_232932 = -1.0F * defunc_1_f_res_232822;
                float defunc_0_f_res_232933 = -1.0F * defunc_1_f_res_232823;
                float defunc_0_f_res_232934 = -1.0F * z30U_189278;
                float defunc_0_f_res_232935 = -1.0F * z30U_189279;
                float defunc_0_f_res_232936 = -1.0F * z30U_189280;
                float defunc_1_f_res_232937 = defunc_0_f_res_232931 + defunc_0_f_res_232934;
                float defunc_1_f_res_232938 = defunc_0_f_res_232932 + defunc_0_f_res_232935;
                float defunc_1_f_res_232939 = defunc_0_f_res_232933 + defunc_0_f_res_232936;
                float defunc_1_f_res_232940 = defunc_1_f_res_232937 - defunc_0_f_res_232824;
                float defunc_1_f_res_232941 = defunc_1_f_res_232938 - defunc_0_f_res_232825;
                float defunc_1_f_res_232942 = defunc_1_f_res_232939 - defunc_0_f_res_232826;
                float defunc_1_f_res_232943 = defunc_1_f_res_232940 * defunc_1_f_res_232940;
                float defunc_1_f_res_232944 = defunc_1_f_res_232941 * defunc_1_f_res_232941;
                float defunc_1_f_res_232945 = defunc_1_f_res_232942 * defunc_1_f_res_232942;
                float defunc_1_f_res_232946 = defunc_1_f_res_232944 + defunc_1_f_res_232945;
                float defunc_0_f_res_232947 = defunc_1_f_res_232943 + defunc_1_f_res_232946;
                float defunc_1_f_res_232948 = defunc_1_f_res_232821 + defunc_0_f_res_232934;
                float defunc_1_f_res_232949 = defunc_1_f_res_232822 + defunc_0_f_res_232935;
                float defunc_1_f_res_232950 = defunc_1_f_res_232823 + defunc_0_f_res_232936;
                float defunc_1_f_res_232951 = defunc_1_f_res_232948 - defunc_0_f_res_232824;
                float defunc_1_f_res_232952 = defunc_1_f_res_232949 - defunc_0_f_res_232825;
                float defunc_1_f_res_232953 = defunc_1_f_res_232950 - defunc_0_f_res_232826;
                float defunc_1_f_res_232954 = defunc_1_f_res_232951 * defunc_1_f_res_232951;
                float defunc_1_f_res_232955 = defunc_1_f_res_232952 * defunc_1_f_res_232952;
                float defunc_1_f_res_232956 = defunc_1_f_res_232953 * defunc_1_f_res_232953;
                float defunc_1_f_res_232957 = defunc_1_f_res_232955 + defunc_1_f_res_232956;
                float defunc_0_f_res_232958 = defunc_1_f_res_232954 + defunc_1_f_res_232957;
                float defunc_1_f_res_232959 = z30U_189278 + defunc_0_f_res_232931;
                float defunc_1_f_res_232960 = z30U_189279 + defunc_0_f_res_232932;
                float defunc_1_f_res_232961 = z30U_189280 + defunc_0_f_res_232933;
                float defunc_1_f_res_232962 = defunc_1_f_res_232959 - defunc_0_f_res_232824;
                float defunc_1_f_res_232963 = defunc_1_f_res_232960 - defunc_0_f_res_232825;
                float defunc_1_f_res_232964 = defunc_1_f_res_232961 - defunc_0_f_res_232826;
                float defunc_1_f_res_232965 = defunc_1_f_res_232962 * defunc_1_f_res_232962;
                float defunc_1_f_res_232966 = defunc_1_f_res_232963 * defunc_1_f_res_232963;
                float defunc_1_f_res_232967 = defunc_1_f_res_232964 * defunc_1_f_res_232964;
                float defunc_1_f_res_232968 = defunc_1_f_res_232966 + defunc_1_f_res_232967;
                float defunc_0_f_res_232969 = defunc_1_f_res_232965 + defunc_1_f_res_232968;
                float defunc_1_f_res_232970 = z30U_189278 + defunc_1_f_res_232821;
                float defunc_1_f_res_232971 = z30U_189279 + defunc_1_f_res_232822;
                float defunc_1_f_res_232972 = z30U_189280 + defunc_1_f_res_232823;
                float defunc_1_f_res_232973 = defunc_1_f_res_232970 - defunc_0_f_res_232824;
                float defunc_1_f_res_232974 = defunc_1_f_res_232971 - defunc_0_f_res_232825;
                float defunc_1_f_res_232975 = defunc_1_f_res_232972 - defunc_0_f_res_232826;
                float defunc_1_f_res_232976 = defunc_1_f_res_232973 * defunc_1_f_res_232973;
                float defunc_1_f_res_232977 = defunc_1_f_res_232974 * defunc_1_f_res_232974;
                float defunc_1_f_res_232978 = defunc_1_f_res_232975 * defunc_1_f_res_232975;
                float defunc_1_f_res_232979 = defunc_1_f_res_232977 + defunc_1_f_res_232978;
                float defunc_0_f_res_232980 = defunc_1_f_res_232976 + defunc_1_f_res_232979;
                bool cond_232981 = -1.0F <= j_n_232865;
                bool lifted_valid_res_t_res_232982 = j_n_232865 <= 1.0F;
                bool x_232983 = cond_232981 && lifted_valid_res_t_res_232982;
                float min_arg_232984;
                
                if (x_232983 == 1) {
                    float defunc_0_f_res_232985 = defunc_1_f_res_232821 * j_n_232865;
                    float defunc_0_f_res_232986 = defunc_1_f_res_232822 * j_n_232865;
                    float defunc_0_f_res_232987 = defunc_1_f_res_232823 * j_n_232865;
                    float defunc_1_f_res_232988 = defunc_0_f_res_232934 + defunc_0_f_res_232985;
                    float defunc_1_f_res_232989 = defunc_0_f_res_232935 + defunc_0_f_res_232986;
                    float defunc_1_f_res_232990 = defunc_0_f_res_232936 + defunc_0_f_res_232987;
                    float defunc_1_f_res_232991 = defunc_1_f_res_232988 - defunc_0_f_res_232824;
                    float defunc_1_f_res_232992 = defunc_1_f_res_232989 - defunc_0_f_res_232825;
                    float defunc_1_f_res_232993 = defunc_1_f_res_232990 - defunc_0_f_res_232826;
                    float defunc_1_f_res_232994 = defunc_1_f_res_232991 * defunc_1_f_res_232991;
                    float defunc_1_f_res_232995 = defunc_1_f_res_232992 * defunc_1_f_res_232992;
                    float defunc_1_f_res_232996 = defunc_1_f_res_232993 * defunc_1_f_res_232993;
                    float defunc_1_f_res_232997 = defunc_1_f_res_232995 + defunc_1_f_res_232996;
                    float defunc_0_f_res_232998 = defunc_1_f_res_232994 + defunc_1_f_res_232997;
                    
                    min_arg_232984 = defunc_0_f_res_232998;
                } else {
                    min_arg_232984 = INFINITY;
                }
                
                bool cond_232999 = -1.0F <= j_p_232863;
                bool lifted_valid_res_t_res_233000 = j_p_232863 <= 1.0F;
                bool x_233001 = cond_232999 && lifted_valid_res_t_res_233000;
                float min_arg_233002;
                
                if (x_233001 == 1) {
                    float defunc_0_f_res_233003 = defunc_1_f_res_232821 * j_p_232863;
                    float defunc_0_f_res_233004 = defunc_1_f_res_232822 * j_p_232863;
                    float defunc_0_f_res_233005 = defunc_1_f_res_232823 * j_p_232863;
                    float defunc_1_f_res_233006 = z30U_189278 + defunc_0_f_res_233003;
                    float defunc_1_f_res_233007 = z30U_189279 + defunc_0_f_res_233004;
                    float defunc_1_f_res_233008 = z30U_189280 + defunc_0_f_res_233005;
                    float defunc_1_f_res_233009 = defunc_1_f_res_233006 - defunc_0_f_res_232824;
                    float defunc_1_f_res_233010 = defunc_1_f_res_233007 - defunc_0_f_res_232825;
                    float defunc_1_f_res_233011 = defunc_1_f_res_233008 - defunc_0_f_res_232826;
                    float defunc_1_f_res_233012 = defunc_1_f_res_233009 * defunc_1_f_res_233009;
                    float defunc_1_f_res_233013 = defunc_1_f_res_233010 * defunc_1_f_res_233010;
                    float defunc_1_f_res_233014 = defunc_1_f_res_233011 * defunc_1_f_res_233011;
                    float defunc_1_f_res_233015 = defunc_1_f_res_233013 + defunc_1_f_res_233014;
                    float defunc_0_f_res_233016 = defunc_1_f_res_233012 + defunc_1_f_res_233015;
                    
                    min_arg_233002 = defunc_0_f_res_233016;
                } else {
                    min_arg_233002 = INFINITY;
                }
                
                bool cond_233017 = -1.0F <= i_n_232861;
                bool lifted_valid_res_t_res_233018 = i_n_232861 <= 1.0F;
                bool x_233019 = cond_233017 && lifted_valid_res_t_res_233018;
                float min_arg_233020;
                
                if (x_233019 == 1) {
                    float defunc_0_f_res_233021 = z30U_189278 * i_n_232861;
                    float defunc_0_f_res_233022 = z30U_189279 * i_n_232861;
                    float defunc_0_f_res_233023 = z30U_189280 * i_n_232861;
                    float defunc_1_f_res_233024 = defunc_0_f_res_232931 + defunc_0_f_res_233021;
                    float defunc_1_f_res_233025 = defunc_0_f_res_232932 + defunc_0_f_res_233022;
                    float defunc_1_f_res_233026 = defunc_0_f_res_232933 + defunc_0_f_res_233023;
                    float defunc_1_f_res_233027 = defunc_1_f_res_233024 - defunc_0_f_res_232824;
                    float defunc_1_f_res_233028 = defunc_1_f_res_233025 - defunc_0_f_res_232825;
                    float defunc_1_f_res_233029 = defunc_1_f_res_233026 - defunc_0_f_res_232826;
                    float defunc_1_f_res_233030 = defunc_1_f_res_233027 * defunc_1_f_res_233027;
                    float defunc_1_f_res_233031 = defunc_1_f_res_233028 * defunc_1_f_res_233028;
                    float defunc_1_f_res_233032 = defunc_1_f_res_233029 * defunc_1_f_res_233029;
                    float defunc_1_f_res_233033 = defunc_1_f_res_233031 + defunc_1_f_res_233032;
                    float defunc_0_f_res_233034 = defunc_1_f_res_233030 + defunc_1_f_res_233033;
                    
                    min_arg_233020 = defunc_0_f_res_233034;
                } else {
                    min_arg_233020 = INFINITY;
                }
                
                bool cond_233035 = -1.0F <= i_p_232859;
                bool lifted_valid_res_t_res_233036 = i_p_232859 <= 1.0F;
                bool x_233037 = cond_233035 && lifted_valid_res_t_res_233036;
                float min_arg_233038;
                
                if (x_233037 == 1) {
                    float defunc_0_f_res_233039 = z30U_189278 * i_p_232859;
                    float defunc_0_f_res_233040 = z30U_189279 * i_p_232859;
                    float defunc_0_f_res_233041 = z30U_189280 * i_p_232859;
                    float defunc_1_f_res_233042 = defunc_1_f_res_232821 + defunc_0_f_res_233039;
                    float defunc_1_f_res_233043 = defunc_1_f_res_232822 + defunc_0_f_res_233040;
                    float defunc_1_f_res_233044 = defunc_1_f_res_232823 + defunc_0_f_res_233041;
                    float defunc_1_f_res_233045 = defunc_1_f_res_233042 - defunc_0_f_res_232824;
                    float defunc_1_f_res_233046 = defunc_1_f_res_233043 - defunc_0_f_res_232825;
                    float defunc_1_f_res_233047 = defunc_1_f_res_233044 - defunc_0_f_res_232826;
                    float defunc_1_f_res_233048 = defunc_1_f_res_233045 * defunc_1_f_res_233045;
                    float defunc_1_f_res_233049 = defunc_1_f_res_233046 * defunc_1_f_res_233046;
                    float defunc_1_f_res_233050 = defunc_1_f_res_233047 * defunc_1_f_res_233047;
                    float defunc_1_f_res_233051 = defunc_1_f_res_233049 + defunc_1_f_res_233050;
                    float defunc_0_f_res_233052 = defunc_1_f_res_233048 + defunc_1_f_res_233051;
                    
                    min_arg_233038 = defunc_0_f_res_233052;
                } else {
                    min_arg_233038 = INFINITY;
                }
                
                float min_res_233053 = fmin32(min_arg_233020, min_arg_233038);
                float min_res_233054 = fmin32(min_arg_233002, min_res_233053);
                float min_res_233055 = fmin32(min_arg_232984, min_res_233054);
                float min_res_233056 = fmin32(defunc_0_f_res_232980, min_res_233055);
                float min_res_233057 = fmin32(defunc_0_f_res_232969, min_res_233056);
                float min_res_233058 = fmin32(defunc_0_f_res_232958, min_res_233057);
                float min_res_233059 = fmin32(defunc_0_f_res_232947, min_res_233058);
                float binop_y_233060 = fpow32(min_res_233059, 0.5F);
                float binop_y_233061 = 2.0F * binop_y_233060;
                float binop_y_233062 = 1.0F / binop_y_233061;
                float contrib_233063 = binop_x_adj_221300 * binop_y_233062;
                bool convop_x_233064 = defunc_0_f_res_232947 <= min_res_233058;
                int32_t convop_x_233065 = btoi_bool_i32(convop_x_233064);
                float binop_y_233066 = sitofp_i32_f32(convop_x_233065);
                float binop_x_adj_233067 = contrib_233063 * binop_y_233066;
                bool convop_x_233068 = min_res_233058 < defunc_0_f_res_232947;
                int32_t convop_x_233069 = btoi_bool_i32(convop_x_233068);
                float binop_y_233070 = sitofp_i32_f32(convop_x_233069);
                float binop_y_adj_233071 = contrib_233063 * binop_y_233070;
                bool convop_x_233072 = defunc_0_f_res_232958 <= min_res_233057;
                int32_t convop_x_233073 = btoi_bool_i32(convop_x_233072);
                float binop_y_233074 = sitofp_i32_f32(convop_x_233073);
                float binop_x_adj_233075 = binop_y_adj_233071 * binop_y_233074;
                bool convop_x_233076 = min_res_233057 < defunc_0_f_res_232958;
                int32_t convop_x_233077 = btoi_bool_i32(convop_x_233076);
                float binop_y_233078 = sitofp_i32_f32(convop_x_233077);
                float binop_y_adj_233079 = binop_y_adj_233071 * binop_y_233078;
                bool convop_x_233080 = defunc_0_f_res_232969 <= min_res_233056;
                int32_t convop_x_233081 = btoi_bool_i32(convop_x_233080);
                float binop_y_233082 = sitofp_i32_f32(convop_x_233081);
                float binop_x_adj_233083 = binop_y_adj_233079 * binop_y_233082;
                bool convop_x_233084 = min_res_233056 < defunc_0_f_res_232969;
                int32_t convop_x_233085 = btoi_bool_i32(convop_x_233084);
                float binop_y_233086 = sitofp_i32_f32(convop_x_233085);
                float binop_y_adj_233087 = binop_y_adj_233079 * binop_y_233086;
                bool convop_x_233088 = defunc_0_f_res_232980 <= min_res_233055;
                int32_t convop_x_233089 = btoi_bool_i32(convop_x_233088);
                float binop_y_233090 = sitofp_i32_f32(convop_x_233089);
                float binop_x_adj_233091 = binop_y_adj_233087 * binop_y_233090;
                bool convop_x_233092 = min_res_233055 < defunc_0_f_res_232980;
                int32_t convop_x_233093 = btoi_bool_i32(convop_x_233092);
                float binop_y_233094 = sitofp_i32_f32(convop_x_233093);
                float binop_y_adj_233095 = binop_y_adj_233087 * binop_y_233094;
                bool convop_x_233096 = min_arg_232984 <= min_res_233054;
                int32_t convop_x_233097 = btoi_bool_i32(convop_x_233096);
                float binop_y_233098 = sitofp_i32_f32(convop_x_233097);
                float binop_x_adj_233099 = binop_y_adj_233095 * binop_y_233098;
                bool convop_x_233100 = min_res_233054 < min_arg_232984;
                int32_t convop_x_233101 = btoi_bool_i32(convop_x_233100);
                float binop_y_233102 = sitofp_i32_f32(convop_x_233101);
                float binop_y_adj_233103 = binop_y_adj_233095 * binop_y_233102;
                bool convop_x_233104 = min_arg_233002 <= min_res_233053;
                int32_t convop_x_233105 = btoi_bool_i32(convop_x_233104);
                float binop_y_233106 = sitofp_i32_f32(convop_x_233105);
                float binop_x_adj_233107 = binop_y_adj_233103 * binop_y_233106;
                bool convop_x_233108 = min_res_233053 < min_arg_233002;
                int32_t convop_x_233109 = btoi_bool_i32(convop_x_233108);
                float binop_y_233110 = sitofp_i32_f32(convop_x_233109);
                float binop_y_adj_233111 = binop_y_adj_233103 * binop_y_233110;
                bool convop_x_233112 = min_arg_233020 <= min_arg_233038;
                int32_t convop_x_233113 = btoi_bool_i32(convop_x_233112);
                float binop_y_233114 = sitofp_i32_f32(convop_x_233113);
                float binop_x_adj_233115 = binop_y_adj_233111 * binop_y_233114;
                bool convop_x_233116 = min_arg_233038 < min_arg_233020;
                int32_t convop_x_233117 = btoi_bool_i32(convop_x_233116);
                float binop_y_233118 = sitofp_i32_f32(convop_x_233117);
                float binop_y_adj_233119 = binop_y_adj_233111 * binop_y_233118;
                float branch_adj_233120;
                float branch_adj_233121;
                float branch_adj_233122;
                float branch_adj_233123;
                float branch_adj_233124;
                float branch_adj_233125;
                float branch_adj_233126;
                
                if (x_233037 == 1) {
                    float defunc_0_f_res_233127 = z30U_189278 * i_p_232859;
                    float defunc_0_f_res_233128 = z30U_189279 * i_p_232859;
                    float defunc_0_f_res_233129 = z30U_189280 * i_p_232859;
                    float defunc_1_f_res_233130 = defunc_1_f_res_232821 + defunc_0_f_res_233127;
                    float defunc_1_f_res_233131 = defunc_1_f_res_232822 + defunc_0_f_res_233128;
                    float defunc_1_f_res_233132 = defunc_1_f_res_232823 + defunc_0_f_res_233129;
                    float defunc_1_f_res_233133 = defunc_1_f_res_233130 - defunc_0_f_res_232824;
                    float defunc_1_f_res_233134 = defunc_1_f_res_233131 - defunc_0_f_res_232825;
                    float defunc_1_f_res_233135 = defunc_1_f_res_233132 - defunc_0_f_res_232826;
                    float binop_x_adj_233136 = binop_y_adj_233119 * defunc_1_f_res_233135;
                    float defunc_1_f_res_adj_233137 = binop_x_adj_233136 + binop_x_adj_233136;
                    float binop_x_adj_233138 = binop_y_adj_233119 * defunc_1_f_res_233134;
                    float defunc_1_f_res_adj_233139 = binop_x_adj_233138 + binop_x_adj_233138;
                    float binop_x_adj_233140 = binop_y_adj_233119 * defunc_1_f_res_233133;
                    float defunc_1_f_res_adj_233141 = binop_x_adj_233140 + binop_x_adj_233140;
                    float binop_y_adj_233142 = -1.0F * defunc_1_f_res_adj_233137;
                    float binop_y_adj_233143 = -1.0F * defunc_1_f_res_adj_233139;
                    float binop_y_adj_233144 = -1.0F * defunc_1_f_res_adj_233141;
                    float binop_y_adj_233145 = z30U_189280 * defunc_1_f_res_adj_233137;
                    float binop_y_adj_233146 = z30U_189279 * defunc_1_f_res_adj_233139;
                    float i_p_adj_233147 = binop_y_adj_233145 + binop_y_adj_233146;
                    float binop_y_adj_233148 = z30U_189278 * defunc_1_f_res_adj_233141;
                    float i_p_adj_233149 = i_p_adj_233147 + binop_y_adj_233148;
                    
                    branch_adj_233120 = defunc_1_f_res_adj_233141;
                    branch_adj_233121 = defunc_1_f_res_adj_233139;
                    branch_adj_233122 = defunc_1_f_res_adj_233137;
                    branch_adj_233123 = binop_y_adj_233144;
                    branch_adj_233124 = binop_y_adj_233143;
                    branch_adj_233125 = binop_y_adj_233142;
                    branch_adj_233126 = i_p_adj_233149;
                } else {
                    branch_adj_233120 = 0.0F;
                    branch_adj_233121 = 0.0F;
                    branch_adj_233122 = 0.0F;
                    branch_adj_233123 = 0.0F;
                    branch_adj_233124 = 0.0F;
                    branch_adj_233125 = 0.0F;
                    branch_adj_233126 = 0.0F;
                }
                
                float branch_adj_233150;
                float branch_adj_233151;
                float branch_adj_233152;
                float branch_adj_233153;
                float branch_adj_233154;
                float branch_adj_233155;
                float branch_adj_233156;
                
                if (x_233019 == 1) {
                    float defunc_0_f_res_233157 = z30U_189278 * i_n_232861;
                    float defunc_0_f_res_233158 = z30U_189279 * i_n_232861;
                    float defunc_0_f_res_233159 = z30U_189280 * i_n_232861;
                    float defunc_1_f_res_233160 = defunc_0_f_res_232931 + defunc_0_f_res_233157;
                    float defunc_1_f_res_233161 = defunc_0_f_res_232932 + defunc_0_f_res_233158;
                    float defunc_1_f_res_233162 = defunc_0_f_res_232933 + defunc_0_f_res_233159;
                    float defunc_1_f_res_233163 = defunc_1_f_res_233160 - defunc_0_f_res_232824;
                    float defunc_1_f_res_233164 = defunc_1_f_res_233161 - defunc_0_f_res_232825;
                    float defunc_1_f_res_233165 = defunc_1_f_res_233162 - defunc_0_f_res_232826;
                    float binop_x_adj_233166 = binop_x_adj_233115 * defunc_1_f_res_233165;
                    float defunc_1_f_res_adj_233167 = binop_x_adj_233166 + binop_x_adj_233166;
                    float binop_x_adj_233168 = binop_x_adj_233115 * defunc_1_f_res_233164;
                    float defunc_1_f_res_adj_233169 = binop_x_adj_233168 + binop_x_adj_233168;
                    float binop_x_adj_233170 = binop_x_adj_233115 * defunc_1_f_res_233163;
                    float defunc_1_f_res_adj_233171 = binop_x_adj_233170 + binop_x_adj_233170;
                    float binop_y_adj_233172 = -1.0F * defunc_1_f_res_adj_233167;
                    float defunc_0_f_res_adj_233173 = branch_adj_233125 + binop_y_adj_233172;
                    float binop_y_adj_233174 = -1.0F * defunc_1_f_res_adj_233169;
                    float defunc_0_f_res_adj_233175 = branch_adj_233124 + binop_y_adj_233174;
                    float binop_y_adj_233176 = -1.0F * defunc_1_f_res_adj_233171;
                    float defunc_0_f_res_adj_233177 = branch_adj_233123 + binop_y_adj_233176;
                    float binop_y_adj_233178 = z30U_189280 * defunc_1_f_res_adj_233167;
                    float binop_y_adj_233179 = z30U_189279 * defunc_1_f_res_adj_233169;
                    float i_n_adj_233180 = binop_y_adj_233178 + binop_y_adj_233179;
                    float binop_y_adj_233181 = z30U_189278 * defunc_1_f_res_adj_233171;
                    float i_n_adj_233182 = i_n_adj_233180 + binop_y_adj_233181;
                    
                    branch_adj_233150 = defunc_0_f_res_adj_233177;
                    branch_adj_233151 = defunc_0_f_res_adj_233175;
                    branch_adj_233152 = defunc_0_f_res_adj_233173;
                    branch_adj_233153 = i_n_adj_233182;
                    branch_adj_233154 = defunc_1_f_res_adj_233171;
                    branch_adj_233155 = defunc_1_f_res_adj_233169;
                    branch_adj_233156 = defunc_1_f_res_adj_233167;
                } else {
                    branch_adj_233150 = branch_adj_233123;
                    branch_adj_233151 = branch_adj_233124;
                    branch_adj_233152 = branch_adj_233125;
                    branch_adj_233153 = 0.0F;
                    branch_adj_233154 = 0.0F;
                    branch_adj_233155 = 0.0F;
                    branch_adj_233156 = 0.0F;
                }
                
                float branch_adj_233183;
                float branch_adj_233184;
                float branch_adj_233185;
                float branch_adj_233186;
                float branch_adj_233187;
                float branch_adj_233188;
                float branch_adj_233189;
                
                if (x_233001 == 1) {
                    float defunc_0_f_res_233190 = defunc_1_f_res_232821 * j_p_232863;
                    float defunc_0_f_res_233191 = defunc_1_f_res_232822 * j_p_232863;
                    float defunc_0_f_res_233192 = defunc_1_f_res_232823 * j_p_232863;
                    float defunc_1_f_res_233193 = z30U_189278 + defunc_0_f_res_233190;
                    float defunc_1_f_res_233194 = z30U_189279 + defunc_0_f_res_233191;
                    float defunc_1_f_res_233195 = z30U_189280 + defunc_0_f_res_233192;
                    float defunc_1_f_res_233196 = defunc_1_f_res_233193 - defunc_0_f_res_232824;
                    float defunc_1_f_res_233197 = defunc_1_f_res_233194 - defunc_0_f_res_232825;
                    float defunc_1_f_res_233198 = defunc_1_f_res_233195 - defunc_0_f_res_232826;
                    float binop_x_adj_233199 = binop_x_adj_233107 * defunc_1_f_res_233198;
                    float defunc_1_f_res_adj_233200 = binop_x_adj_233199 + binop_x_adj_233199;
                    float binop_x_adj_233201 = binop_x_adj_233107 * defunc_1_f_res_233197;
                    float defunc_1_f_res_adj_233202 = binop_x_adj_233201 + binop_x_adj_233201;
                    float binop_x_adj_233203 = binop_x_adj_233107 * defunc_1_f_res_233196;
                    float defunc_1_f_res_adj_233204 = binop_x_adj_233203 + binop_x_adj_233203;
                    float binop_y_adj_233205 = -1.0F * defunc_1_f_res_adj_233200;
                    float defunc_0_f_res_adj_233206 = branch_adj_233152 + binop_y_adj_233205;
                    float binop_y_adj_233207 = -1.0F * defunc_1_f_res_adj_233202;
                    float defunc_0_f_res_adj_233208 = branch_adj_233151 + binop_y_adj_233207;
                    float binop_y_adj_233209 = -1.0F * defunc_1_f_res_adj_233204;
                    float defunc_0_f_res_adj_233210 = branch_adj_233150 + binop_y_adj_233209;
                    float binop_x_adj_233211 = j_p_232863 * defunc_1_f_res_adj_233200;
                    float binop_y_adj_233212 = defunc_1_f_res_232823 * defunc_1_f_res_adj_233200;
                    float defunc_1_f_res_adj_233213 = branch_adj_233122 + binop_x_adj_233211;
                    float binop_x_adj_233214 = j_p_232863 * defunc_1_f_res_adj_233202;
                    float binop_y_adj_233215 = defunc_1_f_res_232822 * defunc_1_f_res_adj_233202;
                    float defunc_1_f_res_adj_233216 = branch_adj_233121 + binop_x_adj_233214;
                    float j_p_adj_233217 = binop_y_adj_233212 + binop_y_adj_233215;
                    float binop_x_adj_233218 = j_p_232863 * defunc_1_f_res_adj_233204;
                    float binop_y_adj_233219 = defunc_1_f_res_232821 * defunc_1_f_res_adj_233204;
                    float defunc_1_f_res_adj_233220 = branch_adj_233120 + binop_x_adj_233218;
                    float j_p_adj_233221 = j_p_adj_233217 + binop_y_adj_233219;
                    
                    branch_adj_233183 = defunc_1_f_res_adj_233220;
                    branch_adj_233184 = defunc_1_f_res_adj_233216;
                    branch_adj_233185 = defunc_1_f_res_adj_233213;
                    branch_adj_233186 = defunc_0_f_res_adj_233210;
                    branch_adj_233187 = defunc_0_f_res_adj_233208;
                    branch_adj_233188 = defunc_0_f_res_adj_233206;
                    branch_adj_233189 = j_p_adj_233221;
                } else {
                    branch_adj_233183 = branch_adj_233120;
                    branch_adj_233184 = branch_adj_233121;
                    branch_adj_233185 = branch_adj_233122;
                    branch_adj_233186 = branch_adj_233150;
                    branch_adj_233187 = branch_adj_233151;
                    branch_adj_233188 = branch_adj_233152;
                    branch_adj_233189 = 0.0F;
                }
                
                float branch_adj_233222;
                float branch_adj_233223;
                float branch_adj_233224;
                float branch_adj_233225;
                float branch_adj_233226;
                float branch_adj_233227;
                float branch_adj_233228;
                
                if (x_232983 == 1) {
                    float defunc_0_f_res_233229 = defunc_1_f_res_232821 * j_n_232865;
                    float defunc_0_f_res_233230 = defunc_1_f_res_232822 * j_n_232865;
                    float defunc_0_f_res_233231 = defunc_1_f_res_232823 * j_n_232865;
                    float defunc_1_f_res_233232 = defunc_0_f_res_232934 + defunc_0_f_res_233229;
                    float defunc_1_f_res_233233 = defunc_0_f_res_232935 + defunc_0_f_res_233230;
                    float defunc_1_f_res_233234 = defunc_0_f_res_232936 + defunc_0_f_res_233231;
                    float defunc_1_f_res_233235 = defunc_1_f_res_233232 - defunc_0_f_res_232824;
                    float defunc_1_f_res_233236 = defunc_1_f_res_233233 - defunc_0_f_res_232825;
                    float defunc_1_f_res_233237 = defunc_1_f_res_233234 - defunc_0_f_res_232826;
                    float binop_x_adj_233238 = binop_x_adj_233099 * defunc_1_f_res_233237;
                    float defunc_1_f_res_adj_233239 = binop_x_adj_233238 + binop_x_adj_233238;
                    float binop_x_adj_233240 = binop_x_adj_233099 * defunc_1_f_res_233236;
                    float defunc_1_f_res_adj_233241 = binop_x_adj_233240 + binop_x_adj_233240;
                    float binop_x_adj_233242 = binop_x_adj_233099 * defunc_1_f_res_233235;
                    float defunc_1_f_res_adj_233243 = binop_x_adj_233242 + binop_x_adj_233242;
                    float binop_y_adj_233244 = -1.0F * defunc_1_f_res_adj_233239;
                    float defunc_0_f_res_adj_233245 = branch_adj_233188 + binop_y_adj_233244;
                    float binop_y_adj_233246 = -1.0F * defunc_1_f_res_adj_233241;
                    float defunc_0_f_res_adj_233247 = branch_adj_233187 + binop_y_adj_233246;
                    float binop_y_adj_233248 = -1.0F * defunc_1_f_res_adj_233243;
                    float defunc_0_f_res_adj_233249 = branch_adj_233186 + binop_y_adj_233248;
                    float binop_x_adj_233250 = j_n_232865 * defunc_1_f_res_adj_233239;
                    float binop_y_adj_233251 = defunc_1_f_res_232823 * defunc_1_f_res_adj_233239;
                    float defunc_1_f_res_adj_233252 = branch_adj_233185 + binop_x_adj_233250;
                    float binop_x_adj_233253 = j_n_232865 * defunc_1_f_res_adj_233241;
                    float binop_y_adj_233254 = defunc_1_f_res_232822 * defunc_1_f_res_adj_233241;
                    float defunc_1_f_res_adj_233255 = branch_adj_233184 + binop_x_adj_233253;
                    float j_n_adj_233256 = binop_y_adj_233251 + binop_y_adj_233254;
                    float binop_x_adj_233257 = j_n_232865 * defunc_1_f_res_adj_233243;
                    float binop_y_adj_233258 = defunc_1_f_res_232821 * defunc_1_f_res_adj_233243;
                    float defunc_1_f_res_adj_233259 = branch_adj_233183 + binop_x_adj_233257;
                    float j_n_adj_233260 = j_n_adj_233256 + binop_y_adj_233258;
                    
                    branch_adj_233222 = defunc_1_f_res_adj_233259;
                    branch_adj_233223 = defunc_1_f_res_adj_233255;
                    branch_adj_233224 = defunc_1_f_res_adj_233252;
                    branch_adj_233225 = defunc_0_f_res_adj_233249;
                    branch_adj_233226 = defunc_0_f_res_adj_233247;
                    branch_adj_233227 = defunc_0_f_res_adj_233245;
                    branch_adj_233228 = j_n_adj_233260;
                } else {
                    branch_adj_233222 = branch_adj_233183;
                    branch_adj_233223 = branch_adj_233184;
                    branch_adj_233224 = branch_adj_233185;
                    branch_adj_233225 = branch_adj_233186;
                    branch_adj_233226 = branch_adj_233187;
                    branch_adj_233227 = branch_adj_233188;
                    branch_adj_233228 = 0.0F;
                }
                
                float binop_x_adj_233261 = defunc_1_f_res_232975 * binop_x_adj_233091;
                float defunc_1_f_res_adj_233262 = binop_x_adj_233261 + binop_x_adj_233261;
                float binop_x_adj_233263 = defunc_1_f_res_232974 * binop_x_adj_233091;
                float defunc_1_f_res_adj_233264 = binop_x_adj_233263 + binop_x_adj_233263;
                float binop_x_adj_233265 = defunc_1_f_res_232973 * binop_x_adj_233091;
                float defunc_1_f_res_adj_233266 = binop_x_adj_233265 + binop_x_adj_233265;
                float binop_y_adj_233267 = -1.0F * defunc_1_f_res_adj_233262;
                float defunc_0_f_res_adj_233268 = branch_adj_233227 + binop_y_adj_233267;
                float binop_y_adj_233269 = -1.0F * defunc_1_f_res_adj_233264;
                float defunc_0_f_res_adj_233270 = branch_adj_233226 + binop_y_adj_233269;
                float binop_y_adj_233271 = -1.0F * defunc_1_f_res_adj_233266;
                float defunc_0_f_res_adj_233272 = branch_adj_233225 + binop_y_adj_233271;
                float defunc_1_f_res_adj_233273 = branch_adj_233224 + defunc_1_f_res_adj_233262;
                float defunc_1_f_res_adj_233274 = branch_adj_233223 + defunc_1_f_res_adj_233264;
                float defunc_1_f_res_adj_233275 = branch_adj_233222 + defunc_1_f_res_adj_233266;
                float binop_x_adj_233276 = defunc_1_f_res_232964 * binop_x_adj_233083;
                float defunc_1_f_res_adj_233277 = binop_x_adj_233276 + binop_x_adj_233276;
                float binop_x_adj_233278 = defunc_1_f_res_232963 * binop_x_adj_233083;
                float defunc_1_f_res_adj_233279 = binop_x_adj_233278 + binop_x_adj_233278;
                float binop_x_adj_233280 = defunc_1_f_res_232962 * binop_x_adj_233083;
                float defunc_1_f_res_adj_233281 = binop_x_adj_233280 + binop_x_adj_233280;
                float binop_y_adj_233282 = -1.0F * defunc_1_f_res_adj_233277;
                float defunc_0_f_res_adj_233283 = defunc_0_f_res_adj_233268 + binop_y_adj_233282;
                float binop_y_adj_233284 = -1.0F * defunc_1_f_res_adj_233279;
                float defunc_0_f_res_adj_233285 = defunc_0_f_res_adj_233270 + binop_y_adj_233284;
                float binop_y_adj_233286 = -1.0F * defunc_1_f_res_adj_233281;
                float defunc_0_f_res_adj_233287 = defunc_0_f_res_adj_233272 + binop_y_adj_233286;
                float defunc_0_f_res_adj_233288 = branch_adj_233156 + defunc_1_f_res_adj_233277;
                float defunc_0_f_res_adj_233289 = branch_adj_233155 + defunc_1_f_res_adj_233279;
                float defunc_0_f_res_adj_233290 = branch_adj_233154 + defunc_1_f_res_adj_233281;
                float binop_x_adj_233291 = defunc_1_f_res_232953 * binop_x_adj_233075;
                float defunc_1_f_res_adj_233292 = binop_x_adj_233291 + binop_x_adj_233291;
                float binop_x_adj_233293 = defunc_1_f_res_232952 * binop_x_adj_233075;
                float defunc_1_f_res_adj_233294 = binop_x_adj_233293 + binop_x_adj_233293;
                float binop_x_adj_233295 = defunc_1_f_res_232951 * binop_x_adj_233075;
                float defunc_1_f_res_adj_233296 = binop_x_adj_233295 + binop_x_adj_233295;
                float binop_y_adj_233297 = -1.0F * defunc_1_f_res_adj_233292;
                float defunc_0_f_res_adj_233298 = defunc_0_f_res_adj_233283 + binop_y_adj_233297;
                float binop_y_adj_233299 = -1.0F * defunc_1_f_res_adj_233294;
                float defunc_0_f_res_adj_233300 = defunc_0_f_res_adj_233285 + binop_y_adj_233299;
                float binop_y_adj_233301 = -1.0F * defunc_1_f_res_adj_233296;
                float defunc_0_f_res_adj_233302 = defunc_0_f_res_adj_233287 + binop_y_adj_233301;
                float defunc_1_f_res_adj_233303 = defunc_1_f_res_adj_233273 + defunc_1_f_res_adj_233292;
                float defunc_1_f_res_adj_233304 = defunc_1_f_res_adj_233274 + defunc_1_f_res_adj_233294;
                float defunc_1_f_res_adj_233305 = defunc_1_f_res_adj_233275 + defunc_1_f_res_adj_233296;
                float binop_x_adj_233306 = defunc_1_f_res_232942 * binop_x_adj_233067;
                float defunc_1_f_res_adj_233307 = binop_x_adj_233306 + binop_x_adj_233306;
                float binop_x_adj_233308 = defunc_1_f_res_232941 * binop_x_adj_233067;
                float defunc_1_f_res_adj_233309 = binop_x_adj_233308 + binop_x_adj_233308;
                float binop_x_adj_233310 = defunc_1_f_res_232940 * binop_x_adj_233067;
                float defunc_1_f_res_adj_233311 = binop_x_adj_233310 + binop_x_adj_233310;
                float binop_y_adj_233312 = -1.0F * defunc_1_f_res_adj_233307;
                float defunc_0_f_res_adj_233313 = defunc_0_f_res_adj_233298 + binop_y_adj_233312;
                float binop_y_adj_233314 = -1.0F * defunc_1_f_res_adj_233309;
                float defunc_0_f_res_adj_233315 = defunc_0_f_res_adj_233300 + binop_y_adj_233314;
                float binop_y_adj_233316 = -1.0F * defunc_1_f_res_adj_233311;
                float defunc_0_f_res_adj_233317 = defunc_0_f_res_adj_233302 + binop_y_adj_233316;
                float defunc_0_f_res_adj_233318 = defunc_0_f_res_adj_233288 + defunc_1_f_res_adj_233307;
                float defunc_0_f_res_adj_233319 = defunc_0_f_res_adj_233289 + defunc_1_f_res_adj_233309;
                float defunc_0_f_res_adj_233320 = defunc_0_f_res_adj_233290 + defunc_1_f_res_adj_233311;
                float binop_y_adj_233321 = -1.0F * defunc_0_f_res_adj_233318;
                float defunc_1_f_res_adj_233322 = defunc_1_f_res_adj_233303 + binop_y_adj_233321;
                float binop_y_adj_233323 = -1.0F * defunc_0_f_res_adj_233319;
                float defunc_1_f_res_adj_233324 = defunc_1_f_res_adj_233304 + binop_y_adj_233323;
                float binop_y_adj_233325 = -1.0F * defunc_0_f_res_adj_233320;
                float defunc_1_f_res_adj_233326 = defunc_1_f_res_adj_233305 + binop_y_adj_233325;
                
                branch_adj_232876 = defunc_1_f_res_adj_233326;
                branch_adj_232877 = defunc_1_f_res_adj_233324;
                branch_adj_232878 = defunc_1_f_res_adj_233322;
                branch_adj_232879 = defunc_0_f_res_adj_233317;
                branch_adj_232880 = defunc_0_f_res_adj_233315;
                branch_adj_232881 = defunc_0_f_res_adj_233313;
                branch_adj_232882 = 0.0F;
                branch_adj_232883 = 0.0F;
                branch_adj_232884 = branch_adj_233126;
                branch_adj_232885 = branch_adj_233153;
                branch_adj_232886 = branch_adj_233189;
                branch_adj_232887 = branch_adj_233228;
            }
            
            float binop_y_233327 = 1.0F / defunc_0_f_res_232841;
            float binop_x_adj_233328 = branch_adj_232887 * binop_y_233327;
            float binop_y_233329 = defunc_0_f_res_232841 * defunc_0_f_res_232841;
            float binop_y_233330 = arg_232864 / binop_y_233329;
            float binop_y_233331 = 0.0F - binop_y_233330;
            float binop_y_adj_233332 = branch_adj_232887 * binop_y_233331;
            float binop_x_adj_233333 = branch_adj_232886 * binop_y_233327;
            float binop_y_233334 = arg_232862 / binop_y_233329;
            float binop_y_233335 = 0.0F - binop_y_233334;
            float binop_y_adj_233336 = branch_adj_232886 * binop_y_233335;
            float defunc_0_f_res_adj_233337 = binop_y_adj_233332 + binop_y_adj_233336;
            float binop_y_adj_233338 = -1.0F * binop_x_adj_233333;
            float defunc_0_f_res_adj_233339 = binop_x_adj_233328 + binop_x_adj_233333;
            float defunc_0_f_res_adj_233340 = binop_x_adj_233328 + binop_y_adj_233338;
            float binop_x_adj_233341 = binop_y_224178 * branch_adj_232885;
            float defunc_0_f_res_adj_233342 = defunc_0_f_res_adj_233340 + binop_x_adj_233341;
            float binop_x_adj_233343 = binop_y_224178 * branch_adj_232884;
            float binop_y_adj_233344 = -1.0F * binop_x_adj_233343;
            float defunc_0_f_res_adj_233345 = binop_x_adj_233341 + binop_x_adj_233343;
            float defunc_0_f_res_adj_233346 = defunc_0_f_res_adj_233342 + binop_y_adj_233344;
            float binop_y_233347 = 1.0F / det_232849;
            float binop_x_adj_233348 = branch_adj_232883 * binop_y_233347;
            float binop_y_233349 = det_232849 * det_232849;
            float binop_y_233350 = arg_232856 / binop_y_233349;
            float binop_y_233351 = 0.0F - binop_y_233350;
            float binop_y_adj_233352 = branch_adj_232883 * binop_y_233351;
            float binop_y_adj_233353 = -1.0F * binop_x_adj_233348;
            float binop_x_adj_233354 = defunc_0_f_res_232836 * binop_y_adj_233353;
            float binop_y_adj_233355 = defunc_0_f_res_232831 * binop_y_adj_233353;
            float defunc_0_f_res_adj_233356 = defunc_0_f_res_adj_233346 + binop_x_adj_233354;
            float defunc_0_f_res_adj_233357 = defunc_0_f_res_adj_233345 + binop_y_adj_233355;
            float binop_y_adj_233358 = defunc_0_f_res_211819 * binop_x_adj_233348;
            float defunc_0_f_res_adj_233359 = defunc_0_f_res_adj_233339 + binop_y_adj_233358;
            float binop_x_adj_233360 = branch_adj_232882 * binop_y_233347;
            float binop_y_233361 = arg_232852 / binop_y_233349;
            float binop_y_233362 = 0.0F - binop_y_233361;
            float binop_y_adj_233363 = branch_adj_232882 * binop_y_233362;
            float det_adj_233364 = binop_y_adj_233352 + binop_y_adj_233363;
            float binop_y_adj_233365 = -1.0F * binop_x_adj_233360;
            float binop_x_adj_233366 = defunc_0_f_res_232846 * binop_y_adj_233365;
            float binop_y_adj_233367 = defunc_0_f_res_232831 * binop_y_adj_233365;
            float defunc_0_f_res_adj_233368 = defunc_0_f_res_adj_233356 + binop_x_adj_233366;
            float defunc_0_f_res_adj_233369 = defunc_0_f_res_adj_233359 + binop_y_adj_233367;
            float binop_x_adj_233370 = defunc_0_f_res_232841 * binop_x_adj_233360;
            float binop_y_adj_233371 = defunc_0_f_res_232836 * binop_x_adj_233360;
            float defunc_0_f_res_adj_233372 = defunc_0_f_res_adj_233357 + binop_x_adj_233370;
            float defunc_0_f_res_adj_233373 = defunc_0_f_res_adj_233337 + binop_y_adj_233371;
            float binop_y_adj_233374 = -1.0F * det_adj_233364;
            float binop_x_adj_233375 = defunc_0_f_res_232831 * binop_y_adj_233374;
            float defunc_0_f_res_adj_233376 = defunc_0_f_res_adj_233368 + binop_x_adj_233375;
            float defunc_0_f_res_adj_233377 = binop_x_adj_233375 + defunc_0_f_res_adj_233376;
            float binop_y_adj_233378 = defunc_0_f_res_211819 * det_adj_233364;
            float defunc_0_f_res_adj_233379 = defunc_0_f_res_adj_233373 + binop_y_adj_233378;
            float binop_x_adj_233380 = defunc_0_f_res_232826 * defunc_0_f_res_adj_233369;
            float binop_y_adj_233381 = defunc_1_f_res_232823 * defunc_0_f_res_adj_233369;
            float defunc_1_f_res_adj_233382 = branch_adj_232878 + binop_x_adj_233380;
            float defunc_0_f_res_adj_233383 = branch_adj_232881 + binop_y_adj_233381;
            float binop_x_adj_233384 = defunc_0_f_res_232825 * defunc_0_f_res_adj_233369;
            float binop_y_adj_233385 = defunc_1_f_res_232822 * defunc_0_f_res_adj_233369;
            float defunc_1_f_res_adj_233386 = branch_adj_232877 + binop_x_adj_233384;
            float defunc_0_f_res_adj_233387 = branch_adj_232880 + binop_y_adj_233385;
            float binop_x_adj_233388 = defunc_0_f_res_232824 * defunc_0_f_res_adj_233369;
            float binop_y_adj_233389 = defunc_1_f_res_232821 * defunc_0_f_res_adj_233369;
            float defunc_1_f_res_adj_233390 = branch_adj_232876 + binop_x_adj_233388;
            float defunc_0_f_res_adj_233391 = branch_adj_232879 + binop_y_adj_233389;
            float binop_x_adj_233392 = defunc_1_f_res_232823 * defunc_0_f_res_adj_233379;
            float defunc_1_f_res_adj_233393 = defunc_1_f_res_adj_233382 + binop_x_adj_233392;
            float defunc_1_f_res_adj_233394 = binop_x_adj_233392 + defunc_1_f_res_adj_233393;
            float binop_x_adj_233395 = defunc_1_f_res_232822 * defunc_0_f_res_adj_233379;
            float defunc_1_f_res_adj_233396 = defunc_1_f_res_adj_233386 + binop_x_adj_233395;
            float defunc_1_f_res_adj_233397 = binop_x_adj_233395 + defunc_1_f_res_adj_233396;
            float binop_x_adj_233398 = defunc_1_f_res_232821 * defunc_0_f_res_adj_233379;
            float defunc_1_f_res_adj_233399 = defunc_1_f_res_adj_233390 + binop_x_adj_233398;
            float defunc_1_f_res_adj_233400 = binop_x_adj_233398 + defunc_1_f_res_adj_233399;
            float binop_y_adj_233401 = z30U_189280 * defunc_0_f_res_adj_233372;
            float defunc_0_f_res_adj_233402 = defunc_0_f_res_adj_233383 + binop_y_adj_233401;
            float binop_y_adj_233403 = z30U_189279 * defunc_0_f_res_adj_233372;
            float defunc_0_f_res_adj_233404 = defunc_0_f_res_adj_233387 + binop_y_adj_233403;
            float binop_y_adj_233405 = z30U_189278 * defunc_0_f_res_adj_233372;
            float defunc_0_f_res_adj_233406 = defunc_0_f_res_adj_233391 + binop_y_adj_233405;
            float binop_y_adj_233407 = z30U_189280 * defunc_0_f_res_adj_233377;
            float defunc_1_f_res_adj_233408 = defunc_1_f_res_adj_233394 + binop_y_adj_233407;
            float binop_y_adj_233409 = z30U_189279 * defunc_0_f_res_adj_233377;
            float defunc_1_f_res_adj_233410 = defunc_1_f_res_adj_233397 + binop_y_adj_233409;
            float binop_y_adj_233411 = z30U_189278 * defunc_0_f_res_adj_233377;
            float defunc_1_f_res_adj_233412 = defunc_1_f_res_adj_233400 + binop_y_adj_233411;
            float binop_y_adj_233413 = -1.0F * defunc_0_f_res_adj_233402;
            float binop_y_adj_233414 = -1.0F * defunc_0_f_res_adj_233404;
            float binop_y_adj_233415 = -1.0F * defunc_0_f_res_adj_233406;
            float binop_x_adj_233416 = qMult_res_232787 * defunc_1_f_res_adj_233408;
            float binop_y_adj_233417 = defunc_0_f_res_232781 * defunc_1_f_res_adj_233408;
            float binop_x_adj_233418 = qMult_res_232787 * defunc_1_f_res_adj_233410;
            float binop_y_adj_233419 = defunc_0_f_res_232780 * defunc_1_f_res_adj_233410;
            float qMult_res_adj_233420 = binop_y_adj_233417 + binop_y_adj_233419;
            float binop_x_adj_233421 = qMult_res_232787 * defunc_1_f_res_adj_233412;
            float binop_y_adj_233422 = defunc_0_f_res_232779 * defunc_1_f_res_adj_233412;
            float qMult_res_adj_233423 = qMult_res_adj_233420 + binop_y_adj_233422;
            float binop_x_adj_233424 = defunc_1_f_res_232802 * defunc_1_f_res_adj_233408;
            float binop_y_adj_233425 = qMult_res_215322 * defunc_1_f_res_adj_233408;
            float binop_x_adj_233426 = defunc_1_f_res_232801 * defunc_1_f_res_adj_233410;
            float binop_y_adj_233427 = qMult_res_215322 * defunc_1_f_res_adj_233410;
            float x_adj_233428 = binop_x_adj_233424 + binop_x_adj_233426;
            float binop_x_adj_233429 = defunc_1_f_res_232800 * defunc_1_f_res_adj_233412;
            float binop_y_adj_233430 = qMult_res_215322 * defunc_1_f_res_adj_233412;
            float x_adj_233431 = x_adj_233428 + binop_x_adj_233429;
            float binop_y_adj_233432 = -1.0F * defunc_1_f_res_adj_233408;
            float binop_x_adj_233433 = defunc_1_f_res_232801 * binop_y_adj_233432;
            float binop_y_adj_233434 = defunc_0_f_res_232779 * binop_y_adj_233432;
            float defunc_0_f_res_adj_233435 = binop_x_adj_233421 + binop_x_adj_233433;
            float defunc_1_f_res_adj_233436 = binop_y_adj_233427 + binop_y_adj_233434;
            float binop_x_adj_233437 = defunc_1_f_res_232800 * defunc_1_f_res_adj_233408;
            float binop_y_adj_233438 = defunc_0_f_res_232780 * defunc_1_f_res_adj_233408;
            float defunc_0_f_res_adj_233439 = binop_x_adj_233418 + binop_x_adj_233437;
            float defunc_1_f_res_adj_233440 = binop_y_adj_233430 + binop_y_adj_233438;
            float binop_y_adj_233441 = -1.0F * defunc_1_f_res_adj_233410;
            float binop_x_adj_233442 = defunc_1_f_res_232800 * binop_y_adj_233441;
            float binop_y_adj_233443 = defunc_0_f_res_232781 * binop_y_adj_233441;
            float defunc_0_f_res_adj_233444 = binop_x_adj_233416 + binop_x_adj_233442;
            float defunc_1_f_res_adj_233445 = defunc_1_f_res_adj_233440 + binop_y_adj_233443;
            float binop_x_adj_233446 = defunc_1_f_res_232802 * defunc_1_f_res_adj_233410;
            float binop_y_adj_233447 = defunc_0_f_res_232779 * defunc_1_f_res_adj_233410;
            float defunc_0_f_res_adj_233448 = defunc_0_f_res_adj_233435 + binop_x_adj_233446;
            float defunc_1_f_res_adj_233449 = binop_y_adj_233425 + binop_y_adj_233447;
            float binop_y_adj_233450 = -1.0F * defunc_1_f_res_adj_233412;
            float binop_x_adj_233451 = defunc_1_f_res_232802 * binop_y_adj_233450;
            float binop_y_adj_233452 = defunc_0_f_res_232780 * binop_y_adj_233450;
            float defunc_0_f_res_adj_233453 = defunc_0_f_res_adj_233439 + binop_x_adj_233451;
            float defunc_1_f_res_adj_233454 = defunc_1_f_res_adj_233449 + binop_y_adj_233452;
            float binop_x_adj_233455 = defunc_1_f_res_232801 * defunc_1_f_res_adj_233412;
            float binop_y_adj_233456 = defunc_0_f_res_232781 * defunc_1_f_res_adj_233412;
            float defunc_0_f_res_adj_233457 = defunc_0_f_res_adj_233444 + binop_x_adj_233455;
            float defunc_1_f_res_adj_233458 = defunc_1_f_res_adj_233436 + binop_y_adj_233456;
            float binop_x_adj_233459 = z30U_189283 * defunc_1_f_res_adj_233454;
            float x_adj_233460 = x_adj_233431 + binop_x_adj_233459;
            float binop_x_adj_233461 = z30U_189282 * defunc_1_f_res_adj_233458;
            float x_adj_233462 = x_adj_233460 + binop_x_adj_233461;
            float binop_x_adj_233463 = z30U_189281 * defunc_1_f_res_adj_233445;
            float x_adj_233464 = x_adj_233462 + binop_x_adj_233463;
            float binop_y_adj_233465 = -1.0F * defunc_1_f_res_adj_233454;
            float binop_x_adj_233466 = z30U_189281 * binop_y_adj_233465;
            float binop_x_adj_233467 = z30U_189282 * defunc_1_f_res_adj_233454;
            float binop_y_adj_233468 = -1.0F * defunc_1_f_res_adj_233458;
            float binop_x_adj_233469 = z30U_189283 * binop_y_adj_233468;
            float x_adj_233470 = binop_x_adj_233467 + binop_x_adj_233469;
            float binop_x_adj_233471 = z30U_189281 * defunc_1_f_res_adj_233458;
            float binop_y_adj_233472 = -1.0F * defunc_1_f_res_adj_233445;
            float binop_x_adj_233473 = z30U_189282 * binop_y_adj_233472;
            float x_adj_233474 = binop_x_adj_233471 + binop_x_adj_233473;
            float binop_x_adj_233475 = z30U_189283 * defunc_1_f_res_adj_233445;
            float x_adj_233476 = binop_x_adj_233466 + binop_x_adj_233475;
            float binop_y_adj_233477 = -1.0F * qMult_res_adj_233423;
            float binop_x_adj_233478 = z30U_189283 * binop_y_adj_233477;
            float x_adj_233479 = x_adj_233474 + binop_x_adj_233478;
            float binop_x_adj_233480 = z30U_189282 * binop_y_adj_233477;
            float x_adj_233481 = x_adj_233476 + binop_x_adj_233480;
            float binop_x_adj_233482 = z30U_189281 * binop_y_adj_233477;
            float x_adj_233483 = x_adj_233470 + binop_x_adj_233482;
            float binop_y_adj_233484 = -1.0F * defunc_0_f_res_adj_233457;
            float x_adj_233485 = x_adj_233479 + binop_y_adj_233484;
            float binop_y_adj_233486 = -1.0F * defunc_0_f_res_adj_233453;
            float x_adj_233487 = x_adj_233481 + binop_y_adj_233486;
            float binop_y_adj_233488 = -1.0F * defunc_0_f_res_adj_233448;
            float x_adj_233489 = x_adj_233483 + binop_y_adj_233488;
            
            branch_adj_224471 = binop_y_adj_233415;
            branch_adj_224472 = binop_y_adj_233414;
            branch_adj_224473 = binop_y_adj_233413;
            branch_adj_224474 = x_adj_233464;
            branch_adj_224475 = x_adj_233489;
            branch_adj_224476 = x_adj_233487;
            branch_adj_224477 = x_adj_233485;
        } else if (z30U_189277 == (int8_t) 2) {
            float defunc_1_f_res_232552 = defunc_1_f_res_215313 * defunc_1_f_res_215313;
            float defunc_1_f_res_232553 = defunc_1_f_res_215314 * defunc_1_f_res_215314;
            float defunc_1_f_res_232554 = defunc_1_f_res_215315 * defunc_1_f_res_215315;
            float defunc_1_f_res_232555 = defunc_1_f_res_232553 + defunc_1_f_res_232554;
            float defunc_0_f_res_232556 = defunc_1_f_res_232552 + defunc_1_f_res_232555;
            float binop_y_232557 = fpow32(defunc_0_f_res_232556, 0.5F);
            float binop_y_232558 = 2.0F * binop_y_232557;
            float binop_y_232559 = 1.0F / binop_y_232558;
            float contrib_232560 = binop_x_adj_221300 * binop_y_232559;
            float binop_x_adj_232561 = defunc_1_f_res_215315 * contrib_232560;
            float x_adj_232562 = binop_x_adj_232561 + binop_x_adj_232561;
            float binop_x_adj_232563 = defunc_1_f_res_215314 * contrib_232560;
            float x_adj_232564 = binop_x_adj_232563 + binop_x_adj_232563;
            float binop_x_adj_232565 = defunc_1_f_res_215313 * contrib_232560;
            float x_adj_232566 = binop_x_adj_232565 + binop_x_adj_232565;
            
            branch_adj_224471 = x_adj_232566;
            branch_adj_224472 = x_adj_232564;
            branch_adj_224473 = x_adj_232562;
            branch_adj_224474 = 0.0F;
            branch_adj_224475 = 0.0F;
            branch_adj_224476 = 0.0F;
            branch_adj_224477 = 0.0F;
        } else {
            branch_adj_224471 = 0.0F;
            branch_adj_224472 = 0.0F;
            branch_adj_224473 = 0.0F;
            branch_adj_224474 = 0.0F;
            branch_adj_224475 = 0.0F;
            branch_adj_224476 = 0.0F;
            branch_adj_224477 = 0.0F;
        }
        for (int64_t i_234037 = 0; i_234037 < dz2081U_189275; i_234037++) {
            float x_226428 = ((float *) mem_235850)[i_234037];
            float defunc_2_reduce_res_233490;
            float redout_234033 = 0.0F;
            
            for (int64_t i_234034 = 0; i_234034 < dz2081U_189275; i_234034++) {
                float x_226433 = ((float *) mem_235873)[i_234034];
                float x_226434 = ((float *) z31U_mem_234539.mem)[i_234034 * dz2081U_189275 + i_234037];
                float defunc_1_f_res_226435 = x_226433 * x_226434;
                float defunc_1_op_res_226432 = defunc_1_f_res_226435 + redout_234033;
                float redout_tmp_236117 = defunc_1_op_res_226432;
                
                redout_234033 = redout_tmp_236117;
            }
            defunc_2_reduce_res_233490 = redout_234033;
            
            float binop_x_226437 = futrts_tanh32(x_226428);
            float binop_y_226438 = binop_x_226437 * binop_x_226437;
            float binop_y_226439 = 1.0F - binop_y_226438;
            float contrib_226440 = binop_y_226439 * defunc_2_reduce_res_233490;
            
            ((float *) mem_235886)[i_234037] = contrib_226440;
        }
        for (int64_t i_234043 = 0; i_234043 < dz2081U_189275; i_234043++) {
            float x_226409 = ((float *) mem_235824)[i_234043];
            float defunc_2_reduce_res_233491;
            float redout_234039 = 0.0F;
            
            for (int64_t i_234040 = 0; i_234040 < dz2081U_189275; i_234040++) {
                float x_226414 = ((float *) mem_235886)[i_234040];
                float x_226415 = ((float *) z31U_mem_234537.mem)[i_234040 * dz2081U_189275 + i_234043];
                float defunc_1_f_res_226416 = x_226414 * x_226415;
                float defunc_1_op_res_226413 = defunc_1_f_res_226416 + redout_234039;
                float redout_tmp_236119 = defunc_1_op_res_226413;
                
                redout_234039 = redout_tmp_236119;
            }
            defunc_2_reduce_res_233491 = redout_234039;
            
            float arg_226418 = 0.0F - x_226409;
            float exp_arg_226419 = x_226409 * arg_226418;
            float binop_y_226420 = futrts_exp32(exp_arg_226419);
            float contrib_226421 = binop_y_226420 * defunc_2_reduce_res_233491;
            float binop_x_adj_226422 = arg_226418 * contrib_226421;
            float binop_y_adj_226423 = x_226409 * contrib_226421;
            float binop_y_adj_226424 = -1.0F * binop_y_adj_226423;
            float x_adj_226425 = binop_x_adj_226422 + binop_y_adj_226424;
            
            ((float *) mem_235899)[i_234043] = x_adj_226425;
        }
        
        float m33fromQuaternion_res_contrib_sum_233505;
        float m33fromQuaternion_res_contrib_sum_233506;
        float m33fromQuaternion_res_contrib_sum_233507;
        float m33fromQuaternion_res_contrib_sum_233508;
        float m33fromQuaternion_res_contrib_sum_233509;
        float m33fromQuaternion_res_contrib_sum_233510;
        float m33fromQuaternion_res_contrib_sum_233511;
        float m33fromQuaternion_res_contrib_sum_233512;
        float m33fromQuaternion_res_contrib_sum_233513;
        float x_contrib_sum_233514;
        float x_contrib_sum_233515;
        float x_contrib_sum_233516;
        float redout_234047;
        float redout_234048;
        float redout_234049;
        float redout_234050;
        float redout_234051;
        float redout_234052;
        float redout_234053;
        float redout_234054;
        float redout_234055;
        float redout_234056;
        float redout_234057;
        float redout_234058;
        
        redout_234047 = 0.0F;
        redout_234048 = 0.0F;
        redout_234049 = 0.0F;
        redout_234050 = 0.0F;
        redout_234051 = 0.0F;
        redout_234052 = 0.0F;
        redout_234053 = 0.0F;
        redout_234054 = 0.0F;
        redout_234055 = 0.0F;
        redout_234056 = 0.0F;
        redout_234057 = 0.0F;
        redout_234058 = 0.0F;
        for (int64_t i_234059 = 0; i_234059 < dz2080U_189274; i_234059++) {
            float x_226313 = ((float *) mem_235772)[i_234059];
            float x_226314 = ((float *) mem_235775)[i_234059];
            float x_226315 = ((float *) mem_235778)[i_234059];
            float x_226316 = ((float *) z31U_mem_234532.mem)[i_234059];
            float x_226317 = ((float *) z31U_mem_234533.mem)[i_234059];
            float x_226318 = ((float *) z31U_mem_234534.mem)[i_234059];
            float defunc_2_reduce_res_233492;
            float redout_234045 = 0.0F;
            
            for (int64_t i_234046 = 0; i_234046 < dz2081U_189275; i_234046++) {
                float x_226323 = ((float *) mem_235899)[i_234046];
                float x_226324 = ((float *) z31U_mem_234535.mem)[i_234046 * dz2080U_189274 + i_234059];
                float defunc_1_f_res_226325 = x_226323 * x_226324;
                float defunc_1_op_res_226322 = defunc_1_f_res_226325 + redout_234045;
                float redout_tmp_236132 = defunc_1_op_res_226322;
                
                redout_234045 = redout_tmp_236132;
            }
            defunc_2_reduce_res_233492 = redout_234045;
            
            float defunc_1_f_res_226327 = x_226313 * x_226313;
            float defunc_1_f_res_226328 = x_226314 * x_226314;
            float defunc_1_f_res_226329 = x_226315 * x_226315;
            float defunc_1_f_res_226330 = defunc_1_f_res_226328 + defunc_1_f_res_226329;
            float defunc_0_f_res_226331 = defunc_1_f_res_226327 + defunc_1_f_res_226330;
            bool cond_226332 = defunc_0_f_res_226331 == 0.0F;
            float branch_adj_226333;
            
            if (cond_226332 == 1) {
                branch_adj_226333 = 0.0F;
            } else {
                float binop_y_226334 = fpow32(defunc_0_f_res_226331, 0.5F);
                float binop_y_226335 = 2.0F * binop_y_226334;
                float binop_y_226336 = 1.0F / binop_y_226335;
                float contrib_226337 = binop_y_226336 * defunc_2_reduce_res_233492;
                
                branch_adj_226333 = contrib_226337;
            }
            
            float binop_x_adj_226338 = x_226315 * branch_adj_226333;
            float x_adj_226339 = binop_x_adj_226338 + binop_x_adj_226338;
            float binop_x_adj_226340 = x_226314 * branch_adj_226333;
            float x_adj_226341 = binop_x_adj_226340 + binop_x_adj_226340;
            float binop_x_adj_226342 = x_226313 * branch_adj_226333;
            float x_adj_226343 = binop_x_adj_226342 + binop_x_adj_226342;
            float binop_y_adj_226347 = x_226318 * x_adj_226339;
            float binop_y_adj_226348 = x_226317 * x_adj_226339;
            float binop_y_adj_226349 = x_226316 * x_adj_226339;
            float binop_y_adj_226350 = x_226318 * x_adj_226341;
            float binop_y_adj_226351 = x_226317 * x_adj_226341;
            float binop_y_adj_226352 = x_226316 * x_adj_226341;
            float binop_y_adj_226353 = x_226318 * x_adj_226343;
            float binop_y_adj_226354 = x_226317 * x_adj_226343;
            float binop_y_adj_226355 = x_226316 * x_adj_226343;
            float binlam_res_224742 = binop_y_adj_226347 + redout_234047;
            float binlam_res_224737 = binop_y_adj_226348 + redout_234048;
            float binlam_res_224732 = binop_y_adj_226349 + redout_234049;
            float binlam_res_224727 = binop_y_adj_226350 + redout_234050;
            float binlam_res_224722 = binop_y_adj_226351 + redout_234051;
            float binlam_res_224717 = binop_y_adj_226352 + redout_234052;
            float binlam_res_224712 = binop_y_adj_226353 + redout_234053;
            float binlam_res_224707 = binop_y_adj_226354 + redout_234054;
            float binlam_res_224702 = binop_y_adj_226355 + redout_234055;
            float binlam_res_224697 = x_adj_226339 + redout_234056;
            float binlam_res_224692 = x_adj_226341 + redout_234057;
            float binlam_res_224687 = x_adj_226343 + redout_234058;
            float redout_tmp_236120 = binlam_res_224742;
            float redout_tmp_236121 = binlam_res_224737;
            float redout_tmp_236122 = binlam_res_224732;
            float redout_tmp_236123 = binlam_res_224727;
            float redout_tmp_236124 = binlam_res_224722;
            float redout_tmp_236125 = binlam_res_224717;
            float redout_tmp_236126 = binlam_res_224712;
            float redout_tmp_236127 = binlam_res_224707;
            float redout_tmp_236128 = binlam_res_224702;
            float redout_tmp_236129 = binlam_res_224697;
            float redout_tmp_236130 = binlam_res_224692;
            float redout_tmp_236131 = binlam_res_224687;
            
            redout_234047 = redout_tmp_236120;
            redout_234048 = redout_tmp_236121;
            redout_234049 = redout_tmp_236122;
            redout_234050 = redout_tmp_236123;
            redout_234051 = redout_tmp_236124;
            redout_234052 = redout_tmp_236125;
            redout_234053 = redout_tmp_236126;
            redout_234054 = redout_tmp_236127;
            redout_234055 = redout_tmp_236128;
            redout_234056 = redout_tmp_236129;
            redout_234057 = redout_tmp_236130;
            redout_234058 = redout_tmp_236131;
        }
        m33fromQuaternion_res_contrib_sum_233505 = redout_234047;
        m33fromQuaternion_res_contrib_sum_233506 = redout_234048;
        m33fromQuaternion_res_contrib_sum_233507 = redout_234049;
        m33fromQuaternion_res_contrib_sum_233508 = redout_234050;
        m33fromQuaternion_res_contrib_sum_233509 = redout_234051;
        m33fromQuaternion_res_contrib_sum_233510 = redout_234052;
        m33fromQuaternion_res_contrib_sum_233511 = redout_234053;
        m33fromQuaternion_res_contrib_sum_233512 = redout_234054;
        m33fromQuaternion_res_contrib_sum_233513 = redout_234055;
        x_contrib_sum_233514 = redout_234056;
        x_contrib_sum_233515 = redout_234057;
        x_contrib_sum_233516 = redout_234058;
        
        float binop_y_adj_224748 = -1.0F * m33fromQuaternion_res_contrib_sum_233505;
        float binop_y_adj_224750 = 2.0F * m33fromQuaternion_res_contrib_sum_233506;
        float binop_y_adj_224754 = 2.0F * m33fromQuaternion_res_contrib_sum_233507;
        float binop_y_adj_224756 = -1.0F * binop_y_adj_224754;
        float binop_y_adj_224758 = 2.0F * m33fromQuaternion_res_contrib_sum_233508;
        float binop_y_adj_224760 = -1.0F * binop_y_adj_224758;
        float cd_adj_224761 = binop_y_adj_224750 + binop_y_adj_224758;
        float ab_adj_224762 = binop_y_adj_224750 + binop_y_adj_224760;
        float binop_y_adj_224764 = -1.0F * m33fromQuaternion_res_contrib_sum_233509;
        float dd_adj_224765 = binop_y_adj_224764 + m33fromQuaternion_res_contrib_sum_233505;
        float cc_adj_224768 = binop_y_adj_224748 + m33fromQuaternion_res_contrib_sum_233509;
        float arg_adj_224769 = m33fromQuaternion_res_contrib_sum_233505 + m33fromQuaternion_res_contrib_sum_233509;
        float binop_y_adj_224771 = -1.0F * arg_adj_224769;
        float binop_y_adj_224773 = 2.0F * m33fromQuaternion_res_contrib_sum_233510;
        float binop_y_adj_224777 = 2.0F * m33fromQuaternion_res_contrib_sum_233511;
        float ac_adj_224780 = binop_y_adj_224756 + binop_y_adj_224777;
        float bd_adj_224781 = binop_y_adj_224754 + binop_y_adj_224777;
        float binop_y_adj_224783 = 2.0F * m33fromQuaternion_res_contrib_sum_233512;
        float binop_y_adj_224785 = -1.0F * binop_y_adj_224783;
        float bc_adj_224786 = binop_y_adj_224773 + binop_y_adj_224783;
        float ad_adj_224787 = binop_y_adj_224773 + binop_y_adj_224785;
        float binop_y_adj_224789 = -1.0F * m33fromQuaternion_res_contrib_sum_233513;
        float dd_adj_224790 = dd_adj_224765 + binop_y_adj_224789;
        float cc_adj_224793 = cc_adj_224768 + binop_y_adj_224789;
        float aa_adj_224796 = arg_adj_224769 + m33fromQuaternion_res_contrib_sum_233513;
        float bb_adj_224797 = binop_y_adj_224771 + m33fromQuaternion_res_contrib_sum_233513;
        float binop_x_adj_224798 = defunc_1_f_res_215343 * dd_adj_224790;
        float x_adj_224800 = binop_x_adj_224798 + binop_x_adj_224798;
        float binop_x_adj_224801 = defunc_1_f_res_215343 * cd_adj_224761;
        float binop_y_adj_224802 = defunc_1_f_res_215342 * cd_adj_224761;
        float x_adj_224803 = x_adj_224800 + binop_y_adj_224802;
        float binop_x_adj_224804 = defunc_1_f_res_215342 * cc_adj_224793;
        float x_adj_224806 = binop_x_adj_224801 + binop_x_adj_224804;
        float x_adj_224807 = binop_x_adj_224804 + x_adj_224806;
        float binop_x_adj_224808 = defunc_1_f_res_215343 * bd_adj_224781;
        float binop_y_adj_224809 = defunc_1_f_res_215341 * bd_adj_224781;
        float x_adj_224810 = x_adj_224803 + binop_y_adj_224809;
        float binop_x_adj_224811 = defunc_1_f_res_215342 * bc_adj_224786;
        float binop_y_adj_224812 = defunc_1_f_res_215341 * bc_adj_224786;
        float x_adj_224813 = binop_x_adj_224808 + binop_x_adj_224811;
        float x_adj_224814 = x_adj_224807 + binop_y_adj_224812;
        float binop_x_adj_224815 = defunc_1_f_res_215341 * bb_adj_224797;
        float x_adj_224817 = x_adj_224813 + binop_x_adj_224815;
        float x_adj_224818 = binop_x_adj_224815 + x_adj_224817;
        float binop_x_adj_224819 = defunc_1_f_res_215343 * ad_adj_224787;
        float binop_y_adj_224820 = qMult_res_215322 * ad_adj_224787;
        float x_adj_224821 = x_adj_224810 + binop_y_adj_224820;
        float binop_x_adj_224822 = defunc_1_f_res_215342 * ac_adj_224780;
        float binop_y_adj_224823 = qMult_res_215322 * ac_adj_224780;
        float x_adj_224824 = binop_x_adj_224819 + binop_x_adj_224822;
        float x_adj_224825 = x_adj_224814 + binop_y_adj_224823;
        float binop_x_adj_224826 = defunc_1_f_res_215341 * ab_adj_224762;
        float binop_y_adj_224827 = qMult_res_215322 * ab_adj_224762;
        float x_adj_224828 = x_adj_224824 + binop_x_adj_224826;
        float x_adj_224829 = x_adj_224818 + binop_y_adj_224827;
        float binop_x_adj_224830 = qMult_res_215322 * aa_adj_224796;
        float x_adj_224832 = x_adj_224828 + binop_x_adj_224830;
        float x_adj_224833 = binop_x_adj_224830 + x_adj_224832;
        float x_adj_224848 = branch_adj_224471 + x_contrib_sum_233516;
        float x_adj_224849 = branch_adj_224472 + x_contrib_sum_233515;
        float x_adj_224850 = branch_adj_224473 + x_contrib_sum_233514;
        float x_adj_224851 = branch_adj_224474 + x_adj_224833;
        float x_adj_224852 = branch_adj_224475 + x_adj_224829;
        float x_adj_224853 = branch_adj_224476 + x_adj_224825;
        float x_adj_224854 = branch_adj_224477 + x_adj_224821;
        float torqueFromGradient_res_212082 = 0.0F - defunc_1_f_res_215341;
        float torqueFromGradient_res_212083 = 0.0F - defunc_1_f_res_215342;
        float torqueFromGradient_res_212084 = 0.0F - defunc_1_f_res_215343;
        float defunc_1_f_res_212088 = torqueFromGradient_res_212082 * x_adj_224851;
        float defunc_1_f_res_212089 = qMult_res_215322 * x_adj_224852;
        float defunc_1_f_res_212090 = torqueFromGradient_res_212084 * x_adj_224853;
        float defunc_1_f_res_212091 = defunc_1_f_res_215342 * x_adj_224854;
        float defunc_1_f_res_212092 = defunc_1_f_res_212090 + defunc_1_f_res_212091;
        float defunc_0_f_res_212093 = defunc_1_f_res_212089 + defunc_1_f_res_212092;
        float defunc_0_f_res_212094 = defunc_1_f_res_212088 + defunc_0_f_res_212093;
        float defunc_1_f_res_212095 = torqueFromGradient_res_212083 * x_adj_224851;
        float defunc_1_f_res_212096 = defunc_1_f_res_215343 * x_adj_224852;
        float defunc_1_f_res_212097 = qMult_res_215322 * x_adj_224853;
        float defunc_1_f_res_212098 = torqueFromGradient_res_212082 * x_adj_224854;
        float defunc_1_f_res_212099 = defunc_1_f_res_212097 + defunc_1_f_res_212098;
        float defunc_0_f_res_212100 = defunc_1_f_res_212096 + defunc_1_f_res_212099;
        float defunc_0_f_res_212101 = defunc_1_f_res_212095 + defunc_0_f_res_212100;
        float defunc_1_f_res_212102 = torqueFromGradient_res_212084 * x_adj_224851;
        float defunc_1_f_res_212103 = torqueFromGradient_res_212083 * x_adj_224852;
        float defunc_1_f_res_212104 = defunc_1_f_res_215341 * x_adj_224853;
        float defunc_1_f_res_212105 = qMult_res_215322 * x_adj_224854;
        float defunc_1_f_res_212106 = defunc_1_f_res_212104 + defunc_1_f_res_212105;
        float defunc_0_f_res_212107 = defunc_1_f_res_212103 + defunc_1_f_res_212106;
        float defunc_0_f_res_212108 = defunc_1_f_res_212102 + defunc_0_f_res_212107;
        float defunc_0_f_res_212109 = -0.5F * defunc_0_f_res_212094;
        float defunc_0_f_res_212110 = -0.5F * defunc_0_f_res_212101;
        float defunc_0_f_res_212111 = -0.5F * defunc_0_f_res_212108;
        float arg_212112 = defunc_1_f_res_215315 * x_adj_224849;
        float arg_212113 = defunc_1_f_res_215314 * x_adj_224850;
        float cross_res_212114 = arg_212112 - arg_212113;
        float arg_212115 = defunc_1_f_res_215313 * x_adj_224850;
        float arg_212116 = defunc_1_f_res_215315 * x_adj_224848;
        float cross_res_212117 = arg_212115 - arg_212116;
        float arg_212118 = defunc_1_f_res_215314 * x_adj_224848;
        float arg_212119 = defunc_1_f_res_215313 * x_adj_224849;
        float cross_res_212120 = arg_212118 - arg_212119;
        float defunc_1_f_res_212121 = defunc_0_f_res_212109 + cross_res_212114;
        float defunc_1_f_res_212122 = defunc_0_f_res_212110 + cross_res_212117;
        float defunc_1_f_res_212123 = defunc_0_f_res_212111 + cross_res_212120;
        float defunc_1_f_res_215367 = defunc_1_f_res_210729 * x_adj_224848;
        float defunc_1_f_res_215368 = defunc_1_f_res_210730 * x_adj_224849;
        float defunc_1_f_res_215369 = defunc_1_f_res_210731 * x_adj_224850;
        float defunc_1_f_res_215370 = defunc_1_f_res_215368 + defunc_1_f_res_215369;
        float defunc_0_f_res_215371 = defunc_1_f_res_215367 + defunc_1_f_res_215370;
        float qMult_res_215372 = 0.0F - defunc_0_f_res_215371;
        float arg_215373 = defunc_1_f_res_210730 * x_adj_224850;
        float arg_215374 = defunc_1_f_res_210731 * x_adj_224849;
        float cross_res_215375 = arg_215373 - arg_215374;
        float arg_215376 = defunc_1_f_res_210731 * x_adj_224848;
        float arg_215377 = defunc_1_f_res_210729 * x_adj_224850;
        float cross_res_215378 = arg_215376 - arg_215377;
        float arg_215379 = defunc_1_f_res_210729 * x_adj_224849;
        float arg_215380 = defunc_1_f_res_210730 * x_adj_224848;
        float cross_res_215381 = arg_215379 - arg_215380;
        float defunc_0_f_res_215382 = defunc_1_f_res_210728 * x_adj_224848;
        float defunc_0_f_res_215383 = defunc_1_f_res_210728 * x_adj_224849;
        float defunc_0_f_res_215384 = defunc_1_f_res_210728 * x_adj_224850;
        float defunc_1_f_res_215385 = cross_res_215375 + defunc_0_f_res_215382;
        float defunc_1_f_res_215386 = cross_res_215378 + defunc_0_f_res_215383;
        float defunc_1_f_res_215387 = cross_res_215381 + defunc_0_f_res_215384;
        float arg_215388 = defunc_0_f_res_215270 * defunc_1_f_res_215386;
        float arg_215389 = defunc_0_f_res_215269 * defunc_1_f_res_215387;
        float cross_res_215390 = arg_215388 - arg_215389;
        float arg_215391 = defunc_0_f_res_215268 * defunc_1_f_res_215387;
        float arg_215392 = defunc_0_f_res_215270 * defunc_1_f_res_215385;
        float cross_res_215393 = arg_215391 - arg_215392;
        float arg_215394 = defunc_0_f_res_215269 * defunc_1_f_res_215385;
        float arg_215395 = defunc_0_f_res_215268 * defunc_1_f_res_215386;
        float cross_res_215396 = arg_215394 - arg_215395;
        float defunc_0_f_res_215397 = defunc_1_f_res_210728 * defunc_1_f_res_215385;
        float defunc_0_f_res_215398 = defunc_1_f_res_210728 * defunc_1_f_res_215386;
        float defunc_0_f_res_215399 = defunc_1_f_res_210728 * defunc_1_f_res_215387;
        float defunc_0_f_res_215400 = defunc_0_f_res_215268 * qMult_res_215372;
        float defunc_0_f_res_215401 = defunc_0_f_res_215269 * qMult_res_215372;
        float defunc_0_f_res_215402 = defunc_0_f_res_215270 * qMult_res_215372;
        float defunc_1_f_res_215403 = defunc_0_f_res_215397 + defunc_0_f_res_215400;
        float defunc_1_f_res_215404 = defunc_0_f_res_215398 + defunc_0_f_res_215401;
        float defunc_1_f_res_215405 = defunc_0_f_res_215399 + defunc_0_f_res_215402;
        float defunc_1_f_res_215406 = cross_res_215390 + defunc_1_f_res_215403;
        float defunc_1_f_res_215407 = cross_res_215393 + defunc_1_f_res_215404;
        float defunc_1_f_res_215408 = cross_res_215396 + defunc_1_f_res_215405;
        float defunc_1_f_res_215412 = defunc_1_f_res_210729 * defunc_1_f_res_212121;
        float defunc_1_f_res_215413 = defunc_1_f_res_210730 * defunc_1_f_res_212122;
        float defunc_1_f_res_215414 = defunc_1_f_res_210731 * defunc_1_f_res_212123;
        float defunc_1_f_res_215415 = defunc_1_f_res_215413 + defunc_1_f_res_215414;
        float defunc_0_f_res_215416 = defunc_1_f_res_215412 + defunc_1_f_res_215415;
        float qMult_res_215417 = 0.0F - defunc_0_f_res_215416;
        float arg_215418 = defunc_1_f_res_210730 * defunc_1_f_res_212123;
        float arg_215419 = defunc_1_f_res_210731 * defunc_1_f_res_212122;
        float cross_res_215420 = arg_215418 - arg_215419;
        float arg_215421 = defunc_1_f_res_210731 * defunc_1_f_res_212121;
        float arg_215422 = defunc_1_f_res_210729 * defunc_1_f_res_212123;
        float cross_res_215423 = arg_215421 - arg_215422;
        float arg_215424 = defunc_1_f_res_210729 * defunc_1_f_res_212122;
        float arg_215425 = defunc_1_f_res_210730 * defunc_1_f_res_212121;
        float cross_res_215426 = arg_215424 - arg_215425;
        float defunc_0_f_res_215427 = defunc_1_f_res_210728 * defunc_1_f_res_212121;
        float defunc_0_f_res_215428 = defunc_1_f_res_210728 * defunc_1_f_res_212122;
        float defunc_0_f_res_215429 = defunc_1_f_res_210728 * defunc_1_f_res_212123;
        float defunc_1_f_res_215430 = cross_res_215420 + defunc_0_f_res_215427;
        float defunc_1_f_res_215431 = cross_res_215423 + defunc_0_f_res_215428;
        float defunc_1_f_res_215432 = cross_res_215426 + defunc_0_f_res_215429;
        float arg_215433 = defunc_0_f_res_215270 * defunc_1_f_res_215431;
        float arg_215434 = defunc_0_f_res_215269 * defunc_1_f_res_215432;
        float cross_res_215435 = arg_215433 - arg_215434;
        float arg_215436 = defunc_0_f_res_215268 * defunc_1_f_res_215432;
        float arg_215437 = defunc_0_f_res_215270 * defunc_1_f_res_215430;
        float cross_res_215438 = arg_215436 - arg_215437;
        float arg_215439 = defunc_0_f_res_215269 * defunc_1_f_res_215430;
        float arg_215440 = defunc_0_f_res_215268 * defunc_1_f_res_215431;
        float cross_res_215441 = arg_215439 - arg_215440;
        float defunc_0_f_res_215442 = defunc_1_f_res_210728 * defunc_1_f_res_215430;
        float defunc_0_f_res_215443 = defunc_1_f_res_210728 * defunc_1_f_res_215431;
        float defunc_0_f_res_215444 = defunc_1_f_res_210728 * defunc_1_f_res_215432;
        float defunc_0_f_res_215445 = defunc_0_f_res_215268 * qMult_res_215417;
        float defunc_0_f_res_215446 = defunc_0_f_res_215269 * qMult_res_215417;
        float defunc_0_f_res_215447 = defunc_0_f_res_215270 * qMult_res_215417;
        float defunc_1_f_res_215448 = defunc_0_f_res_215442 + defunc_0_f_res_215445;
        float defunc_1_f_res_215449 = defunc_0_f_res_215443 + defunc_0_f_res_215446;
        float defunc_1_f_res_215450 = defunc_0_f_res_215444 + defunc_0_f_res_215447;
        float defunc_1_f_res_215451 = cross_res_215435 + defunc_1_f_res_215448;
        float defunc_1_f_res_215452 = cross_res_215438 + defunc_1_f_res_215449;
        float defunc_1_f_res_215453 = cross_res_215441 + defunc_1_f_res_215450;
        float defunc_0_f_res_215454 = 0.0F - defunc_1_f_res_215406;
        float defunc_0_f_res_215455 = 0.0F - defunc_1_f_res_215407;
        float defunc_0_f_res_215456 = 0.0F - defunc_1_f_res_215408;
        float arg_215460 = defunc_1_f_res_215266 * defunc_1_f_res_215408;
        float arg_215461 = defunc_1_f_res_215267 * defunc_1_f_res_215407;
        float cross_res_215462 = arg_215460 - arg_215461;
        float arg_215463 = defunc_1_f_res_215267 * defunc_1_f_res_215406;
        float arg_215464 = defunc_1_f_res_215265 * defunc_1_f_res_215408;
        float cross_res_215465 = arg_215463 - arg_215464;
        float arg_215466 = defunc_1_f_res_215265 * defunc_1_f_res_215407;
        float arg_215467 = defunc_1_f_res_215266 * defunc_1_f_res_215406;
        float cross_res_215468 = arg_215466 - arg_215467;
        float defunc_1_f_res_215469 = cross_res_215462 - defunc_1_f_res_215451;
        float defunc_1_f_res_215470 = cross_res_215465 - defunc_1_f_res_215452;
        float defunc_1_f_res_215471 = cross_res_215468 - defunc_1_f_res_215453;
        
        // UpdateAcc
        {
            int64_t idx_210689 = i_210720;
            
            if (sle64((int64_t) 0, i_210720) && slt64(i_210720, nz2084U_189276)) {
                float x_210690;
                float x_210691;
                float x_210692;
                float x_210693;
                float x_210694;
                float x_210695;
                float x_210696;
                float x_210697;
                float x_210698;
                float x_210699;
                float x_210700;
                float x_210701;
                float x_210702;
                float x_210703;
                
                x_210690 = ((float *) mem_235748)[i_210720];
                x_210691 = ((float *) mem_235751)[i_210720];
                x_210692 = ((float *) mem_235754)[i_210720];
                x_210693 = ((float *) mem_235757)[i_210720];
                x_210694 = ((float *) mem_235760)[i_210720];
                x_210695 = ((float *) mem_235763)[i_210720];
                x_210696 = ((float *) mem_235766)[i_210720];
                x_210697 = defunc_1_f_res_215406;
                x_210698 = defunc_1_f_res_215407;
                x_210699 = defunc_1_f_res_215408;
                x_210700 = defunc_1_f_res_215451;
                x_210701 = defunc_1_f_res_215452;
                x_210702 = defunc_1_f_res_215453;
                x_210703 = 0.0F;
                
                float defunc_1_f_res_211887 = x_210690 + x_210697;
                float defunc_1_f_res_211888 = x_210691 + x_210698;
                float defunc_1_f_res_211889 = x_210692 + x_210699;
                float defunc_1_f_res_211890 = x_210693 + x_210700;
                float defunc_1_f_res_211891 = x_210694 + x_210701;
                float defunc_1_f_res_211892 = x_210695 + x_210702;
                float defunc_1_op_res_210710 = x_210696 + x_210703;
                
                ((float *) mem_235748)[i_210720] = defunc_1_f_res_211887;
                ((float *) mem_235751)[i_210720] = defunc_1_f_res_211888;
                ((float *) mem_235754)[i_210720] = defunc_1_f_res_211889;
                ((float *) mem_235757)[i_210720] = defunc_1_f_res_211890;
                ((float *) mem_235760)[i_210720] = defunc_1_f_res_211891;
                ((float *) mem_235763)[i_210720] = defunc_1_f_res_211892;
                ((float *) mem_235766)[i_210720] = defunc_1_op_res_210710;
            }
        }
        // UpdateAcc
        {
            int64_t idx_210689 = j_210750;
            
            if (sle64((int64_t) 0, j_210750) && slt64(j_210750, nz2084U_189276)) {
                float x_210690;
                float x_210691;
                float x_210692;
                float x_210693;
                float x_210694;
                float x_210695;
                float x_210696;
                float x_210697;
                float x_210698;
                float x_210699;
                float x_210700;
                float x_210701;
                float x_210702;
                float x_210703;
                
                x_210690 = ((float *) mem_235748)[j_210750];
                x_210691 = ((float *) mem_235751)[j_210750];
                x_210692 = ((float *) mem_235754)[j_210750];
                x_210693 = ((float *) mem_235757)[j_210750];
                x_210694 = ((float *) mem_235760)[j_210750];
                x_210695 = ((float *) mem_235763)[j_210750];
                x_210696 = ((float *) mem_235766)[j_210750];
                x_210697 = defunc_0_f_res_215454;
                x_210698 = defunc_0_f_res_215455;
                x_210699 = defunc_0_f_res_215456;
                x_210700 = defunc_1_f_res_215469;
                x_210701 = defunc_1_f_res_215470;
                x_210702 = defunc_1_f_res_215471;
                x_210703 = defunc_0_f_res_210916;
                
                float defunc_1_f_res_211887 = x_210690 + x_210697;
                float defunc_1_f_res_211888 = x_210691 + x_210698;
                float defunc_1_f_res_211889 = x_210692 + x_210699;
                float defunc_1_f_res_211890 = x_210693 + x_210700;
                float defunc_1_f_res_211891 = x_210694 + x_210701;
                float defunc_1_f_res_211892 = x_210695 + x_210702;
                float defunc_1_op_res_210710 = x_210696 + x_210703;
                
                ((float *) mem_235748)[j_210750] = defunc_1_f_res_211887;
                ((float *) mem_235751)[j_210750] = defunc_1_f_res_211888;
                ((float *) mem_235754)[j_210750] = defunc_1_f_res_211889;
                ((float *) mem_235757)[j_210750] = defunc_1_f_res_211890;
                ((float *) mem_235760)[j_210750] = defunc_1_f_res_211891;
                ((float *) mem_235763)[j_210750] = defunc_1_f_res_211892;
                ((float *) mem_235766)[j_210750] = defunc_1_op_res_210710;
            }
        }
    }
    if (mem_235914_cached_sizze_236291 < bytes_235913) {
        err = lexical_realloc(ctx, &mem_235914, &mem_235914_cached_sizze_236291, bytes_235913);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235927_cached_sizze_236292 < (int64_t) 12) {
        err = lexical_realloc(ctx, &mem_235927, &mem_235927_cached_sizze_236292, (int64_t) 12);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    if (mem_235929_cached_sizze_236293 < (int64_t) 12) {
        err = lexical_realloc(ctx, &mem_235929, &mem_235929_cached_sizze_236293, (int64_t) 12);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_234064 = 0; i_234064 < nz2084U_189276; i_234064++) {
        float x_211266 = ((float *) mem_235748)[i_234064];
        float x_211267 = ((float *) mem_235751)[i_234064];
        float x_211268 = ((float *) mem_235754)[i_234064];
        float x_211269 = ((float *) mem_235757)[i_234064];
        float x_211270 = ((float *) mem_235760)[i_234064];
        float x_211271 = ((float *) mem_235763)[i_234064];
        
        ((float *) mem_235927)[(int64_t) 0] = x_211266;
        ((float *) mem_235927)[(int64_t) 1] = x_211267;
        ((float *) mem_235927)[(int64_t) 2] = x_211268;
        ((float *) mem_235929)[(int64_t) 0] = x_211269;
        ((float *) mem_235929)[(int64_t) 1] = x_211270;
        ((float *) mem_235929)[(int64_t) 2] = x_211271;
        if ((int64_t) 12 > 0)
            memmove(mem_235914 + i_234064 * (int64_t) 6 * (int64_t) 4, mem_235927 + (int64_t) 0, (int64_t) 12);
        if ((int64_t) 12 > 0)
            memmove(mem_235914 + (i_234064 * (int64_t) 6 + (int64_t) 3) * (int64_t) 4, mem_235929 + (int64_t) 0, (int64_t) 12);
    }
    
    int64_t flat_dim_211275 = (int64_t) 2 * nz2084U_189276;
    
    if (memblock_alloc(ctx, &mem_235946, bytes_235913, "mem_235946")) {
        err = 1;
        goto cleanup;
    }
    if (flat_dim_211275 * (int64_t) 3 * (int64_t) 4 > 0)
        memmove(mem_235946.mem + (int64_t) 0, mem_235914 + (int64_t) 0, flat_dim_211275 * (int64_t) 3 * (int64_t) 4);
    if (memblock_set(ctx, &mem_out_235975, &mem_235946, "mem_235946") != 0)
        return 1;
    prim_out_235976 = flat_dim_211275;
    (*mem_out_p_236209).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_236209, &mem_out_235975, "mem_out_235975") != 0)
        return 1;
    *out_prim_out_236210 = prim_out_235976;
    
  cleanup:
    {
        free(mem_234546);
        free(mem_234549);
        free(mem_234552);
        free(mem_234555);
        free(mem_234558);
        free(mem_234561);
        free(mem_234564);
        free(mem_234640);
        free(mem_234643);
        free(mem_234646);
        free(mem_234690);
        free(mem_234713);
        free(mem_234718);
        free(mem_234767);
        free(mem_234770);
        free(mem_234793);
        free(mem_234796);
        free(mem_234799);
        free(mem_234832);
        free(mem_234835);
        free(mem_234838);
        free(mem_234884);
        free(mem_234887);
        free(mem_234910);
        free(mem_234959);
        free(mem_234972);
        free(mem_234985);
        free(mem_234988);
        free(mem_234991);
        free(mem_235026);
        free(mem_235039);
        free(mem_235070);
        free(mem_235073);
        free(mem_235096);
        free(mem_235145);
        free(mem_235148);
        free(mem_235171);
        free(mem_235220);
        free(mem_235223);
        free(mem_235246);
        free(mem_235260);
        free(mem_235284);
        free(mem_235315);
        free(mem_235319);
        free(mem_235323);
        free(mem_235327);
        free(mem_235331);
        free(mem_235517);
        free(mem_235520);
        free(mem_235543);
        free(mem_235592);
        free(mem_235595);
        free(mem_235598);
        free(mem_235601);
        free(mem_235604);
        free(mem_235657);
        free(mem_235660);
        free(mem_235683);
        free(mem_235686);
        free(mem_235689);
        free(mem_235692);
        free(mem_235695);
        free(mem_235748);
        free(mem_235751);
        free(mem_235754);
        free(mem_235757);
        free(mem_235760);
        free(mem_235763);
        free(mem_235766);
        free(mem_235769);
        free(mem_235772);
        free(mem_235775);
        free(mem_235778);
        free(mem_235821);
        free(mem_235824);
        free(mem_235847);
        free(mem_235850);
        free(mem_235873);
        free(mem_235886);
        free(mem_235899);
        free(mem_235914);
        free(mem_235927);
        free(mem_235929);
        if (memblock_unref(ctx, &mem_235946, "mem_235946") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235197, "mem_235197") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235184, "mem_235184") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_235212, "ext_mem_235212") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_235217, "ext_mem_235217") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235122, "mem_235122") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235109, "mem_235109") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_235137, "ext_mem_235137") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_235142, "ext_mem_235142") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235052, "mem_235052") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_235067, "ext_mem_235067") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_236046, "mem_param_tmp_236046") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_236045, "mem_param_tmp_236045") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_234926, "mem_234926") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_234923, "mem_234923") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_234881, "mem_param_234881") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_234876, "mem_param_234876") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_234955, "ext_mem_234955") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_234956, "ext_mem_234956") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_234871, "mem_234871") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235569, "mem_235569") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235556, "mem_235556") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_235584, "ext_mem_235584") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_235589, "ext_mem_235589") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_235023, "mem_235023") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_234637, "mem_234637") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_235975, "mem_out_235975") != 0)
            return 1;
    }
    return err;
}
static int futrts_entry_networkPotential(struct futhark_context *ctx, float *out_prim_out_236294, struct memblock z31U_mem_234529, struct memblock z31U_mem_234530, struct memblock z31U_mem_234531, struct memblock z31U_mem_234532, struct memblock z31U_mem_234533, struct memblock z31U_mem_234534, struct memblock z31U_mem_234535, struct memblock z31U_mem_234536, struct memblock z31U_mem_234537, struct memblock z31U_mem_234538, struct memblock z31U_mem_234539, struct memblock z31U_mem_234540, struct memblock z31U_mem_234541, struct memblock location_mem_234542, struct memblock orientation_mem_234543, int64_t dz2080U_146213, int64_t dz2081U_146214, int8_t z30U_146215, float z30U_146216, float z30U_146217, float z30U_146218, float z30U_146219, float z30U_146220, float z30U_146221, float z30U_146222, float z30U_146223, float z30U_146224, float z30U_146225, float z30U_146226, float z30U_146227, float z30U_146228, int32_t z30U_146229)
{
    (void) ctx;
    
    int err = 0;
    int64_t mem_234546_cached_sizze_236295 = 0;
    unsigned char *mem_234546 = NULL;
    int64_t mem_234559_cached_sizze_236296 = 0;
    unsigned char *mem_234559 = NULL;
    int64_t mem_234572_cached_sizze_236297 = 0;
    unsigned char *mem_234572 = NULL;
    float prim_out_235975;
    int64_t binop_y_234544 = (int64_t) 4 * dz2080U_146213;
    int64_t bytes_234545 = smax64((int64_t) 0, binop_y_234544);
    int64_t binop_y_234557 = (int64_t) 4 * dz2081U_146214;
    int64_t bytes_234558 = smax64((int64_t) 0, binop_y_234557);
    float fromLO_res_211298 = ((float *) location_mem_234542.mem)[(int64_t) 0];
    float fromLO_res_211299 = ((float *) location_mem_234542.mem)[(int64_t) 1];
    float fromLO_res_211300 = ((float *) location_mem_234542.mem)[(int64_t) 2];
    float quaternion_arg_211301 = ((float *) orientation_mem_234543.mem)[(int64_t) 1];
    float quaternion_arg_211302 = ((float *) orientation_mem_234543.mem)[(int64_t) 2];
    float quaternion_arg_211303 = ((float *) orientation_mem_234543.mem)[(int64_t) 3];
    float quaternion_arg_211304 = ((float *) orientation_mem_234543.mem)[(int64_t) 0];
    float distanceFunction_res_203826;
    
    if (z30U_146215 == (int8_t) 1) {
        float defunc_0_f_res_224943 = 0.0F - quaternion_arg_211301;
        float defunc_0_f_res_224944 = 0.0F - quaternion_arg_211302;
        float defunc_0_f_res_224945 = 0.0F - quaternion_arg_211303;
        float defunc_1_f_res_224946 = z30U_146219 * quaternion_arg_211301;
        float defunc_1_f_res_224947 = z30U_146220 * quaternion_arg_211302;
        float defunc_1_f_res_224948 = z30U_146221 * quaternion_arg_211303;
        float defunc_1_f_res_224949 = defunc_1_f_res_224947 + defunc_1_f_res_224948;
        float defunc_0_f_res_224950 = defunc_1_f_res_224946 + defunc_1_f_res_224949;
        float qMult_res_224951 = 0.0F - defunc_0_f_res_224950;
        float arg_224952 = z30U_146221 * quaternion_arg_211302;
        float arg_224953 = z30U_146220 * quaternion_arg_211303;
        float cross_res_224954 = arg_224952 - arg_224953;
        float arg_224955 = z30U_146219 * quaternion_arg_211303;
        float arg_224956 = z30U_146221 * quaternion_arg_211301;
        float cross_res_224957 = arg_224955 - arg_224956;
        float arg_224958 = z30U_146220 * quaternion_arg_211301;
        float arg_224959 = z30U_146219 * quaternion_arg_211302;
        float cross_res_224960 = arg_224958 - arg_224959;
        float defunc_0_f_res_224961 = z30U_146219 * quaternion_arg_211304;
        float defunc_0_f_res_224962 = z30U_146220 * quaternion_arg_211304;
        float defunc_0_f_res_224963 = z30U_146221 * quaternion_arg_211304;
        float defunc_1_f_res_224964 = cross_res_224954 + defunc_0_f_res_224961;
        float defunc_1_f_res_224965 = cross_res_224957 + defunc_0_f_res_224962;
        float defunc_1_f_res_224966 = cross_res_224960 + defunc_0_f_res_224963;
        float arg_224967 = defunc_0_f_res_224945 * defunc_1_f_res_224965;
        float arg_224968 = defunc_0_f_res_224944 * defunc_1_f_res_224966;
        float cross_res_224969 = arg_224967 - arg_224968;
        float arg_224970 = defunc_0_f_res_224943 * defunc_1_f_res_224966;
        float arg_224971 = defunc_0_f_res_224945 * defunc_1_f_res_224964;
        float cross_res_224972 = arg_224970 - arg_224971;
        float arg_224973 = defunc_0_f_res_224944 * defunc_1_f_res_224964;
        float arg_224974 = defunc_0_f_res_224943 * defunc_1_f_res_224965;
        float cross_res_224975 = arg_224973 - arg_224974;
        float defunc_0_f_res_224976 = quaternion_arg_211304 * defunc_1_f_res_224964;
        float defunc_0_f_res_224977 = quaternion_arg_211304 * defunc_1_f_res_224965;
        float defunc_0_f_res_224978 = quaternion_arg_211304 * defunc_1_f_res_224966;
        float defunc_0_f_res_224979 = defunc_0_f_res_224943 * qMult_res_224951;
        float defunc_0_f_res_224980 = defunc_0_f_res_224944 * qMult_res_224951;
        float defunc_0_f_res_224981 = defunc_0_f_res_224945 * qMult_res_224951;
        float defunc_1_f_res_224982 = defunc_0_f_res_224976 + defunc_0_f_res_224979;
        float defunc_1_f_res_224983 = defunc_0_f_res_224977 + defunc_0_f_res_224980;
        float defunc_1_f_res_224984 = defunc_0_f_res_224978 + defunc_0_f_res_224981;
        float defunc_1_f_res_224985 = cross_res_224969 + defunc_1_f_res_224982;
        float defunc_1_f_res_224986 = cross_res_224972 + defunc_1_f_res_224983;
        float defunc_1_f_res_224987 = cross_res_224975 + defunc_1_f_res_224984;
        float defunc_0_f_res_224988 = 0.0F - fromLO_res_211298;
        float defunc_0_f_res_224989 = 0.0F - fromLO_res_211299;
        float defunc_0_f_res_224990 = 0.0F - fromLO_res_211300;
        float defunc_1_f_res_224991 = z30U_146216 * z30U_146216;
        float defunc_1_f_res_224992 = z30U_146217 * z30U_146217;
        float defunc_1_f_res_224993 = z30U_146218 * z30U_146218;
        float defunc_1_f_res_224994 = defunc_1_f_res_224992 + defunc_1_f_res_224993;
        float defunc_0_f_res_224995 = defunc_1_f_res_224991 + defunc_1_f_res_224994;
        float defunc_1_f_res_224996 = z30U_146216 * defunc_1_f_res_224985;
        float defunc_1_f_res_224997 = z30U_146217 * defunc_1_f_res_224986;
        float defunc_1_f_res_224998 = z30U_146218 * defunc_1_f_res_224987;
        float defunc_1_f_res_224999 = defunc_1_f_res_224997 + defunc_1_f_res_224998;
        float defunc_0_f_res_225000 = defunc_1_f_res_224996 + defunc_1_f_res_224999;
        float defunc_1_f_res_225001 = z30U_146216 * defunc_0_f_res_224988;
        float defunc_1_f_res_225002 = z30U_146217 * defunc_0_f_res_224989;
        float defunc_1_f_res_225003 = z30U_146218 * defunc_0_f_res_224990;
        float defunc_1_f_res_225004 = defunc_1_f_res_225002 + defunc_1_f_res_225003;
        float defunc_0_f_res_225005 = defunc_1_f_res_225001 + defunc_1_f_res_225004;
        float defunc_1_f_res_225006 = defunc_1_f_res_224985 * defunc_1_f_res_224985;
        float defunc_1_f_res_225007 = defunc_1_f_res_224986 * defunc_1_f_res_224986;
        float defunc_1_f_res_225008 = defunc_1_f_res_224987 * defunc_1_f_res_224987;
        float defunc_1_f_res_225009 = defunc_1_f_res_225007 + defunc_1_f_res_225008;
        float defunc_0_f_res_225010 = defunc_1_f_res_225006 + defunc_1_f_res_225009;
        float defunc_1_f_res_225011 = defunc_1_f_res_224985 * defunc_0_f_res_224988;
        float defunc_1_f_res_225012 = defunc_1_f_res_224986 * defunc_0_f_res_224989;
        float defunc_1_f_res_225013 = defunc_1_f_res_224987 * defunc_0_f_res_224990;
        float defunc_1_f_res_225014 = defunc_1_f_res_225012 + defunc_1_f_res_225013;
        float defunc_0_f_res_225015 = defunc_1_f_res_225011 + defunc_1_f_res_225014;
        float arg_225016 = defunc_0_f_res_224995 * defunc_0_f_res_225010;
        float arg_225017 = defunc_0_f_res_225000 * defunc_0_f_res_225000;
        float det_225018 = arg_225016 - arg_225017;
        float arg_225019 = defunc_0_f_res_225005 * defunc_0_f_res_225010;
        float arg_225020 = defunc_0_f_res_225000 * defunc_0_f_res_225015;
        float arg_225021 = arg_225019 - arg_225020;
        float i_m_225022 = arg_225021 / det_225018;
        float arg_225023 = defunc_0_f_res_224995 * defunc_0_f_res_225015;
        float arg_225024 = defunc_0_f_res_225000 * defunc_0_f_res_225005;
        float arg_225025 = arg_225023 - arg_225024;
        float j_m_225026 = arg_225025 / det_225018;
        float arg_225027 = defunc_0_f_res_225005 - defunc_0_f_res_225000;
        float i_p_225028 = arg_225027 / defunc_0_f_res_224995;
        float arg_225029 = defunc_0_f_res_225000 + defunc_0_f_res_225005;
        float i_n_225030 = arg_225029 / defunc_0_f_res_224995;
        float arg_225031 = defunc_0_f_res_225015 - defunc_0_f_res_225000;
        float j_p_225032 = arg_225031 / defunc_0_f_res_225010;
        float arg_225033 = defunc_0_f_res_225000 + defunc_0_f_res_225015;
        float j_n_225034 = arg_225033 / defunc_0_f_res_225010;
        bool cond_225035 = det_225018 == 0.0F;
        bool cond_225036 = !cond_225035;
        bool cond_225037 = -1.0F <= i_m_225022;
        bool lifted_valid_res_t_res_225038 = i_m_225022 <= 1.0F;
        bool x_225039 = cond_225037 && lifted_valid_res_t_res_225038;
        bool x_225040 = cond_225036 && x_225039;
        bool cond_225041 = -1.0F <= j_m_225026;
        bool lifted_valid_res_t_res_225042 = j_m_225026 <= 1.0F;
        bool x_225043 = cond_225041 && lifted_valid_res_t_res_225042;
        bool x_225044 = x_225040 && x_225043;
        float rodDistance_res_225045;
        
        if (x_225044 == 1) {
            float defunc_0_f_res_225046 = defunc_1_f_res_224985 * j_m_225026;
            float defunc_0_f_res_225047 = defunc_1_f_res_224986 * j_m_225026;
            float defunc_0_f_res_225048 = defunc_1_f_res_224987 * j_m_225026;
            float defunc_0_f_res_225049 = z30U_146216 * i_m_225022;
            float defunc_0_f_res_225050 = z30U_146217 * i_m_225022;
            float defunc_0_f_res_225051 = z30U_146218 * i_m_225022;
            float defunc_1_f_res_225052 = defunc_0_f_res_225046 + defunc_0_f_res_225049;
            float defunc_1_f_res_225053 = defunc_0_f_res_225047 + defunc_0_f_res_225050;
            float defunc_1_f_res_225054 = defunc_0_f_res_225048 + defunc_0_f_res_225051;
            float defunc_1_f_res_225055 = defunc_1_f_res_225052 - defunc_0_f_res_224988;
            float defunc_1_f_res_225056 = defunc_1_f_res_225053 - defunc_0_f_res_224989;
            float defunc_1_f_res_225057 = defunc_1_f_res_225054 - defunc_0_f_res_224990;
            float defunc_1_f_res_225058 = defunc_1_f_res_225055 * defunc_1_f_res_225055;
            float defunc_1_f_res_225059 = defunc_1_f_res_225056 * defunc_1_f_res_225056;
            float defunc_1_f_res_225060 = defunc_1_f_res_225057 * defunc_1_f_res_225057;
            float defunc_1_f_res_225061 = defunc_1_f_res_225059 + defunc_1_f_res_225060;
            float defunc_0_f_res_225062 = defunc_1_f_res_225058 + defunc_1_f_res_225061;
            float sqrt_res_225063 = futrts_sqrt32(defunc_0_f_res_225062);
            
            rodDistance_res_225045 = sqrt_res_225063;
        } else {
            float defunc_0_f_res_225064 = -1.0F * defunc_1_f_res_224985;
            float defunc_0_f_res_225065 = -1.0F * defunc_1_f_res_224986;
            float defunc_0_f_res_225066 = -1.0F * defunc_1_f_res_224987;
            float defunc_0_f_res_225067 = -1.0F * z30U_146216;
            float defunc_0_f_res_225068 = -1.0F * z30U_146217;
            float defunc_0_f_res_225069 = -1.0F * z30U_146218;
            float defunc_1_f_res_225070 = defunc_0_f_res_225064 + defunc_0_f_res_225067;
            float defunc_1_f_res_225071 = defunc_0_f_res_225065 + defunc_0_f_res_225068;
            float defunc_1_f_res_225072 = defunc_0_f_res_225066 + defunc_0_f_res_225069;
            float defunc_1_f_res_225073 = defunc_1_f_res_225070 - defunc_0_f_res_224988;
            float defunc_1_f_res_225074 = defunc_1_f_res_225071 - defunc_0_f_res_224989;
            float defunc_1_f_res_225075 = defunc_1_f_res_225072 - defunc_0_f_res_224990;
            float defunc_1_f_res_225076 = defunc_1_f_res_225073 * defunc_1_f_res_225073;
            float defunc_1_f_res_225077 = defunc_1_f_res_225074 * defunc_1_f_res_225074;
            float defunc_1_f_res_225078 = defunc_1_f_res_225075 * defunc_1_f_res_225075;
            float defunc_1_f_res_225079 = defunc_1_f_res_225077 + defunc_1_f_res_225078;
            float defunc_0_f_res_225080 = defunc_1_f_res_225076 + defunc_1_f_res_225079;
            float defunc_1_f_res_225081 = defunc_1_f_res_224985 + defunc_0_f_res_225067;
            float defunc_1_f_res_225082 = defunc_1_f_res_224986 + defunc_0_f_res_225068;
            float defunc_1_f_res_225083 = defunc_1_f_res_224987 + defunc_0_f_res_225069;
            float defunc_1_f_res_225084 = defunc_1_f_res_225081 - defunc_0_f_res_224988;
            float defunc_1_f_res_225085 = defunc_1_f_res_225082 - defunc_0_f_res_224989;
            float defunc_1_f_res_225086 = defunc_1_f_res_225083 - defunc_0_f_res_224990;
            float defunc_1_f_res_225087 = defunc_1_f_res_225084 * defunc_1_f_res_225084;
            float defunc_1_f_res_225088 = defunc_1_f_res_225085 * defunc_1_f_res_225085;
            float defunc_1_f_res_225089 = defunc_1_f_res_225086 * defunc_1_f_res_225086;
            float defunc_1_f_res_225090 = defunc_1_f_res_225088 + defunc_1_f_res_225089;
            float defunc_0_f_res_225091 = defunc_1_f_res_225087 + defunc_1_f_res_225090;
            float defunc_1_f_res_225092 = z30U_146216 + defunc_0_f_res_225064;
            float defunc_1_f_res_225093 = z30U_146217 + defunc_0_f_res_225065;
            float defunc_1_f_res_225094 = z30U_146218 + defunc_0_f_res_225066;
            float defunc_1_f_res_225095 = defunc_1_f_res_225092 - defunc_0_f_res_224988;
            float defunc_1_f_res_225096 = defunc_1_f_res_225093 - defunc_0_f_res_224989;
            float defunc_1_f_res_225097 = defunc_1_f_res_225094 - defunc_0_f_res_224990;
            float defunc_1_f_res_225098 = defunc_1_f_res_225095 * defunc_1_f_res_225095;
            float defunc_1_f_res_225099 = defunc_1_f_res_225096 * defunc_1_f_res_225096;
            float defunc_1_f_res_225100 = defunc_1_f_res_225097 * defunc_1_f_res_225097;
            float defunc_1_f_res_225101 = defunc_1_f_res_225099 + defunc_1_f_res_225100;
            float defunc_0_f_res_225102 = defunc_1_f_res_225098 + defunc_1_f_res_225101;
            float defunc_1_f_res_225103 = z30U_146216 + defunc_1_f_res_224985;
            float defunc_1_f_res_225104 = z30U_146217 + defunc_1_f_res_224986;
            float defunc_1_f_res_225105 = z30U_146218 + defunc_1_f_res_224987;
            float defunc_1_f_res_225106 = defunc_1_f_res_225103 - defunc_0_f_res_224988;
            float defunc_1_f_res_225107 = defunc_1_f_res_225104 - defunc_0_f_res_224989;
            float defunc_1_f_res_225108 = defunc_1_f_res_225105 - defunc_0_f_res_224990;
            float defunc_1_f_res_225109 = defunc_1_f_res_225106 * defunc_1_f_res_225106;
            float defunc_1_f_res_225110 = defunc_1_f_res_225107 * defunc_1_f_res_225107;
            float defunc_1_f_res_225111 = defunc_1_f_res_225108 * defunc_1_f_res_225108;
            float defunc_1_f_res_225112 = defunc_1_f_res_225110 + defunc_1_f_res_225111;
            float defunc_0_f_res_225113 = defunc_1_f_res_225109 + defunc_1_f_res_225112;
            bool cond_225114 = -1.0F <= j_n_225034;
            bool lifted_valid_res_t_res_225115 = j_n_225034 <= 1.0F;
            bool x_225116 = cond_225114 && lifted_valid_res_t_res_225115;
            float min_arg_225117;
            
            if (x_225116 == 1) {
                float defunc_0_f_res_225118 = defunc_1_f_res_224985 * j_n_225034;
                float defunc_0_f_res_225119 = defunc_1_f_res_224986 * j_n_225034;
                float defunc_0_f_res_225120 = defunc_1_f_res_224987 * j_n_225034;
                float defunc_1_f_res_225121 = defunc_0_f_res_225067 + defunc_0_f_res_225118;
                float defunc_1_f_res_225122 = defunc_0_f_res_225068 + defunc_0_f_res_225119;
                float defunc_1_f_res_225123 = defunc_0_f_res_225069 + defunc_0_f_res_225120;
                float defunc_1_f_res_225124 = defunc_1_f_res_225121 - defunc_0_f_res_224988;
                float defunc_1_f_res_225125 = defunc_1_f_res_225122 - defunc_0_f_res_224989;
                float defunc_1_f_res_225126 = defunc_1_f_res_225123 - defunc_0_f_res_224990;
                float defunc_1_f_res_225127 = defunc_1_f_res_225124 * defunc_1_f_res_225124;
                float defunc_1_f_res_225128 = defunc_1_f_res_225125 * defunc_1_f_res_225125;
                float defunc_1_f_res_225129 = defunc_1_f_res_225126 * defunc_1_f_res_225126;
                float defunc_1_f_res_225130 = defunc_1_f_res_225128 + defunc_1_f_res_225129;
                float defunc_0_f_res_225131 = defunc_1_f_res_225127 + defunc_1_f_res_225130;
                
                min_arg_225117 = defunc_0_f_res_225131;
            } else {
                min_arg_225117 = INFINITY;
            }
            
            bool cond_225132 = -1.0F <= j_p_225032;
            bool lifted_valid_res_t_res_225133 = j_p_225032 <= 1.0F;
            bool x_225134 = cond_225132 && lifted_valid_res_t_res_225133;
            float min_arg_225135;
            
            if (x_225134 == 1) {
                float defunc_0_f_res_225136 = defunc_1_f_res_224985 * j_p_225032;
                float defunc_0_f_res_225137 = defunc_1_f_res_224986 * j_p_225032;
                float defunc_0_f_res_225138 = defunc_1_f_res_224987 * j_p_225032;
                float defunc_1_f_res_225139 = z30U_146216 + defunc_0_f_res_225136;
                float defunc_1_f_res_225140 = z30U_146217 + defunc_0_f_res_225137;
                float defunc_1_f_res_225141 = z30U_146218 + defunc_0_f_res_225138;
                float defunc_1_f_res_225142 = defunc_1_f_res_225139 - defunc_0_f_res_224988;
                float defunc_1_f_res_225143 = defunc_1_f_res_225140 - defunc_0_f_res_224989;
                float defunc_1_f_res_225144 = defunc_1_f_res_225141 - defunc_0_f_res_224990;
                float defunc_1_f_res_225145 = defunc_1_f_res_225142 * defunc_1_f_res_225142;
                float defunc_1_f_res_225146 = defunc_1_f_res_225143 * defunc_1_f_res_225143;
                float defunc_1_f_res_225147 = defunc_1_f_res_225144 * defunc_1_f_res_225144;
                float defunc_1_f_res_225148 = defunc_1_f_res_225146 + defunc_1_f_res_225147;
                float defunc_0_f_res_225149 = defunc_1_f_res_225145 + defunc_1_f_res_225148;
                
                min_arg_225135 = defunc_0_f_res_225149;
            } else {
                min_arg_225135 = INFINITY;
            }
            
            bool cond_225150 = -1.0F <= i_n_225030;
            bool lifted_valid_res_t_res_225151 = i_n_225030 <= 1.0F;
            bool x_225152 = cond_225150 && lifted_valid_res_t_res_225151;
            float min_arg_225153;
            
            if (x_225152 == 1) {
                float defunc_0_f_res_225154 = z30U_146216 * i_n_225030;
                float defunc_0_f_res_225155 = z30U_146217 * i_n_225030;
                float defunc_0_f_res_225156 = z30U_146218 * i_n_225030;
                float defunc_1_f_res_225157 = defunc_0_f_res_225064 + defunc_0_f_res_225154;
                float defunc_1_f_res_225158 = defunc_0_f_res_225065 + defunc_0_f_res_225155;
                float defunc_1_f_res_225159 = defunc_0_f_res_225066 + defunc_0_f_res_225156;
                float defunc_1_f_res_225160 = defunc_1_f_res_225157 - defunc_0_f_res_224988;
                float defunc_1_f_res_225161 = defunc_1_f_res_225158 - defunc_0_f_res_224989;
                float defunc_1_f_res_225162 = defunc_1_f_res_225159 - defunc_0_f_res_224990;
                float defunc_1_f_res_225163 = defunc_1_f_res_225160 * defunc_1_f_res_225160;
                float defunc_1_f_res_225164 = defunc_1_f_res_225161 * defunc_1_f_res_225161;
                float defunc_1_f_res_225165 = defunc_1_f_res_225162 * defunc_1_f_res_225162;
                float defunc_1_f_res_225166 = defunc_1_f_res_225164 + defunc_1_f_res_225165;
                float defunc_0_f_res_225167 = defunc_1_f_res_225163 + defunc_1_f_res_225166;
                
                min_arg_225153 = defunc_0_f_res_225167;
            } else {
                min_arg_225153 = INFINITY;
            }
            
            bool cond_225168 = -1.0F <= i_p_225028;
            bool lifted_valid_res_t_res_225169 = i_p_225028 <= 1.0F;
            bool x_225170 = cond_225168 && lifted_valid_res_t_res_225169;
            float min_arg_225171;
            
            if (x_225170 == 1) {
                float defunc_0_f_res_225172 = z30U_146216 * i_p_225028;
                float defunc_0_f_res_225173 = z30U_146217 * i_p_225028;
                float defunc_0_f_res_225174 = z30U_146218 * i_p_225028;
                float defunc_1_f_res_225175 = defunc_1_f_res_224985 + defunc_0_f_res_225172;
                float defunc_1_f_res_225176 = defunc_1_f_res_224986 + defunc_0_f_res_225173;
                float defunc_1_f_res_225177 = defunc_1_f_res_224987 + defunc_0_f_res_225174;
                float defunc_1_f_res_225178 = defunc_1_f_res_225175 - defunc_0_f_res_224988;
                float defunc_1_f_res_225179 = defunc_1_f_res_225176 - defunc_0_f_res_224989;
                float defunc_1_f_res_225180 = defunc_1_f_res_225177 - defunc_0_f_res_224990;
                float defunc_1_f_res_225181 = defunc_1_f_res_225178 * defunc_1_f_res_225178;
                float defunc_1_f_res_225182 = defunc_1_f_res_225179 * defunc_1_f_res_225179;
                float defunc_1_f_res_225183 = defunc_1_f_res_225180 * defunc_1_f_res_225180;
                float defunc_1_f_res_225184 = defunc_1_f_res_225182 + defunc_1_f_res_225183;
                float defunc_0_f_res_225185 = defunc_1_f_res_225181 + defunc_1_f_res_225184;
                
                min_arg_225171 = defunc_0_f_res_225185;
            } else {
                min_arg_225171 = INFINITY;
            }
            
            float min_res_225186 = fmin32(min_arg_225153, min_arg_225171);
            float min_res_225187 = fmin32(min_arg_225135, min_res_225186);
            float min_res_225188 = fmin32(min_arg_225117, min_res_225187);
            float min_res_225189 = fmin32(defunc_0_f_res_225113, min_res_225188);
            float min_res_225190 = fmin32(defunc_0_f_res_225102, min_res_225189);
            float min_res_225191 = fmin32(defunc_0_f_res_225091, min_res_225190);
            float min_res_225192 = fmin32(defunc_0_f_res_225080, min_res_225191);
            float sqrt_res_225193 = futrts_sqrt32(min_res_225192);
            
            rodDistance_res_225045 = sqrt_res_225193;
        }
        distanceFunction_res_203826 = rodDistance_res_225045;
    } else if (z30U_146215 == (int8_t) 2) {
        float defunc_1_f_res_224863 = fromLO_res_211298 * fromLO_res_211298;
        float defunc_1_f_res_224864 = fromLO_res_211299 * fromLO_res_211299;
        float defunc_1_f_res_224865 = fromLO_res_211300 * fromLO_res_211300;
        float defunc_1_f_res_224866 = defunc_1_f_res_224864 + defunc_1_f_res_224865;
        float defunc_0_f_res_224867 = defunc_1_f_res_224863 + defunc_1_f_res_224866;
        float sqrt_res_224868 = futrts_sqrt32(defunc_0_f_res_224867);
        
        distanceFunction_res_203826 = sqrt_res_224868;
    } else {
        bool hole_c_203891;
        
        if (!0) {
            set_error(ctx, msgprintf("Error: %s\n\nBacktrace:\n%s", "Reached hole of type: f32", "-> #0  potential.fut:141:59-61\n   #1  potential.fut:190:26-47\n   #2  potential.fut:434:57-81\n   #3  network.fut:25:28-32\n   #4  network.fut:152:24-42\n   #5  network.fut:110:23-40\n   #6  network.fut:140:23-41\n   #7  network.fut:109:23-40\n   #8  network.fut:128:23-41\n   #9  potential.fut:373:24-69\n   #10 futhark_interaction.fut:27:9-56\n   #11 futhark_interaction.fut:25:1-27:59\n"));
            err = FUTHARK_PROGRAM_ERROR;
            goto cleanup;
        }
        distanceFunction_res_203826 = 0.0F;
    }
    
    float softcut_arg_203892 = distanceFunction_res_203826 / z30U_146228;
    float i32_res_211337 = sitofp_i32_f32(z30U_146229);
    float abs_res_211338 = (float) fabs(softcut_arg_203892);
    bool cond_211339 = abs_res_211338 < 1.0F;
    float softcut_res_211340;
    
    if (cond_211339 == 1) {
        float arg_225194 = softcut_arg_203892 * softcut_arg_203892;
        float arg_225195 = arg_225194 - 1.0F;
        float arg_225196 = i32_res_211337 * arg_225195;
        float arg_225197 = arg_225196 - 1.0F;
        float arg_225198 = 2.0F * i32_res_211337;
        float arg_225199 = fpow32(softcut_arg_203892, arg_225198);
        float arg_225200 = arg_225197 * arg_225199;
        float softcut_res_t_res_225201 = 1.0F + arg_225200;
        
        softcut_res_211340 = softcut_res_t_res_225201;
    } else {
        softcut_res_211340 = 0.0F;
    }
    
    float aa_211353 = quaternion_arg_211304 * quaternion_arg_211304;
    float ab_211354 = quaternion_arg_211301 * quaternion_arg_211304;
    float ac_211355 = quaternion_arg_211302 * quaternion_arg_211304;
    float ad_211356 = quaternion_arg_211303 * quaternion_arg_211304;
    float bb_211357 = quaternion_arg_211301 * quaternion_arg_211301;
    float bc_211358 = quaternion_arg_211301 * quaternion_arg_211302;
    float bd_211359 = quaternion_arg_211301 * quaternion_arg_211303;
    float cc_211360 = quaternion_arg_211302 * quaternion_arg_211302;
    float cd_211361 = quaternion_arg_211302 * quaternion_arg_211303;
    float dd_211362 = quaternion_arg_211303 * quaternion_arg_211303;
    float arg_211363 = aa_211353 + bb_211357;
    float arg_211364 = arg_211363 - cc_211360;
    float m33fromQuaternion_res_211365 = arg_211364 - dd_211362;
    float arg_211366 = bc_211358 - ad_211356;
    float m33fromQuaternion_res_211367 = 2.0F * arg_211366;
    float arg_211368 = ac_211355 + bd_211359;
    float m33fromQuaternion_res_211369 = 2.0F * arg_211368;
    float arg_211370 = ad_211356 + bc_211358;
    float m33fromQuaternion_res_211371 = 2.0F * arg_211370;
    float arg_211372 = aa_211353 - bb_211357;
    float arg_211373 = cc_211360 + arg_211372;
    float m33fromQuaternion_res_211374 = arg_211373 - dd_211362;
    float arg_211375 = cd_211361 - ab_211354;
    float m33fromQuaternion_res_211376 = 2.0F * arg_211375;
    float arg_211377 = bd_211359 - ac_211355;
    float m33fromQuaternion_res_211378 = 2.0F * arg_211377;
    float arg_211379 = ab_211354 + cd_211361;
    float m33fromQuaternion_res_211380 = 2.0F * arg_211379;
    float arg_211382 = arg_211372 - cc_211360;
    float m33fromQuaternion_res_211383 = dd_211362 + arg_211382;
    
    if (mem_234546_cached_sizze_236295 < bytes_234545) {
        err = lexical_realloc(ctx, &mem_234546, &mem_234546_cached_sizze_236295, bytes_234545);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233589 = 0; i_233589 < dz2080U_146213; i_233589++) {
        float x_215565 = ((float *) z31U_mem_234529.mem)[i_233589];
        float x_215566 = ((float *) z31U_mem_234530.mem)[i_233589];
        float x_215567 = ((float *) z31U_mem_234531.mem)[i_233589];
        float x_215568 = ((float *) z31U_mem_234532.mem)[i_233589];
        float x_215569 = ((float *) z31U_mem_234533.mem)[i_233589];
        float x_215570 = ((float *) z31U_mem_234534.mem)[i_233589];
        float defunc_1_f_res_215571 = m33fromQuaternion_res_211365 * x_215568;
        float defunc_1_f_res_215572 = m33fromQuaternion_res_211367 * x_215569;
        float defunc_1_f_res_215573 = m33fromQuaternion_res_211369 * x_215570;
        float defunc_1_f_res_215574 = defunc_1_f_res_215572 + defunc_1_f_res_215573;
        float defunc_0_f_res_215575 = defunc_1_f_res_215571 + defunc_1_f_res_215574;
        float defunc_1_f_res_215576 = m33fromQuaternion_res_211371 * x_215568;
        float defunc_1_f_res_215577 = m33fromQuaternion_res_211374 * x_215569;
        float defunc_1_f_res_215578 = m33fromQuaternion_res_211376 * x_215570;
        float defunc_1_f_res_215579 = defunc_1_f_res_215577 + defunc_1_f_res_215578;
        float defunc_0_f_res_215580 = defunc_1_f_res_215576 + defunc_1_f_res_215579;
        float defunc_1_f_res_215581 = m33fromQuaternion_res_211378 * x_215568;
        float defunc_1_f_res_215582 = m33fromQuaternion_res_211380 * x_215569;
        float defunc_1_f_res_215583 = m33fromQuaternion_res_211383 * x_215570;
        float defunc_1_f_res_215584 = defunc_1_f_res_215582 + defunc_1_f_res_215583;
        float defunc_0_f_res_215585 = defunc_1_f_res_215581 + defunc_1_f_res_215584;
        float defunc_1_f_res_215586 = fromLO_res_211298 + defunc_0_f_res_215575;
        float defunc_1_f_res_215587 = fromLO_res_211299 + defunc_0_f_res_215580;
        float defunc_1_f_res_215588 = fromLO_res_211300 + defunc_0_f_res_215585;
        float defunc_1_f_res_215589 = defunc_1_f_res_215586 - x_215565;
        float defunc_1_f_res_215590 = defunc_1_f_res_215587 - x_215566;
        float defunc_1_f_res_215591 = defunc_1_f_res_215588 - x_215567;
        float defunc_1_f_res_215595 = defunc_1_f_res_215589 * defunc_1_f_res_215589;
        float defunc_1_f_res_215596 = defunc_1_f_res_215590 * defunc_1_f_res_215590;
        float defunc_1_f_res_215597 = defunc_1_f_res_215591 * defunc_1_f_res_215591;
        float defunc_1_f_res_215598 = defunc_1_f_res_215596 + defunc_1_f_res_215597;
        float defunc_0_f_res_215599 = defunc_1_f_res_215595 + defunc_1_f_res_215598;
        bool cond_215600 = defunc_0_f_res_215599 == 0.0F;
        float defunc_0_f_res_215601;
        
        if (cond_215600 == 1) {
            defunc_0_f_res_215601 = 0.0F;
        } else {
            float sqrt_res_215602 = futrts_sqrt32(defunc_0_f_res_215599);
            
            defunc_0_f_res_215601 = sqrt_res_215602;
        }
        ((float *) mem_234546)[i_233589] = defunc_0_f_res_215601;
    }
    if (mem_234559_cached_sizze_236296 < bytes_234558) {
        err = lexical_realloc(ctx, &mem_234559, &mem_234559_cached_sizze_236296, bytes_234558);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233595 = 0; i_233595 < dz2081U_146214; i_233595++) {
        float x_215546 = ((float *) z31U_mem_234536.mem)[i_233595];
        float defunc_2_reduce_res_225202;
        float redout_233591 = 0.0F;
        
        for (int64_t i_233592 = 0; i_233592 < dz2080U_146213; i_233592++) {
            float x_215943 = ((float *) mem_234546)[i_233592];
            float x_215944 = ((float *) z31U_mem_234535.mem)[i_233595 * dz2080U_146213 + i_233592];
            float defunc_1_f_res_215945 = x_215943 * x_215944;
            float defunc_1_op_res_215554 = defunc_1_f_res_215945 + redout_233591;
            float redout_tmp_235978 = defunc_1_op_res_215554;
            
            redout_233591 = redout_tmp_235978;
        }
        defunc_2_reduce_res_225202 = redout_233591;
        
        float defunc_1_f_res_215557 = x_215546 + defunc_2_reduce_res_225202;
        float arg_215559 = 0.0F - defunc_1_f_res_215557;
        float exp_arg_215560 = defunc_1_f_res_215557 * arg_215559;
        float exp_res_215561 = futrts_exp32(exp_arg_215560);
        
        ((float *) mem_234559)[i_233595] = exp_res_215561;
    }
    if (mem_234572_cached_sizze_236297 < bytes_234558) {
        err = lexical_realloc(ctx, &mem_234572, &mem_234572_cached_sizze_236297, bytes_234558);
        if (err != FUTHARK_SUCCESS)
            goto cleanup;
    }
    for (int64_t i_233601 = 0; i_233601 < dz2081U_146214; i_233601++) {
        float x_215522 = ((float *) z31U_mem_234538.mem)[i_233601];
        float defunc_2_reduce_res_225203;
        float redout_233597 = 0.0F;
        
        for (int64_t i_233598 = 0; i_233598 < dz2081U_146214; i_233598++) {
            float x_215949 = ((float *) mem_234559)[i_233598];
            float x_215950 = ((float *) z31U_mem_234537.mem)[i_233601 * dz2081U_146214 + i_233598];
            float defunc_1_f_res_215951 = x_215949 * x_215950;
            float defunc_1_op_res_215530 = defunc_1_f_res_215951 + redout_233597;
            float redout_tmp_235980 = defunc_1_op_res_215530;
            
            redout_233597 = redout_tmp_235980;
        }
        defunc_2_reduce_res_225203 = redout_233597;
        
        float defunc_1_f_res_215533 = x_215522 + defunc_2_reduce_res_225203;
        float defunc_0_f_res_215535 = futrts_tanh32(defunc_1_f_res_215533);
        
        ((float *) mem_234572)[i_233601] = defunc_0_f_res_215535;
    }
    
    float defunc_2_reduce_res_225208;
    float redout_233605 = 0.0F;
    
    for (int64_t i_233606 = 0; i_233606 < dz2081U_146214; i_233606++) {
        float x_215496 = ((float *) z31U_mem_234540.mem)[i_233606];
        float x_215497 = ((float *) z31U_mem_234541.mem)[i_233606];
        float defunc_2_reduce_res_225204;
        float redout_233603 = 0.0F;
        
        for (int64_t i_233604 = 0; i_233604 < dz2081U_146214; i_233604++) {
            float x_215955 = ((float *) mem_234572)[i_233604];
            float x_215956 = ((float *) z31U_mem_234539.mem)[i_233606 * dz2081U_146214 + i_233604];
            float defunc_1_f_res_215957 = x_215955 * x_215956;
            float defunc_1_op_res_215505 = defunc_1_f_res_215957 + redout_233603;
            float redout_tmp_235982 = defunc_1_op_res_215505;
            
            redout_233603 = redout_tmp_235982;
        }
        defunc_2_reduce_res_225204 = redout_233603;
        
        float defunc_1_f_res_215508 = x_215496 + defunc_2_reduce_res_225204;
        float defunc_0_f_res_215510 = futrts_tanh32(defunc_1_f_res_215508);
        float defunc_1_f_res_215512 = x_215497 * defunc_0_f_res_215510;
        float defunc_1_op_res_211452 = defunc_1_f_res_215512 + redout_233605;
        float redout_tmp_235981 = defunc_1_op_res_211452;
        
        redout_233605 = redout_tmp_235981;
    }
    defunc_2_reduce_res_225208 = redout_233605;
    
    float defunc_0_f_res_204022 = softcut_res_211340 * defunc_2_reduce_res_225208;
    
    prim_out_235975 = defunc_0_f_res_204022;
    *out_prim_out_236294 = prim_out_235975;
    
  cleanup:
    {
        free(mem_234546);
        free(mem_234559);
        free(mem_234572);
    }
    return err;
}

int futhark_entry_hgoInteraction(struct futhark_context *ctx, struct futhark_f32_2d **out0, const float in0, const float in1, const float in2, const struct futhark_f32_2d *in3, const struct futhark_f32_2d *in4)
{
    int64_t nz2085U_192338;
    float epsilon_192339;
    float sigma_par_192340;
    float sigma_ort_192341;
    int64_t prim_out_235976;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_235975;
    
    mem_out_235975.references = NULL;
    
    struct memblock orientations_mem_234530;
    
    orientations_mem_234530.references = NULL;
    
    struct memblock locations_mem_234529;
    
    locations_mem_234529.references = NULL;
    epsilon_192339 = in0;
    sigma_par_192340 = in1;
    sigma_ort_192341 = in2;
    locations_mem_234529 = in3->mem;
    nz2085U_192338 = in3->shape[0];
    orientations_mem_234530 = in4->mem;
    nz2085U_192338 = in4->shape[0];
    if (!((nz2085U_192338 == in3->shape[0] && (int64_t) 3 == in3->shape[1]) && (nz2085U_192338 == in4->shape[0] && (int64_t) 4 == in4->shape[1]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_hgoInteraction(ctx, &mem_out_235975, &prim_out_235976, locations_mem_234529, orientations_mem_234530, nz2085U_192338, epsilon_192339, sigma_par_192340, sigma_ort_192341);
        if (ret == 0) {
            assert((*out0 = (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) != NULL);
            (*out0)->mem = mem_out_235975;
            (*out0)->shape[0] = prim_out_235976;
            (*out0)->shape[1] = (int64_t) 3;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_hgoPotential(struct futhark_context *ctx, float *out0, const float in0, const float in1, const float in2, const struct futhark_f32_1d *in3, const struct futhark_f32_1d *in4)
{
    float epsilon_146344;
    float sigma_par_146345;
    float sigma_ort_146346;
    float prim_out_235975;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock orientation_mem_234530;
    
    orientation_mem_234530.references = NULL;
    
    struct memblock location_mem_234529;
    
    location_mem_234529.references = NULL;
    epsilon_146344 = in0;
    sigma_par_146345 = in1;
    sigma_ort_146346 = in2;
    location_mem_234529 = in3->mem;
    orientation_mem_234530 = in4->mem;
    if (!((int64_t) 3 == in3->shape[0] && (int64_t) 4 == in4->shape[0])) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_hgoPotential(ctx, &prim_out_235975, location_mem_234529, orientation_mem_234530, epsilon_146344, sigma_par_146345, sigma_ort_146346);
        if (ret == 0) {
            *out0 = prim_out_235975;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_networkInteraction(struct futhark_context *ctx, struct futhark_f32_2d **out0, const struct futhark_opaque_networkParameter *in0, const struct futhark_f32_2d *in1, const struct futhark_f32_2d *in2)
{
    int64_t dz2080U_189274;
    int64_t dz2081U_189275;
    int64_t nz2084U_189276;
    int8_t z30U_189277;
    float z30U_189278;
    float z30U_189279;
    float z30U_189280;
    float z30U_189281;
    float z30U_189282;
    float z30U_189283;
    float z30U_189284;
    float z30U_189285;
    float z30U_189286;
    float z30U_189287;
    float z30U_189288;
    float z30U_189289;
    float z30U_189290;
    int32_t z30U_189291;
    int64_t prim_out_235976;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock mem_out_235975;
    
    mem_out_235975.references = NULL;
    
    struct memblock orientations_mem_234543;
    
    orientations_mem_234543.references = NULL;
    
    struct memblock locations_mem_234542;
    
    locations_mem_234542.references = NULL;
    
    struct memblock z31U_mem_234541;
    
    z31U_mem_234541.references = NULL;
    
    struct memblock z31U_mem_234540;
    
    z31U_mem_234540.references = NULL;
    
    struct memblock z31U_mem_234539;
    
    z31U_mem_234539.references = NULL;
    
    struct memblock z31U_mem_234538;
    
    z31U_mem_234538.references = NULL;
    
    struct memblock z31U_mem_234537;
    
    z31U_mem_234537.references = NULL;
    
    struct memblock z31U_mem_234536;
    
    z31U_mem_234536.references = NULL;
    
    struct memblock z31U_mem_234535;
    
    z31U_mem_234535.references = NULL;
    
    struct memblock z31U_mem_234534;
    
    z31U_mem_234534.references = NULL;
    
    struct memblock z31U_mem_234533;
    
    z31U_mem_234533.references = NULL;
    
    struct memblock z31U_mem_234532;
    
    z31U_mem_234532.references = NULL;
    
    struct memblock z31U_mem_234531;
    
    z31U_mem_234531.references = NULL;
    
    struct memblock z31U_mem_234530;
    
    z31U_mem_234530.references = NULL;
    
    struct memblock z31U_mem_234529;
    
    z31U_mem_234529.references = NULL;
    z30U_189277 = in0->v0;
    z30U_189278 = in0->v1;
    z30U_189279 = in0->v2;
    z30U_189280 = in0->v3;
    z30U_189281 = in0->v4;
    z30U_189282 = in0->v5;
    z30U_189283 = in0->v6;
    z30U_189284 = in0->v7;
    z30U_189285 = in0->v8;
    z30U_189286 = in0->v9;
    z30U_189287 = in0->v10;
    z30U_189288 = in0->v11;
    z30U_189289 = in0->v12;
    z30U_189290 = in0->v13;
    z30U_189291 = in0->v14;
    z31U_mem_234529 = in0->v15->mem;
    dz2080U_189274 = in0->v15->shape[0];
    z31U_mem_234530 = in0->v16->mem;
    dz2080U_189274 = in0->v16->shape[0];
    z31U_mem_234531 = in0->v17->mem;
    dz2080U_189274 = in0->v17->shape[0];
    z31U_mem_234532 = in0->v18->mem;
    dz2080U_189274 = in0->v18->shape[0];
    z31U_mem_234533 = in0->v19->mem;
    dz2080U_189274 = in0->v19->shape[0];
    z31U_mem_234534 = in0->v20->mem;
    dz2080U_189274 = in0->v20->shape[0];
    z31U_mem_234535 = in0->v21->mem;
    dz2081U_189275 = in0->v21->shape[0];
    dz2080U_189274 = in0->v21->shape[1];
    z31U_mem_234536 = in0->v22->mem;
    dz2081U_189275 = in0->v22->shape[0];
    z31U_mem_234537 = in0->v23->mem;
    dz2081U_189275 = in0->v23->shape[0];
    dz2081U_189275 = in0->v23->shape[1];
    z31U_mem_234538 = in0->v24->mem;
    dz2081U_189275 = in0->v24->shape[0];
    z31U_mem_234539 = in0->v25->mem;
    dz2081U_189275 = in0->v25->shape[0];
    dz2081U_189275 = in0->v25->shape[1];
    z31U_mem_234540 = in0->v26->mem;
    dz2081U_189275 = in0->v26->shape[0];
    z31U_mem_234541 = in0->v27->mem;
    dz2081U_189275 = in0->v27->shape[0];
    locations_mem_234542 = in1->mem;
    nz2084U_189276 = in1->shape[0];
    orientations_mem_234543 = in2->mem;
    nz2084U_189276 = in2->shape[0];
    if (!((dz2080U_189274 == in0->v15->shape[0] && (dz2080U_189274 == in0->v16->shape[0] && (dz2080U_189274 == in0->v17->shape[0] && (dz2080U_189274 == in0->v18->shape[0] && (dz2080U_189274 == in0->v19->shape[0] && (dz2080U_189274 == in0->v20->shape[0] && (dz2081U_189275 == in0->v21->shape[0] && (dz2080U_189274 == in0->v21->shape[1] && (dz2081U_189275 == in0->v22->shape[0] && (dz2081U_189275 == in0->v23->shape[0] && (dz2081U_189275 == in0->v23->shape[1] && (dz2081U_189275 == in0->v24->shape[0] && (dz2081U_189275 == in0->v25->shape[0] && (dz2081U_189275 == in0->v25->shape[1] && (dz2081U_189275 == in0->v26->shape[0] && dz2081U_189275 == in0->v27->shape[0]))))))))))))))) && ((nz2084U_189276 == in1->shape[0] && (int64_t) 3 == in1->shape[1]) && (nz2084U_189276 == in2->shape[0] && (int64_t) 4 == in2->shape[1])))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_networkInteraction(ctx, &mem_out_235975, &prim_out_235976, z31U_mem_234529, z31U_mem_234530, z31U_mem_234531, z31U_mem_234532, z31U_mem_234533, z31U_mem_234534, z31U_mem_234535, z31U_mem_234536, z31U_mem_234537, z31U_mem_234538, z31U_mem_234539, z31U_mem_234540, z31U_mem_234541, locations_mem_234542, orientations_mem_234543, dz2080U_189274, dz2081U_189275, nz2084U_189276, z30U_189277, z30U_189278, z30U_189279, z30U_189280, z30U_189281, z30U_189282, z30U_189283, z30U_189284, z30U_189285, z30U_189286, z30U_189287, z30U_189288, z30U_189289, z30U_189290, z30U_189291);
        if (ret == 0) {
            assert((*out0 = (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) != NULL);
            (*out0)->mem = mem_out_235975;
            (*out0)->shape[0] = prim_out_235976;
            (*out0)->shape[1] = (int64_t) 3;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_networkPotential(struct futhark_context *ctx, float *out0, const struct futhark_opaque_networkParameter *in0, const struct futhark_f32_1d *in1, const struct futhark_f32_1d *in2)
{
    int64_t dz2080U_146213;
    int64_t dz2081U_146214;
    int8_t z30U_146215;
    float z30U_146216;
    float z30U_146217;
    float z30U_146218;
    float z30U_146219;
    float z30U_146220;
    float z30U_146221;
    float z30U_146222;
    float z30U_146223;
    float z30U_146224;
    float z30U_146225;
    float z30U_146226;
    float z30U_146227;
    float z30U_146228;
    int32_t z30U_146229;
    float prim_out_235975;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    
    struct memblock orientation_mem_234543;
    
    orientation_mem_234543.references = NULL;
    
    struct memblock location_mem_234542;
    
    location_mem_234542.references = NULL;
    
    struct memblock z31U_mem_234541;
    
    z31U_mem_234541.references = NULL;
    
    struct memblock z31U_mem_234540;
    
    z31U_mem_234540.references = NULL;
    
    struct memblock z31U_mem_234539;
    
    z31U_mem_234539.references = NULL;
    
    struct memblock z31U_mem_234538;
    
    z31U_mem_234538.references = NULL;
    
    struct memblock z31U_mem_234537;
    
    z31U_mem_234537.references = NULL;
    
    struct memblock z31U_mem_234536;
    
    z31U_mem_234536.references = NULL;
    
    struct memblock z31U_mem_234535;
    
    z31U_mem_234535.references = NULL;
    
    struct memblock z31U_mem_234534;
    
    z31U_mem_234534.references = NULL;
    
    struct memblock z31U_mem_234533;
    
    z31U_mem_234533.references = NULL;
    
    struct memblock z31U_mem_234532;
    
    z31U_mem_234532.references = NULL;
    
    struct memblock z31U_mem_234531;
    
    z31U_mem_234531.references = NULL;
    
    struct memblock z31U_mem_234530;
    
    z31U_mem_234530.references = NULL;
    
    struct memblock z31U_mem_234529;
    
    z31U_mem_234529.references = NULL;
    z30U_146215 = in0->v0;
    z30U_146216 = in0->v1;
    z30U_146217 = in0->v2;
    z30U_146218 = in0->v3;
    z30U_146219 = in0->v4;
    z30U_146220 = in0->v5;
    z30U_146221 = in0->v6;
    z30U_146222 = in0->v7;
    z30U_146223 = in0->v8;
    z30U_146224 = in0->v9;
    z30U_146225 = in0->v10;
    z30U_146226 = in0->v11;
    z30U_146227 = in0->v12;
    z30U_146228 = in0->v13;
    z30U_146229 = in0->v14;
    z31U_mem_234529 = in0->v15->mem;
    dz2080U_146213 = in0->v15->shape[0];
    z31U_mem_234530 = in0->v16->mem;
    dz2080U_146213 = in0->v16->shape[0];
    z31U_mem_234531 = in0->v17->mem;
    dz2080U_146213 = in0->v17->shape[0];
    z31U_mem_234532 = in0->v18->mem;
    dz2080U_146213 = in0->v18->shape[0];
    z31U_mem_234533 = in0->v19->mem;
    dz2080U_146213 = in0->v19->shape[0];
    z31U_mem_234534 = in0->v20->mem;
    dz2080U_146213 = in0->v20->shape[0];
    z31U_mem_234535 = in0->v21->mem;
    dz2081U_146214 = in0->v21->shape[0];
    dz2080U_146213 = in0->v21->shape[1];
    z31U_mem_234536 = in0->v22->mem;
    dz2081U_146214 = in0->v22->shape[0];
    z31U_mem_234537 = in0->v23->mem;
    dz2081U_146214 = in0->v23->shape[0];
    dz2081U_146214 = in0->v23->shape[1];
    z31U_mem_234538 = in0->v24->mem;
    dz2081U_146214 = in0->v24->shape[0];
    z31U_mem_234539 = in0->v25->mem;
    dz2081U_146214 = in0->v25->shape[0];
    dz2081U_146214 = in0->v25->shape[1];
    z31U_mem_234540 = in0->v26->mem;
    dz2081U_146214 = in0->v26->shape[0];
    z31U_mem_234541 = in0->v27->mem;
    dz2081U_146214 = in0->v27->shape[0];
    location_mem_234542 = in1->mem;
    orientation_mem_234543 = in2->mem;
    if (!((dz2080U_146213 == in0->v15->shape[0] && (dz2080U_146213 == in0->v16->shape[0] && (dz2080U_146213 == in0->v17->shape[0] && (dz2080U_146213 == in0->v18->shape[0] && (dz2080U_146213 == in0->v19->shape[0] && (dz2080U_146213 == in0->v20->shape[0] && (dz2081U_146214 == in0->v21->shape[0] && (dz2080U_146213 == in0->v21->shape[1] && (dz2081U_146214 == in0->v22->shape[0] && (dz2081U_146214 == in0->v23->shape[0] && (dz2081U_146214 == in0->v23->shape[1] && (dz2081U_146214 == in0->v24->shape[0] && (dz2081U_146214 == in0->v25->shape[0] && (dz2081U_146214 == in0->v25->shape[1] && (dz2081U_146214 == in0->v26->shape[0] && dz2081U_146214 == in0->v27->shape[0]))))))))))))))) && ((int64_t) 3 == in1->shape[0] && (int64_t) 4 == in2->shape[0]))) {
        ret = 1;
        set_error(ctx, msgprintf("Error: entry point arguments have invalid sizes.\n"));
    }
    if (ret == 0) {
        ret = futrts_entry_networkPotential(ctx, &prim_out_235975, z31U_mem_234529, z31U_mem_234530, z31U_mem_234531, z31U_mem_234532, z31U_mem_234533, z31U_mem_234534, z31U_mem_234535, z31U_mem_234536, z31U_mem_234537, z31U_mem_234538, z31U_mem_234539, z31U_mem_234540, z31U_mem_234541, location_mem_234542, orientation_mem_234543, dz2080U_146213, dz2081U_146214, z30U_146215, z30U_146216, z30U_146217, z30U_146218, z30U_146219, z30U_146220, z30U_146221, z30U_146222, z30U_146223, z30U_146224, z30U_146225, z30U_146226, z30U_146227, z30U_146228, z30U_146229);
        if (ret == 0) {
            *out0 = prim_out_235975;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
  
